{{ define "users/passkey_login.html" }}

<!-- Show the header unless query string says modal=true -->
{{ if not .showAsModal }}
  {{ template "shared/_header.html" .}}
{{ end }}

<div class="modal-detail">
  <div id="modalTitle" id="modalTitle" class="modal-title-row is-flex is-justify-content-space-between is-align-items-center">
    <h2>Passkey Login</h2>
    <a class="modal-exit is-grey-dark" href="#">
      <span class="material-icons" aria-hidden="true">close</span>
      <span class="is-sr-only">Close</span>
    </a>
  </div>

  <div class="modal-content">
    <p class="mb-5">Click below to log in with existing passkey.</p>

    <form name="passkeyLogin" method="post" action="/users/begin_passkey_login">
      <input class="button" type="submit" value="Sign in With Passkey">
    </form>
  </div>
</div>

<script>
  async function registerPasskey() {
    assertionResponse = await SimpleWebAuthnBrowser.startAuthentication(options.publicKey)
  }
</script>

<script src="https://unpkg.com/@simplewebauthn/browser/dist/bundle/index.umd.min.js"></script>

<!-- Show the footer unless query string says modal=true -->
{{ if not .showAsModal }}
  {{ template "shared/_footer.html" .}}
{{ end }}


{{ end }}
