{{ define "reports/deposits.html" }}

{{ template "shared/_header.html" .}}

<div class="box">
  <div class="box-header">
    <h1 class="h2">Deposits</h1>
  </div>

  <div class="box-content">

    {{ template "reports/_deposit_chart.html" . }}

    {{ template "reports/_deposit_filters.html" . }}

  </div>

  <table class="table is-fullwidth has-padding is-striped">
    <thead>
      <tr>
        <!-- Note: Due to the structure of report data, these columns cannot be sorted. -->
        <th class="pl-5">Institution</th>
        <th>Storage Option</th>
        <th>Object Count</th>
        <th>File Count</th>
        <th>Total GB</th>
        <th>Total TB</th>
        <th>Monthly Cost</th>
      </tr>
    </thead>
    <tbody>
      {{ $isSingleInstitutionReport := .isSingleInstitutionReport }}
      {{ range $index, $item := .deposits }}
      {{ if and $isSingleInstitutionReport (eq $item.InstitutionName "Total") }}
      <!-- Don't bother printing Totals if we're reporting on a single institution. -->
      {{ else }}
      <tr>
        <td class="pl-5">{{ $item.InstitutionName }}</td>
        <td class="is-grey-dark">{{ $item.StorageOption }}</td>
        <td class="is-grey-dark num text-sm">{{ formatInt64 $item.ObjectCount }}</td>
        <td class="is-grey-dark num text-sm">{{ formatInt64 $item.FileCount }}</td>
        <td class="is-grey-dark num text-sm">{{ formatFloat $item.TotalGB 3 }}</td>
        <td class="is-grey-dark num text-sm">{{ formatFloat $item.TotalTB 3 }}</td>
        <td class="is-grey-dark num text-sm">${{ formatFloat $item.MonthlyCost 2 }}</td>
      </tr>
      {{ end }}
      {{ end }}
    </tbody>
  </table>
</div>
{{ template "shared/_footer.html" .}}

{{ end }}