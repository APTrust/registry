{{ define "reports/_deposit_chart.html" }}

<!-- Chart -->
<div class="row">
  <canvas id="depositChart" style="height: 400px;"></canvas>
</div>

<script>
 const depositData = {{ toJSON .deposits }};
 const data = {
     labels: [
         {{- range $index, $label := .chartLabels -}}
         "{{ $label }}",
         {{- end -}}
     ],
     datasets: [{
         label: 'Deposits as of {{ dateUS .reportParams.UpdatedBefore }}',
         data: [65, 59, 80, 81, 56, 55, 40],
         backgroundColor: [
             {{- range $index, $label := .chartLabels -}}
             "{{ chartColor $index }}",
             {{- end -}}
         ],
         borderColor: [
             {{- range $index, $label := .chartLabels -}}
             "{{ chartBorderColor $index }}",
             {{- end -}}
         ],
         borderWidth: 1
     }]
 };

 function initChart(elementId, label) {
     let ctx = document.getElementById(elementId);
     let copyOfData = JSON.parse(JSON.stringify(data))
     copyOfData.datasets[0].label = label
     return new Chart(ctx, { type: 'bar', data: copyOfData })
 }

 window.addEventListener('load', (event) => {
     initChart("depositChart", "Deposits")
 });

</script>

{{ end }}
