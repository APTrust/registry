{"level":"info","time":"2022-06-22T13:30:43-04:00","message":"Email service is disabled. Alerts will be written to the log file."}
{"level":"info","time":"2022-06-22T13:30:43-04:00","message":"Two-factor SMS is disabled. OTP codes will be written to the log file."}
{"level":"info","time":"2022-06-22T13:30:43-04:00","message":"Initializing cron jobs"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"info","time":"2022-06-22T13:30:43-04:00","message":"cron: starting update_counts() to refresh views"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: select update_counts()"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"ar_internal_metadata\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"confirmation_tokens\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"emails_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"emails_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"emails_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"emails_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"old_passwords\" cascade"}
{"level":"info","time":"2022-06-22T13:30:43-04:00","message":"cron: update_counts completed after 0.061341 seconds"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"schema_migrations\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"snapshots\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"usage_samples\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"alerts_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"alerts_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"alerts_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"alerts\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"deletion_requests\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"storage_records\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"checksums\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"roles_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"roles\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: drop table if exists \"storage_options\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:43-04:00","message":"Starting SQL: --\n-- schema.sql\n--\n-- This file represents the full registry schema.\n--\n-- The migrations.sql file updates the old Pharos schema, as it existed\n-- in the feature/storage_record branch, so that it matches this schema.\n--\n-- https://github.com/APTrust/pharos/blob/feature/storage-record/db/schema.rb\n--\n\n\n-- public.ar_internal_metadata definition\n--\n-- This is a legacy table used by ActiveRecord.\n-- We can drop this once production is stable.\n--\nCREATE TABLE public.ar_internal_metadata (\n\t\"key\" varchar NOT NULL,\n\tvalue varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT ar_internal_metadata_pkey PRIMARY KEY (key)\n);\n\n\n-- public.bulk_delete_jobs definition\n--\n-- This is the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs (\n\tid bigserial NOT NULL,\n\trequested_by varchar NULL,\n\tinstitutional_approver varchar NULL,\n\taptrust_approver varchar NULL,\n\tinstitutional_approval_at timestamp NULL,\n\taptrust_approval_at timestamp NULL,\n\tnote text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id int4 NOT NULL,\n\tCONSTRAINT bulk_delete_jobs_pkey PRIMARY KEY (id)\n);\n\n\n-- public.bulk_delete_jobs_emails definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_emails (\n\tbulk_delete_job_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_emails_on_bulk_delete_job_id ON public.bulk_delete_jobs_emails USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_emails_on_email_id ON public.bulk_delete_jobs_emails USING btree (email_id);\n\n\n-- public.bulk_delete_jobs_generic_files definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_generic_files (\n\tbulk_delete_job_id int8 NULL,\n\tgeneric_file_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_bulk_delete_job_id ON public.bulk_delete_jobs_generic_files USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_generic_file_id ON public.bulk_delete_jobs_generic_files USING btree (generic_file_id);\n\n\n-- public.bulk_delete_jobs_institutions definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_institutions (\n\tbulk_delete_job_id int8 NULL,\n\tinstitution_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_bulk_delete_job_id ON public.bulk_delete_jobs_institutions USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_institution_id ON public.bulk_delete_jobs_institutions USING btree (institution_id);\n\n\n-- public.bulk_delete_jobs_intellectual_objects definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_intellectual_objects (\n\tbulk_delete_job_id int8 NULL,\n\tintellectual_object_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_bulk_job_id ON public.bulk_delete_jobs_intellectual_objects USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_object_id ON public.bulk_delete_jobs_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.confirmation_tokens definition\n--\n-- This is a legacy table. We can likely delete it\n-- after production is stable.\n--\nCREATE TABLE public.confirmation_tokens (\n\tid bigserial NOT NULL,\n\t\"token\" varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tuser_id int4 NULL,\n\tCONSTRAINT confirmation_tokens_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails definition\n--\n-- This legacy table will be replaced by the new alerts table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails (\n\tid bigserial NOT NULL,\n\temail_type varchar NULL,\n\tevent_identifier varchar NULL,\n\titem_id int4 NULL,\n\temail_text text NULL,\n\tuser_list text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tCONSTRAINT emails_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails_generic_files definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_generic_files (\n\tgeneric_file_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_generic_files_on_email_id ON public.emails_generic_files USING btree (email_id);\nCREATE INDEX index_emails_generic_files_on_generic_file_id ON public.emails_generic_files USING btree (generic_file_id);\n\n\n-- public.emails_intellectual_objects definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_intellectual_objects (\n\tintellectual_object_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_intellectual_objects_on_email_id ON public.emails_intellectual_objects USING btree (email_id);\nCREATE INDEX index_emails_intellectual_objects_on_intellectual_object_id ON public.emails_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.emails_premis_events definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_premis_events (\n\tpremis_event_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_premis_events_on_email_id ON public.emails_premis_events USING btree (email_id);\nCREATE INDEX index_emails_premis_events_on_premis_event_id ON public.emails_premis_events USING btree (premis_event_id);\n\n\n-- public.emails_work_items definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_work_items (\n\twork_item_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_work_items_on_email_id ON public.emails_work_items USING btree (email_id);\nCREATE INDEX index_emails_work_items_on_work_item_id ON public.emails_work_items USING btree (work_item_id);\n\n\n-- public.generic_files definition\nCREATE TABLE public.generic_files (\n\tid serial NOT NULL,\n\tfile_format varchar NULL,\n\t\"size\" int8 NULL,\n\tidentifier varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tlast_fixity_check timestamp NOT NULL DEFAULT '2000-01-01 00:00:00'::timestamp without time zone,\n\tinstitution_id int4 NOT NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tuuid varchar NOT NULL,\n\tCONSTRAINT generic_files_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_generic_files_on_created_at ON public.generic_files USING btree (created_at);\nCREATE UNIQUE INDEX index_generic_files_on_identifier ON public.generic_files USING btree (identifier);\nCREATE INDEX index_generic_files_on_institution_id ON public.generic_files USING btree (institution_id);\nCREATE INDEX index_generic_files_on_institution_id_and_state ON public.generic_files USING btree (institution_id, state);\nCREATE INDEX index_generic_files_on_institution_id_and_updated_at ON public.generic_files USING btree (institution_id, updated_at);\nCREATE INDEX index_generic_files_on_intellectual_object_id ON public.generic_files USING btree (intellectual_object_id);\nCREATE INDEX index_generic_files_on_updated_at ON public.generic_files USING btree (updated_at);\nCREATE UNIQUE INDEX index_generic_files_on_uuid ON public.generic_files USING btree (uuid);\nCREATE INDEX ix_gf_last_fixity_check ON public.generic_files USING btree (last_fixity_check);\n\n\n-- public.institutions definition\nCREATE TABLE public.institutions (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\tidentifier varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\t\"type\" varchar NULL,\n\tmember_institution_id int4 NULL,\n\tdeactivated_at timestamp NULL,\n\totp_enabled bool NULL,\n    enable_spot_restore bool not null default false,\n\treceiving_bucket varchar NOT NULL,\n\trestore_bucket varchar NOT NULL,\n\tCONSTRAINT institutions_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_institutions_on_name ON public.institutions USING btree (name);\n\n\n-- public.intellectual_objects definition\nCREATE TABLE public.intellectual_objects (\n\tid serial NOT NULL,\n\ttitle varchar NULL,\n\tdescription text NULL,\n\tidentifier varchar NULL,\n\talt_identifier varchar NULL,\n\t\"access\" varchar NULL,\n\tbag_name varchar NULL,\n\tinstitution_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tetag varchar NULL,\n\tbag_group_identifier varchar NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tbagit_profile_identifier varchar NULL,\n\tsource_organization varchar NULL,\n\tinternal_sender_identifier varchar NULL,\n\tinternal_sender_description text NULL,\n\tCONSTRAINT intellectual_objects_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_intellectual_objects_on_bag_name ON public.intellectual_objects USING btree (bag_name);\nCREATE INDEX index_intellectual_objects_on_created_at ON public.intellectual_objects USING btree (created_at);\nCREATE UNIQUE INDEX index_intellectual_objects_on_identifier ON public.intellectual_objects USING btree (identifier);\nCREATE INDEX index_intellectual_objects_on_institution_id ON public.intellectual_objects USING btree (institution_id);\nCREATE INDEX index_intellectual_objects_on_updated_at ON public.intellectual_objects USING btree (updated_at);\n\n\n-- public.old_passwords definition\n--\n-- This is a legacy table. We can get rid of this if we\n-- abandon mandatory password changes. Wait until that's\n-- decided.\n--\nCREATE TABLE public.old_passwords (\n\tid bigserial NOT NULL,\n\tencrypted_password varchar NOT NULL,\n\tpassword_salt varchar NULL,\n\tpassword_archivable_type varchar NOT NULL,\n\tpassword_archivable_id int4 NOT NULL,\n\tcreated_at timestamp NULL,\n\tCONSTRAINT old_passwords_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_password_archivable ON public.old_passwords USING btree (password_archivable_type, password_archivable_id);\n\n\n-- public.premis_events definition\nCREATE TABLE public.premis_events (\n\tid serial NOT NULL,\n\tidentifier varchar NULL,\n\tevent_type varchar NULL,\n\tdate_time varchar NULL,\n\toutcome_detail varchar NULL,\n\tdetail varchar NULL,\n\toutcome_information varchar NULL,\n\t\"object\" varchar NULL,\n\tagent varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\toutcome varchar NULL,\n\tinstitution_id int4 NULL,\n\told_uuid varchar NULL,\n\tCONSTRAINT premis_events_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_premis_events_date_time_desc ON public.premis_events USING btree (date_time DESC);\nCREATE INDEX index_premis_events_on_event_type ON public.premis_events USING btree (event_type);\nCREATE INDEX index_premis_events_on_event_type_and_outcome ON public.premis_events USING btree (event_type, outcome);\nCREATE INDEX index_premis_events_on_generic_file_id ON public.premis_events USING btree (generic_file_id);\nCREATE UNIQUE INDEX index_premis_events_on_identifier ON public.premis_events USING btree (identifier);\nCREATE INDEX index_premis_events_on_institution_id ON public.premis_events USING btree (institution_id);\nCREATE INDEX index_premis_events_on_intellectual_object_id ON public.premis_events USING btree (intellectual_object_id);\nCREATE INDEX index_premis_events_on_outcome ON public.premis_events USING btree (outcome);\n\n\n-- public.schema_migrations definition\n--\n-- This is a legacy table used by ActiveRecord\n-- to track which migrations have been applied.\n--\n-- We can delete this when production is stable.\n--\nCREATE TABLE public.schema_migrations (\n\t\"version\" varchar NOT NULL,\n\tCONSTRAINT schema_migrations_pkey PRIMARY KEY (version)\n);\n\n\n-- public.snapshots definition\n--\n-- This table stores point-in-time snapshots\n-- of how much data each depositor has in the repo.\n--\n-- We may eventually delete this, but keep for now.\n--\nCREATE TABLE public.snapshots (\n\tid bigserial NOT NULL,\n\taudit_date timestamp NULL,\n\tinstitution_id int4 NULL,\n\tapt_bytes int8 NULL,\n\t\"cost\" numeric NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tsnapshot_type varchar NULL,\n\tcs_bytes int8 NULL,\n\tgo_bytes int8 NULL,\n\tCONSTRAINT snapshots_pkey PRIMARY KEY (id)\n);\n\n\n-- public.usage_samples definition\n--\n-- No idea what this was supposed to be, but the\n-- table never had any data in the production DB.\n-- Consider deleting this after we're sure it's not used.\n--\nCREATE TABLE public.usage_samples (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id varchar NULL,\n\t\"data\" text NULL,\n\tCONSTRAINT usage_samples_pkey PRIMARY KEY (id)\n);\n\n\n-- public.work_items definition\nCREATE TABLE public.work_items (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\t\"name\" varchar NULL,\n\tetag varchar NULL,\n\tbucket varchar NULL,\n\t\"user\" varchar NULL,\n\tnote text NULL,\n\t\"action\" varchar NULL,\n\tstage varchar NULL,\n\tstatus varchar NULL,\n\toutcome text NULL,\n\tbag_date timestamp NULL,\n\tdate_processed timestamp NULL,\n\tretry bool NOT NULL DEFAULT false,\n\tnode varchar(255) NULL,\n\tpid int4 NULL DEFAULT 0,\n\tneeds_admin_review bool NOT NULL DEFAULT false,\n\tinstitution_id int4 NULL,\n\tqueued_at timestamp NULL,\n\t\"size\" int8 NULL,\n\tstage_started_at timestamp NULL,\n\taptrust_approver varchar NULL,\n\tinst_approver varchar NULL,\n\tCONSTRAINT work_items_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_work_items_on_action ON public.work_items USING btree (action);\nCREATE INDEX index_work_items_on_date ON public.work_items USING btree (date_processed);\nCREATE INDEX index_work_items_on_etag_and_name ON public.work_items USING btree (etag, name);\nCREATE INDEX index_work_items_on_generic_file_id ON public.work_items USING btree (generic_file_id);\nCREATE INDEX index_work_items_on_institution_id ON public.work_items USING btree (institution_id);\nCREATE INDEX index_work_items_on_institution_id_and_date ON public.work_items USING btree (institution_id, date_processed);\nCREATE INDEX index_work_items_on_intellectual_object_id ON public.work_items USING btree (intellectual_object_id);\nCREATE INDEX index_work_items_on_stage ON public.work_items USING btree (stage);\nCREATE INDEX index_work_items_on_status ON public.work_items USING btree (status);\n\n\n-- public.checksums definition\nCREATE TABLE public.checksums (\n\tid serial NOT NULL,\n\talgorithm varchar NULL,\n\tdatetime timestamp NULL,\n\tdigest varchar NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT checksums_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_89bb0866e7 FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_checksums_on_generic_file_id ON public.checksums USING btree (generic_file_id);\n\n\n-- public.storage_records definition\nCREATE TABLE public.storage_records (\n\tid bigserial NOT NULL,\n\tgeneric_file_id int4 NULL,\n\turl varchar NULL,\n\tCONSTRAINT storage_records_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_a126ea6adc FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\n\n-- public.users definition\nCREATE TABLE public.users (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\temail varchar NULL,\n\tphone_number varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tencrypted_password varchar NOT NULL DEFAULT ''::character varying,\n\treset_password_token varchar NULL,\n\treset_password_sent_at timestamp NULL,\n\tremember_created_at timestamp NULL,\n\tsign_in_count int4 NOT NULL DEFAULT 0,\n\tcurrent_sign_in_at timestamp NULL,\n\tlast_sign_in_at timestamp NULL,\n\tcurrent_sign_in_ip varchar NULL,\n\tlast_sign_in_ip varchar NULL,\n\tinstitution_id int4 NULL,\n\tencrypted_api_secret_key text NULL,\n\tpassword_changed_at timestamp NULL,\n\tencrypted_otp_secret varchar NULL,\n\tencrypted_otp_secret_iv varchar NULL,\n\tencrypted_otp_secret_salt varchar NULL,\n    encrypted_otp_sent_at timestamp NULL,\n\tconsumed_timestep int4 NULL,\n\totp_required_for_login bool NULL,\n\tdeactivated_at timestamp NULL,\n\tenabled_two_factor bool NULL DEFAULT false,\n\tconfirmed_two_factor bool NULL DEFAULT false,\n\totp_backup_codes _varchar NULL,\n\tauthy_id varchar NULL,\n\tlast_sign_in_with_authy timestamp NULL,\n\tauthy_status varchar NULL,\n\temail_verified bool NULL DEFAULT false,\n\tinitial_password_updated bool NULL DEFAULT false,\n\tforce_password_update bool NULL DEFAULT false,\n\taccount_confirmed bool NULL DEFAULT true,\n\tgrace_period timestamp NULL,\n    awaiting_second_factor boolean not null default false,\n    \"role\" varchar(50) NOT NULL default 'none',\n\tCONSTRAINT users_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_7fcf39ca13 FOREIGN KEY (institution_id) REFERENCES institutions(id)\n);\nCREATE INDEX index_users_on_authy_id ON public.users USING btree (authy_id);\nCREATE UNIQUE INDEX index_users_on_email ON public.users USING btree (email);\nCREATE INDEX index_users_on_institution_id ON public.users USING btree (institution_id);\nCREATE INDEX index_users_on_password_changed_at ON public.users USING btree (password_changed_at);\nCREATE UNIQUE INDEX index_users_on_reset_password_token ON public.users USING btree (reset_password_token);\n\n-------------------------------------------------------------------------------\n-- New tables that were not part of Pharos.\n-- alerts              + join tables\n-- deletion_requests   + join tables\n-------------------------------------------------------------------------------\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index index_alerts_institution_id ON public.alerts (institution_id);\ncreate index index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table public.alerts_users (\n    alert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table public.alerts_work_items (\n    alert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index index_storage_options_name ON public.storage_options (\"name\");\n\n\n\n-------------------------------------------------------------------------------\n-- Functions\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: -- migrations.sql\n--\n-- This file contains ALL alterations that should be applied to the\n-- existing Pharos DB schema (as it exists in the feature/storage-option\n-- branch) to make it match schema.sql.\n--\n-- All operations in this file must be idempotent, so we can run it\n-- any number of times and always know that it will leave the DB in\n-- consistent and known state that matches schema.sql.\n--\n-- NOTE: When migrating old Pharos DB, we will also need to create the\n--       views in the schema.sql file.\n-------------------------------------------------------------------------------\n\n---------------------------------------------------------\n-- START OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n---------------------------------------------------------\n\n-- Drop legacy table from Pharos DB.\ndrop table if exists work_item_states;\n\n-- Create the storage_records table, with indexes.\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\tcreate table public.storage_records (\n    \tid bigserial not null,\n    \tgeneric_file_id int8 not null,\n    \turl varchar not null,\n    \tconstraint storage_records_pkey primary key (id),\n    \tconstraint fk_rails_a126ea6adc foreign key (generic_file_id) references generic_files(id)\n\t);\n\tcreate index if not exists index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\tcreate unique index if not exists index_storage_records_on_url ON public.storage_records(\"url\");\n  end if;\nend\n$$;\n\n-- Add column generic_files.uuid.\nalter table generic_files add column if not exists \"uuid\" varchar;\n\n-- Copy uuid from uri into uuid field.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\tupdate generic_files set uuid=split_part(uri, '/', 5);\n  end if;\nend\n$$;\n\n-- Change generic_files.uuid to not null and add a unique index.\ndo\n$$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uuid' and is_nullable = 'YES') then\n  \talter table generic_files alter column \"uuid\" set not null;\n\tcreate unique index if not exists index_generic_files_on_uuid on generic_files(uuid);\n  end if;\nend\n$$;\n\n-- Copy generic_files.uri from storage_records.url.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\n  \t  -- Get the intial URL. All items, regadless of storage option, have one URL.\n      -- The inner if statement makes sure this hasn't already run. (Prevents duplicate inserts.)\n\t  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\t    if not exists (select 1 from storage_records where length(url) > 0) then\n\t\t  insert into storage_records (generic_file_id, url) select id, uri from generic_files gf order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- For items in standard storage, we need to add a Glacier URL. URLs differ per environment, so we check.\n\t  -- In each case, the inner if statement tries to ensure that these inserts have not already run.\n\n\t  -- Production\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.preservation.storage/', '/aptrust.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Test/Demo\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.test.preservation.oregon/%') then\n\t      insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.test.preservation/', '/aptrust.test.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Staging\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.staging.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.staging.preservation/', '/aptrust.staging.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n  end if;\nend\n$$;\n\n-- Now remove generic_files.uri, since the data is now in storage_records\nalter table generic_files drop column if exists uri;\n\n-------------------------------------------------------\n-- END OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n-------------------------------------------------------\n\n-- The premis_events.date_time column is varchar, but it should be\n-- timestamp. We need to change it. This change may fail if 1) there\n-- are invalid or badly formatted dates in the date_time column, or\n-- 2) if any views referencing premis_events.date_time already exist.\n-- Drop premis_events_view if necessary and recreate it after this alteration.\n--\n-- This change may take a long time, as premis_events has over 100M rows.\ndo\n$$\nbegin\n\tif exists(\n\t\tselect 1 from information_schema.columns\n\t\twhere table_schema = 'public'\n\t\tand table_name = 'premis_events'\n\t\tand column_name = 'date_time'\n\t\tand data_type = 'character varying')\n\tthen\n\t\talter table premis_events alter column date_time type timestamp\n\t\tusing TO_TIMESTAMP(date_time, 'YYYY-MM-DDTHH24:MI:SS');\n\tend if;\nend\n$$;\n\n-- We need to fix the user role structure. Pharos allows a user to have\n-- multiple roles at a single institution, though our business rules disallow\n-- that, and no user has ever had more than one role. To simplify the DB\n-- and our queries, we need to do the following:\n--\n-- 1. Create a role column in the users table.\n-- 2. Populate that column with the value with each user's role from\n--    user -> roles_user -> roles.\n-- 3. Drop the roles_users table.\n-- 4. Drop the roles table.\n\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='role') then\n \talter table users add column \"role\" varchar(50) not null default 'none';\n \tupdate users u set \"role\" = coalesce((select r.name from \"roles\" r inner join roles_users ru on ru.role_id = r.id where ru.user_id = u.id), 'none');\n    drop table if exists roles_users;\n    drop table if exists roles;\n  end if;\nend\n$$;\n\n-- Add awaiting_second_factor\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='awaiting_second_factor') then\n \talter table users add column \"awaiting_second_factor\" boolean not null default false;\n  end if;\nend\n$$;\n\n-- Add encrypted_otp_sent_at\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='encrypted_otp_sent_at') then\n \talter table users add column \"encrypted_otp_sent_at\" timestamp null;\n  end if;\nend\n$$;\n\n\n-- The ingest_state columns were part of a proposed architecture we never\n-- implemented. They have never been used, and we don't need them.\nalter table intellectual_objects drop column if exists ingest_state;\nalter table generic_files drop column if exists ingest_state;\n\n\n-- intellectual_objects.bag_group_identifier is almost always empty.\n-- Make this column nullable to ease inserts.\nalter table intellectual_objects alter column bag_group_identifier drop not null;\n\n\n-- Remove object_identifier and generic_file_identifier from work_items.\n-- We can use a view to join the files & objects tables, avoiding the\n-- duplicate data.\nalter table work_items drop column if exists object_identifier;\nalter table work_items drop column if exists generic_file_identifier;\n\n-- The work_items.date column actually refers to the datetime on which\n-- the item was last processed by one of our Go workers. The name \"date\"\n-- is too vague and ambiguous, so let's call it what it is.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns\n    where table_schema='public' AND table_name='work_items' AND column_name='date') then\n    alter table work_items rename column \"date\" to \"date_processed\";\n  end if;\nend\n$$;\n\n-- Update the indexes on work_items to reflect the change from date to\n-- date_processed.\n\ndrop index if exists index_work_items_on_date;\ndrop index if exists index_work_items_on_institution_id_and_date;\n\ncreate index if not exists index_work_items_on_date_processed on work_items(date_processed);\ncreate index if not exists index_work_items_on_inst_id_and_date_processed on work_items(institution_id, date_processed);\n\n-- These columns are unnecessary in the premis_events table.\n-- We can get them by joining other tables in a view.\n-- This will have a large impact on storage space, since these\n-- two fields together average ~100 bytes per record, and as of\n-- Jan. 2021, we have around 120M records. Dropping these columns\n-- also drops the indexes on these two columns, which are huge and\n-- are rarely used.\nalter table premis_events drop column if exists intellectual_object_identifier;\nalter table premis_events drop column if exists generic_file_identifier;\n\n-- Get rid of useless indexes. We can add these back if they actually turn\n-- out to be useful.\n--\n-- generic_files\ndrop index if exists index_files_on_inst_state_and_format;\ndrop index if exists index_files_on_inst_state_and_updated;\ndrop index if exists index_generic_files_on_file_format;\ndrop index if exists index_generic_files_on_file_format_and_state;\ndrop index if exists index_generic_files_on_institution_id_and_size_and_state;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_file_format;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_state;\ndrop index if exists index_generic_files_on_size;\ndrop index if exists index_generic_files_on_size_and_state;\ndrop index if exists index_generic_files_on_state;\ndrop index if exists index_generic_files_on_state_and_updated_at;\n\n-- intellectual_objects\ndrop index if exists index_intellectual_objects_on_access;\ndrop index if exists index_intellectual_objects_on_institution_id_and_state;\ndrop index if exists index_intellectual_objects_on_state;\n\n-- premis_events\ndrop index if exists index_premis_events_on_generic_file_id_and_event_type;\ndrop index if exists index_premis_events_on_identifier_and_institution_id;\n\n-- institutions\ncreate unique index if not exists index_institutions_identifier on institutions using btree(identifier);\ncreate unique index if not exists index_institutions_receiving_bucket on institutions using btree(receiving_bucket);\ncreate unique index if not exists index_institutions_restore_bucket on institutions using btree(restore_bucket);\n\n-- Allow institutions to turn spot restoration tests on or off.\n-- Default is off.\nalter table institutions add column if not exists enable_spot_restore boolean not null default false;\n\n-- ********************************************************************\n--\n-- Add tables for alerts and deletions that did not exist in Pharos\n--\n-- ********************************************************************\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table if not exists public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index if not exists index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table if not exists public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index if not exists index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table if not exists public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index if not exists index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table if not exists public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index if not exists index_alerts_institution_id ON public.alerts (institution_id);\ncreate index if not exists index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table if not exists public.alerts_users (\n\talert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index if not exists index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index if not exists index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index if not exists index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table if not exists public.alerts_work_items (\n\talert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index if not exists index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index if not exists index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table if not exists public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index if not exists index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index if not exists index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table if not exists public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index if not exists index_storage_options_name ON public.storage_options (\"name\");\n\n-- In Pharos DB, many generic_file_ids in premis_events are set to zero when they should be null.\n-- Fix that here.\nupdate premis_events set generic_file_id = null where generic_file_id = 0;\n\n-- In Pharos, the Devise auth system leaves stale password reset data forever.\n-- We have to clear these values in Registry, or all users will be stuck in\n-- the \"please finish resetting your password\" loop forever. We have no idea\n-- what reset tokens Devise sent two years ago, so no one will be able to\n-- unlock their accounts.\nupdate users set reset_password_token = null, reset_password_sent_at = null;\n\n\n-------------------------------------------------------------------------------\n-- Functions\n--\n-- Fuctions are defined in schema.sql as well. Adding them to migrations\n-- ensures they'll be present in converted DB.\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: -------------------------------------------------------------------------------\n-- Views\n-------------------------------------------------------------------------------\n\n-- Create a view to pull in columns that used to be in the WorkItems table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view work_items_view as\nselect\n\twi.id,\n\twi.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\twi.intellectual_object_id,\n\tio.identifier as \"object_identifier\",\n\tio.alt_identifier,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\twi.generic_file_id,\n\tgf.identifier as \"generic_file_identifier\",\n\twi.\"name\",\n\twi.etag,\n\twi.bucket,\n\twi.\"user\",\n\twi.note,\n\twi.\"action\",\n\twi.stage,\n\twi.status,\n\twi.outcome,\n\twi.bag_date,\n\twi.date_processed,\n\twi.retry,\n\twi.node,\n\twi.pid,\n\twi.needs_admin_review,\n\twi.\"size\",\n\twi.queued_at,\n\twi.stage_started_at,\n\twi.aptrust_approver,\n\twi.inst_approver,\n\twi.created_at,\n\twi.updated_at\nfrom work_items wi\nleft join institutions i on wi.institution_id = i.id\nleft join intellectual_objects io on wi.intellectual_object_id = io.id\nleft join generic_files gf on wi.generic_file_id = gf.id;\n\n\n-- Create a view to pull in columns that used to be in the PremisEvents table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view premis_events_view as\nselect\n\tpe.id,\n\tpe.identifier,\n\tpe.institution_id,\n\ti.\"name\" as institution_name,\n\tpe.intellectual_object_id,\n\tio.identifier as intellectual_object_identifier,\n\tpe.generic_file_id,\n\tgf.identifier as generic_file_identifier,\n\tpe.event_type,\n\tpe.date_time,\n\tpe.detail,\n\tpe.outcome,\n\tpe.outcome_detail,\n\tpe.outcome_information,\n\tpe.\"object\",\n\tpe.agent,\n\tpe.created_at,\n\tpe.updated_at,\n\tpe.old_uuid\nfrom premis_events pe\nleft join institutions i on pe.institution_id = i.id\nleft join intellectual_objects io on pe.intellectual_object_id = io.id\nleft join generic_files gf on pe.generic_file_id = gf.id;\n\n\n-- users_view makes it easier to list and search on institution-related\n-- attributes for users.\ncreate or replace view users_view as\nselect\n\tu.id,\n\tu.\"name\",\n\tu.email,\n\tu.phone_number,\n\tu.created_at,\n\tu.updated_at,\n\tu.reset_password_sent_at,\n\tu.remember_created_at,\n\tu.sign_in_count,\n\tu.current_sign_in_at,\n\tu.last_sign_in_at,\n\tu.current_sign_in_ip,\n\tu.last_sign_in_ip,\n\tu.institution_id,\n\tu.password_changed_at,\n\tu.consumed_timestep,\n\tu.otp_required_for_login,\n\tu.deactivated_at,\n\tu.enabled_two_factor,\n\tu.confirmed_two_factor,\n\tu.authy_id,\n\tu.last_sign_in_with_authy,\n\tu.authy_status,\n\tu.email_verified,\n\tu.initial_password_updated,\n\tu.force_password_update,\n\tu.account_confirmed,\n\tu.grace_period,\n\tu.\"role\",\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.state as institution_state,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id,\n\ti2.\"name\" as member_institution_name,\n\ti2.identifier as member_institution_identifier,\n\ti2.state as member_institution_state,\n\ti.otp_enabled,\n\ti.receiving_bucket,\n\ti.restore_bucket\nfrom users u\nleft join institutions i on u.institution_id = i.id\nleft join institutions i2 on i.member_institution_id = i2.id;\n\n\n-- institutions_view shows an institution along with essential\n-- information about its parent, if it has a parent.\n\ncreate or replace view institutions_view as\nselect\n\ti.id,\n\ti.\"name\",\n\ti.identifier,\n\ti.state,\n\ti.\"type\",\n\ti.deactivated_at,\n\ti.otp_enabled,\n\ti.enable_spot_restore,\n\ti.receiving_bucket,\n\ti.restore_bucket,\n\ti.created_at,\n\ti.updated_at,\n\ti.member_institution_id as \"parent_id\",\n\tparent.\"name\" as \"parent_name\",\n\tparent.identifier as \"parent_identifier\",\n\tparent.state as \"parent_state\",\n\tparent.deactivated_at as \"parent_deactivated_at\"\nfrom institutions i\nleft join institutions parent on i.member_institution_id = parent.id;\n\n-- intellectual_objects_view\n\ncreate or replace view intellectual_objects_view as\nselect\n\tio.id,\n\tio.title,\n\tio.description,\n\tio.identifier,\n\tio.alt_identifier,\n\tio.access,\n\tio.bag_name,\n\tio.institution_id,\n\tio.state,\n\tio.etag,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\tio.internal_sender_description,\n\tio.created_at,\n\tio.updated_at,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id as institution_parent_id,\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"size\",\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_size\"\nfrom intellectual_objects io\nleft join institutions i on io.institution_id = i.id;\n\n-- deletion_requests_view\n\ncreate or replace view deletion_requests_view as\nselect dr.id,\n       dr.institution_id,\n       i.\"name\" as institution_name,\n       i.identifier as institution_identifier,\n       dr.requested_by_id,\n       req.\"name\" as requested_by_name,\n       req.email as requested_by_email,\n       dr.requested_at,\n       dr.confirmed_by_id,\n       conf.\"name\" as confirmed_by_name,\n       conf.email as confirmed_by_email,\n       dr.confirmed_at,\n       dr.cancelled_by_id,\n       can.\"name\" as cancelled_by_name,\n       can.email as cancelled_by_email,\n       dr.cancelled_at,\n       (select count(*) from deletion_requests_generic_files drgf where drgf.deletion_request_id = dr.id) as file_count,\n       (select count(*) from deletion_requests_intellectual_objects drio where drio.deletion_request_id = dr.id) as object_count,\n       dr.work_item_id,\n       wi.stage,\n       wi.status,\n       wi.date_processed,\n       wi.\"size\",\n       wi.note\nfrom deletion_requests dr\nleft join institutions i on dr.institution_id = i.id\nleft join users req on dr.requested_by_id = req.id\nleft join users conf on dr.confirmed_by_id = conf.id\nleft join users can on dr.confirmed_by_id = can.id\nleft join work_items wi on dr.work_item_id = wi.id;\n\n-- alerts view\n\ncreate or replace view alerts_view as\nselect\n\ta.id,\n\ta.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ta.\"type\",\n\ta.subject,\n\ta.\"content\",\n\ta.deletion_request_id,\n\ta.created_at,\n\tau.user_id,\n\tu.\"name\" as user_name,\n\tau.sent_at,\n\tau.read_at\nfrom alerts a\nleft join alerts_users au on a.id = au.alert_id\nleft join users u on au.user_id = u.id\nleft join institutions i on a.institution_id = i.id;\n\n-- storage_option_stats\ncreate or replace view storage_option_stats as\nwith stats as (\n\tselect\n\t\tsum(\"gf\".\"size\") as total_bytes,\n\t\tcount(*) as file_count,\n\t\tgf.institution_id,\n\t\tgf.storage_option\n\tfrom generic_files gf\n\twhere gf.state = 'A'\n\tgroup by rollup (gf.institution_id, gf.storage_option)\n\t)\nselect\n\ts.total_bytes,\n\ts.file_count,\n\ts.institution_id,\n\ts.storage_option,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier\nfrom stats s\nleft join institutions i on s.institution_id = i.id;\n\ncreate or replace view generic_files_view as\nselect\n\tgf.id,\n\tgf.file_format,\n\tgf.\"size\",\n\tgf.identifier,\n\tgf.intellectual_object_id,\n\tio.identifier as object_identifier,\n\tio.\"access\",\n\tgf.state,\n\tgf.last_fixity_check,\n\tgf.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\tgf.storage_option,\n\tgf.uuid,\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='md5' order by created_at desc limit 1) as \"md5\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha1' order by created_at desc limit 1) as \"sha1\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha256' order by created_at desc limit 1) as \"sha256\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha512' order by created_at desc limit 1) as \"sha512\",\n\tgf.created_at,\n\tgf.updated_at\nfrom generic_files gf\nleft join intellectual_objects io on io.id = gf.intellectual_object_id\nleft join institutions i on i.id = gf.institution_id;\n\n-- Checksums view\ncreate or replace view checksums_view as\nselect cs.id,\n       cs.algorithm,\n       cs.datetime,\n       cs.digest,\n       gf.state,\n       gf.identifier as \"generic_file_identifier\",\n       cs.generic_file_id,\n       gf.intellectual_object_id,\n       gf.institution_id,\n       cs.created_at,\n       cs.updated_at\nfrom checksums cs\nleft join generic_files gf on cs.generic_file_id = gf.id;\n\n\n---------------------------------------------------------------------------\n--\n-- Count Views\n--\n-- We create these views because count queries on large tables are slow\n-- in postgres. Even if a query can use an index to get a count, it still\n-- has to scan every row in the result set to see if that row is visible\n-- under postgres' mvcc rules. \n--\n-- If the count returns a million rows, postgres has to scan all million\n-- rows. The result is a query that can take 5-15 seconds. The \n-- premis_events table is the worst of the lot. It should surpass 200M\n-- rows by the end of 2022. We do not want to scan those rows every time\n-- someone hits the events page or the events API endpoint.\n--\n-- We run count queries all the time to manage paging in both the web UI\n-- and the API. For large counts, such as \"all events for an institution\",\n-- or \"all files for an institution\", we'll use the counts in the views\n-- below. \n--\n-- For smaller counts, such as \"all files for my institution created \n-- within the past week\", we'll suck it up and let postgres scan the \n-- smaller row sets.\n--\n-- These views will be refreshed every hour or so using an async go \n-- routine so they don't slow down web and API requests.\n--\n-- That means some large counts may be up to an hour out of date, but we\n-- can live with that tradeoff, since this will vastly speed up the loading\n-- of our most commonly hit web and API endpoints.\n--\n-- Note the function update_counts() below. It refreshes all of the count\n-- views.\n-- \n---------------------------------------------------------------------------\n\n-- premis_event_counts\ncreate materialized view if not exists premis_event_counts as\n\tselect institution_id, count(id) as row_count, event_type, outcome\n\tfrom premis_events group by cube(institution_id, event_type, outcome)\n\torder by institution_id, event_type, outcome;\n\n-- intellectual_object_counts\ncreate materialized view if not exists intellectual_object_counts as\n\tselect institution_id, count(id) as row_count, \"state\" \n\tfrom intellectual_objects group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- generic_file_counts\ncreate materialized view if not exists generic_file_counts as\n\tselect institution_id, count(id) as row_count, \"state\"\n\tfrom generic_files group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- work_item_counts\ncreate materialized view if not exists work_item_counts as\n\tselect institution_id, count(id) as row_count, \"action\"\n\tfrom work_items group by cube(institution_id, \"action\")\n\torder by institution_id, \"action\";\n\n-- \nCREATE OR REPLACE FUNCTION update_counts ()\n  RETURNS integer\nAS\n$BODY$\n  begin\n    refresh materialized view premis_event_counts;\n    refresh materialized view intellectual_object_counts;\n    refresh materialized view generic_file_counts;\n    refresh materialized view work_item_counts;    \n    return 1;\n  end;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"storage_options\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_options.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"institutions\" from '/Users/diamond/aptrust/registry/db/fixtures/institutions.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"users\" from '/Users/diamond/aptrust/registry/db/fixtures/users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"checksums\" from '/Users/diamond/aptrust/registry/db/fixtures/checksums.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"storage_records\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_records.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"deletion_requests\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"deletion_requests_generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"deletion_requests_intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"alerts\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"alerts_premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"alerts_users\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: copy \"alerts_work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_options', 'id'), MAX(id)) FROM \"storage_options\";"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('institutions', 'id'), MAX(id)) FROM \"institutions\";"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('users', 'id'), MAX(id)) FROM \"users\";"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('intellectual_objects', 'id'), MAX(id)) FROM \"intellectual_objects\";"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('generic_files', 'id'), MAX(id)) FROM \"generic_files\";"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('checksums', 'id'), MAX(id)) FROM \"checksums\";"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_records', 'id'), MAX(id)) FROM \"storage_records\";"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('premis_events', 'id'), MAX(id)) FROM \"premis_events\";"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('work_items', 'id'), MAX(id)) FROM \"work_items\";"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('deletion_requests', 'id'), MAX(id)) FROM \"deletion_requests\";"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('alerts', 'id'), MAX(id)) FROM \"alerts\";"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: select update_counts();"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'system@aptrust.org'))"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"institution\".\"id\", \"institution\".\"created_at\", \"institution\".\"updated_at\", \"institution\".\"name\", \"institution\".\"identifier\", \"institution\".\"state\", \"institution\".\"type\", \"institution\".\"member_institution_id\", \"institution\".\"deactivated_at\", \"institution\".\"otp_enabled\", \"institution\".\"enable_spot_restore\", \"institution\".\"receiving_bucket\", \"institution\".\"restore_bucket\" FROM \"institutions\" AS \"institution\" WHERE ((identifier = 'aptrust.org'))"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:30:44.487268+00:00:00', \"name\" = 'APTrust System', \"email\" = 'system@aptrust.org', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.48726+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = '127.0.0.1', \"institution_id\" = 1, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'admin' WHERE \"user\".\"id\" = 1"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":76.27192,"user-agent":"","time":"2022-06-22T13:30:44-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 1)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (0 = 0 or i.id = 0)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:30:44.502248+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:30:44.502248+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":36.911558,"user-agent":"","time":"2022-06-22T13:30:44-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'admin@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:30:44.598715+00:00:00', \"name\" = 'Inst One Admin', \"email\" = 'admin@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 1, \"current_sign_in_at\" = '2022-06-22 17:30:44.598713+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_admin' WHERE \"user\".\"id\" = 2"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":73.72167,"user-agent":"","time":"2022-06-22T13:30:44-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 2)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:30:44.609172+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:30:44.609172+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":30.329089,"user-agent":"","time":"2022-06-22T13:30:44-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:30:44.70238+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":72.916574,"user-agent":"","time":"2022-06-22T13:30:44-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 3)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:30:44.711549+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:30:44.711549+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":25.395132,"user-agent":"","time":"2022-06-22T13:30:44-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'admin@inst2.edu'))"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:30:44.801011+00:00:00', \"name\" = 'Inst Two Admin', \"email\" = 'admin@inst2.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 1, \"current_sign_in_at\" = '2022-06-22 17:30:44.80101+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 3, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_admin' WHERE \"user\".\"id\" = 5"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":72.759549,"user-agent":"","time":"2022-06-22T13:30:44-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 5))"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 3)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 5)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (3 = 0 or i.id = 3)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:30:44.810876+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:30:44.810876+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":24.948248,"user-agent":"","time":"2022-06-22T13:30:44-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst2.edu'))"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:30:44.901835+00:00:00', \"name\" = 'Inst Two User', \"email\" = 'user@inst2.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 1, \"current_sign_in_at\" = '2022-06-22 17:30:44.901834+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 3, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 7"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":75.282727,"user-agent":"","time":"2022-06-22T13:30:44-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 7))"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 3)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 7)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (3 = 0 or i.id = 3)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:30:44.911216+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:30:44.911216+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":25.406599,"user-agent":"","time":"2022-06-22T13:30:44-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:44-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'sms_user@example.com'))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-09-10 14:25:00+00:00:00', \"updated_at\" = '2022-06-22 17:30:45.000818+00:00:00', \"name\" = 'Two Factor SMS User', \"email\" = 'sms_user@example.com', \"phone_number\" = '+12125551212', \"encrypted_password\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 1, \"current_sign_in_at\" = '2022-06-22 17:30:45.000817+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = TRUE, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = '2021-11-09 05:00:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 6"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":72.940494,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 6))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 6)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:30:45.009572+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:30:45.009572+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":23.789608,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'system@aptrust.org'))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'admin@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'admin@inst2.edu'))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst2.edu'))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'sms_user@example.com'))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (1) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (1) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (1) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"alerts\" AS \"alert\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 1) AND (\"alert_view\".\"user_id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (1) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (1) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (1) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = '2022-06-22 17:30:45.051285+00:00:00' where alert_id = 1 and user_id = 1"}
{"level":"info","status":200,"method":"GET","path":"/alerts/show/1/1","ip":"","latency":28.754962,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"alerts\" AS \"alert\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 1) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (1) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (1) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (1) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = '2022-06-22 17:30:45.0774+00:00:00' where alert_id = 1 and user_id = 2"}
{"level":"info","status":200,"method":"GET","path":"/alerts/show/1/2","ip":"","latency":22.133258,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"alerts\" AS \"alert\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 1) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (1) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (1) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (1) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = '2022-06-22 17:30:45.103061+00:00:00' where alert_id = 1 and user_id = 2"}
{"level":"info","status":200,"method":"GET","path":"/alerts/show/1/2","ip":"","latency":29.680375,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"alerts\" AS \"alert\" WHERE (id = 1)"}
{"level":"warn","time":"2022-06-22T13:30:45-04:00","message":"User 2 illegally tried to access alert 1 belonging to user 1. Permission was denied."}
{"level":"warn","status":403,"method":"GET","path":"/alerts/show/1/1","ip":"","latency":17.253136,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Error #01: permission denied\n"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"alerts\" AS \"alert\" WHERE (id = 1)"}
{"level":"warn","time":"2022-06-22T13:30:45-04:00","message":"User 3 illegally tried to access alert 1 belonging to user 2. Permission was denied."}
{"level":"warn","status":403,"method":"GET","path":"/alerts/show/1/2","ip":"","latency":22.193284,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Error #01: permission denied\n"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" ORDER BY \"created_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"TypeName (1): AlertView"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"Cannot query count view for type AlertView: type is not supported for view count"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"WebUI: Using standard count query for ''"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT count(*) FROM \"alerts_view\" AS \"alert_view\""}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"users\" AS \"user\" ORDER BY \"name\" asc LIMIT 200"}
{"level":"info","status":200,"method":"GET","path":"/alerts","ip":"","latency":20.25782,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"users\" AS \"user\" ORDER BY \"name\" asc LIMIT 200"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((type = 'Deletion Confirmed') AND (user_id = '2')) ORDER BY \"created_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"TypeName (1): AlertView"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"Cannot query count view for type AlertView: type is not supported for view count"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"WebUI: Using standard count query for '(type = ?) AND (user_id = ?)'"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT count(*) FROM \"alerts_view\" AS \"alert_view\" WHERE ((type = 'Deletion Confirmed') AND (user_id = '2'))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"users\" AS \"user\" ORDER BY \"name\" asc LIMIT 200"}
{"level":"info","status":200,"method":"GET","path":"/alerts?type=Deletion+Confirmed&user_id=2","ip":"","latency":25.890004,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((institution_id = '2') AND (user_id = '2') AND (institution_id = 2) AND (user_id = 2)) ORDER BY \"created_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"TypeName (1): AlertView"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"Cannot query count view for type AlertView: type is not supported for view count"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"WebUI: Using standard count query for '(institution_id = ?) AND (user_id = ?) AND (institution_id = ?) AND (user_id = ?)'"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT count(*) FROM \"alerts_view\" AS \"alert_view\" WHERE ((institution_id = '2') AND (user_id = '2') AND (institution_id = 2) AND (user_id = 2))"}
{"level":"info","status":200,"method":"GET","path":"/alerts?institution_id=2&user_id=2","ip":"","latency":21.43059,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((institution_id = '2') AND (user_id = '3') AND (institution_id = 2) AND (user_id = 3)) ORDER BY \"created_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"TypeName (1): AlertView"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"Cannot query count view for type AlertView: type is not supported for view count"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"WebUI: Using standard count query for '(institution_id = ?) AND (user_id = ?) AND (institution_id = ?) AND (user_id = ?)'"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT count(*) FROM \"alerts_view\" AS \"alert_view\" WHERE ((institution_id = '2') AND (user_id = '3') AND (institution_id = 2) AND (user_id = 3))"}
{"level":"info","status":200,"method":"GET","path":"/alerts?institution_id=2&user_id=3","ip":"","latency":22.220049,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\" FROM \"alerts\" AS \"alert\" WHERE (id IN (SELECT alert_id FROM \"alerts_users\" AS \"alerts_users\" WHERE (user_id = 2))) ORDER BY \"id\" desc"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 7 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 5 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 4 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 3 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 2 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 1 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 7))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (7) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (7) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (7) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = '2022-06-22 17:30:45.268351+00:00:00' where alert_id = 7 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 5))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (5) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (5) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (5) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = '2022-06-22 17:30:45.272914+00:00:00' where alert_id = 5 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 4))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (4) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (4) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (4) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = '2022-06-22 17:30:45.27777+00:00:00' where alert_id = 4 and user_id = 2"}
{"level":"info","status":200,"method":"PUT","path":"/alerts/mark_as_read","ip":"","latency":14.856691,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 7) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 5) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 4) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 7))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (7) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (7) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (7) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 7 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 5))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (5) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (5) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (5) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 5 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 4))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (4) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (4) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (4) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 4 and user_id = 2"}
{"level":"info","status":200,"method":"PUT","path":"/alerts/mark_as_unread","ip":"","latency":20.08939,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 7) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 5) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 4) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 7 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 5 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 4 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 3 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 2 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = null where alert_id = 1 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"id\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 2) AND (read_at is null))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (1) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (1) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (1) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = '2022-06-22 17:30:45.319998+00:00:00' where alert_id = 1 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (2) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (2) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (2) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = '2022-06-22 17:30:45.323652+00:00:00' where alert_id = 2 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (3) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (3) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (3) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = '2022-06-22 17:30:45.329895+00:00:00' where alert_id = 3 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 4))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (4) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (4) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (4) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = '2022-06-22 17:30:45.333746+00:00:00' where alert_id = 4 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 5))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (5) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (5) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (5) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = '2022-06-22 17:30:45.337354+00:00:00' where alert_id = 5 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((\"alert\".\"id\" = 7))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_premis_events\".*, \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" JOIN \"alerts_premis_events\" AS \"alerts_premis_events\" ON (\"alerts_premis_events\".\"alert_id\") IN (7) WHERE (\"premis_event\".\"id\" = \"alerts_premis_events\".\"premis_event_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (7) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alerts_work_items\".*, \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" JOIN \"alerts_work_items\" AS \"alerts_work_items\" ON (\"alerts_work_items\".\"alert_id\") IN (7) WHERE (\"work_item\".\"id\" = \"alerts_work_items\".\"work_item_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: update alerts_users set read_at = '2022-06-22 17:30:45.34115+00:00:00' where alert_id = 7 and user_id = 2"}
{"level":"info","status":200,"method":"PUT","path":"/alerts/mark_all_as_read","ip":"","latency":27.14708,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 7) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 5) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 4) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 3) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 2) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((\"alert_view\".\"id\" = 1) AND (\"alert_view\".\"user_id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 1)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (0 = 0 or i.id = 0)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:30:45.36693+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:30:45.36693+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":45.106517,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 2)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:30:45.407206+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:30:45.407206+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":27.750995,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 3)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:30:45.431294+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:30:45.431294+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":25.679651,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"deletion_requests\" AS \"deletion_request\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_request\".\"id\", \"deletion_request\".\"institution_id\", \"deletion_request\".\"requested_by_id\", \"deletion_request\".\"requested_at\", \"deletion_request\".\"encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\", \"deletion_request\".\"confirmed_at\", \"deletion_request\".\"cancelled_by_id\", \"deletion_request\".\"cancelled_at\", \"deletion_request\".\"work_item_id\", \"requested_by\".\"id\" AS \"requested_by__id\", \"requested_by\".\"created_at\" AS \"requested_by__created_at\", \"requested_by\".\"updated_at\" AS \"requested_by__updated_at\", \"requested_by\".\"name\" AS \"requested_by__name\", \"requested_by\".\"email\" AS \"requested_by__email\", \"requested_by\".\"phone_number\" AS \"requested_by__phone_number\", \"requested_by\".\"encrypted_password\" AS \"requested_by__encrypted_password\", \"requested_by\".\"reset_password_token\" AS \"requested_by__reset_password_token\", \"requested_by\".\"reset_password_sent_at\" AS \"requested_by__reset_password_sent_at\", \"requested_by\".\"remember_created_at\" AS \"requested_by__remember_created_at\", \"requested_by\".\"sign_in_count\" AS \"requested_by__sign_in_count\", \"requested_by\".\"current_sign_in_at\" AS \"requested_by__current_sign_in_at\", \"requested_by\".\"last_sign_in_at\" AS \"requested_by__last_sign_in_at\", \"requested_by\".\"current_sign_in_ip\" AS \"requested_by__current_sign_in_ip\", \"requested_by\".\"last_sign_in_ip\" AS \"requested_by__last_sign_in_ip\", \"requested_by\".\"institution_id\" AS \"requested_by__institution_id\", \"requested_by\".\"encrypted_api_secret_key\" AS \"requested_by__encrypted_api_secret_key\", \"requested_by\".\"password_changed_at\" AS \"requested_by__password_changed_at\", \"requested_by\".\"encrypted_otp_secret\" AS \"requested_by__encrypted_otp_secret\", \"requested_by\".\"encrypted_otp_secret_iv\" AS \"requested_by__encrypted_otp_secret_iv\", \"requested_by\".\"encrypted_otp_secret_salt\" AS \"requested_by__encrypted_otp_secret_salt\", \"requested_by\".\"encrypted_otp_sent_at\" AS \"requested_by__encrypted_otp_sent_at\", \"requested_by\".\"consumed_timestep\" AS \"requested_by__consumed_timestep\", \"requested_by\".\"otp_required_for_login\" AS \"requested_by__otp_required_for_login\", \"requested_by\".\"deactivated_at\" AS \"requested_by__deactivated_at\", \"requested_by\".\"enabled_two_factor\" AS \"requested_by__enabled_two_factor\", \"requested_by\".\"confirmed_two_factor\" AS \"requested_by__confirmed_two_factor\", \"requested_by\".\"otp_backup_codes\" AS \"requested_by__otp_backup_codes\", \"requested_by\".\"authy_id\" AS \"requested_by__authy_id\", \"requested_by\".\"last_sign_in_with_authy\" AS \"requested_by__last_sign_in_with_authy\", \"requested_by\".\"authy_status\" AS \"requested_by__authy_status\", \"requested_by\".\"email_verified\" AS \"requested_by__email_verified\", \"requested_by\".\"initial_password_updated\" AS \"requested_by__initial_password_updated\", \"requested_by\".\"force_password_update\" AS \"requested_by__force_password_update\", \"requested_by\".\"grace_period\" AS \"requested_by__grace_period\", \"requested_by\".\"awaiting_second_factor\" AS \"requested_by__awaiting_second_factor\", \"requested_by\".\"role\" AS \"requested_by__role\", \"confirmed_by\".\"id\" AS \"confirmed_by__id\", \"confirmed_by\".\"created_at\" AS \"confirmed_by__created_at\", \"confirmed_by\".\"updated_at\" AS \"confirmed_by__updated_at\", \"confirmed_by\".\"name\" AS \"confirmed_by__name\", \"confirmed_by\".\"email\" AS \"confirmed_by__email\", \"confirmed_by\".\"phone_number\" AS \"confirmed_by__phone_number\", \"confirmed_by\".\"encrypted_password\" AS \"confirmed_by__encrypted_password\", \"confirmed_by\".\"reset_password_token\" AS \"confirmed_by__reset_password_token\", \"confirmed_by\".\"reset_password_sent_at\" AS \"confirmed_by__reset_password_sent_at\", \"confirmed_by\".\"remember_created_at\" AS \"confirmed_by__remember_created_at\", \"confirmed_by\".\"sign_in_count\" AS \"confirmed_by__sign_in_count\", \"confirmed_by\".\"current_sign_in_at\" AS \"confirmed_by__current_sign_in_at\", \"confirmed_by\".\"last_sign_in_at\" AS \"confirmed_by__last_sign_in_at\", \"confirmed_by\".\"current_sign_in_ip\" AS \"confirmed_by__current_sign_in_ip\", \"confirmed_by\".\"last_sign_in_ip\" AS \"confirmed_by__last_sign_in_ip\", \"confirmed_by\".\"institution_id\" AS \"confirmed_by__institution_id\", \"confirmed_by\".\"encrypted_api_secret_key\" AS \"confirmed_by__encrypted_api_secret_key\", \"confirmed_by\".\"password_changed_at\" AS \"confirmed_by__password_changed_at\", \"confirmed_by\".\"encrypted_otp_secret\" AS \"confirmed_by__encrypted_otp_secret\", \"confirmed_by\".\"encrypted_otp_secret_iv\" AS \"confirmed_by__encrypted_otp_secret_iv\", \"confirmed_by\".\"encrypted_otp_secret_salt\" AS \"confirmed_by__encrypted_otp_secret_salt\", \"confirmed_by\".\"encrypted_otp_sent_at\" AS \"confirmed_by__encrypted_otp_sent_at\", \"confirmed_by\".\"consumed_timestep\" AS \"confirmed_by__consumed_timestep\", \"confirmed_by\".\"otp_required_for_login\" AS \"confirmed_by__otp_required_for_login\", \"confirmed_by\".\"deactivated_at\" AS \"confirmed_by__deactivated_at\", \"confirmed_by\".\"enabled_two_factor\" AS \"confirmed_by__enabled_two_factor\", \"confirmed_by\".\"confirmed_two_factor\" AS \"confirmed_by__confirmed_two_factor\", \"confirmed_by\".\"otp_backup_codes\" AS \"confirmed_by__otp_backup_codes\", \"confirmed_by\".\"authy_id\" AS \"confirmed_by__authy_id\", \"confirmed_by\".\"last_sign_in_with_authy\" AS \"confirmed_by__last_sign_in_with_authy\", \"confirmed_by\".\"authy_status\" AS \"confirmed_by__authy_status\", \"confirmed_by\".\"email_verified\" AS \"confirmed_by__email_verified\", \"confirmed_by\".\"initial_password_updated\" AS \"confirmed_by__initial_password_updated\", \"confirmed_by\".\"force_password_update\" AS \"confirmed_by__force_password_update\", \"confirmed_by\".\"grace_period\" AS \"confirmed_by__grace_period\", \"confirmed_by\".\"awaiting_second_factor\" AS \"confirmed_by__awaiting_second_factor\", \"confirmed_by\".\"role\" AS \"confirmed_by__role\", \"cancelled_by\".\"id\" AS \"cancelled_by__id\", \"cancelled_by\".\"created_at\" AS \"cancelled_by__created_at\", \"cancelled_by\".\"updated_at\" AS \"cancelled_by__updated_at\", \"cancelled_by\".\"name\" AS \"cancelled_by__name\", \"cancelled_by\".\"email\" AS \"cancelled_by__email\", \"cancelled_by\".\"phone_number\" AS \"cancelled_by__phone_number\", \"cancelled_by\".\"encrypted_password\" AS \"cancelled_by__encrypted_password\", \"cancelled_by\".\"reset_password_token\" AS \"cancelled_by__reset_password_token\", \"cancelled_by\".\"reset_password_sent_at\" AS \"cancelled_by__reset_password_sent_at\", \"cancelled_by\".\"remember_created_at\" AS \"cancelled_by__remember_created_at\", \"cancelled_by\".\"sign_in_count\" AS \"cancelled_by__sign_in_count\", \"cancelled_by\".\"current_sign_in_at\" AS \"cancelled_by__current_sign_in_at\", \"cancelled_by\".\"last_sign_in_at\" AS \"cancelled_by__last_sign_in_at\", \"cancelled_by\".\"current_sign_in_ip\" AS \"cancelled_by__current_sign_in_ip\", \"cancelled_by\".\"last_sign_in_ip\" AS \"cancelled_by__last_sign_in_ip\", \"cancelled_by\".\"institution_id\" AS \"cancelled_by__institution_id\", \"cancelled_by\".\"encrypted_api_secret_key\" AS \"cancelled_by__encrypted_api_secret_key\", \"cancelled_by\".\"password_changed_at\" AS \"cancelled_by__password_changed_at\", \"cancelled_by\".\"encrypted_otp_secret\" AS \"cancelled_by__encrypted_otp_secret\", \"cancelled_by\".\"encrypted_otp_secret_iv\" AS \"cancelled_by__encrypted_otp_secret_iv\", \"cancelled_by\".\"encrypted_otp_secret_salt\" AS \"cancelled_by__encrypted_otp_secret_salt\", \"cancelled_by\".\"encrypted_otp_sent_at\" AS \"cancelled_by__encrypted_otp_sent_at\", \"cancelled_by\".\"consumed_timestep\" AS \"cancelled_by__consumed_timestep\", \"cancelled_by\".\"otp_required_for_login\" AS \"cancelled_by__otp_required_for_login\", \"cancelled_by\".\"deactivated_at\" AS \"cancelled_by__deactivated_at\", \"cancelled_by\".\"enabled_two_factor\" AS \"cancelled_by__enabled_two_factor\", \"cancelled_by\".\"confirmed_two_factor\" AS \"cancelled_by__confirmed_two_factor\", \"cancelled_by\".\"otp_backup_codes\" AS \"cancelled_by__otp_backup_codes\", \"cancelled_by\".\"authy_id\" AS \"cancelled_by__authy_id\", \"cancelled_by\".\"last_sign_in_with_authy\" AS \"cancelled_by__last_sign_in_with_authy\", \"cancelled_by\".\"authy_status\" AS \"cancelled_by__authy_status\", \"cancelled_by\".\"email_verified\" AS \"cancelled_by__email_verified\", \"cancelled_by\".\"initial_password_updated\" AS \"cancelled_by__initial_password_updated\", \"cancelled_by\".\"force_password_update\" AS \"cancelled_by__force_password_update\", \"cancelled_by\".\"grace_period\" AS \"cancelled_by__grace_period\", \"cancelled_by\".\"awaiting_second_factor\" AS \"cancelled_by__awaiting_second_factor\", \"cancelled_by\".\"role\" AS \"cancelled_by__role\", \"work_item\".\"id\" AS \"work_item__id\", \"work_item\".\"created_at\" AS \"work_item__created_at\", \"work_item\".\"updated_at\" AS \"work_item__updated_at\", \"work_item\".\"name\" AS \"work_item__name\", \"work_item\".\"etag\" AS \"work_item__etag\", \"work_item\".\"institution_id\" AS \"work_item__institution_id\", \"work_item\".\"intellectual_object_id\" AS \"work_item__intellectual_object_id\", \"work_item\".\"generic_file_id\" AS \"work_item__generic_file_id\", \"work_item\".\"bucket\" AS \"work_item__bucket\", \"work_item\".\"user\" AS \"work_item__user\", \"work_item\".\"note\" AS \"work_item__note\", \"work_item\".\"action\" AS \"work_item__action\", \"work_item\".\"stage\" AS \"work_item__stage\", \"work_item\".\"status\" AS \"work_item__status\", \"work_item\".\"outcome\" AS \"work_item__outcome\", \"work_item\".\"bag_date\" AS \"work_item__bag_date\", \"work_item\".\"date_processed\" AS \"work_item__date_processed\", \"work_item\".\"retry\" AS \"work_item__retry\", \"work_item\".\"node\" AS \"work_item__node\", \"work_item\".\"pid\" AS \"work_item__pid\", \"work_item\".\"needs_admin_review\" AS \"work_item__needs_admin_review\", \"work_item\".\"queued_at\" AS \"work_item__queued_at\", \"work_item\".\"size\" AS \"work_item__size\", \"work_item\".\"stage_started_at\" AS \"work_item__stage_started_at\", \"work_item\".\"aptrust_approver\" AS \"work_item__aptrust_approver\", \"work_item\".\"inst_approver\" AS \"work_item__inst_approver\" FROM \"deletion_requests\" AS \"deletion_request\" LEFT JOIN \"users\" AS \"requested_by\" ON \"requested_by\".\"id\" = \"deletion_request\".\"requested_by_id\" LEFT JOIN \"users\" AS \"confirmed_by\" ON \"confirmed_by\".\"id\" = \"deletion_request\".\"confirmed_by_id\" LEFT JOIN \"users\" AS \"cancelled_by\" ON \"cancelled_by\".\"id\" = \"deletion_request\".\"cancelled_by_id\" LEFT JOIN \"work_items\" AS \"work_item\" ON \"work_item\".\"id\" = \"deletion_request\".\"work_item_id\" WHERE ((\"deletion_request\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".*, \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" JOIN \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" ON (\"deletion_requests_generic_files\".\"deletion_request_id\") IN (1) WHERE (\"generic_file\".\"id\" = \"deletion_requests_generic_files\".\"generic_file_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".*, \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" FROM \"intellectual_objects\" AS \"intellectual_object\" JOIN \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" ON (\"deletion_requests_intellectual_objects\".\"deletion_request_id\") IN (1) WHERE (\"intellectual_object\".\"id\" = \"deletion_requests_intellectual_objects\".\"intellectual_object_id\")"}
{"level":"info","status":200,"method":"GET","path":"/deletions/show/1","ip":"","latency":27.579168,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"deletion_requests\" AS \"deletion_request\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_request\".\"id\", \"deletion_request\".\"institution_id\", \"deletion_request\".\"requested_by_id\", \"deletion_request\".\"requested_at\", \"deletion_request\".\"encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\", \"deletion_request\".\"confirmed_at\", \"deletion_request\".\"cancelled_by_id\", \"deletion_request\".\"cancelled_at\", \"deletion_request\".\"work_item_id\", \"requested_by\".\"id\" AS \"requested_by__id\", \"requested_by\".\"created_at\" AS \"requested_by__created_at\", \"requested_by\".\"updated_at\" AS \"requested_by__updated_at\", \"requested_by\".\"name\" AS \"requested_by__name\", \"requested_by\".\"email\" AS \"requested_by__email\", \"requested_by\".\"phone_number\" AS \"requested_by__phone_number\", \"requested_by\".\"encrypted_password\" AS \"requested_by__encrypted_password\", \"requested_by\".\"reset_password_token\" AS \"requested_by__reset_password_token\", \"requested_by\".\"reset_password_sent_at\" AS \"requested_by__reset_password_sent_at\", \"requested_by\".\"remember_created_at\" AS \"requested_by__remember_created_at\", \"requested_by\".\"sign_in_count\" AS \"requested_by__sign_in_count\", \"requested_by\".\"current_sign_in_at\" AS \"requested_by__current_sign_in_at\", \"requested_by\".\"last_sign_in_at\" AS \"requested_by__last_sign_in_at\", \"requested_by\".\"current_sign_in_ip\" AS \"requested_by__current_sign_in_ip\", \"requested_by\".\"last_sign_in_ip\" AS \"requested_by__last_sign_in_ip\", \"requested_by\".\"institution_id\" AS \"requested_by__institution_id\", \"requested_by\".\"encrypted_api_secret_key\" AS \"requested_by__encrypted_api_secret_key\", \"requested_by\".\"password_changed_at\" AS \"requested_by__password_changed_at\", \"requested_by\".\"encrypted_otp_secret\" AS \"requested_by__encrypted_otp_secret\", \"requested_by\".\"encrypted_otp_secret_iv\" AS \"requested_by__encrypted_otp_secret_iv\", \"requested_by\".\"encrypted_otp_secret_salt\" AS \"requested_by__encrypted_otp_secret_salt\", \"requested_by\".\"encrypted_otp_sent_at\" AS \"requested_by__encrypted_otp_sent_at\", \"requested_by\".\"consumed_timestep\" AS \"requested_by__consumed_timestep\", \"requested_by\".\"otp_required_for_login\" AS \"requested_by__otp_required_for_login\", \"requested_by\".\"deactivated_at\" AS \"requested_by__deactivated_at\", \"requested_by\".\"enabled_two_factor\" AS \"requested_by__enabled_two_factor\", \"requested_by\".\"confirmed_two_factor\" AS \"requested_by__confirmed_two_factor\", \"requested_by\".\"otp_backup_codes\" AS \"requested_by__otp_backup_codes\", \"requested_by\".\"authy_id\" AS \"requested_by__authy_id\", \"requested_by\".\"last_sign_in_with_authy\" AS \"requested_by__last_sign_in_with_authy\", \"requested_by\".\"authy_status\" AS \"requested_by__authy_status\", \"requested_by\".\"email_verified\" AS \"requested_by__email_verified\", \"requested_by\".\"initial_password_updated\" AS \"requested_by__initial_password_updated\", \"requested_by\".\"force_password_update\" AS \"requested_by__force_password_update\", \"requested_by\".\"grace_period\" AS \"requested_by__grace_period\", \"requested_by\".\"awaiting_second_factor\" AS \"requested_by__awaiting_second_factor\", \"requested_by\".\"role\" AS \"requested_by__role\", \"confirmed_by\".\"id\" AS \"confirmed_by__id\", \"confirmed_by\".\"created_at\" AS \"confirmed_by__created_at\", \"confirmed_by\".\"updated_at\" AS \"confirmed_by__updated_at\", \"confirmed_by\".\"name\" AS \"confirmed_by__name\", \"confirmed_by\".\"email\" AS \"confirmed_by__email\", \"confirmed_by\".\"phone_number\" AS \"confirmed_by__phone_number\", \"confirmed_by\".\"encrypted_password\" AS \"confirmed_by__encrypted_password\", \"confirmed_by\".\"reset_password_token\" AS \"confirmed_by__reset_password_token\", \"confirmed_by\".\"reset_password_sent_at\" AS \"confirmed_by__reset_password_sent_at\", \"confirmed_by\".\"remember_created_at\" AS \"confirmed_by__remember_created_at\", \"confirmed_by\".\"sign_in_count\" AS \"confirmed_by__sign_in_count\", \"confirmed_by\".\"current_sign_in_at\" AS \"confirmed_by__current_sign_in_at\", \"confirmed_by\".\"last_sign_in_at\" AS \"confirmed_by__last_sign_in_at\", \"confirmed_by\".\"current_sign_in_ip\" AS \"confirmed_by__current_sign_in_ip\", \"confirmed_by\".\"last_sign_in_ip\" AS \"confirmed_by__last_sign_in_ip\", \"confirmed_by\".\"institution_id\" AS \"confirmed_by__institution_id\", \"confirmed_by\".\"encrypted_api_secret_key\" AS \"confirmed_by__encrypted_api_secret_key\", \"confirmed_by\".\"password_changed_at\" AS \"confirmed_by__password_changed_at\", \"confirmed_by\".\"encrypted_otp_secret\" AS \"confirmed_by__encrypted_otp_secret\", \"confirmed_by\".\"encrypted_otp_secret_iv\" AS \"confirmed_by__encrypted_otp_secret_iv\", \"confirmed_by\".\"encrypted_otp_secret_salt\" AS \"confirmed_by__encrypted_otp_secret_salt\", \"confirmed_by\".\"encrypted_otp_sent_at\" AS \"confirmed_by__encrypted_otp_sent_at\", \"confirmed_by\".\"consumed_timestep\" AS \"confirmed_by__consumed_timestep\", \"confirmed_by\".\"otp_required_for_login\" AS \"confirmed_by__otp_required_for_login\", \"confirmed_by\".\"deactivated_at\" AS \"confirmed_by__deactivated_at\", \"confirmed_by\".\"enabled_two_factor\" AS \"confirmed_by__enabled_two_factor\", \"confirmed_by\".\"confirmed_two_factor\" AS \"confirmed_by__confirmed_two_factor\", \"confirmed_by\".\"otp_backup_codes\" AS \"confirmed_by__otp_backup_codes\", \"confirmed_by\".\"authy_id\" AS \"confirmed_by__authy_id\", \"confirmed_by\".\"last_sign_in_with_authy\" AS \"confirmed_by__last_sign_in_with_authy\", \"confirmed_by\".\"authy_status\" AS \"confirmed_by__authy_status\", \"confirmed_by\".\"email_verified\" AS \"confirmed_by__email_verified\", \"confirmed_by\".\"initial_password_updated\" AS \"confirmed_by__initial_password_updated\", \"confirmed_by\".\"force_password_update\" AS \"confirmed_by__force_password_update\", \"confirmed_by\".\"grace_period\" AS \"confirmed_by__grace_period\", \"confirmed_by\".\"awaiting_second_factor\" AS \"confirmed_by__awaiting_second_factor\", \"confirmed_by\".\"role\" AS \"confirmed_by__role\", \"cancelled_by\".\"id\" AS \"cancelled_by__id\", \"cancelled_by\".\"created_at\" AS \"cancelled_by__created_at\", \"cancelled_by\".\"updated_at\" AS \"cancelled_by__updated_at\", \"cancelled_by\".\"name\" AS \"cancelled_by__name\", \"cancelled_by\".\"email\" AS \"cancelled_by__email\", \"cancelled_by\".\"phone_number\" AS \"cancelled_by__phone_number\", \"cancelled_by\".\"encrypted_password\" AS \"cancelled_by__encrypted_password\", \"cancelled_by\".\"reset_password_token\" AS \"cancelled_by__reset_password_token\", \"cancelled_by\".\"reset_password_sent_at\" AS \"cancelled_by__reset_password_sent_at\", \"cancelled_by\".\"remember_created_at\" AS \"cancelled_by__remember_created_at\", \"cancelled_by\".\"sign_in_count\" AS \"cancelled_by__sign_in_count\", \"cancelled_by\".\"current_sign_in_at\" AS \"cancelled_by__current_sign_in_at\", \"cancelled_by\".\"last_sign_in_at\" AS \"cancelled_by__last_sign_in_at\", \"cancelled_by\".\"current_sign_in_ip\" AS \"cancelled_by__current_sign_in_ip\", \"cancelled_by\".\"last_sign_in_ip\" AS \"cancelled_by__last_sign_in_ip\", \"cancelled_by\".\"institution_id\" AS \"cancelled_by__institution_id\", \"cancelled_by\".\"encrypted_api_secret_key\" AS \"cancelled_by__encrypted_api_secret_key\", \"cancelled_by\".\"password_changed_at\" AS \"cancelled_by__password_changed_at\", \"cancelled_by\".\"encrypted_otp_secret\" AS \"cancelled_by__encrypted_otp_secret\", \"cancelled_by\".\"encrypted_otp_secret_iv\" AS \"cancelled_by__encrypted_otp_secret_iv\", \"cancelled_by\".\"encrypted_otp_secret_salt\" AS \"cancelled_by__encrypted_otp_secret_salt\", \"cancelled_by\".\"encrypted_otp_sent_at\" AS \"cancelled_by__encrypted_otp_sent_at\", \"cancelled_by\".\"consumed_timestep\" AS \"cancelled_by__consumed_timestep\", \"cancelled_by\".\"otp_required_for_login\" AS \"cancelled_by__otp_required_for_login\", \"cancelled_by\".\"deactivated_at\" AS \"cancelled_by__deactivated_at\", \"cancelled_by\".\"enabled_two_factor\" AS \"cancelled_by__enabled_two_factor\", \"cancelled_by\".\"confirmed_two_factor\" AS \"cancelled_by__confirmed_two_factor\", \"cancelled_by\".\"otp_backup_codes\" AS \"cancelled_by__otp_backup_codes\", \"cancelled_by\".\"authy_id\" AS \"cancelled_by__authy_id\", \"cancelled_by\".\"last_sign_in_with_authy\" AS \"cancelled_by__last_sign_in_with_authy\", \"cancelled_by\".\"authy_status\" AS \"cancelled_by__authy_status\", \"cancelled_by\".\"email_verified\" AS \"cancelled_by__email_verified\", \"cancelled_by\".\"initial_password_updated\" AS \"cancelled_by__initial_password_updated\", \"cancelled_by\".\"force_password_update\" AS \"cancelled_by__force_password_update\", \"cancelled_by\".\"grace_period\" AS \"cancelled_by__grace_period\", \"cancelled_by\".\"awaiting_second_factor\" AS \"cancelled_by__awaiting_second_factor\", \"cancelled_by\".\"role\" AS \"cancelled_by__role\", \"work_item\".\"id\" AS \"work_item__id\", \"work_item\".\"created_at\" AS \"work_item__created_at\", \"work_item\".\"updated_at\" AS \"work_item__updated_at\", \"work_item\".\"name\" AS \"work_item__name\", \"work_item\".\"etag\" AS \"work_item__etag\", \"work_item\".\"institution_id\" AS \"work_item__institution_id\", \"work_item\".\"intellectual_object_id\" AS \"work_item__intellectual_object_id\", \"work_item\".\"generic_file_id\" AS \"work_item__generic_file_id\", \"work_item\".\"bucket\" AS \"work_item__bucket\", \"work_item\".\"user\" AS \"work_item__user\", \"work_item\".\"note\" AS \"work_item__note\", \"work_item\".\"action\" AS \"work_item__action\", \"work_item\".\"stage\" AS \"work_item__stage\", \"work_item\".\"status\" AS \"work_item__status\", \"work_item\".\"outcome\" AS \"work_item__outcome\", \"work_item\".\"bag_date\" AS \"work_item__bag_date\", \"work_item\".\"date_processed\" AS \"work_item__date_processed\", \"work_item\".\"retry\" AS \"work_item__retry\", \"work_item\".\"node\" AS \"work_item__node\", \"work_item\".\"pid\" AS \"work_item__pid\", \"work_item\".\"needs_admin_review\" AS \"work_item__needs_admin_review\", \"work_item\".\"queued_at\" AS \"work_item__queued_at\", \"work_item\".\"size\" AS \"work_item__size\", \"work_item\".\"stage_started_at\" AS \"work_item__stage_started_at\", \"work_item\".\"aptrust_approver\" AS \"work_item__aptrust_approver\", \"work_item\".\"inst_approver\" AS \"work_item__inst_approver\" FROM \"deletion_requests\" AS \"deletion_request\" LEFT JOIN \"users\" AS \"requested_by\" ON \"requested_by\".\"id\" = \"deletion_request\".\"requested_by_id\" LEFT JOIN \"users\" AS \"confirmed_by\" ON \"confirmed_by\".\"id\" = \"deletion_request\".\"confirmed_by_id\" LEFT JOIN \"users\" AS \"cancelled_by\" ON \"cancelled_by\".\"id\" = \"deletion_request\".\"cancelled_by_id\" LEFT JOIN \"work_items\" AS \"work_item\" ON \"work_item\".\"id\" = \"deletion_request\".\"work_item_id\" WHERE ((\"deletion_request\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".*, \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" JOIN \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" ON (\"deletion_requests_generic_files\".\"deletion_request_id\") IN (1) WHERE (\"generic_file\".\"id\" = \"deletion_requests_generic_files\".\"generic_file_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".*, \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" FROM \"intellectual_objects\" AS \"intellectual_object\" JOIN \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" ON (\"deletion_requests_intellectual_objects\".\"deletion_request_id\") IN (1) WHERE (\"intellectual_object\".\"id\" = \"deletion_requests_intellectual_objects\".\"intellectual_object_id\")"}
{"level":"info","status":200,"method":"GET","path":"/deletions/show/1","ip":"","latency":24.950983,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"deletion_requests\" AS \"deletion_request\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_request\".\"id\", \"deletion_request\".\"institution_id\", \"deletion_request\".\"requested_by_id\", \"deletion_request\".\"requested_at\", \"deletion_request\".\"encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\", \"deletion_request\".\"confirmed_at\", \"deletion_request\".\"cancelled_by_id\", \"deletion_request\".\"cancelled_at\", \"deletion_request\".\"work_item_id\", \"requested_by\".\"id\" AS \"requested_by__id\", \"requested_by\".\"created_at\" AS \"requested_by__created_at\", \"requested_by\".\"updated_at\" AS \"requested_by__updated_at\", \"requested_by\".\"name\" AS \"requested_by__name\", \"requested_by\".\"email\" AS \"requested_by__email\", \"requested_by\".\"phone_number\" AS \"requested_by__phone_number\", \"requested_by\".\"encrypted_password\" AS \"requested_by__encrypted_password\", \"requested_by\".\"reset_password_token\" AS \"requested_by__reset_password_token\", \"requested_by\".\"reset_password_sent_at\" AS \"requested_by__reset_password_sent_at\", \"requested_by\".\"remember_created_at\" AS \"requested_by__remember_created_at\", \"requested_by\".\"sign_in_count\" AS \"requested_by__sign_in_count\", \"requested_by\".\"current_sign_in_at\" AS \"requested_by__current_sign_in_at\", \"requested_by\".\"last_sign_in_at\" AS \"requested_by__last_sign_in_at\", \"requested_by\".\"current_sign_in_ip\" AS \"requested_by__current_sign_in_ip\", \"requested_by\".\"last_sign_in_ip\" AS \"requested_by__last_sign_in_ip\", \"requested_by\".\"institution_id\" AS \"requested_by__institution_id\", \"requested_by\".\"encrypted_api_secret_key\" AS \"requested_by__encrypted_api_secret_key\", \"requested_by\".\"password_changed_at\" AS \"requested_by__password_changed_at\", \"requested_by\".\"encrypted_otp_secret\" AS \"requested_by__encrypted_otp_secret\", \"requested_by\".\"encrypted_otp_secret_iv\" AS \"requested_by__encrypted_otp_secret_iv\", \"requested_by\".\"encrypted_otp_secret_salt\" AS \"requested_by__encrypted_otp_secret_salt\", \"requested_by\".\"encrypted_otp_sent_at\" AS \"requested_by__encrypted_otp_sent_at\", \"requested_by\".\"consumed_timestep\" AS \"requested_by__consumed_timestep\", \"requested_by\".\"otp_required_for_login\" AS \"requested_by__otp_required_for_login\", \"requested_by\".\"deactivated_at\" AS \"requested_by__deactivated_at\", \"requested_by\".\"enabled_two_factor\" AS \"requested_by__enabled_two_factor\", \"requested_by\".\"confirmed_two_factor\" AS \"requested_by__confirmed_two_factor\", \"requested_by\".\"otp_backup_codes\" AS \"requested_by__otp_backup_codes\", \"requested_by\".\"authy_id\" AS \"requested_by__authy_id\", \"requested_by\".\"last_sign_in_with_authy\" AS \"requested_by__last_sign_in_with_authy\", \"requested_by\".\"authy_status\" AS \"requested_by__authy_status\", \"requested_by\".\"email_verified\" AS \"requested_by__email_verified\", \"requested_by\".\"initial_password_updated\" AS \"requested_by__initial_password_updated\", \"requested_by\".\"force_password_update\" AS \"requested_by__force_password_update\", \"requested_by\".\"grace_period\" AS \"requested_by__grace_period\", \"requested_by\".\"awaiting_second_factor\" AS \"requested_by__awaiting_second_factor\", \"requested_by\".\"role\" AS \"requested_by__role\", \"confirmed_by\".\"id\" AS \"confirmed_by__id\", \"confirmed_by\".\"created_at\" AS \"confirmed_by__created_at\", \"confirmed_by\".\"updated_at\" AS \"confirmed_by__updated_at\", \"confirmed_by\".\"name\" AS \"confirmed_by__name\", \"confirmed_by\".\"email\" AS \"confirmed_by__email\", \"confirmed_by\".\"phone_number\" AS \"confirmed_by__phone_number\", \"confirmed_by\".\"encrypted_password\" AS \"confirmed_by__encrypted_password\", \"confirmed_by\".\"reset_password_token\" AS \"confirmed_by__reset_password_token\", \"confirmed_by\".\"reset_password_sent_at\" AS \"confirmed_by__reset_password_sent_at\", \"confirmed_by\".\"remember_created_at\" AS \"confirmed_by__remember_created_at\", \"confirmed_by\".\"sign_in_count\" AS \"confirmed_by__sign_in_count\", \"confirmed_by\".\"current_sign_in_at\" AS \"confirmed_by__current_sign_in_at\", \"confirmed_by\".\"last_sign_in_at\" AS \"confirmed_by__last_sign_in_at\", \"confirmed_by\".\"current_sign_in_ip\" AS \"confirmed_by__current_sign_in_ip\", \"confirmed_by\".\"last_sign_in_ip\" AS \"confirmed_by__last_sign_in_ip\", \"confirmed_by\".\"institution_id\" AS \"confirmed_by__institution_id\", \"confirmed_by\".\"encrypted_api_secret_key\" AS \"confirmed_by__encrypted_api_secret_key\", \"confirmed_by\".\"password_changed_at\" AS \"confirmed_by__password_changed_at\", \"confirmed_by\".\"encrypted_otp_secret\" AS \"confirmed_by__encrypted_otp_secret\", \"confirmed_by\".\"encrypted_otp_secret_iv\" AS \"confirmed_by__encrypted_otp_secret_iv\", \"confirmed_by\".\"encrypted_otp_secret_salt\" AS \"confirmed_by__encrypted_otp_secret_salt\", \"confirmed_by\".\"encrypted_otp_sent_at\" AS \"confirmed_by__encrypted_otp_sent_at\", \"confirmed_by\".\"consumed_timestep\" AS \"confirmed_by__consumed_timestep\", \"confirmed_by\".\"otp_required_for_login\" AS \"confirmed_by__otp_required_for_login\", \"confirmed_by\".\"deactivated_at\" AS \"confirmed_by__deactivated_at\", \"confirmed_by\".\"enabled_two_factor\" AS \"confirmed_by__enabled_two_factor\", \"confirmed_by\".\"confirmed_two_factor\" AS \"confirmed_by__confirmed_two_factor\", \"confirmed_by\".\"otp_backup_codes\" AS \"confirmed_by__otp_backup_codes\", \"confirmed_by\".\"authy_id\" AS \"confirmed_by__authy_id\", \"confirmed_by\".\"last_sign_in_with_authy\" AS \"confirmed_by__last_sign_in_with_authy\", \"confirmed_by\".\"authy_status\" AS \"confirmed_by__authy_status\", \"confirmed_by\".\"email_verified\" AS \"confirmed_by__email_verified\", \"confirmed_by\".\"initial_password_updated\" AS \"confirmed_by__initial_password_updated\", \"confirmed_by\".\"force_password_update\" AS \"confirmed_by__force_password_update\", \"confirmed_by\".\"grace_period\" AS \"confirmed_by__grace_period\", \"confirmed_by\".\"awaiting_second_factor\" AS \"confirmed_by__awaiting_second_factor\", \"confirmed_by\".\"role\" AS \"confirmed_by__role\", \"cancelled_by\".\"id\" AS \"cancelled_by__id\", \"cancelled_by\".\"created_at\" AS \"cancelled_by__created_at\", \"cancelled_by\".\"updated_at\" AS \"cancelled_by__updated_at\", \"cancelled_by\".\"name\" AS \"cancelled_by__name\", \"cancelled_by\".\"email\" AS \"cancelled_by__email\", \"cancelled_by\".\"phone_number\" AS \"cancelled_by__phone_number\", \"cancelled_by\".\"encrypted_password\" AS \"cancelled_by__encrypted_password\", \"cancelled_by\".\"reset_password_token\" AS \"cancelled_by__reset_password_token\", \"cancelled_by\".\"reset_password_sent_at\" AS \"cancelled_by__reset_password_sent_at\", \"cancelled_by\".\"remember_created_at\" AS \"cancelled_by__remember_created_at\", \"cancelled_by\".\"sign_in_count\" AS \"cancelled_by__sign_in_count\", \"cancelled_by\".\"current_sign_in_at\" AS \"cancelled_by__current_sign_in_at\", \"cancelled_by\".\"last_sign_in_at\" AS \"cancelled_by__last_sign_in_at\", \"cancelled_by\".\"current_sign_in_ip\" AS \"cancelled_by__current_sign_in_ip\", \"cancelled_by\".\"last_sign_in_ip\" AS \"cancelled_by__last_sign_in_ip\", \"cancelled_by\".\"institution_id\" AS \"cancelled_by__institution_id\", \"cancelled_by\".\"encrypted_api_secret_key\" AS \"cancelled_by__encrypted_api_secret_key\", \"cancelled_by\".\"password_changed_at\" AS \"cancelled_by__password_changed_at\", \"cancelled_by\".\"encrypted_otp_secret\" AS \"cancelled_by__encrypted_otp_secret\", \"cancelled_by\".\"encrypted_otp_secret_iv\" AS \"cancelled_by__encrypted_otp_secret_iv\", \"cancelled_by\".\"encrypted_otp_secret_salt\" AS \"cancelled_by__encrypted_otp_secret_salt\", \"cancelled_by\".\"encrypted_otp_sent_at\" AS \"cancelled_by__encrypted_otp_sent_at\", \"cancelled_by\".\"consumed_timestep\" AS \"cancelled_by__consumed_timestep\", \"cancelled_by\".\"otp_required_for_login\" AS \"cancelled_by__otp_required_for_login\", \"cancelled_by\".\"deactivated_at\" AS \"cancelled_by__deactivated_at\", \"cancelled_by\".\"enabled_two_factor\" AS \"cancelled_by__enabled_two_factor\", \"cancelled_by\".\"confirmed_two_factor\" AS \"cancelled_by__confirmed_two_factor\", \"cancelled_by\".\"otp_backup_codes\" AS \"cancelled_by__otp_backup_codes\", \"cancelled_by\".\"authy_id\" AS \"cancelled_by__authy_id\", \"cancelled_by\".\"last_sign_in_with_authy\" AS \"cancelled_by__last_sign_in_with_authy\", \"cancelled_by\".\"authy_status\" AS \"cancelled_by__authy_status\", \"cancelled_by\".\"email_verified\" AS \"cancelled_by__email_verified\", \"cancelled_by\".\"initial_password_updated\" AS \"cancelled_by__initial_password_updated\", \"cancelled_by\".\"force_password_update\" AS \"cancelled_by__force_password_update\", \"cancelled_by\".\"grace_period\" AS \"cancelled_by__grace_period\", \"cancelled_by\".\"awaiting_second_factor\" AS \"cancelled_by__awaiting_second_factor\", \"cancelled_by\".\"role\" AS \"cancelled_by__role\", \"work_item\".\"id\" AS \"work_item__id\", \"work_item\".\"created_at\" AS \"work_item__created_at\", \"work_item\".\"updated_at\" AS \"work_item__updated_at\", \"work_item\".\"name\" AS \"work_item__name\", \"work_item\".\"etag\" AS \"work_item__etag\", \"work_item\".\"institution_id\" AS \"work_item__institution_id\", \"work_item\".\"intellectual_object_id\" AS \"work_item__intellectual_object_id\", \"work_item\".\"generic_file_id\" AS \"work_item__generic_file_id\", \"work_item\".\"bucket\" AS \"work_item__bucket\", \"work_item\".\"user\" AS \"work_item__user\", \"work_item\".\"note\" AS \"work_item__note\", \"work_item\".\"action\" AS \"work_item__action\", \"work_item\".\"stage\" AS \"work_item__stage\", \"work_item\".\"status\" AS \"work_item__status\", \"work_item\".\"outcome\" AS \"work_item__outcome\", \"work_item\".\"bag_date\" AS \"work_item__bag_date\", \"work_item\".\"date_processed\" AS \"work_item__date_processed\", \"work_item\".\"retry\" AS \"work_item__retry\", \"work_item\".\"node\" AS \"work_item__node\", \"work_item\".\"pid\" AS \"work_item__pid\", \"work_item\".\"needs_admin_review\" AS \"work_item__needs_admin_review\", \"work_item\".\"queued_at\" AS \"work_item__queued_at\", \"work_item\".\"size\" AS \"work_item__size\", \"work_item\".\"stage_started_at\" AS \"work_item__stage_started_at\", \"work_item\".\"aptrust_approver\" AS \"work_item__aptrust_approver\", \"work_item\".\"inst_approver\" AS \"work_item__inst_approver\" FROM \"deletion_requests\" AS \"deletion_request\" LEFT JOIN \"users\" AS \"requested_by\" ON \"requested_by\".\"id\" = \"deletion_request\".\"requested_by_id\" LEFT JOIN \"users\" AS \"confirmed_by\" ON \"confirmed_by\".\"id\" = \"deletion_request\".\"confirmed_by_id\" LEFT JOIN \"users\" AS \"cancelled_by\" ON \"cancelled_by\".\"id\" = \"deletion_request\".\"cancelled_by_id\" LEFT JOIN \"work_items\" AS \"work_item\" ON \"work_item\".\"id\" = \"deletion_request\".\"work_item_id\" WHERE ((\"deletion_request\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".*, \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" JOIN \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" ON (\"deletion_requests_generic_files\".\"deletion_request_id\") IN (1) WHERE (\"generic_file\".\"id\" = \"deletion_requests_generic_files\".\"generic_file_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".*, \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" FROM \"intellectual_objects\" AS \"intellectual_object\" JOIN \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" ON (\"deletion_requests_intellectual_objects\".\"deletion_request_id\") IN (1) WHERE (\"intellectual_object\".\"id\" = \"deletion_requests_intellectual_objects\".\"intellectual_object_id\")"}
{"level":"info","status":200,"method":"GET","path":"/deletions/show/1","ip":"","latency":25.642525,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_request_view\".\"id\", \"deletion_request_view\".\"institution_id\", \"deletion_request_view\".\"institution_name\", \"deletion_request_view\".\"institution_identifier\", \"deletion_request_view\".\"requested_by_id\", \"deletion_request_view\".\"requested_by_name\", \"deletion_request_view\".\"requested_by_email\", \"deletion_request_view\".\"requested_at\", \"deletion_request_view\".\"confirmed_by_id\", \"deletion_request_view\".\"confirmed_by_name\", \"deletion_request_view\".\"confirmed_by_email\", \"deletion_request_view\".\"confirmed_at\", \"deletion_request_view\".\"cancelled_by_id\", \"deletion_request_view\".\"cancelled_by_name\", \"deletion_request_view\".\"cancelled_by_email\", \"deletion_request_view\".\"cancelled_at\", \"deletion_request_view\".\"file_count\", \"deletion_request_view\".\"object_count\", \"deletion_request_view\".\"work_item_id\", \"deletion_request_view\".\"stage\", \"deletion_request_view\".\"status\", \"deletion_request_view\".\"date_processed\", \"deletion_request_view\".\"size\", \"deletion_request_view\".\"note\" FROM \"deletion_requests_view\" AS \"deletion_request_view\" ORDER BY \"requested_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"TypeName (1): DeletionRequestView"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"Cannot query count view for type DeletionRequestView: type is not supported for view count"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"WebUI: Using standard count query for ''"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT count(*) FROM \"deletion_requests_view\" AS \"deletion_request_view\""}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/deletions/","ip":"","latency":31.928087,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_request_view\".\"id\", \"deletion_request_view\".\"institution_id\", \"deletion_request_view\".\"institution_name\", \"deletion_request_view\".\"institution_identifier\", \"deletion_request_view\".\"requested_by_id\", \"deletion_request_view\".\"requested_by_name\", \"deletion_request_view\".\"requested_by_email\", \"deletion_request_view\".\"requested_at\", \"deletion_request_view\".\"confirmed_by_id\", \"deletion_request_view\".\"confirmed_by_name\", \"deletion_request_view\".\"confirmed_by_email\", \"deletion_request_view\".\"confirmed_at\", \"deletion_request_view\".\"cancelled_by_id\", \"deletion_request_view\".\"cancelled_by_name\", \"deletion_request_view\".\"cancelled_by_email\", \"deletion_request_view\".\"cancelled_at\", \"deletion_request_view\".\"file_count\", \"deletion_request_view\".\"object_count\", \"deletion_request_view\".\"work_item_id\", \"deletion_request_view\".\"stage\", \"deletion_request_view\".\"status\", \"deletion_request_view\".\"date_processed\", \"deletion_request_view\".\"size\", \"deletion_request_view\".\"note\" FROM \"deletion_requests_view\" AS \"deletion_request_view\" WHERE ((institution_id = 2)) ORDER BY \"requested_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"TypeName (1): DeletionRequestView"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"Cannot query count view for type DeletionRequestView: type is not supported for view count"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"WebUI: Using standard count query for '(institution_id = ?)'"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT count(*) FROM \"deletion_requests_view\" AS \"deletion_request_view\" WHERE ((institution_id = 2))"}
{"level":"info","status":200,"method":"GET","path":"/deletions/","ip":"","latency":26.542309,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_request_view\".\"id\", \"deletion_request_view\".\"institution_id\", \"deletion_request_view\".\"institution_name\", \"deletion_request_view\".\"institution_identifier\", \"deletion_request_view\".\"requested_by_id\", \"deletion_request_view\".\"requested_by_name\", \"deletion_request_view\".\"requested_by_email\", \"deletion_request_view\".\"requested_at\", \"deletion_request_view\".\"confirmed_by_id\", \"deletion_request_view\".\"confirmed_by_name\", \"deletion_request_view\".\"confirmed_by_email\", \"deletion_request_view\".\"confirmed_at\", \"deletion_request_view\".\"cancelled_by_id\", \"deletion_request_view\".\"cancelled_by_name\", \"deletion_request_view\".\"cancelled_by_email\", \"deletion_request_view\".\"cancelled_at\", \"deletion_request_view\".\"file_count\", \"deletion_request_view\".\"object_count\", \"deletion_request_view\".\"work_item_id\", \"deletion_request_view\".\"stage\", \"deletion_request_view\".\"status\", \"deletion_request_view\".\"date_processed\", \"deletion_request_view\".\"size\", \"deletion_request_view\".\"note\" FROM \"deletion_requests_view\" AS \"deletion_request_view\" WHERE ((institution_id = 2)) ORDER BY \"requested_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"TypeName (1): DeletionRequestView"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"Cannot query count view for type DeletionRequestView: type is not supported for view count"}
{"level":"info","time":"2022-06-22T13:30:45-04:00","message":"WebUI: Using standard count query for '(institution_id = ?)'"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT count(*) FROM \"deletion_requests_view\" AS \"deletion_request_view\" WHERE ((institution_id = 2))"}
{"level":"info","status":200,"method":"GET","path":"/deletions/","ip":"","latency":29.033779,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"intellectual_objects\" AS \"intellectual_object\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"intellectual_object\".\"institution_id\" WHERE ((institution_id = 2) AND (\"intellectual_object\".\"state\" = 'A')) ORDER BY \"id\" asc LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: INSERT INTO \"deletion_requests\" (\"id\", \"institution_id\", \"requested_by_id\", \"requested_at\", \"encrypted_confirmation_token\", \"confirmed_by_id\", \"confirmed_at\", \"cancelled_by_id\", \"cancelled_at\", \"work_item_id\") VALUES (DEFAULT, 2, 2, '2022-06-22 17:30:45.690795+00:00:00', '$2a$10$NaSQAkmMGRcg.JDjbm.mZue0xGRgf4Qv9hBiZtXdxhDSQm8chNhUO', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING \"id\", \"confirmed_by_id\", \"confirmed_at\", \"cancelled_by_id\", \"cancelled_at\", \"work_item_id\""}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: insert into deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id) values (4, 1) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"deletion_requests\" AS \"deletion_request\" WHERE (id = 4)"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_request\".\"id\", \"deletion_request\".\"institution_id\", \"deletion_request\".\"requested_by_id\", \"deletion_request\".\"requested_at\", \"deletion_request\".\"encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\", \"deletion_request\".\"confirmed_at\", \"deletion_request\".\"cancelled_by_id\", \"deletion_request\".\"cancelled_at\", \"deletion_request\".\"work_item_id\", \"requested_by\".\"id\" AS \"requested_by__id\", \"requested_by\".\"created_at\" AS \"requested_by__created_at\", \"requested_by\".\"updated_at\" AS \"requested_by__updated_at\", \"requested_by\".\"name\" AS \"requested_by__name\", \"requested_by\".\"email\" AS \"requested_by__email\", \"requested_by\".\"phone_number\" AS \"requested_by__phone_number\", \"requested_by\".\"encrypted_password\" AS \"requested_by__encrypted_password\", \"requested_by\".\"reset_password_token\" AS \"requested_by__reset_password_token\", \"requested_by\".\"reset_password_sent_at\" AS \"requested_by__reset_password_sent_at\", \"requested_by\".\"remember_created_at\" AS \"requested_by__remember_created_at\", \"requested_by\".\"sign_in_count\" AS \"requested_by__sign_in_count\", \"requested_by\".\"current_sign_in_at\" AS \"requested_by__current_sign_in_at\", \"requested_by\".\"last_sign_in_at\" AS \"requested_by__last_sign_in_at\", \"requested_by\".\"current_sign_in_ip\" AS \"requested_by__current_sign_in_ip\", \"requested_by\".\"last_sign_in_ip\" AS \"requested_by__last_sign_in_ip\", \"requested_by\".\"institution_id\" AS \"requested_by__institution_id\", \"requested_by\".\"encrypted_api_secret_key\" AS \"requested_by__encrypted_api_secret_key\", \"requested_by\".\"password_changed_at\" AS \"requested_by__password_changed_at\", \"requested_by\".\"encrypted_otp_secret\" AS \"requested_by__encrypted_otp_secret\", \"requested_by\".\"encrypted_otp_secret_iv\" AS \"requested_by__encrypted_otp_secret_iv\", \"requested_by\".\"encrypted_otp_secret_salt\" AS \"requested_by__encrypted_otp_secret_salt\", \"requested_by\".\"encrypted_otp_sent_at\" AS \"requested_by__encrypted_otp_sent_at\", \"requested_by\".\"consumed_timestep\" AS \"requested_by__consumed_timestep\", \"requested_by\".\"otp_required_for_login\" AS \"requested_by__otp_required_for_login\", \"requested_by\".\"deactivated_at\" AS \"requested_by__deactivated_at\", \"requested_by\".\"enabled_two_factor\" AS \"requested_by__enabled_two_factor\", \"requested_by\".\"confirmed_two_factor\" AS \"requested_by__confirmed_two_factor\", \"requested_by\".\"otp_backup_codes\" AS \"requested_by__otp_backup_codes\", \"requested_by\".\"authy_id\" AS \"requested_by__authy_id\", \"requested_by\".\"last_sign_in_with_authy\" AS \"requested_by__last_sign_in_with_authy\", \"requested_by\".\"authy_status\" AS \"requested_by__authy_status\", \"requested_by\".\"email_verified\" AS \"requested_by__email_verified\", \"requested_by\".\"initial_password_updated\" AS \"requested_by__initial_password_updated\", \"requested_by\".\"force_password_update\" AS \"requested_by__force_password_update\", \"requested_by\".\"grace_period\" AS \"requested_by__grace_period\", \"requested_by\".\"awaiting_second_factor\" AS \"requested_by__awaiting_second_factor\", \"requested_by\".\"role\" AS \"requested_by__role\", \"confirmed_by\".\"id\" AS \"confirmed_by__id\", \"confirmed_by\".\"created_at\" AS \"confirmed_by__created_at\", \"confirmed_by\".\"updated_at\" AS \"confirmed_by__updated_at\", \"confirmed_by\".\"name\" AS \"confirmed_by__name\", \"confirmed_by\".\"email\" AS \"confirmed_by__email\", \"confirmed_by\".\"phone_number\" AS \"confirmed_by__phone_number\", \"confirmed_by\".\"encrypted_password\" AS \"confirmed_by__encrypted_password\", \"confirmed_by\".\"reset_password_token\" AS \"confirmed_by__reset_password_token\", \"confirmed_by\".\"reset_password_sent_at\" AS \"confirmed_by__reset_password_sent_at\", \"confirmed_by\".\"remember_created_at\" AS \"confirmed_by__remember_created_at\", \"confirmed_by\".\"sign_in_count\" AS \"confirmed_by__sign_in_count\", \"confirmed_by\".\"current_sign_in_at\" AS \"confirmed_by__current_sign_in_at\", \"confirmed_by\".\"last_sign_in_at\" AS \"confirmed_by__last_sign_in_at\", \"confirmed_by\".\"current_sign_in_ip\" AS \"confirmed_by__current_sign_in_ip\", \"confirmed_by\".\"last_sign_in_ip\" AS \"confirmed_by__last_sign_in_ip\", \"confirmed_by\".\"institution_id\" AS \"confirmed_by__institution_id\", \"confirmed_by\".\"encrypted_api_secret_key\" AS \"confirmed_by__encrypted_api_secret_key\", \"confirmed_by\".\"password_changed_at\" AS \"confirmed_by__password_changed_at\", \"confirmed_by\".\"encrypted_otp_secret\" AS \"confirmed_by__encrypted_otp_secret\", \"confirmed_by\".\"encrypted_otp_secret_iv\" AS \"confirmed_by__encrypted_otp_secret_iv\", \"confirmed_by\".\"encrypted_otp_secret_salt\" AS \"confirmed_by__encrypted_otp_secret_salt\", \"confirmed_by\".\"encrypted_otp_sent_at\" AS \"confirmed_by__encrypted_otp_sent_at\", \"confirmed_by\".\"consumed_timestep\" AS \"confirmed_by__consumed_timestep\", \"confirmed_by\".\"otp_required_for_login\" AS \"confirmed_by__otp_required_for_login\", \"confirmed_by\".\"deactivated_at\" AS \"confirmed_by__deactivated_at\", \"confirmed_by\".\"enabled_two_factor\" AS \"confirmed_by__enabled_two_factor\", \"confirmed_by\".\"confirmed_two_factor\" AS \"confirmed_by__confirmed_two_factor\", \"confirmed_by\".\"otp_backup_codes\" AS \"confirmed_by__otp_backup_codes\", \"confirmed_by\".\"authy_id\" AS \"confirmed_by__authy_id\", \"confirmed_by\".\"last_sign_in_with_authy\" AS \"confirmed_by__last_sign_in_with_authy\", \"confirmed_by\".\"authy_status\" AS \"confirmed_by__authy_status\", \"confirmed_by\".\"email_verified\" AS \"confirmed_by__email_verified\", \"confirmed_by\".\"initial_password_updated\" AS \"confirmed_by__initial_password_updated\", \"confirmed_by\".\"force_password_update\" AS \"confirmed_by__force_password_update\", \"confirmed_by\".\"grace_period\" AS \"confirmed_by__grace_period\", \"confirmed_by\".\"awaiting_second_factor\" AS \"confirmed_by__awaiting_second_factor\", \"confirmed_by\".\"role\" AS \"confirmed_by__role\", \"cancelled_by\".\"id\" AS \"cancelled_by__id\", \"cancelled_by\".\"created_at\" AS \"cancelled_by__created_at\", \"cancelled_by\".\"updated_at\" AS \"cancelled_by__updated_at\", \"cancelled_by\".\"name\" AS \"cancelled_by__name\", \"cancelled_by\".\"email\" AS \"cancelled_by__email\", \"cancelled_by\".\"phone_number\" AS \"cancelled_by__phone_number\", \"cancelled_by\".\"encrypted_password\" AS \"cancelled_by__encrypted_password\", \"cancelled_by\".\"reset_password_token\" AS \"cancelled_by__reset_password_token\", \"cancelled_by\".\"reset_password_sent_at\" AS \"cancelled_by__reset_password_sent_at\", \"cancelled_by\".\"remember_created_at\" AS \"cancelled_by__remember_created_at\", \"cancelled_by\".\"sign_in_count\" AS \"cancelled_by__sign_in_count\", \"cancelled_by\".\"current_sign_in_at\" AS \"cancelled_by__current_sign_in_at\", \"cancelled_by\".\"last_sign_in_at\" AS \"cancelled_by__last_sign_in_at\", \"cancelled_by\".\"current_sign_in_ip\" AS \"cancelled_by__current_sign_in_ip\", \"cancelled_by\".\"last_sign_in_ip\" AS \"cancelled_by__last_sign_in_ip\", \"cancelled_by\".\"institution_id\" AS \"cancelled_by__institution_id\", \"cancelled_by\".\"encrypted_api_secret_key\" AS \"cancelled_by__encrypted_api_secret_key\", \"cancelled_by\".\"password_changed_at\" AS \"cancelled_by__password_changed_at\", \"cancelled_by\".\"encrypted_otp_secret\" AS \"cancelled_by__encrypted_otp_secret\", \"cancelled_by\".\"encrypted_otp_secret_iv\" AS \"cancelled_by__encrypted_otp_secret_iv\", \"cancelled_by\".\"encrypted_otp_secret_salt\" AS \"cancelled_by__encrypted_otp_secret_salt\", \"cancelled_by\".\"encrypted_otp_sent_at\" AS \"cancelled_by__encrypted_otp_sent_at\", \"cancelled_by\".\"consumed_timestep\" AS \"cancelled_by__consumed_timestep\", \"cancelled_by\".\"otp_required_for_login\" AS \"cancelled_by__otp_required_for_login\", \"cancelled_by\".\"deactivated_at\" AS \"cancelled_by__deactivated_at\", \"cancelled_by\".\"enabled_two_factor\" AS \"cancelled_by__enabled_two_factor\", \"cancelled_by\".\"confirmed_two_factor\" AS \"cancelled_by__confirmed_two_factor\", \"cancelled_by\".\"otp_backup_codes\" AS \"cancelled_by__otp_backup_codes\", \"cancelled_by\".\"authy_id\" AS \"cancelled_by__authy_id\", \"cancelled_by\".\"last_sign_in_with_authy\" AS \"cancelled_by__last_sign_in_with_authy\", \"cancelled_by\".\"authy_status\" AS \"cancelled_by__authy_status\", \"cancelled_by\".\"email_verified\" AS \"cancelled_by__email_verified\", \"cancelled_by\".\"initial_password_updated\" AS \"cancelled_by__initial_password_updated\", \"cancelled_by\".\"force_password_update\" AS \"cancelled_by__force_password_update\", \"cancelled_by\".\"grace_period\" AS \"cancelled_by__grace_period\", \"cancelled_by\".\"awaiting_second_factor\" AS \"cancelled_by__awaiting_second_factor\", \"cancelled_by\".\"role\" AS \"cancelled_by__role\", \"work_item\".\"id\" AS \"work_item__id\", \"work_item\".\"created_at\" AS \"work_item__created_at\", \"work_item\".\"updated_at\" AS \"work_item__updated_at\", \"work_item\".\"name\" AS \"work_item__name\", \"work_item\".\"etag\" AS \"work_item__etag\", \"work_item\".\"institution_id\" AS \"work_item__institution_id\", \"work_item\".\"intellectual_object_id\" AS \"work_item__intellectual_object_id\", \"work_item\".\"generic_file_id\" AS \"work_item__generic_file_id\", \"work_item\".\"bucket\" AS \"work_item__bucket\", \"work_item\".\"user\" AS \"work_item__user\", \"work_item\".\"note\" AS \"work_item__note\", \"work_item\".\"action\" AS \"work_item__action\", \"work_item\".\"stage\" AS \"work_item__stage\", \"work_item\".\"status\" AS \"work_item__status\", \"work_item\".\"outcome\" AS \"work_item__outcome\", \"work_item\".\"bag_date\" AS \"work_item__bag_date\", \"work_item\".\"date_processed\" AS \"work_item__date_processed\", \"work_item\".\"retry\" AS \"work_item__retry\", \"work_item\".\"node\" AS \"work_item__node\", \"work_item\".\"pid\" AS \"work_item__pid\", \"work_item\".\"needs_admin_review\" AS \"work_item__needs_admin_review\", \"work_item\".\"queued_at\" AS \"work_item__queued_at\", \"work_item\".\"size\" AS \"work_item__size\", \"work_item\".\"stage_started_at\" AS \"work_item__stage_started_at\", \"work_item\".\"aptrust_approver\" AS \"work_item__aptrust_approver\", \"work_item\".\"inst_approver\" AS \"work_item__inst_approver\" FROM \"deletion_requests\" AS \"deletion_request\" LEFT JOIN \"users\" AS \"requested_by\" ON \"requested_by\".\"id\" = \"deletion_request\".\"requested_by_id\" LEFT JOIN \"users\" AS \"confirmed_by\" ON \"confirmed_by\".\"id\" = \"deletion_request\".\"confirmed_by_id\" LEFT JOIN \"users\" AS \"cancelled_by\" ON \"cancelled_by\".\"id\" = \"deletion_request\".\"cancelled_by_id\" LEFT JOIN \"work_items\" AS \"work_item\" ON \"work_item\".\"id\" = \"deletion_request\".\"work_item_id\" WHERE ((\"deletion_request\".\"id\" = 4))"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".*, \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" JOIN \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" ON (\"deletion_requests_generic_files\".\"deletion_request_id\") IN (4) WHERE (\"generic_file\".\"id\" = \"deletion_requests_generic_files\".\"generic_file_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".*, \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" FROM \"intellectual_objects\" AS \"intellectual_object\" JOIN \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" ON (\"deletion_requests_intellectual_objects\".\"deletion_request_id\") IN (4) WHERE (\"intellectual_object\".\"id\" = \"deletion_requests_intellectual_objects\".\"intellectual_object_id\")"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" WHERE ((institution_id = 2) AND (role = 'institutional_admin'))"}
{"level":"info","status":200,"method":"GET","path":"/deletions/review/4?token=5c71392c47643d453b151efb0879b1f1","ip":"","latency":95.853374,"user-agent":"","time":"2022-06-22T13:30:45-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"ar_internal_metadata\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"confirmation_tokens\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"emails_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"emails_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"emails_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"emails_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"old_passwords\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"schema_migrations\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"snapshots\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"usage_samples\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"alerts_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"alerts_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"alerts_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"alerts\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"deletion_requests\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"storage_records\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"checksums\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"roles_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"roles\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: drop table if exists \"storage_options\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:45-04:00","message":"Starting SQL: --\n-- schema.sql\n--\n-- This file represents the full registry schema.\n--\n-- The migrations.sql file updates the old Pharos schema, as it existed\n-- in the feature/storage_record branch, so that it matches this schema.\n--\n-- https://github.com/APTrust/pharos/blob/feature/storage-record/db/schema.rb\n--\n\n\n-- public.ar_internal_metadata definition\n--\n-- This is a legacy table used by ActiveRecord.\n-- We can drop this once production is stable.\n--\nCREATE TABLE public.ar_internal_metadata (\n\t\"key\" varchar NOT NULL,\n\tvalue varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT ar_internal_metadata_pkey PRIMARY KEY (key)\n);\n\n\n-- public.bulk_delete_jobs definition\n--\n-- This is the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs (\n\tid bigserial NOT NULL,\n\trequested_by varchar NULL,\n\tinstitutional_approver varchar NULL,\n\taptrust_approver varchar NULL,\n\tinstitutional_approval_at timestamp NULL,\n\taptrust_approval_at timestamp NULL,\n\tnote text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id int4 NOT NULL,\n\tCONSTRAINT bulk_delete_jobs_pkey PRIMARY KEY (id)\n);\n\n\n-- public.bulk_delete_jobs_emails definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_emails (\n\tbulk_delete_job_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_emails_on_bulk_delete_job_id ON public.bulk_delete_jobs_emails USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_emails_on_email_id ON public.bulk_delete_jobs_emails USING btree (email_id);\n\n\n-- public.bulk_delete_jobs_generic_files definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_generic_files (\n\tbulk_delete_job_id int8 NULL,\n\tgeneric_file_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_bulk_delete_job_id ON public.bulk_delete_jobs_generic_files USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_generic_file_id ON public.bulk_delete_jobs_generic_files USING btree (generic_file_id);\n\n\n-- public.bulk_delete_jobs_institutions definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_institutions (\n\tbulk_delete_job_id int8 NULL,\n\tinstitution_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_bulk_delete_job_id ON public.bulk_delete_jobs_institutions USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_institution_id ON public.bulk_delete_jobs_institutions USING btree (institution_id);\n\n\n-- public.bulk_delete_jobs_intellectual_objects definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_intellectual_objects (\n\tbulk_delete_job_id int8 NULL,\n\tintellectual_object_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_bulk_job_id ON public.bulk_delete_jobs_intellectual_objects USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_object_id ON public.bulk_delete_jobs_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.confirmation_tokens definition\n--\n-- This is a legacy table. We can likely delete it\n-- after production is stable.\n--\nCREATE TABLE public.confirmation_tokens (\n\tid bigserial NOT NULL,\n\t\"token\" varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tuser_id int4 NULL,\n\tCONSTRAINT confirmation_tokens_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails definition\n--\n-- This legacy table will be replaced by the new alerts table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails (\n\tid bigserial NOT NULL,\n\temail_type varchar NULL,\n\tevent_identifier varchar NULL,\n\titem_id int4 NULL,\n\temail_text text NULL,\n\tuser_list text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tCONSTRAINT emails_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails_generic_files definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_generic_files (\n\tgeneric_file_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_generic_files_on_email_id ON public.emails_generic_files USING btree (email_id);\nCREATE INDEX index_emails_generic_files_on_generic_file_id ON public.emails_generic_files USING btree (generic_file_id);\n\n\n-- public.emails_intellectual_objects definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_intellectual_objects (\n\tintellectual_object_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_intellectual_objects_on_email_id ON public.emails_intellectual_objects USING btree (email_id);\nCREATE INDEX index_emails_intellectual_objects_on_intellectual_object_id ON public.emails_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.emails_premis_events definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_premis_events (\n\tpremis_event_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_premis_events_on_email_id ON public.emails_premis_events USING btree (email_id);\nCREATE INDEX index_emails_premis_events_on_premis_event_id ON public.emails_premis_events USING btree (premis_event_id);\n\n\n-- public.emails_work_items definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_work_items (\n\twork_item_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_work_items_on_email_id ON public.emails_work_items USING btree (email_id);\nCREATE INDEX index_emails_work_items_on_work_item_id ON public.emails_work_items USING btree (work_item_id);\n\n\n-- public.generic_files definition\nCREATE TABLE public.generic_files (\n\tid serial NOT NULL,\n\tfile_format varchar NULL,\n\t\"size\" int8 NULL,\n\tidentifier varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tlast_fixity_check timestamp NOT NULL DEFAULT '2000-01-01 00:00:00'::timestamp without time zone,\n\tinstitution_id int4 NOT NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tuuid varchar NOT NULL,\n\tCONSTRAINT generic_files_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_generic_files_on_created_at ON public.generic_files USING btree (created_at);\nCREATE UNIQUE INDEX index_generic_files_on_identifier ON public.generic_files USING btree (identifier);\nCREATE INDEX index_generic_files_on_institution_id ON public.generic_files USING btree (institution_id);\nCREATE INDEX index_generic_files_on_institution_id_and_state ON public.generic_files USING btree (institution_id, state);\nCREATE INDEX index_generic_files_on_institution_id_and_updated_at ON public.generic_files USING btree (institution_id, updated_at);\nCREATE INDEX index_generic_files_on_intellectual_object_id ON public.generic_files USING btree (intellectual_object_id);\nCREATE INDEX index_generic_files_on_updated_at ON public.generic_files USING btree (updated_at);\nCREATE UNIQUE INDEX index_generic_files_on_uuid ON public.generic_files USING btree (uuid);\nCREATE INDEX ix_gf_last_fixity_check ON public.generic_files USING btree (last_fixity_check);\n\n\n-- public.institutions definition\nCREATE TABLE public.institutions (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\tidentifier varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\t\"type\" varchar NULL,\n\tmember_institution_id int4 NULL,\n\tdeactivated_at timestamp NULL,\n\totp_enabled bool NULL,\n    enable_spot_restore bool not null default false,\n\treceiving_bucket varchar NOT NULL,\n\trestore_bucket varchar NOT NULL,\n\tCONSTRAINT institutions_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_institutions_on_name ON public.institutions USING btree (name);\n\n\n-- public.intellectual_objects definition\nCREATE TABLE public.intellectual_objects (\n\tid serial NOT NULL,\n\ttitle varchar NULL,\n\tdescription text NULL,\n\tidentifier varchar NULL,\n\talt_identifier varchar NULL,\n\t\"access\" varchar NULL,\n\tbag_name varchar NULL,\n\tinstitution_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tetag varchar NULL,\n\tbag_group_identifier varchar NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tbagit_profile_identifier varchar NULL,\n\tsource_organization varchar NULL,\n\tinternal_sender_identifier varchar NULL,\n\tinternal_sender_description text NULL,\n\tCONSTRAINT intellectual_objects_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_intellectual_objects_on_bag_name ON public.intellectual_objects USING btree (bag_name);\nCREATE INDEX index_intellectual_objects_on_created_at ON public.intellectual_objects USING btree (created_at);\nCREATE UNIQUE INDEX index_intellectual_objects_on_identifier ON public.intellectual_objects USING btree (identifier);\nCREATE INDEX index_intellectual_objects_on_institution_id ON public.intellectual_objects USING btree (institution_id);\nCREATE INDEX index_intellectual_objects_on_updated_at ON public.intellectual_objects USING btree (updated_at);\n\n\n-- public.old_passwords definition\n--\n-- This is a legacy table. We can get rid of this if we\n-- abandon mandatory password changes. Wait until that's\n-- decided.\n--\nCREATE TABLE public.old_passwords (\n\tid bigserial NOT NULL,\n\tencrypted_password varchar NOT NULL,\n\tpassword_salt varchar NULL,\n\tpassword_archivable_type varchar NOT NULL,\n\tpassword_archivable_id int4 NOT NULL,\n\tcreated_at timestamp NULL,\n\tCONSTRAINT old_passwords_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_password_archivable ON public.old_passwords USING btree (password_archivable_type, password_archivable_id);\n\n\n-- public.premis_events definition\nCREATE TABLE public.premis_events (\n\tid serial NOT NULL,\n\tidentifier varchar NULL,\n\tevent_type varchar NULL,\n\tdate_time varchar NULL,\n\toutcome_detail varchar NULL,\n\tdetail varchar NULL,\n\toutcome_information varchar NULL,\n\t\"object\" varchar NULL,\n\tagent varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\toutcome varchar NULL,\n\tinstitution_id int4 NULL,\n\told_uuid varchar NULL,\n\tCONSTRAINT premis_events_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_premis_events_date_time_desc ON public.premis_events USING btree (date_time DESC);\nCREATE INDEX index_premis_events_on_event_type ON public.premis_events USING btree (event_type);\nCREATE INDEX index_premis_events_on_event_type_and_outcome ON public.premis_events USING btree (event_type, outcome);\nCREATE INDEX index_premis_events_on_generic_file_id ON public.premis_events USING btree (generic_file_id);\nCREATE UNIQUE INDEX index_premis_events_on_identifier ON public.premis_events USING btree (identifier);\nCREATE INDEX index_premis_events_on_institution_id ON public.premis_events USING btree (institution_id);\nCREATE INDEX index_premis_events_on_intellectual_object_id ON public.premis_events USING btree (intellectual_object_id);\nCREATE INDEX index_premis_events_on_outcome ON public.premis_events USING btree (outcome);\n\n\n-- public.schema_migrations definition\n--\n-- This is a legacy table used by ActiveRecord\n-- to track which migrations have been applied.\n--\n-- We can delete this when production is stable.\n--\nCREATE TABLE public.schema_migrations (\n\t\"version\" varchar NOT NULL,\n\tCONSTRAINT schema_migrations_pkey PRIMARY KEY (version)\n);\n\n\n-- public.snapshots definition\n--\n-- This table stores point-in-time snapshots\n-- of how much data each depositor has in the repo.\n--\n-- We may eventually delete this, but keep for now.\n--\nCREATE TABLE public.snapshots (\n\tid bigserial NOT NULL,\n\taudit_date timestamp NULL,\n\tinstitution_id int4 NULL,\n\tapt_bytes int8 NULL,\n\t\"cost\" numeric NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tsnapshot_type varchar NULL,\n\tcs_bytes int8 NULL,\n\tgo_bytes int8 NULL,\n\tCONSTRAINT snapshots_pkey PRIMARY KEY (id)\n);\n\n\n-- public.usage_samples definition\n--\n-- No idea what this was supposed to be, but the\n-- table never had any data in the production DB.\n-- Consider deleting this after we're sure it's not used.\n--\nCREATE TABLE public.usage_samples (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id varchar NULL,\n\t\"data\" text NULL,\n\tCONSTRAINT usage_samples_pkey PRIMARY KEY (id)\n);\n\n\n-- public.work_items definition\nCREATE TABLE public.work_items (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\t\"name\" varchar NULL,\n\tetag varchar NULL,\n\tbucket varchar NULL,\n\t\"user\" varchar NULL,\n\tnote text NULL,\n\t\"action\" varchar NULL,\n\tstage varchar NULL,\n\tstatus varchar NULL,\n\toutcome text NULL,\n\tbag_date timestamp NULL,\n\tdate_processed timestamp NULL,\n\tretry bool NOT NULL DEFAULT false,\n\tnode varchar(255) NULL,\n\tpid int4 NULL DEFAULT 0,\n\tneeds_admin_review bool NOT NULL DEFAULT false,\n\tinstitution_id int4 NULL,\n\tqueued_at timestamp NULL,\n\t\"size\" int8 NULL,\n\tstage_started_at timestamp NULL,\n\taptrust_approver varchar NULL,\n\tinst_approver varchar NULL,\n\tCONSTRAINT work_items_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_work_items_on_action ON public.work_items USING btree (action);\nCREATE INDEX index_work_items_on_date ON public.work_items USING btree (date_processed);\nCREATE INDEX index_work_items_on_etag_and_name ON public.work_items USING btree (etag, name);\nCREATE INDEX index_work_items_on_generic_file_id ON public.work_items USING btree (generic_file_id);\nCREATE INDEX index_work_items_on_institution_id ON public.work_items USING btree (institution_id);\nCREATE INDEX index_work_items_on_institution_id_and_date ON public.work_items USING btree (institution_id, date_processed);\nCREATE INDEX index_work_items_on_intellectual_object_id ON public.work_items USING btree (intellectual_object_id);\nCREATE INDEX index_work_items_on_stage ON public.work_items USING btree (stage);\nCREATE INDEX index_work_items_on_status ON public.work_items USING btree (status);\n\n\n-- public.checksums definition\nCREATE TABLE public.checksums (\n\tid serial NOT NULL,\n\talgorithm varchar NULL,\n\tdatetime timestamp NULL,\n\tdigest varchar NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT checksums_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_89bb0866e7 FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_checksums_on_generic_file_id ON public.checksums USING btree (generic_file_id);\n\n\n-- public.storage_records definition\nCREATE TABLE public.storage_records (\n\tid bigserial NOT NULL,\n\tgeneric_file_id int4 NULL,\n\turl varchar NULL,\n\tCONSTRAINT storage_records_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_a126ea6adc FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\n\n-- public.users definition\nCREATE TABLE public.users (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\temail varchar NULL,\n\tphone_number varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tencrypted_password varchar NOT NULL DEFAULT ''::character varying,\n\treset_password_token varchar NULL,\n\treset_password_sent_at timestamp NULL,\n\tremember_created_at timestamp NULL,\n\tsign_in_count int4 NOT NULL DEFAULT 0,\n\tcurrent_sign_in_at timestamp NULL,\n\tlast_sign_in_at timestamp NULL,\n\tcurrent_sign_in_ip varchar NULL,\n\tlast_sign_in_ip varchar NULL,\n\tinstitution_id int4 NULL,\n\tencrypted_api_secret_key text NULL,\n\tpassword_changed_at timestamp NULL,\n\tencrypted_otp_secret varchar NULL,\n\tencrypted_otp_secret_iv varchar NULL,\n\tencrypted_otp_secret_salt varchar NULL,\n    encrypted_otp_sent_at timestamp NULL,\n\tconsumed_timestep int4 NULL,\n\totp_required_for_login bool NULL,\n\tdeactivated_at timestamp NULL,\n\tenabled_two_factor bool NULL DEFAULT false,\n\tconfirmed_two_factor bool NULL DEFAULT false,\n\totp_backup_codes _varchar NULL,\n\tauthy_id varchar NULL,\n\tlast_sign_in_with_authy timestamp NULL,\n\tauthy_status varchar NULL,\n\temail_verified bool NULL DEFAULT false,\n\tinitial_password_updated bool NULL DEFAULT false,\n\tforce_password_update bool NULL DEFAULT false,\n\taccount_confirmed bool NULL DEFAULT true,\n\tgrace_period timestamp NULL,\n    awaiting_second_factor boolean not null default false,\n    \"role\" varchar(50) NOT NULL default 'none',\n\tCONSTRAINT users_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_7fcf39ca13 FOREIGN KEY (institution_id) REFERENCES institutions(id)\n);\nCREATE INDEX index_users_on_authy_id ON public.users USING btree (authy_id);\nCREATE UNIQUE INDEX index_users_on_email ON public.users USING btree (email);\nCREATE INDEX index_users_on_institution_id ON public.users USING btree (institution_id);\nCREATE INDEX index_users_on_password_changed_at ON public.users USING btree (password_changed_at);\nCREATE UNIQUE INDEX index_users_on_reset_password_token ON public.users USING btree (reset_password_token);\n\n-------------------------------------------------------------------------------\n-- New tables that were not part of Pharos.\n-- alerts              + join tables\n-- deletion_requests   + join tables\n-------------------------------------------------------------------------------\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index index_alerts_institution_id ON public.alerts (institution_id);\ncreate index index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table public.alerts_users (\n    alert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table public.alerts_work_items (\n    alert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index index_storage_options_name ON public.storage_options (\"name\");\n\n\n\n-------------------------------------------------------------------------------\n-- Functions\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: -- migrations.sql\n--\n-- This file contains ALL alterations that should be applied to the\n-- existing Pharos DB schema (as it exists in the feature/storage-option\n-- branch) to make it match schema.sql.\n--\n-- All operations in this file must be idempotent, so we can run it\n-- any number of times and always know that it will leave the DB in\n-- consistent and known state that matches schema.sql.\n--\n-- NOTE: When migrating old Pharos DB, we will also need to create the\n--       views in the schema.sql file.\n-------------------------------------------------------------------------------\n\n---------------------------------------------------------\n-- START OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n---------------------------------------------------------\n\n-- Drop legacy table from Pharos DB.\ndrop table if exists work_item_states;\n\n-- Create the storage_records table, with indexes.\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\tcreate table public.storage_records (\n    \tid bigserial not null,\n    \tgeneric_file_id int8 not null,\n    \turl varchar not null,\n    \tconstraint storage_records_pkey primary key (id),\n    \tconstraint fk_rails_a126ea6adc foreign key (generic_file_id) references generic_files(id)\n\t);\n\tcreate index if not exists index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\tcreate unique index if not exists index_storage_records_on_url ON public.storage_records(\"url\");\n  end if;\nend\n$$;\n\n-- Add column generic_files.uuid.\nalter table generic_files add column if not exists \"uuid\" varchar;\n\n-- Copy uuid from uri into uuid field.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\tupdate generic_files set uuid=split_part(uri, '/', 5);\n  end if;\nend\n$$;\n\n-- Change generic_files.uuid to not null and add a unique index.\ndo\n$$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uuid' and is_nullable = 'YES') then\n  \talter table generic_files alter column \"uuid\" set not null;\n\tcreate unique index if not exists index_generic_files_on_uuid on generic_files(uuid);\n  end if;\nend\n$$;\n\n-- Copy generic_files.uri from storage_records.url.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\n  \t  -- Get the intial URL. All items, regadless of storage option, have one URL.\n      -- The inner if statement makes sure this hasn't already run. (Prevents duplicate inserts.)\n\t  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\t    if not exists (select 1 from storage_records where length(url) > 0) then\n\t\t  insert into storage_records (generic_file_id, url) select id, uri from generic_files gf order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- For items in standard storage, we need to add a Glacier URL. URLs differ per environment, so we check.\n\t  -- In each case, the inner if statement tries to ensure that these inserts have not already run.\n\n\t  -- Production\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.preservation.storage/', '/aptrust.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Test/Demo\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.test.preservation.oregon/%') then\n\t      insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.test.preservation/', '/aptrust.test.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Staging\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.staging.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.staging.preservation/', '/aptrust.staging.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n  end if;\nend\n$$;\n\n-- Now remove generic_files.uri, since the data is now in storage_records\nalter table generic_files drop column if exists uri;\n\n-------------------------------------------------------\n-- END OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n-------------------------------------------------------\n\n-- The premis_events.date_time column is varchar, but it should be\n-- timestamp. We need to change it. This change may fail if 1) there\n-- are invalid or badly formatted dates in the date_time column, or\n-- 2) if any views referencing premis_events.date_time already exist.\n-- Drop premis_events_view if necessary and recreate it after this alteration.\n--\n-- This change may take a long time, as premis_events has over 100M rows.\ndo\n$$\nbegin\n\tif exists(\n\t\tselect 1 from information_schema.columns\n\t\twhere table_schema = 'public'\n\t\tand table_name = 'premis_events'\n\t\tand column_name = 'date_time'\n\t\tand data_type = 'character varying')\n\tthen\n\t\talter table premis_events alter column date_time type timestamp\n\t\tusing TO_TIMESTAMP(date_time, 'YYYY-MM-DDTHH24:MI:SS');\n\tend if;\nend\n$$;\n\n-- We need to fix the user role structure. Pharos allows a user to have\n-- multiple roles at a single institution, though our business rules disallow\n-- that, and no user has ever had more than one role. To simplify the DB\n-- and our queries, we need to do the following:\n--\n-- 1. Create a role column in the users table.\n-- 2. Populate that column with the value with each user's role from\n--    user -> roles_user -> roles.\n-- 3. Drop the roles_users table.\n-- 4. Drop the roles table.\n\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='role') then\n \talter table users add column \"role\" varchar(50) not null default 'none';\n \tupdate users u set \"role\" = coalesce((select r.name from \"roles\" r inner join roles_users ru on ru.role_id = r.id where ru.user_id = u.id), 'none');\n    drop table if exists roles_users;\n    drop table if exists roles;\n  end if;\nend\n$$;\n\n-- Add awaiting_second_factor\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='awaiting_second_factor') then\n \talter table users add column \"awaiting_second_factor\" boolean not null default false;\n  end if;\nend\n$$;\n\n-- Add encrypted_otp_sent_at\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='encrypted_otp_sent_at') then\n \talter table users add column \"encrypted_otp_sent_at\" timestamp null;\n  end if;\nend\n$$;\n\n\n-- The ingest_state columns were part of a proposed architecture we never\n-- implemented. They have never been used, and we don't need them.\nalter table intellectual_objects drop column if exists ingest_state;\nalter table generic_files drop column if exists ingest_state;\n\n\n-- intellectual_objects.bag_group_identifier is almost always empty.\n-- Make this column nullable to ease inserts.\nalter table intellectual_objects alter column bag_group_identifier drop not null;\n\n\n-- Remove object_identifier and generic_file_identifier from work_items.\n-- We can use a view to join the files & objects tables, avoiding the\n-- duplicate data.\nalter table work_items drop column if exists object_identifier;\nalter table work_items drop column if exists generic_file_identifier;\n\n-- The work_items.date column actually refers to the datetime on which\n-- the item was last processed by one of our Go workers. The name \"date\"\n-- is too vague and ambiguous, so let's call it what it is.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns\n    where table_schema='public' AND table_name='work_items' AND column_name='date') then\n    alter table work_items rename column \"date\" to \"date_processed\";\n  end if;\nend\n$$;\n\n-- Update the indexes on work_items to reflect the change from date to\n-- date_processed.\n\ndrop index if exists index_work_items_on_date;\ndrop index if exists index_work_items_on_institution_id_and_date;\n\ncreate index if not exists index_work_items_on_date_processed on work_items(date_processed);\ncreate index if not exists index_work_items_on_inst_id_and_date_processed on work_items(institution_id, date_processed);\n\n-- These columns are unnecessary in the premis_events table.\n-- We can get them by joining other tables in a view.\n-- This will have a large impact on storage space, since these\n-- two fields together average ~100 bytes per record, and as of\n-- Jan. 2021, we have around 120M records. Dropping these columns\n-- also drops the indexes on these two columns, which are huge and\n-- are rarely used.\nalter table premis_events drop column if exists intellectual_object_identifier;\nalter table premis_events drop column if exists generic_file_identifier;\n\n-- Get rid of useless indexes. We can add these back if they actually turn\n-- out to be useful.\n--\n-- generic_files\ndrop index if exists index_files_on_inst_state_and_format;\ndrop index if exists index_files_on_inst_state_and_updated;\ndrop index if exists index_generic_files_on_file_format;\ndrop index if exists index_generic_files_on_file_format_and_state;\ndrop index if exists index_generic_files_on_institution_id_and_size_and_state;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_file_format;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_state;\ndrop index if exists index_generic_files_on_size;\ndrop index if exists index_generic_files_on_size_and_state;\ndrop index if exists index_generic_files_on_state;\ndrop index if exists index_generic_files_on_state_and_updated_at;\n\n-- intellectual_objects\ndrop index if exists index_intellectual_objects_on_access;\ndrop index if exists index_intellectual_objects_on_institution_id_and_state;\ndrop index if exists index_intellectual_objects_on_state;\n\n-- premis_events\ndrop index if exists index_premis_events_on_generic_file_id_and_event_type;\ndrop index if exists index_premis_events_on_identifier_and_institution_id;\n\n-- institutions\ncreate unique index if not exists index_institutions_identifier on institutions using btree(identifier);\ncreate unique index if not exists index_institutions_receiving_bucket on institutions using btree(receiving_bucket);\ncreate unique index if not exists index_institutions_restore_bucket on institutions using btree(restore_bucket);\n\n-- Allow institutions to turn spot restoration tests on or off.\n-- Default is off.\nalter table institutions add column if not exists enable_spot_restore boolean not null default false;\n\n-- ********************************************************************\n--\n-- Add tables for alerts and deletions that did not exist in Pharos\n--\n-- ********************************************************************\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table if not exists public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index if not exists index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table if not exists public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index if not exists index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table if not exists public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index if not exists index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table if not exists public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index if not exists index_alerts_institution_id ON public.alerts (institution_id);\ncreate index if not exists index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table if not exists public.alerts_users (\n\talert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index if not exists index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index if not exists index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index if not exists index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table if not exists public.alerts_work_items (\n\talert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index if not exists index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index if not exists index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table if not exists public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index if not exists index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index if not exists index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table if not exists public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index if not exists index_storage_options_name ON public.storage_options (\"name\");\n\n-- In Pharos DB, many generic_file_ids in premis_events are set to zero when they should be null.\n-- Fix that here.\nupdate premis_events set generic_file_id = null where generic_file_id = 0;\n\n-- In Pharos, the Devise auth system leaves stale password reset data forever.\n-- We have to clear these values in Registry, or all users will be stuck in\n-- the \"please finish resetting your password\" loop forever. We have no idea\n-- what reset tokens Devise sent two years ago, so no one will be able to\n-- unlock their accounts.\nupdate users set reset_password_token = null, reset_password_sent_at = null;\n\n\n-------------------------------------------------------------------------------\n-- Functions\n--\n-- Fuctions are defined in schema.sql as well. Adding them to migrations\n-- ensures they'll be present in converted DB.\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: -------------------------------------------------------------------------------\n-- Views\n-------------------------------------------------------------------------------\n\n-- Create a view to pull in columns that used to be in the WorkItems table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view work_items_view as\nselect\n\twi.id,\n\twi.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\twi.intellectual_object_id,\n\tio.identifier as \"object_identifier\",\n\tio.alt_identifier,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\twi.generic_file_id,\n\tgf.identifier as \"generic_file_identifier\",\n\twi.\"name\",\n\twi.etag,\n\twi.bucket,\n\twi.\"user\",\n\twi.note,\n\twi.\"action\",\n\twi.stage,\n\twi.status,\n\twi.outcome,\n\twi.bag_date,\n\twi.date_processed,\n\twi.retry,\n\twi.node,\n\twi.pid,\n\twi.needs_admin_review,\n\twi.\"size\",\n\twi.queued_at,\n\twi.stage_started_at,\n\twi.aptrust_approver,\n\twi.inst_approver,\n\twi.created_at,\n\twi.updated_at\nfrom work_items wi\nleft join institutions i on wi.institution_id = i.id\nleft join intellectual_objects io on wi.intellectual_object_id = io.id\nleft join generic_files gf on wi.generic_file_id = gf.id;\n\n\n-- Create a view to pull in columns that used to be in the PremisEvents table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view premis_events_view as\nselect\n\tpe.id,\n\tpe.identifier,\n\tpe.institution_id,\n\ti.\"name\" as institution_name,\n\tpe.intellectual_object_id,\n\tio.identifier as intellectual_object_identifier,\n\tpe.generic_file_id,\n\tgf.identifier as generic_file_identifier,\n\tpe.event_type,\n\tpe.date_time,\n\tpe.detail,\n\tpe.outcome,\n\tpe.outcome_detail,\n\tpe.outcome_information,\n\tpe.\"object\",\n\tpe.agent,\n\tpe.created_at,\n\tpe.updated_at,\n\tpe.old_uuid\nfrom premis_events pe\nleft join institutions i on pe.institution_id = i.id\nleft join intellectual_objects io on pe.intellectual_object_id = io.id\nleft join generic_files gf on pe.generic_file_id = gf.id;\n\n\n-- users_view makes it easier to list and search on institution-related\n-- attributes for users.\ncreate or replace view users_view as\nselect\n\tu.id,\n\tu.\"name\",\n\tu.email,\n\tu.phone_number,\n\tu.created_at,\n\tu.updated_at,\n\tu.reset_password_sent_at,\n\tu.remember_created_at,\n\tu.sign_in_count,\n\tu.current_sign_in_at,\n\tu.last_sign_in_at,\n\tu.current_sign_in_ip,\n\tu.last_sign_in_ip,\n\tu.institution_id,\n\tu.password_changed_at,\n\tu.consumed_timestep,\n\tu.otp_required_for_login,\n\tu.deactivated_at,\n\tu.enabled_two_factor,\n\tu.confirmed_two_factor,\n\tu.authy_id,\n\tu.last_sign_in_with_authy,\n\tu.authy_status,\n\tu.email_verified,\n\tu.initial_password_updated,\n\tu.force_password_update,\n\tu.account_confirmed,\n\tu.grace_period,\n\tu.\"role\",\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.state as institution_state,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id,\n\ti2.\"name\" as member_institution_name,\n\ti2.identifier as member_institution_identifier,\n\ti2.state as member_institution_state,\n\ti.otp_enabled,\n\ti.receiving_bucket,\n\ti.restore_bucket\nfrom users u\nleft join institutions i on u.institution_id = i.id\nleft join institutions i2 on i.member_institution_id = i2.id;\n\n\n-- institutions_view shows an institution along with essential\n-- information about its parent, if it has a parent.\n\ncreate or replace view institutions_view as\nselect\n\ti.id,\n\ti.\"name\",\n\ti.identifier,\n\ti.state,\n\ti.\"type\",\n\ti.deactivated_at,\n\ti.otp_enabled,\n\ti.enable_spot_restore,\n\ti.receiving_bucket,\n\ti.restore_bucket,\n\ti.created_at,\n\ti.updated_at,\n\ti.member_institution_id as \"parent_id\",\n\tparent.\"name\" as \"parent_name\",\n\tparent.identifier as \"parent_identifier\",\n\tparent.state as \"parent_state\",\n\tparent.deactivated_at as \"parent_deactivated_at\"\nfrom institutions i\nleft join institutions parent on i.member_institution_id = parent.id;\n\n-- intellectual_objects_view\n\ncreate or replace view intellectual_objects_view as\nselect\n\tio.id,\n\tio.title,\n\tio.description,\n\tio.identifier,\n\tio.alt_identifier,\n\tio.access,\n\tio.bag_name,\n\tio.institution_id,\n\tio.state,\n\tio.etag,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\tio.internal_sender_description,\n\tio.created_at,\n\tio.updated_at,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id as institution_parent_id,\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"size\",\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_size\"\nfrom intellectual_objects io\nleft join institutions i on io.institution_id = i.id;\n\n-- deletion_requests_view\n\ncreate or replace view deletion_requests_view as\nselect dr.id,\n       dr.institution_id,\n       i.\"name\" as institution_name,\n       i.identifier as institution_identifier,\n       dr.requested_by_id,\n       req.\"name\" as requested_by_name,\n       req.email as requested_by_email,\n       dr.requested_at,\n       dr.confirmed_by_id,\n       conf.\"name\" as confirmed_by_name,\n       conf.email as confirmed_by_email,\n       dr.confirmed_at,\n       dr.cancelled_by_id,\n       can.\"name\" as cancelled_by_name,\n       can.email as cancelled_by_email,\n       dr.cancelled_at,\n       (select count(*) from deletion_requests_generic_files drgf where drgf.deletion_request_id = dr.id) as file_count,\n       (select count(*) from deletion_requests_intellectual_objects drio where drio.deletion_request_id = dr.id) as object_count,\n       dr.work_item_id,\n       wi.stage,\n       wi.status,\n       wi.date_processed,\n       wi.\"size\",\n       wi.note\nfrom deletion_requests dr\nleft join institutions i on dr.institution_id = i.id\nleft join users req on dr.requested_by_id = req.id\nleft join users conf on dr.confirmed_by_id = conf.id\nleft join users can on dr.confirmed_by_id = can.id\nleft join work_items wi on dr.work_item_id = wi.id;\n\n-- alerts view\n\ncreate or replace view alerts_view as\nselect\n\ta.id,\n\ta.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ta.\"type\",\n\ta.subject,\n\ta.\"content\",\n\ta.deletion_request_id,\n\ta.created_at,\n\tau.user_id,\n\tu.\"name\" as user_name,\n\tau.sent_at,\n\tau.read_at\nfrom alerts a\nleft join alerts_users au on a.id = au.alert_id\nleft join users u on au.user_id = u.id\nleft join institutions i on a.institution_id = i.id;\n\n-- storage_option_stats\ncreate or replace view storage_option_stats as\nwith stats as (\n\tselect\n\t\tsum(\"gf\".\"size\") as total_bytes,\n\t\tcount(*) as file_count,\n\t\tgf.institution_id,\n\t\tgf.storage_option\n\tfrom generic_files gf\n\twhere gf.state = 'A'\n\tgroup by rollup (gf.institution_id, gf.storage_option)\n\t)\nselect\n\ts.total_bytes,\n\ts.file_count,\n\ts.institution_id,\n\ts.storage_option,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier\nfrom stats s\nleft join institutions i on s.institution_id = i.id;\n\ncreate or replace view generic_files_view as\nselect\n\tgf.id,\n\tgf.file_format,\n\tgf.\"size\",\n\tgf.identifier,\n\tgf.intellectual_object_id,\n\tio.identifier as object_identifier,\n\tio.\"access\",\n\tgf.state,\n\tgf.last_fixity_check,\n\tgf.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\tgf.storage_option,\n\tgf.uuid,\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='md5' order by created_at desc limit 1) as \"md5\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha1' order by created_at desc limit 1) as \"sha1\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha256' order by created_at desc limit 1) as \"sha256\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha512' order by created_at desc limit 1) as \"sha512\",\n\tgf.created_at,\n\tgf.updated_at\nfrom generic_files gf\nleft join intellectual_objects io on io.id = gf.intellectual_object_id\nleft join institutions i on i.id = gf.institution_id;\n\n-- Checksums view\ncreate or replace view checksums_view as\nselect cs.id,\n       cs.algorithm,\n       cs.datetime,\n       cs.digest,\n       gf.state,\n       gf.identifier as \"generic_file_identifier\",\n       cs.generic_file_id,\n       gf.intellectual_object_id,\n       gf.institution_id,\n       cs.created_at,\n       cs.updated_at\nfrom checksums cs\nleft join generic_files gf on cs.generic_file_id = gf.id;\n\n\n---------------------------------------------------------------------------\n--\n-- Count Views\n--\n-- We create these views because count queries on large tables are slow\n-- in postgres. Even if a query can use an index to get a count, it still\n-- has to scan every row in the result set to see if that row is visible\n-- under postgres' mvcc rules. \n--\n-- If the count returns a million rows, postgres has to scan all million\n-- rows. The result is a query that can take 5-15 seconds. The \n-- premis_events table is the worst of the lot. It should surpass 200M\n-- rows by the end of 2022. We do not want to scan those rows every time\n-- someone hits the events page or the events API endpoint.\n--\n-- We run count queries all the time to manage paging in both the web UI\n-- and the API. For large counts, such as \"all events for an institution\",\n-- or \"all files for an institution\", we'll use the counts in the views\n-- below. \n--\n-- For smaller counts, such as \"all files for my institution created \n-- within the past week\", we'll suck it up and let postgres scan the \n-- smaller row sets.\n--\n-- These views will be refreshed every hour or so using an async go \n-- routine so they don't slow down web and API requests.\n--\n-- That means some large counts may be up to an hour out of date, but we\n-- can live with that tradeoff, since this will vastly speed up the loading\n-- of our most commonly hit web and API endpoints.\n--\n-- Note the function update_counts() below. It refreshes all of the count\n-- views.\n-- \n---------------------------------------------------------------------------\n\n-- premis_event_counts\ncreate materialized view if not exists premis_event_counts as\n\tselect institution_id, count(id) as row_count, event_type, outcome\n\tfrom premis_events group by cube(institution_id, event_type, outcome)\n\torder by institution_id, event_type, outcome;\n\n-- intellectual_object_counts\ncreate materialized view if not exists intellectual_object_counts as\n\tselect institution_id, count(id) as row_count, \"state\" \n\tfrom intellectual_objects group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- generic_file_counts\ncreate materialized view if not exists generic_file_counts as\n\tselect institution_id, count(id) as row_count, \"state\"\n\tfrom generic_files group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- work_item_counts\ncreate materialized view if not exists work_item_counts as\n\tselect institution_id, count(id) as row_count, \"action\"\n\tfrom work_items group by cube(institution_id, \"action\")\n\torder by institution_id, \"action\";\n\n-- \nCREATE OR REPLACE FUNCTION update_counts ()\n  RETURNS integer\nAS\n$BODY$\n  begin\n    refresh materialized view premis_event_counts;\n    refresh materialized view intellectual_object_counts;\n    refresh materialized view generic_file_counts;\n    refresh materialized view work_item_counts;    \n    return 1;\n  end;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"storage_options\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_options.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"institutions\" from '/Users/diamond/aptrust/registry/db/fixtures/institutions.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"users\" from '/Users/diamond/aptrust/registry/db/fixtures/users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"checksums\" from '/Users/diamond/aptrust/registry/db/fixtures/checksums.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"storage_records\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_records.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"deletion_requests\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"deletion_requests_generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"deletion_requests_intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"alerts\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"alerts_premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"alerts_users\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: copy \"alerts_work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_options', 'id'), MAX(id)) FROM \"storage_options\";"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('institutions', 'id'), MAX(id)) FROM \"institutions\";"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('users', 'id'), MAX(id)) FROM \"users\";"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('intellectual_objects', 'id'), MAX(id)) FROM \"intellectual_objects\";"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('generic_files', 'id'), MAX(id)) FROM \"generic_files\";"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('checksums', 'id'), MAX(id)) FROM \"checksums\";"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_records', 'id'), MAX(id)) FROM \"storage_records\";"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('premis_events', 'id'), MAX(id)) FROM \"premis_events\";"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('work_items', 'id'), MAX(id)) FROM \"work_items\";"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('deletion_requests', 'id'), MAX(id)) FROM \"deletion_requests\";"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('alerts', 'id'), MAX(id)) FROM \"alerts\";"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: select update_counts();"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"intellectual_objects\" AS \"intellectual_object\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"intellectual_object\".\"institution_id\" WHERE ((institution_id = 2) AND (\"intellectual_object\".\"state\" = 'A')) ORDER BY \"id\" asc LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: INSERT INTO \"deletion_requests\" (\"id\", \"institution_id\", \"requested_by_id\", \"requested_at\", \"encrypted_confirmation_token\", \"confirmed_by_id\", \"confirmed_at\", \"cancelled_by_id\", \"cancelled_at\", \"work_item_id\") VALUES (DEFAULT, 2, 2, '2022-06-22 17:30:46.792123+00:00:00', '$2a$10$9pzFewdK109X.N5kjm.xwOE8cB0W/9sLEhz/9zVJrHQ7BHMHlym1K', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING \"id\", \"confirmed_by_id\", \"confirmed_at\", \"cancelled_by_id\", \"cancelled_at\", \"work_item_id\""}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: insert into deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id) values (4, 1) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"deletion_requests\" AS \"deletion_request\" WHERE (id = 4)"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"deletion_request\".\"id\", \"deletion_request\".\"institution_id\", \"deletion_request\".\"requested_by_id\", \"deletion_request\".\"requested_at\", \"deletion_request\".\"encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\", \"deletion_request\".\"confirmed_at\", \"deletion_request\".\"cancelled_by_id\", \"deletion_request\".\"cancelled_at\", \"deletion_request\".\"work_item_id\", \"requested_by\".\"id\" AS \"requested_by__id\", \"requested_by\".\"created_at\" AS \"requested_by__created_at\", \"requested_by\".\"updated_at\" AS \"requested_by__updated_at\", \"requested_by\".\"name\" AS \"requested_by__name\", \"requested_by\".\"email\" AS \"requested_by__email\", \"requested_by\".\"phone_number\" AS \"requested_by__phone_number\", \"requested_by\".\"encrypted_password\" AS \"requested_by__encrypted_password\", \"requested_by\".\"reset_password_token\" AS \"requested_by__reset_password_token\", \"requested_by\".\"reset_password_sent_at\" AS \"requested_by__reset_password_sent_at\", \"requested_by\".\"remember_created_at\" AS \"requested_by__remember_created_at\", \"requested_by\".\"sign_in_count\" AS \"requested_by__sign_in_count\", \"requested_by\".\"current_sign_in_at\" AS \"requested_by__current_sign_in_at\", \"requested_by\".\"last_sign_in_at\" AS \"requested_by__last_sign_in_at\", \"requested_by\".\"current_sign_in_ip\" AS \"requested_by__current_sign_in_ip\", \"requested_by\".\"last_sign_in_ip\" AS \"requested_by__last_sign_in_ip\", \"requested_by\".\"institution_id\" AS \"requested_by__institution_id\", \"requested_by\".\"encrypted_api_secret_key\" AS \"requested_by__encrypted_api_secret_key\", \"requested_by\".\"password_changed_at\" AS \"requested_by__password_changed_at\", \"requested_by\".\"encrypted_otp_secret\" AS \"requested_by__encrypted_otp_secret\", \"requested_by\".\"encrypted_otp_secret_iv\" AS \"requested_by__encrypted_otp_secret_iv\", \"requested_by\".\"encrypted_otp_secret_salt\" AS \"requested_by__encrypted_otp_secret_salt\", \"requested_by\".\"encrypted_otp_sent_at\" AS \"requested_by__encrypted_otp_sent_at\", \"requested_by\".\"consumed_timestep\" AS \"requested_by__consumed_timestep\", \"requested_by\".\"otp_required_for_login\" AS \"requested_by__otp_required_for_login\", \"requested_by\".\"deactivated_at\" AS \"requested_by__deactivated_at\", \"requested_by\".\"enabled_two_factor\" AS \"requested_by__enabled_two_factor\", \"requested_by\".\"confirmed_two_factor\" AS \"requested_by__confirmed_two_factor\", \"requested_by\".\"otp_backup_codes\" AS \"requested_by__otp_backup_codes\", \"requested_by\".\"authy_id\" AS \"requested_by__authy_id\", \"requested_by\".\"last_sign_in_with_authy\" AS \"requested_by__last_sign_in_with_authy\", \"requested_by\".\"authy_status\" AS \"requested_by__authy_status\", \"requested_by\".\"email_verified\" AS \"requested_by__email_verified\", \"requested_by\".\"initial_password_updated\" AS \"requested_by__initial_password_updated\", \"requested_by\".\"force_password_update\" AS \"requested_by__force_password_update\", \"requested_by\".\"grace_period\" AS \"requested_by__grace_period\", \"requested_by\".\"awaiting_second_factor\" AS \"requested_by__awaiting_second_factor\", \"requested_by\".\"role\" AS \"requested_by__role\", \"confirmed_by\".\"id\" AS \"confirmed_by__id\", \"confirmed_by\".\"created_at\" AS \"confirmed_by__created_at\", \"confirmed_by\".\"updated_at\" AS \"confirmed_by__updated_at\", \"confirmed_by\".\"name\" AS \"confirmed_by__name\", \"confirmed_by\".\"email\" AS \"confirmed_by__email\", \"confirmed_by\".\"phone_number\" AS \"confirmed_by__phone_number\", \"confirmed_by\".\"encrypted_password\" AS \"confirmed_by__encrypted_password\", \"confirmed_by\".\"reset_password_token\" AS \"confirmed_by__reset_password_token\", \"confirmed_by\".\"reset_password_sent_at\" AS \"confirmed_by__reset_password_sent_at\", \"confirmed_by\".\"remember_created_at\" AS \"confirmed_by__remember_created_at\", \"confirmed_by\".\"sign_in_count\" AS \"confirmed_by__sign_in_count\", \"confirmed_by\".\"current_sign_in_at\" AS \"confirmed_by__current_sign_in_at\", \"confirmed_by\".\"last_sign_in_at\" AS \"confirmed_by__last_sign_in_at\", \"confirmed_by\".\"current_sign_in_ip\" AS \"confirmed_by__current_sign_in_ip\", \"confirmed_by\".\"last_sign_in_ip\" AS \"confirmed_by__last_sign_in_ip\", \"confirmed_by\".\"institution_id\" AS \"confirmed_by__institution_id\", \"confirmed_by\".\"encrypted_api_secret_key\" AS \"confirmed_by__encrypted_api_secret_key\", \"confirmed_by\".\"password_changed_at\" AS \"confirmed_by__password_changed_at\", \"confirmed_by\".\"encrypted_otp_secret\" AS \"confirmed_by__encrypted_otp_secret\", \"confirmed_by\".\"encrypted_otp_secret_iv\" AS \"confirmed_by__encrypted_otp_secret_iv\", \"confirmed_by\".\"encrypted_otp_secret_salt\" AS \"confirmed_by__encrypted_otp_secret_salt\", \"confirmed_by\".\"encrypted_otp_sent_at\" AS \"confirmed_by__encrypted_otp_sent_at\", \"confirmed_by\".\"consumed_timestep\" AS \"confirmed_by__consumed_timestep\", \"confirmed_by\".\"otp_required_for_login\" AS \"confirmed_by__otp_required_for_login\", \"confirmed_by\".\"deactivated_at\" AS \"confirmed_by__deactivated_at\", \"confirmed_by\".\"enabled_two_factor\" AS \"confirmed_by__enabled_two_factor\", \"confirmed_by\".\"confirmed_two_factor\" AS \"confirmed_by__confirmed_two_factor\", \"confirmed_by\".\"otp_backup_codes\" AS \"confirmed_by__otp_backup_codes\", \"confirmed_by\".\"authy_id\" AS \"confirmed_by__authy_id\", \"confirmed_by\".\"last_sign_in_with_authy\" AS \"confirmed_by__last_sign_in_with_authy\", \"confirmed_by\".\"authy_status\" AS \"confirmed_by__authy_status\", \"confirmed_by\".\"email_verified\" AS \"confirmed_by__email_verified\", \"confirmed_by\".\"initial_password_updated\" AS \"confirmed_by__initial_password_updated\", \"confirmed_by\".\"force_password_update\" AS \"confirmed_by__force_password_update\", \"confirmed_by\".\"grace_period\" AS \"confirmed_by__grace_period\", \"confirmed_by\".\"awaiting_second_factor\" AS \"confirmed_by__awaiting_second_factor\", \"confirmed_by\".\"role\" AS \"confirmed_by__role\", \"cancelled_by\".\"id\" AS \"cancelled_by__id\", \"cancelled_by\".\"created_at\" AS \"cancelled_by__created_at\", \"cancelled_by\".\"updated_at\" AS \"cancelled_by__updated_at\", \"cancelled_by\".\"name\" AS \"cancelled_by__name\", \"cancelled_by\".\"email\" AS \"cancelled_by__email\", \"cancelled_by\".\"phone_number\" AS \"cancelled_by__phone_number\", \"cancelled_by\".\"encrypted_password\" AS \"cancelled_by__encrypted_password\", \"cancelled_by\".\"reset_password_token\" AS \"cancelled_by__reset_password_token\", \"cancelled_by\".\"reset_password_sent_at\" AS \"cancelled_by__reset_password_sent_at\", \"cancelled_by\".\"remember_created_at\" AS \"cancelled_by__remember_created_at\", \"cancelled_by\".\"sign_in_count\" AS \"cancelled_by__sign_in_count\", \"cancelled_by\".\"current_sign_in_at\" AS \"cancelled_by__current_sign_in_at\", \"cancelled_by\".\"last_sign_in_at\" AS \"cancelled_by__last_sign_in_at\", \"cancelled_by\".\"current_sign_in_ip\" AS \"cancelled_by__current_sign_in_ip\", \"cancelled_by\".\"last_sign_in_ip\" AS \"cancelled_by__last_sign_in_ip\", \"cancelled_by\".\"institution_id\" AS \"cancelled_by__institution_id\", \"cancelled_by\".\"encrypted_api_secret_key\" AS \"cancelled_by__encrypted_api_secret_key\", \"cancelled_by\".\"password_changed_at\" AS \"cancelled_by__password_changed_at\", \"cancelled_by\".\"encrypted_otp_secret\" AS \"cancelled_by__encrypted_otp_secret\", \"cancelled_by\".\"encrypted_otp_secret_iv\" AS \"cancelled_by__encrypted_otp_secret_iv\", \"cancelled_by\".\"encrypted_otp_secret_salt\" AS \"cancelled_by__encrypted_otp_secret_salt\", \"cancelled_by\".\"encrypted_otp_sent_at\" AS \"cancelled_by__encrypted_otp_sent_at\", \"cancelled_by\".\"consumed_timestep\" AS \"cancelled_by__consumed_timestep\", \"cancelled_by\".\"otp_required_for_login\" AS \"cancelled_by__otp_required_for_login\", \"cancelled_by\".\"deactivated_at\" AS \"cancelled_by__deactivated_at\", \"cancelled_by\".\"enabled_two_factor\" AS \"cancelled_by__enabled_two_factor\", \"cancelled_by\".\"confirmed_two_factor\" AS \"cancelled_by__confirmed_two_factor\", \"cancelled_by\".\"otp_backup_codes\" AS \"cancelled_by__otp_backup_codes\", \"cancelled_by\".\"authy_id\" AS \"cancelled_by__authy_id\", \"cancelled_by\".\"last_sign_in_with_authy\" AS \"cancelled_by__last_sign_in_with_authy\", \"cancelled_by\".\"authy_status\" AS \"cancelled_by__authy_status\", \"cancelled_by\".\"email_verified\" AS \"cancelled_by__email_verified\", \"cancelled_by\".\"initial_password_updated\" AS \"cancelled_by__initial_password_updated\", \"cancelled_by\".\"force_password_update\" AS \"cancelled_by__force_password_update\", \"cancelled_by\".\"grace_period\" AS \"cancelled_by__grace_period\", \"cancelled_by\".\"awaiting_second_factor\" AS \"cancelled_by__awaiting_second_factor\", \"cancelled_by\".\"role\" AS \"cancelled_by__role\", \"work_item\".\"id\" AS \"work_item__id\", \"work_item\".\"created_at\" AS \"work_item__created_at\", \"work_item\".\"updated_at\" AS \"work_item__updated_at\", \"work_item\".\"name\" AS \"work_item__name\", \"work_item\".\"etag\" AS \"work_item__etag\", \"work_item\".\"institution_id\" AS \"work_item__institution_id\", \"work_item\".\"intellectual_object_id\" AS \"work_item__intellectual_object_id\", \"work_item\".\"generic_file_id\" AS \"work_item__generic_file_id\", \"work_item\".\"bucket\" AS \"work_item__bucket\", \"work_item\".\"user\" AS \"work_item__user\", \"work_item\".\"note\" AS \"work_item__note\", \"work_item\".\"action\" AS \"work_item__action\", \"work_item\".\"stage\" AS \"work_item__stage\", \"work_item\".\"status\" AS \"work_item__status\", \"work_item\".\"outcome\" AS \"work_item__outcome\", \"work_item\".\"bag_date\" AS \"work_item__bag_date\", \"work_item\".\"date_processed\" AS \"work_item__date_processed\", \"work_item\".\"retry\" AS \"work_item__retry\", \"work_item\".\"node\" AS \"work_item__node\", \"work_item\".\"pid\" AS \"work_item__pid\", \"work_item\".\"needs_admin_review\" AS \"work_item__needs_admin_review\", \"work_item\".\"queued_at\" AS \"work_item__queued_at\", \"work_item\".\"size\" AS \"work_item__size\", \"work_item\".\"stage_started_at\" AS \"work_item__stage_started_at\", \"work_item\".\"aptrust_approver\" AS \"work_item__aptrust_approver\", \"work_item\".\"inst_approver\" AS \"work_item__inst_approver\" FROM \"deletion_requests\" AS \"deletion_request\" LEFT JOIN \"users\" AS \"requested_by\" ON \"requested_by\".\"id\" = \"deletion_request\".\"requested_by_id\" LEFT JOIN \"users\" AS \"confirmed_by\" ON \"confirmed_by\".\"id\" = \"deletion_request\".\"confirmed_by_id\" LEFT JOIN \"users\" AS \"cancelled_by\" ON \"cancelled_by\".\"id\" = \"deletion_request\".\"cancelled_by_id\" LEFT JOIN \"work_items\" AS \"work_item\" ON \"work_item\".\"id\" = \"deletion_request\".\"work_item_id\" WHERE ((\"deletion_request\".\"id\" = 4))"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".*, \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" JOIN \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" ON (\"deletion_requests_generic_files\".\"deletion_request_id\") IN (4) WHERE (\"generic_file\".\"id\" = \"deletion_requests_generic_files\".\"generic_file_id\")"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".*, \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" FROM \"intellectual_objects\" AS \"intellectual_object\" JOIN \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" ON (\"deletion_requests_intellectual_objects\".\"deletion_request_id\") IN (4) WHERE (\"intellectual_object\".\"id\" = \"deletion_requests_intellectual_objects\".\"intellectual_object_id\")"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" WHERE ((institution_id = 2) AND (role = 'institutional_admin'))"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: UPDATE \"deletion_requests\" AS \"deletion_request\" SET \"institution_id\" = 2, \"requested_by_id\" = 2, \"requested_at\" = '2022-06-22 17:30:46.792123+00:00:00', \"encrypted_confirmation_token\" = '$2a$10$9pzFewdK109X.N5kjm.xwOE8cB0W/9sLEhz/9zVJrHQ7BHMHlym1K', \"confirmed_by_id\" = 2, \"confirmed_at\" = '2022-06-22 17:30:46.880002+00:00:00', \"cancelled_by_id\" = NULL, \"cancelled_at\" = NULL, \"work_item_id\" = NULL WHERE \"deletion_request\".\"id\" = 4"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: insert into deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id) values (4, 1) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((intellectual_object_id = 1) AND (status = 'Success') AND (stage IN ('Record', 'Cleanup'))) ORDER BY \"date_processed\" desc LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: INSERT INTO \"work_items\" (\"id\", \"created_at\", \"updated_at\", \"name\", \"etag\", \"institution_id\", \"intellectual_object_id\", \"generic_file_id\", \"bucket\", \"user\", \"note\", \"action\", \"stage\", \"status\", \"outcome\", \"bag_date\", \"date_processed\", \"retry\", \"node\", \"pid\", \"needs_admin_review\", \"queued_at\", \"size\", \"stage_started_at\", \"aptrust_approver\", \"inst_approver\") VALUES (DEFAULT, '2022-06-22 17:30:46.883725+00:00:00', '2022-06-22 17:30:46.883729+00:00:00', 'photos.tar', '1f594a4e5bb944e59c74aefe781a3726', 2, 1, DEFAULT, 'aptrust.receiving.institution1.edu', 'admin@inst1.edu', 'Not started', 'Delete', 'Requested', 'Pending', 'Not started', '2016-08-24 10:04:06+00:00:00', '2022-06-22 17:30:46.883725+00:00:00', TRUE, DEFAULT, DEFAULT, FALSE, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 'admin@inst1.edu') RETURNING \"id\", \"generic_file_id\", \"node\", \"pid\", \"queued_at\", \"size\", \"stage_started_at\", \"aptrust_approver\""}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: UPDATE \"deletion_requests\" AS \"deletion_request\" SET \"institution_id\" = 2, \"requested_by_id\" = 2, \"requested_at\" = '2022-06-22 17:30:46.792123+00:00:00', \"encrypted_confirmation_token\" = '$2a$10$9pzFewdK109X.N5kjm.xwOE8cB0W/9sLEhz/9zVJrHQ7BHMHlym1K', \"confirmed_by_id\" = 2, \"confirmed_at\" = '2022-06-22 17:30:46.880002+00:00:00', \"cancelled_by_id\" = NULL, \"cancelled_at\" = NULL, \"work_item_id\" = NULL WHERE \"deletion_request\".\"id\" = 4"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: insert into deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id) values (4, 1) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: UPDATE \"work_items\" AS \"work_item\" SET \"created_at\" = '2022-06-22 17:30:46.883725+00:00:00', \"updated_at\" = '2022-06-22 17:30:46.886818+00:00:00', \"name\" = 'photos.tar', \"etag\" = '1f594a4e5bb944e59c74aefe781a3726', \"institution_id\" = 2, \"intellectual_object_id\" = 1, \"generic_file_id\" = NULL, \"bucket\" = 'aptrust.receiving.institution1.edu', \"user\" = 'admin@inst1.edu', \"note\" = 'Not started', \"action\" = 'Delete', \"stage\" = 'Requested', \"status\" = 'Pending', \"outcome\" = 'Not started', \"bag_date\" = '2016-08-24 10:04:06+00:00:00', \"date_processed\" = '2022-06-22 17:30:46.883725+00:00:00', \"retry\" = TRUE, \"node\" = NULL, \"pid\" = NULL, \"needs_admin_review\" = FALSE, \"queued_at\" = NULL, \"size\" = NULL, \"stage_started_at\" = NULL, \"aptrust_approver\" = NULL, \"inst_approver\" = 'admin@inst1.edu' WHERE \"work_item\".\"id\" = 33"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: update deletion_requests set work_item_id = 33 where id = 4"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:30:46-04:00","message":"Queueing WorkItem 33 to topic delete_item"}
{"level":"info","time":"2022-06-22T13:30:46-04:00","message":"Enqueue: http://localhost:4151/pub?topic=delete_item"}
{"level":"info","time":"2022-06-22T13:30:46-04:00","message":"NSQ response from http://localhost:4151/pub?topic=delete_item: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: INSERT INTO \"alerts\" (\"id\", \"institution_id\", \"type\", \"subject\", \"content\", \"deletion_request_id\", \"created_at\") VALUES (DEFAULT, 2, 'Deletion Confirmed', 'Deletion Confirmed', 'Hello from APTrust,\n\nThe deletion requested by Inst One Admin has been approved by Inst One Admin. We''ll send a confirmation email when the deletion is complete.\n\nFor your reference, the link below has information about the request.\n\nhttp://localhost/deletions/show/4\n\nThe Work Item showing the status of this deletion is at http://localhost/work_items/show/33\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n', 4, '2022-06-22 17:30:46.892235+00:00:00') RETURNING \"id\""}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: insert into alerts_users (alert_id, user_id, sent_at, read_at) values (9, 2, NULL, NULL) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:30:46-04:00","message":"SES is disabled per config settings. Email to admin@inst1.edu. Subject: Deletion Confirmed\n\n. Hello from APTrust,\n\nThe deletion requested by Inst One Admin has been approved by Inst One Admin. We'll send a confirmation email when the deletion is complete.\n\nFor your reference, the link below has information about the request.\n\nhttp://localhost/deletions/show/4\n\nThe Work Item showing the status of this deletion is at http://localhost/work_items/show/33\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: update alerts_users set sent_at = '2022-06-22 17:30:46.938954+00:00:00' where alert_id = 9 and user_id = 2"}
{"level":"info","status":200,"method":"POST","path":"/deletions/approve/4","ip":"","latency":169.50558,"user-agent":"","time":"2022-06-22T13:30:46-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"deletion_request\".\"id\", \"deletion_request\".\"institution_id\", \"deletion_request\".\"requested_by_id\", \"deletion_request\".\"requested_at\", \"deletion_request\".\"encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\", \"deletion_request\".\"confirmed_at\", \"deletion_request\".\"cancelled_by_id\", \"deletion_request\".\"cancelled_at\", \"deletion_request\".\"work_item_id\", \"requested_by\".\"id\" AS \"requested_by__id\", \"requested_by\".\"created_at\" AS \"requested_by__created_at\", \"requested_by\".\"updated_at\" AS \"requested_by__updated_at\", \"requested_by\".\"name\" AS \"requested_by__name\", \"requested_by\".\"email\" AS \"requested_by__email\", \"requested_by\".\"phone_number\" AS \"requested_by__phone_number\", \"requested_by\".\"encrypted_password\" AS \"requested_by__encrypted_password\", \"requested_by\".\"reset_password_token\" AS \"requested_by__reset_password_token\", \"requested_by\".\"reset_password_sent_at\" AS \"requested_by__reset_password_sent_at\", \"requested_by\".\"remember_created_at\" AS \"requested_by__remember_created_at\", \"requested_by\".\"sign_in_count\" AS \"requested_by__sign_in_count\", \"requested_by\".\"current_sign_in_at\" AS \"requested_by__current_sign_in_at\", \"requested_by\".\"last_sign_in_at\" AS \"requested_by__last_sign_in_at\", \"requested_by\".\"current_sign_in_ip\" AS \"requested_by__current_sign_in_ip\", \"requested_by\".\"last_sign_in_ip\" AS \"requested_by__last_sign_in_ip\", \"requested_by\".\"institution_id\" AS \"requested_by__institution_id\", \"requested_by\".\"encrypted_api_secret_key\" AS \"requested_by__encrypted_api_secret_key\", \"requested_by\".\"password_changed_at\" AS \"requested_by__password_changed_at\", \"requested_by\".\"encrypted_otp_secret\" AS \"requested_by__encrypted_otp_secret\", \"requested_by\".\"encrypted_otp_secret_iv\" AS \"requested_by__encrypted_otp_secret_iv\", \"requested_by\".\"encrypted_otp_secret_salt\" AS \"requested_by__encrypted_otp_secret_salt\", \"requested_by\".\"encrypted_otp_sent_at\" AS \"requested_by__encrypted_otp_sent_at\", \"requested_by\".\"consumed_timestep\" AS \"requested_by__consumed_timestep\", \"requested_by\".\"otp_required_for_login\" AS \"requested_by__otp_required_for_login\", \"requested_by\".\"deactivated_at\" AS \"requested_by__deactivated_at\", \"requested_by\".\"enabled_two_factor\" AS \"requested_by__enabled_two_factor\", \"requested_by\".\"confirmed_two_factor\" AS \"requested_by__confirmed_two_factor\", \"requested_by\".\"otp_backup_codes\" AS \"requested_by__otp_backup_codes\", \"requested_by\".\"authy_id\" AS \"requested_by__authy_id\", \"requested_by\".\"last_sign_in_with_authy\" AS \"requested_by__last_sign_in_with_authy\", \"requested_by\".\"authy_status\" AS \"requested_by__authy_status\", \"requested_by\".\"email_verified\" AS \"requested_by__email_verified\", \"requested_by\".\"initial_password_updated\" AS \"requested_by__initial_password_updated\", \"requested_by\".\"force_password_update\" AS \"requested_by__force_password_update\", \"requested_by\".\"grace_period\" AS \"requested_by__grace_period\", \"requested_by\".\"awaiting_second_factor\" AS \"requested_by__awaiting_second_factor\", \"requested_by\".\"role\" AS \"requested_by__role\", \"confirmed_by\".\"id\" AS \"confirmed_by__id\", \"confirmed_by\".\"created_at\" AS \"confirmed_by__created_at\", \"confirmed_by\".\"updated_at\" AS \"confirmed_by__updated_at\", \"confirmed_by\".\"name\" AS \"confirmed_by__name\", \"confirmed_by\".\"email\" AS \"confirmed_by__email\", \"confirmed_by\".\"phone_number\" AS \"confirmed_by__phone_number\", \"confirmed_by\".\"encrypted_password\" AS \"confirmed_by__encrypted_password\", \"confirmed_by\".\"reset_password_token\" AS \"confirmed_by__reset_password_token\", \"confirmed_by\".\"reset_password_sent_at\" AS \"confirmed_by__reset_password_sent_at\", \"confirmed_by\".\"remember_created_at\" AS \"confirmed_by__remember_created_at\", \"confirmed_by\".\"sign_in_count\" AS \"confirmed_by__sign_in_count\", \"confirmed_by\".\"current_sign_in_at\" AS \"confirmed_by__current_sign_in_at\", \"confirmed_by\".\"last_sign_in_at\" AS \"confirmed_by__last_sign_in_at\", \"confirmed_by\".\"current_sign_in_ip\" AS \"confirmed_by__current_sign_in_ip\", \"confirmed_by\".\"last_sign_in_ip\" AS \"confirmed_by__last_sign_in_ip\", \"confirmed_by\".\"institution_id\" AS \"confirmed_by__institution_id\", \"confirmed_by\".\"encrypted_api_secret_key\" AS \"confirmed_by__encrypted_api_secret_key\", \"confirmed_by\".\"password_changed_at\" AS \"confirmed_by__password_changed_at\", \"confirmed_by\".\"encrypted_otp_secret\" AS \"confirmed_by__encrypted_otp_secret\", \"confirmed_by\".\"encrypted_otp_secret_iv\" AS \"confirmed_by__encrypted_otp_secret_iv\", \"confirmed_by\".\"encrypted_otp_secret_salt\" AS \"confirmed_by__encrypted_otp_secret_salt\", \"confirmed_by\".\"encrypted_otp_sent_at\" AS \"confirmed_by__encrypted_otp_sent_at\", \"confirmed_by\".\"consumed_timestep\" AS \"confirmed_by__consumed_timestep\", \"confirmed_by\".\"otp_required_for_login\" AS \"confirmed_by__otp_required_for_login\", \"confirmed_by\".\"deactivated_at\" AS \"confirmed_by__deactivated_at\", \"confirmed_by\".\"enabled_two_factor\" AS \"confirmed_by__enabled_two_factor\", \"confirmed_by\".\"confirmed_two_factor\" AS \"confirmed_by__confirmed_two_factor\", \"confirmed_by\".\"otp_backup_codes\" AS \"confirmed_by__otp_backup_codes\", \"confirmed_by\".\"authy_id\" AS \"confirmed_by__authy_id\", \"confirmed_by\".\"last_sign_in_with_authy\" AS \"confirmed_by__last_sign_in_with_authy\", \"confirmed_by\".\"authy_status\" AS \"confirmed_by__authy_status\", \"confirmed_by\".\"email_verified\" AS \"confirmed_by__email_verified\", \"confirmed_by\".\"initial_password_updated\" AS \"confirmed_by__initial_password_updated\", \"confirmed_by\".\"force_password_update\" AS \"confirmed_by__force_password_update\", \"confirmed_by\".\"grace_period\" AS \"confirmed_by__grace_period\", \"confirmed_by\".\"awaiting_second_factor\" AS \"confirmed_by__awaiting_second_factor\", \"confirmed_by\".\"role\" AS \"confirmed_by__role\", \"cancelled_by\".\"id\" AS \"cancelled_by__id\", \"cancelled_by\".\"created_at\" AS \"cancelled_by__created_at\", \"cancelled_by\".\"updated_at\" AS \"cancelled_by__updated_at\", \"cancelled_by\".\"name\" AS \"cancelled_by__name\", \"cancelled_by\".\"email\" AS \"cancelled_by__email\", \"cancelled_by\".\"phone_number\" AS \"cancelled_by__phone_number\", \"cancelled_by\".\"encrypted_password\" AS \"cancelled_by__encrypted_password\", \"cancelled_by\".\"reset_password_token\" AS \"cancelled_by__reset_password_token\", \"cancelled_by\".\"reset_password_sent_at\" AS \"cancelled_by__reset_password_sent_at\", \"cancelled_by\".\"remember_created_at\" AS \"cancelled_by__remember_created_at\", \"cancelled_by\".\"sign_in_count\" AS \"cancelled_by__sign_in_count\", \"cancelled_by\".\"current_sign_in_at\" AS \"cancelled_by__current_sign_in_at\", \"cancelled_by\".\"last_sign_in_at\" AS \"cancelled_by__last_sign_in_at\", \"cancelled_by\".\"current_sign_in_ip\" AS \"cancelled_by__current_sign_in_ip\", \"cancelled_by\".\"last_sign_in_ip\" AS \"cancelled_by__last_sign_in_ip\", \"cancelled_by\".\"institution_id\" AS \"cancelled_by__institution_id\", \"cancelled_by\".\"encrypted_api_secret_key\" AS \"cancelled_by__encrypted_api_secret_key\", \"cancelled_by\".\"password_changed_at\" AS \"cancelled_by__password_changed_at\", \"cancelled_by\".\"encrypted_otp_secret\" AS \"cancelled_by__encrypted_otp_secret\", \"cancelled_by\".\"encrypted_otp_secret_iv\" AS \"cancelled_by__encrypted_otp_secret_iv\", \"cancelled_by\".\"encrypted_otp_secret_salt\" AS \"cancelled_by__encrypted_otp_secret_salt\", \"cancelled_by\".\"encrypted_otp_sent_at\" AS \"cancelled_by__encrypted_otp_sent_at\", \"cancelled_by\".\"consumed_timestep\" AS \"cancelled_by__consumed_timestep\", \"cancelled_by\".\"otp_required_for_login\" AS \"cancelled_by__otp_required_for_login\", \"cancelled_by\".\"deactivated_at\" AS \"cancelled_by__deactivated_at\", \"cancelled_by\".\"enabled_two_factor\" AS \"cancelled_by__enabled_two_factor\", \"cancelled_by\".\"confirmed_two_factor\" AS \"cancelled_by__confirmed_two_factor\", \"cancelled_by\".\"otp_backup_codes\" AS \"cancelled_by__otp_backup_codes\", \"cancelled_by\".\"authy_id\" AS \"cancelled_by__authy_id\", \"cancelled_by\".\"last_sign_in_with_authy\" AS \"cancelled_by__last_sign_in_with_authy\", \"cancelled_by\".\"authy_status\" AS \"cancelled_by__authy_status\", \"cancelled_by\".\"email_verified\" AS \"cancelled_by__email_verified\", \"cancelled_by\".\"initial_password_updated\" AS \"cancelled_by__initial_password_updated\", \"cancelled_by\".\"force_password_update\" AS \"cancelled_by__force_password_update\", \"cancelled_by\".\"grace_period\" AS \"cancelled_by__grace_period\", \"cancelled_by\".\"awaiting_second_factor\" AS \"cancelled_by__awaiting_second_factor\", \"cancelled_by\".\"role\" AS \"cancelled_by__role\", \"work_item\".\"id\" AS \"work_item__id\", \"work_item\".\"created_at\" AS \"work_item__created_at\", \"work_item\".\"updated_at\" AS \"work_item__updated_at\", \"work_item\".\"name\" AS \"work_item__name\", \"work_item\".\"etag\" AS \"work_item__etag\", \"work_item\".\"institution_id\" AS \"work_item__institution_id\", \"work_item\".\"intellectual_object_id\" AS \"work_item__intellectual_object_id\", \"work_item\".\"generic_file_id\" AS \"work_item__generic_file_id\", \"work_item\".\"bucket\" AS \"work_item__bucket\", \"work_item\".\"user\" AS \"work_item__user\", \"work_item\".\"note\" AS \"work_item__note\", \"work_item\".\"action\" AS \"work_item__action\", \"work_item\".\"stage\" AS \"work_item__stage\", \"work_item\".\"status\" AS \"work_item__status\", \"work_item\".\"outcome\" AS \"work_item__outcome\", \"work_item\".\"bag_date\" AS \"work_item__bag_date\", \"work_item\".\"date_processed\" AS \"work_item__date_processed\", \"work_item\".\"retry\" AS \"work_item__retry\", \"work_item\".\"node\" AS \"work_item__node\", \"work_item\".\"pid\" AS \"work_item__pid\", \"work_item\".\"needs_admin_review\" AS \"work_item__needs_admin_review\", \"work_item\".\"queued_at\" AS \"work_item__queued_at\", \"work_item\".\"size\" AS \"work_item__size\", \"work_item\".\"stage_started_at\" AS \"work_item__stage_started_at\", \"work_item\".\"aptrust_approver\" AS \"work_item__aptrust_approver\", \"work_item\".\"inst_approver\" AS \"work_item__inst_approver\" FROM \"deletion_requests\" AS \"deletion_request\" LEFT JOIN \"users\" AS \"requested_by\" ON \"requested_by\".\"id\" = \"deletion_request\".\"requested_by_id\" LEFT JOIN \"users\" AS \"confirmed_by\" ON \"confirmed_by\".\"id\" = \"deletion_request\".\"confirmed_by_id\" LEFT JOIN \"users\" AS \"cancelled_by\" ON \"cancelled_by\".\"id\" = \"deletion_request\".\"cancelled_by_id\" LEFT JOIN \"work_items\" AS \"work_item\" ON \"work_item\".\"id\" = \"deletion_request\".\"work_item_id\" WHERE ((\"deletion_request\".\"id\" = 4))"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".*, \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" JOIN \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" ON (\"deletion_requests_generic_files\".\"deletion_request_id\") IN (4) WHERE (\"generic_file\".\"id\" = \"deletion_requests_generic_files\".\"generic_file_id\")"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".*, \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" FROM \"intellectual_objects\" AS \"intellectual_object\" JOIN \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" ON (\"deletion_requests_intellectual_objects\".\"deletion_request_id\") IN (4) WHERE (\"intellectual_object\".\"id\" = \"deletion_requests_intellectual_objects\".\"intellectual_object_id\")"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\" FROM \"alerts\" AS \"alert\" WHERE ((deletion_request_id = 4)) LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: drop table if exists \"ar_internal_metadata\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: drop table if exists \"confirmation_tokens\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: drop table if exists \"emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:46-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"emails_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"emails_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"emails_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"emails_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"old_passwords\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"schema_migrations\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"snapshots\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"usage_samples\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"alerts_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"alerts_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"alerts_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"alerts\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"deletion_requests\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"storage_records\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"checksums\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"roles_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"roles\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"storage_options\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: --\n-- schema.sql\n--\n-- This file represents the full registry schema.\n--\n-- The migrations.sql file updates the old Pharos schema, as it existed\n-- in the feature/storage_record branch, so that it matches this schema.\n--\n-- https://github.com/APTrust/pharos/blob/feature/storage-record/db/schema.rb\n--\n\n\n-- public.ar_internal_metadata definition\n--\n-- This is a legacy table used by ActiveRecord.\n-- We can drop this once production is stable.\n--\nCREATE TABLE public.ar_internal_metadata (\n\t\"key\" varchar NOT NULL,\n\tvalue varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT ar_internal_metadata_pkey PRIMARY KEY (key)\n);\n\n\n-- public.bulk_delete_jobs definition\n--\n-- This is the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs (\n\tid bigserial NOT NULL,\n\trequested_by varchar NULL,\n\tinstitutional_approver varchar NULL,\n\taptrust_approver varchar NULL,\n\tinstitutional_approval_at timestamp NULL,\n\taptrust_approval_at timestamp NULL,\n\tnote text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id int4 NOT NULL,\n\tCONSTRAINT bulk_delete_jobs_pkey PRIMARY KEY (id)\n);\n\n\n-- public.bulk_delete_jobs_emails definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_emails (\n\tbulk_delete_job_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_emails_on_bulk_delete_job_id ON public.bulk_delete_jobs_emails USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_emails_on_email_id ON public.bulk_delete_jobs_emails USING btree (email_id);\n\n\n-- public.bulk_delete_jobs_generic_files definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_generic_files (\n\tbulk_delete_job_id int8 NULL,\n\tgeneric_file_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_bulk_delete_job_id ON public.bulk_delete_jobs_generic_files USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_generic_file_id ON public.bulk_delete_jobs_generic_files USING btree (generic_file_id);\n\n\n-- public.bulk_delete_jobs_institutions definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_institutions (\n\tbulk_delete_job_id int8 NULL,\n\tinstitution_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_bulk_delete_job_id ON public.bulk_delete_jobs_institutions USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_institution_id ON public.bulk_delete_jobs_institutions USING btree (institution_id);\n\n\n-- public.bulk_delete_jobs_intellectual_objects definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_intellectual_objects (\n\tbulk_delete_job_id int8 NULL,\n\tintellectual_object_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_bulk_job_id ON public.bulk_delete_jobs_intellectual_objects USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_object_id ON public.bulk_delete_jobs_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.confirmation_tokens definition\n--\n-- This is a legacy table. We can likely delete it\n-- after production is stable.\n--\nCREATE TABLE public.confirmation_tokens (\n\tid bigserial NOT NULL,\n\t\"token\" varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tuser_id int4 NULL,\n\tCONSTRAINT confirmation_tokens_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails definition\n--\n-- This legacy table will be replaced by the new alerts table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails (\n\tid bigserial NOT NULL,\n\temail_type varchar NULL,\n\tevent_identifier varchar NULL,\n\titem_id int4 NULL,\n\temail_text text NULL,\n\tuser_list text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tCONSTRAINT emails_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails_generic_files definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_generic_files (\n\tgeneric_file_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_generic_files_on_email_id ON public.emails_generic_files USING btree (email_id);\nCREATE INDEX index_emails_generic_files_on_generic_file_id ON public.emails_generic_files USING btree (generic_file_id);\n\n\n-- public.emails_intellectual_objects definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_intellectual_objects (\n\tintellectual_object_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_intellectual_objects_on_email_id ON public.emails_intellectual_objects USING btree (email_id);\nCREATE INDEX index_emails_intellectual_objects_on_intellectual_object_id ON public.emails_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.emails_premis_events definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_premis_events (\n\tpremis_event_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_premis_events_on_email_id ON public.emails_premis_events USING btree (email_id);\nCREATE INDEX index_emails_premis_events_on_premis_event_id ON public.emails_premis_events USING btree (premis_event_id);\n\n\n-- public.emails_work_items definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_work_items (\n\twork_item_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_work_items_on_email_id ON public.emails_work_items USING btree (email_id);\nCREATE INDEX index_emails_work_items_on_work_item_id ON public.emails_work_items USING btree (work_item_id);\n\n\n-- public.generic_files definition\nCREATE TABLE public.generic_files (\n\tid serial NOT NULL,\n\tfile_format varchar NULL,\n\t\"size\" int8 NULL,\n\tidentifier varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tlast_fixity_check timestamp NOT NULL DEFAULT '2000-01-01 00:00:00'::timestamp without time zone,\n\tinstitution_id int4 NOT NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tuuid varchar NOT NULL,\n\tCONSTRAINT generic_files_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_generic_files_on_created_at ON public.generic_files USING btree (created_at);\nCREATE UNIQUE INDEX index_generic_files_on_identifier ON public.generic_files USING btree (identifier);\nCREATE INDEX index_generic_files_on_institution_id ON public.generic_files USING btree (institution_id);\nCREATE INDEX index_generic_files_on_institution_id_and_state ON public.generic_files USING btree (institution_id, state);\nCREATE INDEX index_generic_files_on_institution_id_and_updated_at ON public.generic_files USING btree (institution_id, updated_at);\nCREATE INDEX index_generic_files_on_intellectual_object_id ON public.generic_files USING btree (intellectual_object_id);\nCREATE INDEX index_generic_files_on_updated_at ON public.generic_files USING btree (updated_at);\nCREATE UNIQUE INDEX index_generic_files_on_uuid ON public.generic_files USING btree (uuid);\nCREATE INDEX ix_gf_last_fixity_check ON public.generic_files USING btree (last_fixity_check);\n\n\n-- public.institutions definition\nCREATE TABLE public.institutions (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\tidentifier varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\t\"type\" varchar NULL,\n\tmember_institution_id int4 NULL,\n\tdeactivated_at timestamp NULL,\n\totp_enabled bool NULL,\n    enable_spot_restore bool not null default false,\n\treceiving_bucket varchar NOT NULL,\n\trestore_bucket varchar NOT NULL,\n\tCONSTRAINT institutions_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_institutions_on_name ON public.institutions USING btree (name);\n\n\n-- public.intellectual_objects definition\nCREATE TABLE public.intellectual_objects (\n\tid serial NOT NULL,\n\ttitle varchar NULL,\n\tdescription text NULL,\n\tidentifier varchar NULL,\n\talt_identifier varchar NULL,\n\t\"access\" varchar NULL,\n\tbag_name varchar NULL,\n\tinstitution_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tetag varchar NULL,\n\tbag_group_identifier varchar NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tbagit_profile_identifier varchar NULL,\n\tsource_organization varchar NULL,\n\tinternal_sender_identifier varchar NULL,\n\tinternal_sender_description text NULL,\n\tCONSTRAINT intellectual_objects_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_intellectual_objects_on_bag_name ON public.intellectual_objects USING btree (bag_name);\nCREATE INDEX index_intellectual_objects_on_created_at ON public.intellectual_objects USING btree (created_at);\nCREATE UNIQUE INDEX index_intellectual_objects_on_identifier ON public.intellectual_objects USING btree (identifier);\nCREATE INDEX index_intellectual_objects_on_institution_id ON public.intellectual_objects USING btree (institution_id);\nCREATE INDEX index_intellectual_objects_on_updated_at ON public.intellectual_objects USING btree (updated_at);\n\n\n-- public.old_passwords definition\n--\n-- This is a legacy table. We can get rid of this if we\n-- abandon mandatory password changes. Wait until that's\n-- decided.\n--\nCREATE TABLE public.old_passwords (\n\tid bigserial NOT NULL,\n\tencrypted_password varchar NOT NULL,\n\tpassword_salt varchar NULL,\n\tpassword_archivable_type varchar NOT NULL,\n\tpassword_archivable_id int4 NOT NULL,\n\tcreated_at timestamp NULL,\n\tCONSTRAINT old_passwords_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_password_archivable ON public.old_passwords USING btree (password_archivable_type, password_archivable_id);\n\n\n-- public.premis_events definition\nCREATE TABLE public.premis_events (\n\tid serial NOT NULL,\n\tidentifier varchar NULL,\n\tevent_type varchar NULL,\n\tdate_time varchar NULL,\n\toutcome_detail varchar NULL,\n\tdetail varchar NULL,\n\toutcome_information varchar NULL,\n\t\"object\" varchar NULL,\n\tagent varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\toutcome varchar NULL,\n\tinstitution_id int4 NULL,\n\told_uuid varchar NULL,\n\tCONSTRAINT premis_events_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_premis_events_date_time_desc ON public.premis_events USING btree (date_time DESC);\nCREATE INDEX index_premis_events_on_event_type ON public.premis_events USING btree (event_type);\nCREATE INDEX index_premis_events_on_event_type_and_outcome ON public.premis_events USING btree (event_type, outcome);\nCREATE INDEX index_premis_events_on_generic_file_id ON public.premis_events USING btree (generic_file_id);\nCREATE UNIQUE INDEX index_premis_events_on_identifier ON public.premis_events USING btree (identifier);\nCREATE INDEX index_premis_events_on_institution_id ON public.premis_events USING btree (institution_id);\nCREATE INDEX index_premis_events_on_intellectual_object_id ON public.premis_events USING btree (intellectual_object_id);\nCREATE INDEX index_premis_events_on_outcome ON public.premis_events USING btree (outcome);\n\n\n-- public.schema_migrations definition\n--\n-- This is a legacy table used by ActiveRecord\n-- to track which migrations have been applied.\n--\n-- We can delete this when production is stable.\n--\nCREATE TABLE public.schema_migrations (\n\t\"version\" varchar NOT NULL,\n\tCONSTRAINT schema_migrations_pkey PRIMARY KEY (version)\n);\n\n\n-- public.snapshots definition\n--\n-- This table stores point-in-time snapshots\n-- of how much data each depositor has in the repo.\n--\n-- We may eventually delete this, but keep for now.\n--\nCREATE TABLE public.snapshots (\n\tid bigserial NOT NULL,\n\taudit_date timestamp NULL,\n\tinstitution_id int4 NULL,\n\tapt_bytes int8 NULL,\n\t\"cost\" numeric NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tsnapshot_type varchar NULL,\n\tcs_bytes int8 NULL,\n\tgo_bytes int8 NULL,\n\tCONSTRAINT snapshots_pkey PRIMARY KEY (id)\n);\n\n\n-- public.usage_samples definition\n--\n-- No idea what this was supposed to be, but the\n-- table never had any data in the production DB.\n-- Consider deleting this after we're sure it's not used.\n--\nCREATE TABLE public.usage_samples (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id varchar NULL,\n\t\"data\" text NULL,\n\tCONSTRAINT usage_samples_pkey PRIMARY KEY (id)\n);\n\n\n-- public.work_items definition\nCREATE TABLE public.work_items (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\t\"name\" varchar NULL,\n\tetag varchar NULL,\n\tbucket varchar NULL,\n\t\"user\" varchar NULL,\n\tnote text NULL,\n\t\"action\" varchar NULL,\n\tstage varchar NULL,\n\tstatus varchar NULL,\n\toutcome text NULL,\n\tbag_date timestamp NULL,\n\tdate_processed timestamp NULL,\n\tretry bool NOT NULL DEFAULT false,\n\tnode varchar(255) NULL,\n\tpid int4 NULL DEFAULT 0,\n\tneeds_admin_review bool NOT NULL DEFAULT false,\n\tinstitution_id int4 NULL,\n\tqueued_at timestamp NULL,\n\t\"size\" int8 NULL,\n\tstage_started_at timestamp NULL,\n\taptrust_approver varchar NULL,\n\tinst_approver varchar NULL,\n\tCONSTRAINT work_items_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_work_items_on_action ON public.work_items USING btree (action);\nCREATE INDEX index_work_items_on_date ON public.work_items USING btree (date_processed);\nCREATE INDEX index_work_items_on_etag_and_name ON public.work_items USING btree (etag, name);\nCREATE INDEX index_work_items_on_generic_file_id ON public.work_items USING btree (generic_file_id);\nCREATE INDEX index_work_items_on_institution_id ON public.work_items USING btree (institution_id);\nCREATE INDEX index_work_items_on_institution_id_and_date ON public.work_items USING btree (institution_id, date_processed);\nCREATE INDEX index_work_items_on_intellectual_object_id ON public.work_items USING btree (intellectual_object_id);\nCREATE INDEX index_work_items_on_stage ON public.work_items USING btree (stage);\nCREATE INDEX index_work_items_on_status ON public.work_items USING btree (status);\n\n\n-- public.checksums definition\nCREATE TABLE public.checksums (\n\tid serial NOT NULL,\n\talgorithm varchar NULL,\n\tdatetime timestamp NULL,\n\tdigest varchar NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT checksums_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_89bb0866e7 FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_checksums_on_generic_file_id ON public.checksums USING btree (generic_file_id);\n\n\n-- public.storage_records definition\nCREATE TABLE public.storage_records (\n\tid bigserial NOT NULL,\n\tgeneric_file_id int4 NULL,\n\turl varchar NULL,\n\tCONSTRAINT storage_records_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_a126ea6adc FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\n\n-- public.users definition\nCREATE TABLE public.users (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\temail varchar NULL,\n\tphone_number varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tencrypted_password varchar NOT NULL DEFAULT ''::character varying,\n\treset_password_token varchar NULL,\n\treset_password_sent_at timestamp NULL,\n\tremember_created_at timestamp NULL,\n\tsign_in_count int4 NOT NULL DEFAULT 0,\n\tcurrent_sign_in_at timestamp NULL,\n\tlast_sign_in_at timestamp NULL,\n\tcurrent_sign_in_ip varchar NULL,\n\tlast_sign_in_ip varchar NULL,\n\tinstitution_id int4 NULL,\n\tencrypted_api_secret_key text NULL,\n\tpassword_changed_at timestamp NULL,\n\tencrypted_otp_secret varchar NULL,\n\tencrypted_otp_secret_iv varchar NULL,\n\tencrypted_otp_secret_salt varchar NULL,\n    encrypted_otp_sent_at timestamp NULL,\n\tconsumed_timestep int4 NULL,\n\totp_required_for_login bool NULL,\n\tdeactivated_at timestamp NULL,\n\tenabled_two_factor bool NULL DEFAULT false,\n\tconfirmed_two_factor bool NULL DEFAULT false,\n\totp_backup_codes _varchar NULL,\n\tauthy_id varchar NULL,\n\tlast_sign_in_with_authy timestamp NULL,\n\tauthy_status varchar NULL,\n\temail_verified bool NULL DEFAULT false,\n\tinitial_password_updated bool NULL DEFAULT false,\n\tforce_password_update bool NULL DEFAULT false,\n\taccount_confirmed bool NULL DEFAULT true,\n\tgrace_period timestamp NULL,\n    awaiting_second_factor boolean not null default false,\n    \"role\" varchar(50) NOT NULL default 'none',\n\tCONSTRAINT users_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_7fcf39ca13 FOREIGN KEY (institution_id) REFERENCES institutions(id)\n);\nCREATE INDEX index_users_on_authy_id ON public.users USING btree (authy_id);\nCREATE UNIQUE INDEX index_users_on_email ON public.users USING btree (email);\nCREATE INDEX index_users_on_institution_id ON public.users USING btree (institution_id);\nCREATE INDEX index_users_on_password_changed_at ON public.users USING btree (password_changed_at);\nCREATE UNIQUE INDEX index_users_on_reset_password_token ON public.users USING btree (reset_password_token);\n\n-------------------------------------------------------------------------------\n-- New tables that were not part of Pharos.\n-- alerts              + join tables\n-- deletion_requests   + join tables\n-------------------------------------------------------------------------------\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index index_alerts_institution_id ON public.alerts (institution_id);\ncreate index index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table public.alerts_users (\n    alert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table public.alerts_work_items (\n    alert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index index_storage_options_name ON public.storage_options (\"name\");\n\n\n\n-------------------------------------------------------------------------------\n-- Functions\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: -- migrations.sql\n--\n-- This file contains ALL alterations that should be applied to the\n-- existing Pharos DB schema (as it exists in the feature/storage-option\n-- branch) to make it match schema.sql.\n--\n-- All operations in this file must be idempotent, so we can run it\n-- any number of times and always know that it will leave the DB in\n-- consistent and known state that matches schema.sql.\n--\n-- NOTE: When migrating old Pharos DB, we will also need to create the\n--       views in the schema.sql file.\n-------------------------------------------------------------------------------\n\n---------------------------------------------------------\n-- START OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n---------------------------------------------------------\n\n-- Drop legacy table from Pharos DB.\ndrop table if exists work_item_states;\n\n-- Create the storage_records table, with indexes.\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\tcreate table public.storage_records (\n    \tid bigserial not null,\n    \tgeneric_file_id int8 not null,\n    \turl varchar not null,\n    \tconstraint storage_records_pkey primary key (id),\n    \tconstraint fk_rails_a126ea6adc foreign key (generic_file_id) references generic_files(id)\n\t);\n\tcreate index if not exists index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\tcreate unique index if not exists index_storage_records_on_url ON public.storage_records(\"url\");\n  end if;\nend\n$$;\n\n-- Add column generic_files.uuid.\nalter table generic_files add column if not exists \"uuid\" varchar;\n\n-- Copy uuid from uri into uuid field.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\tupdate generic_files set uuid=split_part(uri, '/', 5);\n  end if;\nend\n$$;\n\n-- Change generic_files.uuid to not null and add a unique index.\ndo\n$$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uuid' and is_nullable = 'YES') then\n  \talter table generic_files alter column \"uuid\" set not null;\n\tcreate unique index if not exists index_generic_files_on_uuid on generic_files(uuid);\n  end if;\nend\n$$;\n\n-- Copy generic_files.uri from storage_records.url.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\n  \t  -- Get the intial URL. All items, regadless of storage option, have one URL.\n      -- The inner if statement makes sure this hasn't already run. (Prevents duplicate inserts.)\n\t  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\t    if not exists (select 1 from storage_records where length(url) > 0) then\n\t\t  insert into storage_records (generic_file_id, url) select id, uri from generic_files gf order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- For items in standard storage, we need to add a Glacier URL. URLs differ per environment, so we check.\n\t  -- In each case, the inner if statement tries to ensure that these inserts have not already run.\n\n\t  -- Production\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.preservation.storage/', '/aptrust.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Test/Demo\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.test.preservation.oregon/%') then\n\t      insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.test.preservation/', '/aptrust.test.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Staging\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.staging.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.staging.preservation/', '/aptrust.staging.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n  end if;\nend\n$$;\n\n-- Now remove generic_files.uri, since the data is now in storage_records\nalter table generic_files drop column if exists uri;\n\n-------------------------------------------------------\n-- END OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n-------------------------------------------------------\n\n-- The premis_events.date_time column is varchar, but it should be\n-- timestamp. We need to change it. This change may fail if 1) there\n-- are invalid or badly formatted dates in the date_time column, or\n-- 2) if any views referencing premis_events.date_time already exist.\n-- Drop premis_events_view if necessary and recreate it after this alteration.\n--\n-- This change may take a long time, as premis_events has over 100M rows.\ndo\n$$\nbegin\n\tif exists(\n\t\tselect 1 from information_schema.columns\n\t\twhere table_schema = 'public'\n\t\tand table_name = 'premis_events'\n\t\tand column_name = 'date_time'\n\t\tand data_type = 'character varying')\n\tthen\n\t\talter table premis_events alter column date_time type timestamp\n\t\tusing TO_TIMESTAMP(date_time, 'YYYY-MM-DDTHH24:MI:SS');\n\tend if;\nend\n$$;\n\n-- We need to fix the user role structure. Pharos allows a user to have\n-- multiple roles at a single institution, though our business rules disallow\n-- that, and no user has ever had more than one role. To simplify the DB\n-- and our queries, we need to do the following:\n--\n-- 1. Create a role column in the users table.\n-- 2. Populate that column with the value with each user's role from\n--    user -> roles_user -> roles.\n-- 3. Drop the roles_users table.\n-- 4. Drop the roles table.\n\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='role') then\n \talter table users add column \"role\" varchar(50) not null default 'none';\n \tupdate users u set \"role\" = coalesce((select r.name from \"roles\" r inner join roles_users ru on ru.role_id = r.id where ru.user_id = u.id), 'none');\n    drop table if exists roles_users;\n    drop table if exists roles;\n  end if;\nend\n$$;\n\n-- Add awaiting_second_factor\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='awaiting_second_factor') then\n \talter table users add column \"awaiting_second_factor\" boolean not null default false;\n  end if;\nend\n$$;\n\n-- Add encrypted_otp_sent_at\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='encrypted_otp_sent_at') then\n \talter table users add column \"encrypted_otp_sent_at\" timestamp null;\n  end if;\nend\n$$;\n\n\n-- The ingest_state columns were part of a proposed architecture we never\n-- implemented. They have never been used, and we don't need them.\nalter table intellectual_objects drop column if exists ingest_state;\nalter table generic_files drop column if exists ingest_state;\n\n\n-- intellectual_objects.bag_group_identifier is almost always empty.\n-- Make this column nullable to ease inserts.\nalter table intellectual_objects alter column bag_group_identifier drop not null;\n\n\n-- Remove object_identifier and generic_file_identifier from work_items.\n-- We can use a view to join the files & objects tables, avoiding the\n-- duplicate data.\nalter table work_items drop column if exists object_identifier;\nalter table work_items drop column if exists generic_file_identifier;\n\n-- The work_items.date column actually refers to the datetime on which\n-- the item was last processed by one of our Go workers. The name \"date\"\n-- is too vague and ambiguous, so let's call it what it is.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns\n    where table_schema='public' AND table_name='work_items' AND column_name='date') then\n    alter table work_items rename column \"date\" to \"date_processed\";\n  end if;\nend\n$$;\n\n-- Update the indexes on work_items to reflect the change from date to\n-- date_processed.\n\ndrop index if exists index_work_items_on_date;\ndrop index if exists index_work_items_on_institution_id_and_date;\n\ncreate index if not exists index_work_items_on_date_processed on work_items(date_processed);\ncreate index if not exists index_work_items_on_inst_id_and_date_processed on work_items(institution_id, date_processed);\n\n-- These columns are unnecessary in the premis_events table.\n-- We can get them by joining other tables in a view.\n-- This will have a large impact on storage space, since these\n-- two fields together average ~100 bytes per record, and as of\n-- Jan. 2021, we have around 120M records. Dropping these columns\n-- also drops the indexes on these two columns, which are huge and\n-- are rarely used.\nalter table premis_events drop column if exists intellectual_object_identifier;\nalter table premis_events drop column if exists generic_file_identifier;\n\n-- Get rid of useless indexes. We can add these back if they actually turn\n-- out to be useful.\n--\n-- generic_files\ndrop index if exists index_files_on_inst_state_and_format;\ndrop index if exists index_files_on_inst_state_and_updated;\ndrop index if exists index_generic_files_on_file_format;\ndrop index if exists index_generic_files_on_file_format_and_state;\ndrop index if exists index_generic_files_on_institution_id_and_size_and_state;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_file_format;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_state;\ndrop index if exists index_generic_files_on_size;\ndrop index if exists index_generic_files_on_size_and_state;\ndrop index if exists index_generic_files_on_state;\ndrop index if exists index_generic_files_on_state_and_updated_at;\n\n-- intellectual_objects\ndrop index if exists index_intellectual_objects_on_access;\ndrop index if exists index_intellectual_objects_on_institution_id_and_state;\ndrop index if exists index_intellectual_objects_on_state;\n\n-- premis_events\ndrop index if exists index_premis_events_on_generic_file_id_and_event_type;\ndrop index if exists index_premis_events_on_identifier_and_institution_id;\n\n-- institutions\ncreate unique index if not exists index_institutions_identifier on institutions using btree(identifier);\ncreate unique index if not exists index_institutions_receiving_bucket on institutions using btree(receiving_bucket);\ncreate unique index if not exists index_institutions_restore_bucket on institutions using btree(restore_bucket);\n\n-- Allow institutions to turn spot restoration tests on or off.\n-- Default is off.\nalter table institutions add column if not exists enable_spot_restore boolean not null default false;\n\n-- ********************************************************************\n--\n-- Add tables for alerts and deletions that did not exist in Pharos\n--\n-- ********************************************************************\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table if not exists public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index if not exists index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table if not exists public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index if not exists index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table if not exists public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index if not exists index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table if not exists public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index if not exists index_alerts_institution_id ON public.alerts (institution_id);\ncreate index if not exists index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table if not exists public.alerts_users (\n\talert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index if not exists index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index if not exists index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index if not exists index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table if not exists public.alerts_work_items (\n\talert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index if not exists index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index if not exists index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table if not exists public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index if not exists index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index if not exists index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table if not exists public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index if not exists index_storage_options_name ON public.storage_options (\"name\");\n\n-- In Pharos DB, many generic_file_ids in premis_events are set to zero when they should be null.\n-- Fix that here.\nupdate premis_events set generic_file_id = null where generic_file_id = 0;\n\n-- In Pharos, the Devise auth system leaves stale password reset data forever.\n-- We have to clear these values in Registry, or all users will be stuck in\n-- the \"please finish resetting your password\" loop forever. We have no idea\n-- what reset tokens Devise sent two years ago, so no one will be able to\n-- unlock their accounts.\nupdate users set reset_password_token = null, reset_password_sent_at = null;\n\n\n-------------------------------------------------------------------------------\n-- Functions\n--\n-- Fuctions are defined in schema.sql as well. Adding them to migrations\n-- ensures they'll be present in converted DB.\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: -------------------------------------------------------------------------------\n-- Views\n-------------------------------------------------------------------------------\n\n-- Create a view to pull in columns that used to be in the WorkItems table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view work_items_view as\nselect\n\twi.id,\n\twi.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\twi.intellectual_object_id,\n\tio.identifier as \"object_identifier\",\n\tio.alt_identifier,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\twi.generic_file_id,\n\tgf.identifier as \"generic_file_identifier\",\n\twi.\"name\",\n\twi.etag,\n\twi.bucket,\n\twi.\"user\",\n\twi.note,\n\twi.\"action\",\n\twi.stage,\n\twi.status,\n\twi.outcome,\n\twi.bag_date,\n\twi.date_processed,\n\twi.retry,\n\twi.node,\n\twi.pid,\n\twi.needs_admin_review,\n\twi.\"size\",\n\twi.queued_at,\n\twi.stage_started_at,\n\twi.aptrust_approver,\n\twi.inst_approver,\n\twi.created_at,\n\twi.updated_at\nfrom work_items wi\nleft join institutions i on wi.institution_id = i.id\nleft join intellectual_objects io on wi.intellectual_object_id = io.id\nleft join generic_files gf on wi.generic_file_id = gf.id;\n\n\n-- Create a view to pull in columns that used to be in the PremisEvents table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view premis_events_view as\nselect\n\tpe.id,\n\tpe.identifier,\n\tpe.institution_id,\n\ti.\"name\" as institution_name,\n\tpe.intellectual_object_id,\n\tio.identifier as intellectual_object_identifier,\n\tpe.generic_file_id,\n\tgf.identifier as generic_file_identifier,\n\tpe.event_type,\n\tpe.date_time,\n\tpe.detail,\n\tpe.outcome,\n\tpe.outcome_detail,\n\tpe.outcome_information,\n\tpe.\"object\",\n\tpe.agent,\n\tpe.created_at,\n\tpe.updated_at,\n\tpe.old_uuid\nfrom premis_events pe\nleft join institutions i on pe.institution_id = i.id\nleft join intellectual_objects io on pe.intellectual_object_id = io.id\nleft join generic_files gf on pe.generic_file_id = gf.id;\n\n\n-- users_view makes it easier to list and search on institution-related\n-- attributes for users.\ncreate or replace view users_view as\nselect\n\tu.id,\n\tu.\"name\",\n\tu.email,\n\tu.phone_number,\n\tu.created_at,\n\tu.updated_at,\n\tu.reset_password_sent_at,\n\tu.remember_created_at,\n\tu.sign_in_count,\n\tu.current_sign_in_at,\n\tu.last_sign_in_at,\n\tu.current_sign_in_ip,\n\tu.last_sign_in_ip,\n\tu.institution_id,\n\tu.password_changed_at,\n\tu.consumed_timestep,\n\tu.otp_required_for_login,\n\tu.deactivated_at,\n\tu.enabled_two_factor,\n\tu.confirmed_two_factor,\n\tu.authy_id,\n\tu.last_sign_in_with_authy,\n\tu.authy_status,\n\tu.email_verified,\n\tu.initial_password_updated,\n\tu.force_password_update,\n\tu.account_confirmed,\n\tu.grace_period,\n\tu.\"role\",\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.state as institution_state,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id,\n\ti2.\"name\" as member_institution_name,\n\ti2.identifier as member_institution_identifier,\n\ti2.state as member_institution_state,\n\ti.otp_enabled,\n\ti.receiving_bucket,\n\ti.restore_bucket\nfrom users u\nleft join institutions i on u.institution_id = i.id\nleft join institutions i2 on i.member_institution_id = i2.id;\n\n\n-- institutions_view shows an institution along with essential\n-- information about its parent, if it has a parent.\n\ncreate or replace view institutions_view as\nselect\n\ti.id,\n\ti.\"name\",\n\ti.identifier,\n\ti.state,\n\ti.\"type\",\n\ti.deactivated_at,\n\ti.otp_enabled,\n\ti.enable_spot_restore,\n\ti.receiving_bucket,\n\ti.restore_bucket,\n\ti.created_at,\n\ti.updated_at,\n\ti.member_institution_id as \"parent_id\",\n\tparent.\"name\" as \"parent_name\",\n\tparent.identifier as \"parent_identifier\",\n\tparent.state as \"parent_state\",\n\tparent.deactivated_at as \"parent_deactivated_at\"\nfrom institutions i\nleft join institutions parent on i.member_institution_id = parent.id;\n\n-- intellectual_objects_view\n\ncreate or replace view intellectual_objects_view as\nselect\n\tio.id,\n\tio.title,\n\tio.description,\n\tio.identifier,\n\tio.alt_identifier,\n\tio.access,\n\tio.bag_name,\n\tio.institution_id,\n\tio.state,\n\tio.etag,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\tio.internal_sender_description,\n\tio.created_at,\n\tio.updated_at,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id as institution_parent_id,\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"size\",\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_size\"\nfrom intellectual_objects io\nleft join institutions i on io.institution_id = i.id;\n\n-- deletion_requests_view\n\ncreate or replace view deletion_requests_view as\nselect dr.id,\n       dr.institution_id,\n       i.\"name\" as institution_name,\n       i.identifier as institution_identifier,\n       dr.requested_by_id,\n       req.\"name\" as requested_by_name,\n       req.email as requested_by_email,\n       dr.requested_at,\n       dr.confirmed_by_id,\n       conf.\"name\" as confirmed_by_name,\n       conf.email as confirmed_by_email,\n       dr.confirmed_at,\n       dr.cancelled_by_id,\n       can.\"name\" as cancelled_by_name,\n       can.email as cancelled_by_email,\n       dr.cancelled_at,\n       (select count(*) from deletion_requests_generic_files drgf where drgf.deletion_request_id = dr.id) as file_count,\n       (select count(*) from deletion_requests_intellectual_objects drio where drio.deletion_request_id = dr.id) as object_count,\n       dr.work_item_id,\n       wi.stage,\n       wi.status,\n       wi.date_processed,\n       wi.\"size\",\n       wi.note\nfrom deletion_requests dr\nleft join institutions i on dr.institution_id = i.id\nleft join users req on dr.requested_by_id = req.id\nleft join users conf on dr.confirmed_by_id = conf.id\nleft join users can on dr.confirmed_by_id = can.id\nleft join work_items wi on dr.work_item_id = wi.id;\n\n-- alerts view\n\ncreate or replace view alerts_view as\nselect\n\ta.id,\n\ta.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ta.\"type\",\n\ta.subject,\n\ta.\"content\",\n\ta.deletion_request_id,\n\ta.created_at,\n\tau.user_id,\n\tu.\"name\" as user_name,\n\tau.sent_at,\n\tau.read_at\nfrom alerts a\nleft join alerts_users au on a.id = au.alert_id\nleft join users u on au.user_id = u.id\nleft join institutions i on a.institution_id = i.id;\n\n-- storage_option_stats\ncreate or replace view storage_option_stats as\nwith stats as (\n\tselect\n\t\tsum(\"gf\".\"size\") as total_bytes,\n\t\tcount(*) as file_count,\n\t\tgf.institution_id,\n\t\tgf.storage_option\n\tfrom generic_files gf\n\twhere gf.state = 'A'\n\tgroup by rollup (gf.institution_id, gf.storage_option)\n\t)\nselect\n\ts.total_bytes,\n\ts.file_count,\n\ts.institution_id,\n\ts.storage_option,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier\nfrom stats s\nleft join institutions i on s.institution_id = i.id;\n\ncreate or replace view generic_files_view as\nselect\n\tgf.id,\n\tgf.file_format,\n\tgf.\"size\",\n\tgf.identifier,\n\tgf.intellectual_object_id,\n\tio.identifier as object_identifier,\n\tio.\"access\",\n\tgf.state,\n\tgf.last_fixity_check,\n\tgf.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\tgf.storage_option,\n\tgf.uuid,\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='md5' order by created_at desc limit 1) as \"md5\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha1' order by created_at desc limit 1) as \"sha1\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha256' order by created_at desc limit 1) as \"sha256\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha512' order by created_at desc limit 1) as \"sha512\",\n\tgf.created_at,\n\tgf.updated_at\nfrom generic_files gf\nleft join intellectual_objects io on io.id = gf.intellectual_object_id\nleft join institutions i on i.id = gf.institution_id;\n\n-- Checksums view\ncreate or replace view checksums_view as\nselect cs.id,\n       cs.algorithm,\n       cs.datetime,\n       cs.digest,\n       gf.state,\n       gf.identifier as \"generic_file_identifier\",\n       cs.generic_file_id,\n       gf.intellectual_object_id,\n       gf.institution_id,\n       cs.created_at,\n       cs.updated_at\nfrom checksums cs\nleft join generic_files gf on cs.generic_file_id = gf.id;\n\n\n---------------------------------------------------------------------------\n--\n-- Count Views\n--\n-- We create these views because count queries on large tables are slow\n-- in postgres. Even if a query can use an index to get a count, it still\n-- has to scan every row in the result set to see if that row is visible\n-- under postgres' mvcc rules. \n--\n-- If the count returns a million rows, postgres has to scan all million\n-- rows. The result is a query that can take 5-15 seconds. The \n-- premis_events table is the worst of the lot. It should surpass 200M\n-- rows by the end of 2022. We do not want to scan those rows every time\n-- someone hits the events page or the events API endpoint.\n--\n-- We run count queries all the time to manage paging in both the web UI\n-- and the API. For large counts, such as \"all events for an institution\",\n-- or \"all files for an institution\", we'll use the counts in the views\n-- below. \n--\n-- For smaller counts, such as \"all files for my institution created \n-- within the past week\", we'll suck it up and let postgres scan the \n-- smaller row sets.\n--\n-- These views will be refreshed every hour or so using an async go \n-- routine so they don't slow down web and API requests.\n--\n-- That means some large counts may be up to an hour out of date, but we\n-- can live with that tradeoff, since this will vastly speed up the loading\n-- of our most commonly hit web and API endpoints.\n--\n-- Note the function update_counts() below. It refreshes all of the count\n-- views.\n-- \n---------------------------------------------------------------------------\n\n-- premis_event_counts\ncreate materialized view if not exists premis_event_counts as\n\tselect institution_id, count(id) as row_count, event_type, outcome\n\tfrom premis_events group by cube(institution_id, event_type, outcome)\n\torder by institution_id, event_type, outcome;\n\n-- intellectual_object_counts\ncreate materialized view if not exists intellectual_object_counts as\n\tselect institution_id, count(id) as row_count, \"state\" \n\tfrom intellectual_objects group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- generic_file_counts\ncreate materialized view if not exists generic_file_counts as\n\tselect institution_id, count(id) as row_count, \"state\"\n\tfrom generic_files group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- work_item_counts\ncreate materialized view if not exists work_item_counts as\n\tselect institution_id, count(id) as row_count, \"action\"\n\tfrom work_items group by cube(institution_id, \"action\")\n\torder by institution_id, \"action\";\n\n-- \nCREATE OR REPLACE FUNCTION update_counts ()\n  RETURNS integer\nAS\n$BODY$\n  begin\n    refresh materialized view premis_event_counts;\n    refresh materialized view intellectual_object_counts;\n    refresh materialized view generic_file_counts;\n    refresh materialized view work_item_counts;    \n    return 1;\n  end;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"storage_options\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_options.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"institutions\" from '/Users/diamond/aptrust/registry/db/fixtures/institutions.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"users\" from '/Users/diamond/aptrust/registry/db/fixtures/users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"checksums\" from '/Users/diamond/aptrust/registry/db/fixtures/checksums.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"storage_records\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_records.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"deletion_requests\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"deletion_requests_generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"deletion_requests_intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"alerts\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"alerts_premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"alerts_users\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: copy \"alerts_work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_options', 'id'), MAX(id)) FROM \"storage_options\";"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('institutions', 'id'), MAX(id)) FROM \"institutions\";"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('users', 'id'), MAX(id)) FROM \"users\";"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('intellectual_objects', 'id'), MAX(id)) FROM \"intellectual_objects\";"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('generic_files', 'id'), MAX(id)) FROM \"generic_files\";"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('checksums', 'id'), MAX(id)) FROM \"checksums\";"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_records', 'id'), MAX(id)) FROM \"storage_records\";"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('premis_events', 'id'), MAX(id)) FROM \"premis_events\";"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('work_items', 'id'), MAX(id)) FROM \"work_items\";"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('deletion_requests', 'id'), MAX(id)) FROM \"deletion_requests\";"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('alerts', 'id'), MAX(id)) FROM \"alerts\";"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: select update_counts();"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"intellectual_objects\" AS \"intellectual_object\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"intellectual_object\".\"institution_id\" WHERE ((institution_id = 2) AND (\"intellectual_object\".\"state\" = 'A')) ORDER BY \"id\" asc LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: INSERT INTO \"deletion_requests\" (\"id\", \"institution_id\", \"requested_by_id\", \"requested_at\", \"encrypted_confirmation_token\", \"confirmed_by_id\", \"confirmed_at\", \"cancelled_by_id\", \"cancelled_at\", \"work_item_id\") VALUES (DEFAULT, 2, 2, '2022-06-22 17:30:47.874048+00:00:00', '$2a$10$bZnlT3sEndJJzWMYvoGLJ.t6xRsFi6fqDQd.9PaxkgVhA6.1eqXza', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING \"id\", \"confirmed_by_id\", \"confirmed_at\", \"cancelled_by_id\", \"cancelled_at\", \"work_item_id\""}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: insert into deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id) values (4, 1) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"deletion_requests\" AS \"deletion_request\" WHERE (id = 4)"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT \"deletion_request\".\"id\", \"deletion_request\".\"institution_id\", \"deletion_request\".\"requested_by_id\", \"deletion_request\".\"requested_at\", \"deletion_request\".\"encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\", \"deletion_request\".\"confirmed_at\", \"deletion_request\".\"cancelled_by_id\", \"deletion_request\".\"cancelled_at\", \"deletion_request\".\"work_item_id\", \"requested_by\".\"id\" AS \"requested_by__id\", \"requested_by\".\"created_at\" AS \"requested_by__created_at\", \"requested_by\".\"updated_at\" AS \"requested_by__updated_at\", \"requested_by\".\"name\" AS \"requested_by__name\", \"requested_by\".\"email\" AS \"requested_by__email\", \"requested_by\".\"phone_number\" AS \"requested_by__phone_number\", \"requested_by\".\"encrypted_password\" AS \"requested_by__encrypted_password\", \"requested_by\".\"reset_password_token\" AS \"requested_by__reset_password_token\", \"requested_by\".\"reset_password_sent_at\" AS \"requested_by__reset_password_sent_at\", \"requested_by\".\"remember_created_at\" AS \"requested_by__remember_created_at\", \"requested_by\".\"sign_in_count\" AS \"requested_by__sign_in_count\", \"requested_by\".\"current_sign_in_at\" AS \"requested_by__current_sign_in_at\", \"requested_by\".\"last_sign_in_at\" AS \"requested_by__last_sign_in_at\", \"requested_by\".\"current_sign_in_ip\" AS \"requested_by__current_sign_in_ip\", \"requested_by\".\"last_sign_in_ip\" AS \"requested_by__last_sign_in_ip\", \"requested_by\".\"institution_id\" AS \"requested_by__institution_id\", \"requested_by\".\"encrypted_api_secret_key\" AS \"requested_by__encrypted_api_secret_key\", \"requested_by\".\"password_changed_at\" AS \"requested_by__password_changed_at\", \"requested_by\".\"encrypted_otp_secret\" AS \"requested_by__encrypted_otp_secret\", \"requested_by\".\"encrypted_otp_secret_iv\" AS \"requested_by__encrypted_otp_secret_iv\", \"requested_by\".\"encrypted_otp_secret_salt\" AS \"requested_by__encrypted_otp_secret_salt\", \"requested_by\".\"encrypted_otp_sent_at\" AS \"requested_by__encrypted_otp_sent_at\", \"requested_by\".\"consumed_timestep\" AS \"requested_by__consumed_timestep\", \"requested_by\".\"otp_required_for_login\" AS \"requested_by__otp_required_for_login\", \"requested_by\".\"deactivated_at\" AS \"requested_by__deactivated_at\", \"requested_by\".\"enabled_two_factor\" AS \"requested_by__enabled_two_factor\", \"requested_by\".\"confirmed_two_factor\" AS \"requested_by__confirmed_two_factor\", \"requested_by\".\"otp_backup_codes\" AS \"requested_by__otp_backup_codes\", \"requested_by\".\"authy_id\" AS \"requested_by__authy_id\", \"requested_by\".\"last_sign_in_with_authy\" AS \"requested_by__last_sign_in_with_authy\", \"requested_by\".\"authy_status\" AS \"requested_by__authy_status\", \"requested_by\".\"email_verified\" AS \"requested_by__email_verified\", \"requested_by\".\"initial_password_updated\" AS \"requested_by__initial_password_updated\", \"requested_by\".\"force_password_update\" AS \"requested_by__force_password_update\", \"requested_by\".\"grace_period\" AS \"requested_by__grace_period\", \"requested_by\".\"awaiting_second_factor\" AS \"requested_by__awaiting_second_factor\", \"requested_by\".\"role\" AS \"requested_by__role\", \"confirmed_by\".\"id\" AS \"confirmed_by__id\", \"confirmed_by\".\"created_at\" AS \"confirmed_by__created_at\", \"confirmed_by\".\"updated_at\" AS \"confirmed_by__updated_at\", \"confirmed_by\".\"name\" AS \"confirmed_by__name\", \"confirmed_by\".\"email\" AS \"confirmed_by__email\", \"confirmed_by\".\"phone_number\" AS \"confirmed_by__phone_number\", \"confirmed_by\".\"encrypted_password\" AS \"confirmed_by__encrypted_password\", \"confirmed_by\".\"reset_password_token\" AS \"confirmed_by__reset_password_token\", \"confirmed_by\".\"reset_password_sent_at\" AS \"confirmed_by__reset_password_sent_at\", \"confirmed_by\".\"remember_created_at\" AS \"confirmed_by__remember_created_at\", \"confirmed_by\".\"sign_in_count\" AS \"confirmed_by__sign_in_count\", \"confirmed_by\".\"current_sign_in_at\" AS \"confirmed_by__current_sign_in_at\", \"confirmed_by\".\"last_sign_in_at\" AS \"confirmed_by__last_sign_in_at\", \"confirmed_by\".\"current_sign_in_ip\" AS \"confirmed_by__current_sign_in_ip\", \"confirmed_by\".\"last_sign_in_ip\" AS \"confirmed_by__last_sign_in_ip\", \"confirmed_by\".\"institution_id\" AS \"confirmed_by__institution_id\", \"confirmed_by\".\"encrypted_api_secret_key\" AS \"confirmed_by__encrypted_api_secret_key\", \"confirmed_by\".\"password_changed_at\" AS \"confirmed_by__password_changed_at\", \"confirmed_by\".\"encrypted_otp_secret\" AS \"confirmed_by__encrypted_otp_secret\", \"confirmed_by\".\"encrypted_otp_secret_iv\" AS \"confirmed_by__encrypted_otp_secret_iv\", \"confirmed_by\".\"encrypted_otp_secret_salt\" AS \"confirmed_by__encrypted_otp_secret_salt\", \"confirmed_by\".\"encrypted_otp_sent_at\" AS \"confirmed_by__encrypted_otp_sent_at\", \"confirmed_by\".\"consumed_timestep\" AS \"confirmed_by__consumed_timestep\", \"confirmed_by\".\"otp_required_for_login\" AS \"confirmed_by__otp_required_for_login\", \"confirmed_by\".\"deactivated_at\" AS \"confirmed_by__deactivated_at\", \"confirmed_by\".\"enabled_two_factor\" AS \"confirmed_by__enabled_two_factor\", \"confirmed_by\".\"confirmed_two_factor\" AS \"confirmed_by__confirmed_two_factor\", \"confirmed_by\".\"otp_backup_codes\" AS \"confirmed_by__otp_backup_codes\", \"confirmed_by\".\"authy_id\" AS \"confirmed_by__authy_id\", \"confirmed_by\".\"last_sign_in_with_authy\" AS \"confirmed_by__last_sign_in_with_authy\", \"confirmed_by\".\"authy_status\" AS \"confirmed_by__authy_status\", \"confirmed_by\".\"email_verified\" AS \"confirmed_by__email_verified\", \"confirmed_by\".\"initial_password_updated\" AS \"confirmed_by__initial_password_updated\", \"confirmed_by\".\"force_password_update\" AS \"confirmed_by__force_password_update\", \"confirmed_by\".\"grace_period\" AS \"confirmed_by__grace_period\", \"confirmed_by\".\"awaiting_second_factor\" AS \"confirmed_by__awaiting_second_factor\", \"confirmed_by\".\"role\" AS \"confirmed_by__role\", \"cancelled_by\".\"id\" AS \"cancelled_by__id\", \"cancelled_by\".\"created_at\" AS \"cancelled_by__created_at\", \"cancelled_by\".\"updated_at\" AS \"cancelled_by__updated_at\", \"cancelled_by\".\"name\" AS \"cancelled_by__name\", \"cancelled_by\".\"email\" AS \"cancelled_by__email\", \"cancelled_by\".\"phone_number\" AS \"cancelled_by__phone_number\", \"cancelled_by\".\"encrypted_password\" AS \"cancelled_by__encrypted_password\", \"cancelled_by\".\"reset_password_token\" AS \"cancelled_by__reset_password_token\", \"cancelled_by\".\"reset_password_sent_at\" AS \"cancelled_by__reset_password_sent_at\", \"cancelled_by\".\"remember_created_at\" AS \"cancelled_by__remember_created_at\", \"cancelled_by\".\"sign_in_count\" AS \"cancelled_by__sign_in_count\", \"cancelled_by\".\"current_sign_in_at\" AS \"cancelled_by__current_sign_in_at\", \"cancelled_by\".\"last_sign_in_at\" AS \"cancelled_by__last_sign_in_at\", \"cancelled_by\".\"current_sign_in_ip\" AS \"cancelled_by__current_sign_in_ip\", \"cancelled_by\".\"last_sign_in_ip\" AS \"cancelled_by__last_sign_in_ip\", \"cancelled_by\".\"institution_id\" AS \"cancelled_by__institution_id\", \"cancelled_by\".\"encrypted_api_secret_key\" AS \"cancelled_by__encrypted_api_secret_key\", \"cancelled_by\".\"password_changed_at\" AS \"cancelled_by__password_changed_at\", \"cancelled_by\".\"encrypted_otp_secret\" AS \"cancelled_by__encrypted_otp_secret\", \"cancelled_by\".\"encrypted_otp_secret_iv\" AS \"cancelled_by__encrypted_otp_secret_iv\", \"cancelled_by\".\"encrypted_otp_secret_salt\" AS \"cancelled_by__encrypted_otp_secret_salt\", \"cancelled_by\".\"encrypted_otp_sent_at\" AS \"cancelled_by__encrypted_otp_sent_at\", \"cancelled_by\".\"consumed_timestep\" AS \"cancelled_by__consumed_timestep\", \"cancelled_by\".\"otp_required_for_login\" AS \"cancelled_by__otp_required_for_login\", \"cancelled_by\".\"deactivated_at\" AS \"cancelled_by__deactivated_at\", \"cancelled_by\".\"enabled_two_factor\" AS \"cancelled_by__enabled_two_factor\", \"cancelled_by\".\"confirmed_two_factor\" AS \"cancelled_by__confirmed_two_factor\", \"cancelled_by\".\"otp_backup_codes\" AS \"cancelled_by__otp_backup_codes\", \"cancelled_by\".\"authy_id\" AS \"cancelled_by__authy_id\", \"cancelled_by\".\"last_sign_in_with_authy\" AS \"cancelled_by__last_sign_in_with_authy\", \"cancelled_by\".\"authy_status\" AS \"cancelled_by__authy_status\", \"cancelled_by\".\"email_verified\" AS \"cancelled_by__email_verified\", \"cancelled_by\".\"initial_password_updated\" AS \"cancelled_by__initial_password_updated\", \"cancelled_by\".\"force_password_update\" AS \"cancelled_by__force_password_update\", \"cancelled_by\".\"grace_period\" AS \"cancelled_by__grace_period\", \"cancelled_by\".\"awaiting_second_factor\" AS \"cancelled_by__awaiting_second_factor\", \"cancelled_by\".\"role\" AS \"cancelled_by__role\", \"work_item\".\"id\" AS \"work_item__id\", \"work_item\".\"created_at\" AS \"work_item__created_at\", \"work_item\".\"updated_at\" AS \"work_item__updated_at\", \"work_item\".\"name\" AS \"work_item__name\", \"work_item\".\"etag\" AS \"work_item__etag\", \"work_item\".\"institution_id\" AS \"work_item__institution_id\", \"work_item\".\"intellectual_object_id\" AS \"work_item__intellectual_object_id\", \"work_item\".\"generic_file_id\" AS \"work_item__generic_file_id\", \"work_item\".\"bucket\" AS \"work_item__bucket\", \"work_item\".\"user\" AS \"work_item__user\", \"work_item\".\"note\" AS \"work_item__note\", \"work_item\".\"action\" AS \"work_item__action\", \"work_item\".\"stage\" AS \"work_item__stage\", \"work_item\".\"status\" AS \"work_item__status\", \"work_item\".\"outcome\" AS \"work_item__outcome\", \"work_item\".\"bag_date\" AS \"work_item__bag_date\", \"work_item\".\"date_processed\" AS \"work_item__date_processed\", \"work_item\".\"retry\" AS \"work_item__retry\", \"work_item\".\"node\" AS \"work_item__node\", \"work_item\".\"pid\" AS \"work_item__pid\", \"work_item\".\"needs_admin_review\" AS \"work_item__needs_admin_review\", \"work_item\".\"queued_at\" AS \"work_item__queued_at\", \"work_item\".\"size\" AS \"work_item__size\", \"work_item\".\"stage_started_at\" AS \"work_item__stage_started_at\", \"work_item\".\"aptrust_approver\" AS \"work_item__aptrust_approver\", \"work_item\".\"inst_approver\" AS \"work_item__inst_approver\" FROM \"deletion_requests\" AS \"deletion_request\" LEFT JOIN \"users\" AS \"requested_by\" ON \"requested_by\".\"id\" = \"deletion_request\".\"requested_by_id\" LEFT JOIN \"users\" AS \"confirmed_by\" ON \"confirmed_by\".\"id\" = \"deletion_request\".\"confirmed_by_id\" LEFT JOIN \"users\" AS \"cancelled_by\" ON \"cancelled_by\".\"id\" = \"deletion_request\".\"cancelled_by_id\" LEFT JOIN \"work_items\" AS \"work_item\" ON \"work_item\".\"id\" = \"deletion_request\".\"work_item_id\" WHERE ((\"deletion_request\".\"id\" = 4))"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".*, \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" JOIN \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" ON (\"deletion_requests_generic_files\".\"deletion_request_id\") IN (4) WHERE (\"generic_file\".\"id\" = \"deletion_requests_generic_files\".\"generic_file_id\")"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".*, \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" FROM \"intellectual_objects\" AS \"intellectual_object\" JOIN \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" ON (\"deletion_requests_intellectual_objects\".\"deletion_request_id\") IN (4) WHERE (\"intellectual_object\".\"id\" = \"deletion_requests_intellectual_objects\".\"intellectual_object_id\")"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" WHERE ((institution_id = 2) AND (role = 'institutional_admin'))"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: UPDATE \"deletion_requests\" AS \"deletion_request\" SET \"institution_id\" = 2, \"requested_by_id\" = 2, \"requested_at\" = '2022-06-22 17:30:47.874048+00:00:00', \"encrypted_confirmation_token\" = '$2a$10$bZnlT3sEndJJzWMYvoGLJ.t6xRsFi6fqDQd.9PaxkgVhA6.1eqXza', \"confirmed_by_id\" = NULL, \"confirmed_at\" = NULL, \"cancelled_by_id\" = 2, \"cancelled_at\" = '2022-06-22 17:30:47.956695+00:00:00', \"work_item_id\" = NULL WHERE \"deletion_request\".\"id\" = 4"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: insert into deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id) values (4, 1) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: INSERT INTO \"alerts\" (\"id\", \"institution_id\", \"type\", \"subject\", \"content\", \"deletion_request_id\", \"created_at\") VALUES (DEFAULT, 2, 'Deletion Cancelled', 'Deletion Cancelled', 'Hello from APTrust,\n\nThe deletion requested by Inst One Admin has been cancelled by Inst One Admin.\n\nFor your reference, the link below has information about the cancelled request.\n\nhttp://localhost/deletions/show/4\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n', 4, '2022-06-22 17:30:47.958676+00:00:00') RETURNING \"id\""}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: insert into alerts_users (alert_id, user_id, sent_at, read_at) values (9, 2, NULL, NULL) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:30:47-04:00","message":"SES is disabled per config settings. Email to admin@inst1.edu. Subject: Deletion Cancelled\n\n. Hello from APTrust,\n\nThe deletion requested by Inst One Admin has been cancelled by Inst One Admin.\n\nFor your reference, the link below has information about the cancelled request.\n\nhttp://localhost/deletions/show/4\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: update alerts_users set sent_at = '2022-06-22 17:30:47.963171+00:00:00' where alert_id = 9 and user_id = 2"}
{"level":"info","status":200,"method":"POST","path":"/deletions/cancel/4","ip":"","latency":100.205095,"user-agent":"","time":"2022-06-22T13:30:47-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT \"deletion_request\".\"id\", \"deletion_request\".\"institution_id\", \"deletion_request\".\"requested_by_id\", \"deletion_request\".\"requested_at\", \"deletion_request\".\"encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\", \"deletion_request\".\"confirmed_at\", \"deletion_request\".\"cancelled_by_id\", \"deletion_request\".\"cancelled_at\", \"deletion_request\".\"work_item_id\", \"requested_by\".\"id\" AS \"requested_by__id\", \"requested_by\".\"created_at\" AS \"requested_by__created_at\", \"requested_by\".\"updated_at\" AS \"requested_by__updated_at\", \"requested_by\".\"name\" AS \"requested_by__name\", \"requested_by\".\"email\" AS \"requested_by__email\", \"requested_by\".\"phone_number\" AS \"requested_by__phone_number\", \"requested_by\".\"encrypted_password\" AS \"requested_by__encrypted_password\", \"requested_by\".\"reset_password_token\" AS \"requested_by__reset_password_token\", \"requested_by\".\"reset_password_sent_at\" AS \"requested_by__reset_password_sent_at\", \"requested_by\".\"remember_created_at\" AS \"requested_by__remember_created_at\", \"requested_by\".\"sign_in_count\" AS \"requested_by__sign_in_count\", \"requested_by\".\"current_sign_in_at\" AS \"requested_by__current_sign_in_at\", \"requested_by\".\"last_sign_in_at\" AS \"requested_by__last_sign_in_at\", \"requested_by\".\"current_sign_in_ip\" AS \"requested_by__current_sign_in_ip\", \"requested_by\".\"last_sign_in_ip\" AS \"requested_by__last_sign_in_ip\", \"requested_by\".\"institution_id\" AS \"requested_by__institution_id\", \"requested_by\".\"encrypted_api_secret_key\" AS \"requested_by__encrypted_api_secret_key\", \"requested_by\".\"password_changed_at\" AS \"requested_by__password_changed_at\", \"requested_by\".\"encrypted_otp_secret\" AS \"requested_by__encrypted_otp_secret\", \"requested_by\".\"encrypted_otp_secret_iv\" AS \"requested_by__encrypted_otp_secret_iv\", \"requested_by\".\"encrypted_otp_secret_salt\" AS \"requested_by__encrypted_otp_secret_salt\", \"requested_by\".\"encrypted_otp_sent_at\" AS \"requested_by__encrypted_otp_sent_at\", \"requested_by\".\"consumed_timestep\" AS \"requested_by__consumed_timestep\", \"requested_by\".\"otp_required_for_login\" AS \"requested_by__otp_required_for_login\", \"requested_by\".\"deactivated_at\" AS \"requested_by__deactivated_at\", \"requested_by\".\"enabled_two_factor\" AS \"requested_by__enabled_two_factor\", \"requested_by\".\"confirmed_two_factor\" AS \"requested_by__confirmed_two_factor\", \"requested_by\".\"otp_backup_codes\" AS \"requested_by__otp_backup_codes\", \"requested_by\".\"authy_id\" AS \"requested_by__authy_id\", \"requested_by\".\"last_sign_in_with_authy\" AS \"requested_by__last_sign_in_with_authy\", \"requested_by\".\"authy_status\" AS \"requested_by__authy_status\", \"requested_by\".\"email_verified\" AS \"requested_by__email_verified\", \"requested_by\".\"initial_password_updated\" AS \"requested_by__initial_password_updated\", \"requested_by\".\"force_password_update\" AS \"requested_by__force_password_update\", \"requested_by\".\"grace_period\" AS \"requested_by__grace_period\", \"requested_by\".\"awaiting_second_factor\" AS \"requested_by__awaiting_second_factor\", \"requested_by\".\"role\" AS \"requested_by__role\", \"confirmed_by\".\"id\" AS \"confirmed_by__id\", \"confirmed_by\".\"created_at\" AS \"confirmed_by__created_at\", \"confirmed_by\".\"updated_at\" AS \"confirmed_by__updated_at\", \"confirmed_by\".\"name\" AS \"confirmed_by__name\", \"confirmed_by\".\"email\" AS \"confirmed_by__email\", \"confirmed_by\".\"phone_number\" AS \"confirmed_by__phone_number\", \"confirmed_by\".\"encrypted_password\" AS \"confirmed_by__encrypted_password\", \"confirmed_by\".\"reset_password_token\" AS \"confirmed_by__reset_password_token\", \"confirmed_by\".\"reset_password_sent_at\" AS \"confirmed_by__reset_password_sent_at\", \"confirmed_by\".\"remember_created_at\" AS \"confirmed_by__remember_created_at\", \"confirmed_by\".\"sign_in_count\" AS \"confirmed_by__sign_in_count\", \"confirmed_by\".\"current_sign_in_at\" AS \"confirmed_by__current_sign_in_at\", \"confirmed_by\".\"last_sign_in_at\" AS \"confirmed_by__last_sign_in_at\", \"confirmed_by\".\"current_sign_in_ip\" AS \"confirmed_by__current_sign_in_ip\", \"confirmed_by\".\"last_sign_in_ip\" AS \"confirmed_by__last_sign_in_ip\", \"confirmed_by\".\"institution_id\" AS \"confirmed_by__institution_id\", \"confirmed_by\".\"encrypted_api_secret_key\" AS \"confirmed_by__encrypted_api_secret_key\", \"confirmed_by\".\"password_changed_at\" AS \"confirmed_by__password_changed_at\", \"confirmed_by\".\"encrypted_otp_secret\" AS \"confirmed_by__encrypted_otp_secret\", \"confirmed_by\".\"encrypted_otp_secret_iv\" AS \"confirmed_by__encrypted_otp_secret_iv\", \"confirmed_by\".\"encrypted_otp_secret_salt\" AS \"confirmed_by__encrypted_otp_secret_salt\", \"confirmed_by\".\"encrypted_otp_sent_at\" AS \"confirmed_by__encrypted_otp_sent_at\", \"confirmed_by\".\"consumed_timestep\" AS \"confirmed_by__consumed_timestep\", \"confirmed_by\".\"otp_required_for_login\" AS \"confirmed_by__otp_required_for_login\", \"confirmed_by\".\"deactivated_at\" AS \"confirmed_by__deactivated_at\", \"confirmed_by\".\"enabled_two_factor\" AS \"confirmed_by__enabled_two_factor\", \"confirmed_by\".\"confirmed_two_factor\" AS \"confirmed_by__confirmed_two_factor\", \"confirmed_by\".\"otp_backup_codes\" AS \"confirmed_by__otp_backup_codes\", \"confirmed_by\".\"authy_id\" AS \"confirmed_by__authy_id\", \"confirmed_by\".\"last_sign_in_with_authy\" AS \"confirmed_by__last_sign_in_with_authy\", \"confirmed_by\".\"authy_status\" AS \"confirmed_by__authy_status\", \"confirmed_by\".\"email_verified\" AS \"confirmed_by__email_verified\", \"confirmed_by\".\"initial_password_updated\" AS \"confirmed_by__initial_password_updated\", \"confirmed_by\".\"force_password_update\" AS \"confirmed_by__force_password_update\", \"confirmed_by\".\"grace_period\" AS \"confirmed_by__grace_period\", \"confirmed_by\".\"awaiting_second_factor\" AS \"confirmed_by__awaiting_second_factor\", \"confirmed_by\".\"role\" AS \"confirmed_by__role\", \"cancelled_by\".\"id\" AS \"cancelled_by__id\", \"cancelled_by\".\"created_at\" AS \"cancelled_by__created_at\", \"cancelled_by\".\"updated_at\" AS \"cancelled_by__updated_at\", \"cancelled_by\".\"name\" AS \"cancelled_by__name\", \"cancelled_by\".\"email\" AS \"cancelled_by__email\", \"cancelled_by\".\"phone_number\" AS \"cancelled_by__phone_number\", \"cancelled_by\".\"encrypted_password\" AS \"cancelled_by__encrypted_password\", \"cancelled_by\".\"reset_password_token\" AS \"cancelled_by__reset_password_token\", \"cancelled_by\".\"reset_password_sent_at\" AS \"cancelled_by__reset_password_sent_at\", \"cancelled_by\".\"remember_created_at\" AS \"cancelled_by__remember_created_at\", \"cancelled_by\".\"sign_in_count\" AS \"cancelled_by__sign_in_count\", \"cancelled_by\".\"current_sign_in_at\" AS \"cancelled_by__current_sign_in_at\", \"cancelled_by\".\"last_sign_in_at\" AS \"cancelled_by__last_sign_in_at\", \"cancelled_by\".\"current_sign_in_ip\" AS \"cancelled_by__current_sign_in_ip\", \"cancelled_by\".\"last_sign_in_ip\" AS \"cancelled_by__last_sign_in_ip\", \"cancelled_by\".\"institution_id\" AS \"cancelled_by__institution_id\", \"cancelled_by\".\"encrypted_api_secret_key\" AS \"cancelled_by__encrypted_api_secret_key\", \"cancelled_by\".\"password_changed_at\" AS \"cancelled_by__password_changed_at\", \"cancelled_by\".\"encrypted_otp_secret\" AS \"cancelled_by__encrypted_otp_secret\", \"cancelled_by\".\"encrypted_otp_secret_iv\" AS \"cancelled_by__encrypted_otp_secret_iv\", \"cancelled_by\".\"encrypted_otp_secret_salt\" AS \"cancelled_by__encrypted_otp_secret_salt\", \"cancelled_by\".\"encrypted_otp_sent_at\" AS \"cancelled_by__encrypted_otp_sent_at\", \"cancelled_by\".\"consumed_timestep\" AS \"cancelled_by__consumed_timestep\", \"cancelled_by\".\"otp_required_for_login\" AS \"cancelled_by__otp_required_for_login\", \"cancelled_by\".\"deactivated_at\" AS \"cancelled_by__deactivated_at\", \"cancelled_by\".\"enabled_two_factor\" AS \"cancelled_by__enabled_two_factor\", \"cancelled_by\".\"confirmed_two_factor\" AS \"cancelled_by__confirmed_two_factor\", \"cancelled_by\".\"otp_backup_codes\" AS \"cancelled_by__otp_backup_codes\", \"cancelled_by\".\"authy_id\" AS \"cancelled_by__authy_id\", \"cancelled_by\".\"last_sign_in_with_authy\" AS \"cancelled_by__last_sign_in_with_authy\", \"cancelled_by\".\"authy_status\" AS \"cancelled_by__authy_status\", \"cancelled_by\".\"email_verified\" AS \"cancelled_by__email_verified\", \"cancelled_by\".\"initial_password_updated\" AS \"cancelled_by__initial_password_updated\", \"cancelled_by\".\"force_password_update\" AS \"cancelled_by__force_password_update\", \"cancelled_by\".\"grace_period\" AS \"cancelled_by__grace_period\", \"cancelled_by\".\"awaiting_second_factor\" AS \"cancelled_by__awaiting_second_factor\", \"cancelled_by\".\"role\" AS \"cancelled_by__role\", \"work_item\".\"id\" AS \"work_item__id\", \"work_item\".\"created_at\" AS \"work_item__created_at\", \"work_item\".\"updated_at\" AS \"work_item__updated_at\", \"work_item\".\"name\" AS \"work_item__name\", \"work_item\".\"etag\" AS \"work_item__etag\", \"work_item\".\"institution_id\" AS \"work_item__institution_id\", \"work_item\".\"intellectual_object_id\" AS \"work_item__intellectual_object_id\", \"work_item\".\"generic_file_id\" AS \"work_item__generic_file_id\", \"work_item\".\"bucket\" AS \"work_item__bucket\", \"work_item\".\"user\" AS \"work_item__user\", \"work_item\".\"note\" AS \"work_item__note\", \"work_item\".\"action\" AS \"work_item__action\", \"work_item\".\"stage\" AS \"work_item__stage\", \"work_item\".\"status\" AS \"work_item__status\", \"work_item\".\"outcome\" AS \"work_item__outcome\", \"work_item\".\"bag_date\" AS \"work_item__bag_date\", \"work_item\".\"date_processed\" AS \"work_item__date_processed\", \"work_item\".\"retry\" AS \"work_item__retry\", \"work_item\".\"node\" AS \"work_item__node\", \"work_item\".\"pid\" AS \"work_item__pid\", \"work_item\".\"needs_admin_review\" AS \"work_item__needs_admin_review\", \"work_item\".\"queued_at\" AS \"work_item__queued_at\", \"work_item\".\"size\" AS \"work_item__size\", \"work_item\".\"stage_started_at\" AS \"work_item__stage_started_at\", \"work_item\".\"aptrust_approver\" AS \"work_item__aptrust_approver\", \"work_item\".\"inst_approver\" AS \"work_item__inst_approver\" FROM \"deletion_requests\" AS \"deletion_request\" LEFT JOIN \"users\" AS \"requested_by\" ON \"requested_by\".\"id\" = \"deletion_request\".\"requested_by_id\" LEFT JOIN \"users\" AS \"confirmed_by\" ON \"confirmed_by\".\"id\" = \"deletion_request\".\"confirmed_by_id\" LEFT JOIN \"users\" AS \"cancelled_by\" ON \"cancelled_by\".\"id\" = \"deletion_request\".\"cancelled_by_id\" LEFT JOIN \"work_items\" AS \"work_item\" ON \"work_item\".\"id\" = \"deletion_request\".\"work_item_id\" WHERE ((\"deletion_request\".\"id\" = 4))"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".*, \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" JOIN \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" ON (\"deletion_requests_generic_files\".\"deletion_request_id\") IN (4) WHERE (\"generic_file\".\"id\" = \"deletion_requests_generic_files\".\"generic_file_id\")"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".*, \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" FROM \"intellectual_objects\" AS \"intellectual_object\" JOIN \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" ON (\"deletion_requests_intellectual_objects\".\"deletion_request_id\") IN (4) WHERE (\"intellectual_object\".\"id\" = \"deletion_requests_intellectual_objects\".\"intellectual_object_id\")"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\" FROM \"alerts\" AS \"alert\" WHERE ((deletion_request_id = 4)) LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"ar_internal_metadata\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:47-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"confirmation_tokens\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"emails_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"emails_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"emails_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"emails_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"old_passwords\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"schema_migrations\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"snapshots\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"usage_samples\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"alerts_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"alerts_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"alerts_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"alerts\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"deletion_requests\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"storage_records\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"checksums\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"roles_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"roles\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: drop table if exists \"storage_options\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: --\n-- schema.sql\n--\n-- This file represents the full registry schema.\n--\n-- The migrations.sql file updates the old Pharos schema, as it existed\n-- in the feature/storage_record branch, so that it matches this schema.\n--\n-- https://github.com/APTrust/pharos/blob/feature/storage-record/db/schema.rb\n--\n\n\n-- public.ar_internal_metadata definition\n--\n-- This is a legacy table used by ActiveRecord.\n-- We can drop this once production is stable.\n--\nCREATE TABLE public.ar_internal_metadata (\n\t\"key\" varchar NOT NULL,\n\tvalue varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT ar_internal_metadata_pkey PRIMARY KEY (key)\n);\n\n\n-- public.bulk_delete_jobs definition\n--\n-- This is the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs (\n\tid bigserial NOT NULL,\n\trequested_by varchar NULL,\n\tinstitutional_approver varchar NULL,\n\taptrust_approver varchar NULL,\n\tinstitutional_approval_at timestamp NULL,\n\taptrust_approval_at timestamp NULL,\n\tnote text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id int4 NOT NULL,\n\tCONSTRAINT bulk_delete_jobs_pkey PRIMARY KEY (id)\n);\n\n\n-- public.bulk_delete_jobs_emails definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_emails (\n\tbulk_delete_job_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_emails_on_bulk_delete_job_id ON public.bulk_delete_jobs_emails USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_emails_on_email_id ON public.bulk_delete_jobs_emails USING btree (email_id);\n\n\n-- public.bulk_delete_jobs_generic_files definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_generic_files (\n\tbulk_delete_job_id int8 NULL,\n\tgeneric_file_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_bulk_delete_job_id ON public.bulk_delete_jobs_generic_files USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_generic_file_id ON public.bulk_delete_jobs_generic_files USING btree (generic_file_id);\n\n\n-- public.bulk_delete_jobs_institutions definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_institutions (\n\tbulk_delete_job_id int8 NULL,\n\tinstitution_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_bulk_delete_job_id ON public.bulk_delete_jobs_institutions USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_institution_id ON public.bulk_delete_jobs_institutions USING btree (institution_id);\n\n\n-- public.bulk_delete_jobs_intellectual_objects definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_intellectual_objects (\n\tbulk_delete_job_id int8 NULL,\n\tintellectual_object_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_bulk_job_id ON public.bulk_delete_jobs_intellectual_objects USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_object_id ON public.bulk_delete_jobs_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.confirmation_tokens definition\n--\n-- This is a legacy table. We can likely delete it\n-- after production is stable.\n--\nCREATE TABLE public.confirmation_tokens (\n\tid bigserial NOT NULL,\n\t\"token\" varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tuser_id int4 NULL,\n\tCONSTRAINT confirmation_tokens_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails definition\n--\n-- This legacy table will be replaced by the new alerts table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails (\n\tid bigserial NOT NULL,\n\temail_type varchar NULL,\n\tevent_identifier varchar NULL,\n\titem_id int4 NULL,\n\temail_text text NULL,\n\tuser_list text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tCONSTRAINT emails_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails_generic_files definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_generic_files (\n\tgeneric_file_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_generic_files_on_email_id ON public.emails_generic_files USING btree (email_id);\nCREATE INDEX index_emails_generic_files_on_generic_file_id ON public.emails_generic_files USING btree (generic_file_id);\n\n\n-- public.emails_intellectual_objects definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_intellectual_objects (\n\tintellectual_object_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_intellectual_objects_on_email_id ON public.emails_intellectual_objects USING btree (email_id);\nCREATE INDEX index_emails_intellectual_objects_on_intellectual_object_id ON public.emails_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.emails_premis_events definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_premis_events (\n\tpremis_event_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_premis_events_on_email_id ON public.emails_premis_events USING btree (email_id);\nCREATE INDEX index_emails_premis_events_on_premis_event_id ON public.emails_premis_events USING btree (premis_event_id);\n\n\n-- public.emails_work_items definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_work_items (\n\twork_item_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_work_items_on_email_id ON public.emails_work_items USING btree (email_id);\nCREATE INDEX index_emails_work_items_on_work_item_id ON public.emails_work_items USING btree (work_item_id);\n\n\n-- public.generic_files definition\nCREATE TABLE public.generic_files (\n\tid serial NOT NULL,\n\tfile_format varchar NULL,\n\t\"size\" int8 NULL,\n\tidentifier varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tlast_fixity_check timestamp NOT NULL DEFAULT '2000-01-01 00:00:00'::timestamp without time zone,\n\tinstitution_id int4 NOT NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tuuid varchar NOT NULL,\n\tCONSTRAINT generic_files_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_generic_files_on_created_at ON public.generic_files USING btree (created_at);\nCREATE UNIQUE INDEX index_generic_files_on_identifier ON public.generic_files USING btree (identifier);\nCREATE INDEX index_generic_files_on_institution_id ON public.generic_files USING btree (institution_id);\nCREATE INDEX index_generic_files_on_institution_id_and_state ON public.generic_files USING btree (institution_id, state);\nCREATE INDEX index_generic_files_on_institution_id_and_updated_at ON public.generic_files USING btree (institution_id, updated_at);\nCREATE INDEX index_generic_files_on_intellectual_object_id ON public.generic_files USING btree (intellectual_object_id);\nCREATE INDEX index_generic_files_on_updated_at ON public.generic_files USING btree (updated_at);\nCREATE UNIQUE INDEX index_generic_files_on_uuid ON public.generic_files USING btree (uuid);\nCREATE INDEX ix_gf_last_fixity_check ON public.generic_files USING btree (last_fixity_check);\n\n\n-- public.institutions definition\nCREATE TABLE public.institutions (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\tidentifier varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\t\"type\" varchar NULL,\n\tmember_institution_id int4 NULL,\n\tdeactivated_at timestamp NULL,\n\totp_enabled bool NULL,\n    enable_spot_restore bool not null default false,\n\treceiving_bucket varchar NOT NULL,\n\trestore_bucket varchar NOT NULL,\n\tCONSTRAINT institutions_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_institutions_on_name ON public.institutions USING btree (name);\n\n\n-- public.intellectual_objects definition\nCREATE TABLE public.intellectual_objects (\n\tid serial NOT NULL,\n\ttitle varchar NULL,\n\tdescription text NULL,\n\tidentifier varchar NULL,\n\talt_identifier varchar NULL,\n\t\"access\" varchar NULL,\n\tbag_name varchar NULL,\n\tinstitution_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tetag varchar NULL,\n\tbag_group_identifier varchar NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tbagit_profile_identifier varchar NULL,\n\tsource_organization varchar NULL,\n\tinternal_sender_identifier varchar NULL,\n\tinternal_sender_description text NULL,\n\tCONSTRAINT intellectual_objects_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_intellectual_objects_on_bag_name ON public.intellectual_objects USING btree (bag_name);\nCREATE INDEX index_intellectual_objects_on_created_at ON public.intellectual_objects USING btree (created_at);\nCREATE UNIQUE INDEX index_intellectual_objects_on_identifier ON public.intellectual_objects USING btree (identifier);\nCREATE INDEX index_intellectual_objects_on_institution_id ON public.intellectual_objects USING btree (institution_id);\nCREATE INDEX index_intellectual_objects_on_updated_at ON public.intellectual_objects USING btree (updated_at);\n\n\n-- public.old_passwords definition\n--\n-- This is a legacy table. We can get rid of this if we\n-- abandon mandatory password changes. Wait until that's\n-- decided.\n--\nCREATE TABLE public.old_passwords (\n\tid bigserial NOT NULL,\n\tencrypted_password varchar NOT NULL,\n\tpassword_salt varchar NULL,\n\tpassword_archivable_type varchar NOT NULL,\n\tpassword_archivable_id int4 NOT NULL,\n\tcreated_at timestamp NULL,\n\tCONSTRAINT old_passwords_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_password_archivable ON public.old_passwords USING btree (password_archivable_type, password_archivable_id);\n\n\n-- public.premis_events definition\nCREATE TABLE public.premis_events (\n\tid serial NOT NULL,\n\tidentifier varchar NULL,\n\tevent_type varchar NULL,\n\tdate_time varchar NULL,\n\toutcome_detail varchar NULL,\n\tdetail varchar NULL,\n\toutcome_information varchar NULL,\n\t\"object\" varchar NULL,\n\tagent varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\toutcome varchar NULL,\n\tinstitution_id int4 NULL,\n\told_uuid varchar NULL,\n\tCONSTRAINT premis_events_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_premis_events_date_time_desc ON public.premis_events USING btree (date_time DESC);\nCREATE INDEX index_premis_events_on_event_type ON public.premis_events USING btree (event_type);\nCREATE INDEX index_premis_events_on_event_type_and_outcome ON public.premis_events USING btree (event_type, outcome);\nCREATE INDEX index_premis_events_on_generic_file_id ON public.premis_events USING btree (generic_file_id);\nCREATE UNIQUE INDEX index_premis_events_on_identifier ON public.premis_events USING btree (identifier);\nCREATE INDEX index_premis_events_on_institution_id ON public.premis_events USING btree (institution_id);\nCREATE INDEX index_premis_events_on_intellectual_object_id ON public.premis_events USING btree (intellectual_object_id);\nCREATE INDEX index_premis_events_on_outcome ON public.premis_events USING btree (outcome);\n\n\n-- public.schema_migrations definition\n--\n-- This is a legacy table used by ActiveRecord\n-- to track which migrations have been applied.\n--\n-- We can delete this when production is stable.\n--\nCREATE TABLE public.schema_migrations (\n\t\"version\" varchar NOT NULL,\n\tCONSTRAINT schema_migrations_pkey PRIMARY KEY (version)\n);\n\n\n-- public.snapshots definition\n--\n-- This table stores point-in-time snapshots\n-- of how much data each depositor has in the repo.\n--\n-- We may eventually delete this, but keep for now.\n--\nCREATE TABLE public.snapshots (\n\tid bigserial NOT NULL,\n\taudit_date timestamp NULL,\n\tinstitution_id int4 NULL,\n\tapt_bytes int8 NULL,\n\t\"cost\" numeric NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tsnapshot_type varchar NULL,\n\tcs_bytes int8 NULL,\n\tgo_bytes int8 NULL,\n\tCONSTRAINT snapshots_pkey PRIMARY KEY (id)\n);\n\n\n-- public.usage_samples definition\n--\n-- No idea what this was supposed to be, but the\n-- table never had any data in the production DB.\n-- Consider deleting this after we're sure it's not used.\n--\nCREATE TABLE public.usage_samples (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id varchar NULL,\n\t\"data\" text NULL,\n\tCONSTRAINT usage_samples_pkey PRIMARY KEY (id)\n);\n\n\n-- public.work_items definition\nCREATE TABLE public.work_items (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\t\"name\" varchar NULL,\n\tetag varchar NULL,\n\tbucket varchar NULL,\n\t\"user\" varchar NULL,\n\tnote text NULL,\n\t\"action\" varchar NULL,\n\tstage varchar NULL,\n\tstatus varchar NULL,\n\toutcome text NULL,\n\tbag_date timestamp NULL,\n\tdate_processed timestamp NULL,\n\tretry bool NOT NULL DEFAULT false,\n\tnode varchar(255) NULL,\n\tpid int4 NULL DEFAULT 0,\n\tneeds_admin_review bool NOT NULL DEFAULT false,\n\tinstitution_id int4 NULL,\n\tqueued_at timestamp NULL,\n\t\"size\" int8 NULL,\n\tstage_started_at timestamp NULL,\n\taptrust_approver varchar NULL,\n\tinst_approver varchar NULL,\n\tCONSTRAINT work_items_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_work_items_on_action ON public.work_items USING btree (action);\nCREATE INDEX index_work_items_on_date ON public.work_items USING btree (date_processed);\nCREATE INDEX index_work_items_on_etag_and_name ON public.work_items USING btree (etag, name);\nCREATE INDEX index_work_items_on_generic_file_id ON public.work_items USING btree (generic_file_id);\nCREATE INDEX index_work_items_on_institution_id ON public.work_items USING btree (institution_id);\nCREATE INDEX index_work_items_on_institution_id_and_date ON public.work_items USING btree (institution_id, date_processed);\nCREATE INDEX index_work_items_on_intellectual_object_id ON public.work_items USING btree (intellectual_object_id);\nCREATE INDEX index_work_items_on_stage ON public.work_items USING btree (stage);\nCREATE INDEX index_work_items_on_status ON public.work_items USING btree (status);\n\n\n-- public.checksums definition\nCREATE TABLE public.checksums (\n\tid serial NOT NULL,\n\talgorithm varchar NULL,\n\tdatetime timestamp NULL,\n\tdigest varchar NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT checksums_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_89bb0866e7 FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_checksums_on_generic_file_id ON public.checksums USING btree (generic_file_id);\n\n\n-- public.storage_records definition\nCREATE TABLE public.storage_records (\n\tid bigserial NOT NULL,\n\tgeneric_file_id int4 NULL,\n\turl varchar NULL,\n\tCONSTRAINT storage_records_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_a126ea6adc FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\n\n-- public.users definition\nCREATE TABLE public.users (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\temail varchar NULL,\n\tphone_number varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tencrypted_password varchar NOT NULL DEFAULT ''::character varying,\n\treset_password_token varchar NULL,\n\treset_password_sent_at timestamp NULL,\n\tremember_created_at timestamp NULL,\n\tsign_in_count int4 NOT NULL DEFAULT 0,\n\tcurrent_sign_in_at timestamp NULL,\n\tlast_sign_in_at timestamp NULL,\n\tcurrent_sign_in_ip varchar NULL,\n\tlast_sign_in_ip varchar NULL,\n\tinstitution_id int4 NULL,\n\tencrypted_api_secret_key text NULL,\n\tpassword_changed_at timestamp NULL,\n\tencrypted_otp_secret varchar NULL,\n\tencrypted_otp_secret_iv varchar NULL,\n\tencrypted_otp_secret_salt varchar NULL,\n    encrypted_otp_sent_at timestamp NULL,\n\tconsumed_timestep int4 NULL,\n\totp_required_for_login bool NULL,\n\tdeactivated_at timestamp NULL,\n\tenabled_two_factor bool NULL DEFAULT false,\n\tconfirmed_two_factor bool NULL DEFAULT false,\n\totp_backup_codes _varchar NULL,\n\tauthy_id varchar NULL,\n\tlast_sign_in_with_authy timestamp NULL,\n\tauthy_status varchar NULL,\n\temail_verified bool NULL DEFAULT false,\n\tinitial_password_updated bool NULL DEFAULT false,\n\tforce_password_update bool NULL DEFAULT false,\n\taccount_confirmed bool NULL DEFAULT true,\n\tgrace_period timestamp NULL,\n    awaiting_second_factor boolean not null default false,\n    \"role\" varchar(50) NOT NULL default 'none',\n\tCONSTRAINT users_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_7fcf39ca13 FOREIGN KEY (institution_id) REFERENCES institutions(id)\n);\nCREATE INDEX index_users_on_authy_id ON public.users USING btree (authy_id);\nCREATE UNIQUE INDEX index_users_on_email ON public.users USING btree (email);\nCREATE INDEX index_users_on_institution_id ON public.users USING btree (institution_id);\nCREATE INDEX index_users_on_password_changed_at ON public.users USING btree (password_changed_at);\nCREATE UNIQUE INDEX index_users_on_reset_password_token ON public.users USING btree (reset_password_token);\n\n-------------------------------------------------------------------------------\n-- New tables that were not part of Pharos.\n-- alerts              + join tables\n-- deletion_requests   + join tables\n-------------------------------------------------------------------------------\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index index_alerts_institution_id ON public.alerts (institution_id);\ncreate index index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table public.alerts_users (\n    alert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table public.alerts_work_items (\n    alert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index index_storage_options_name ON public.storage_options (\"name\");\n\n\n\n-------------------------------------------------------------------------------\n-- Functions\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: -- migrations.sql\n--\n-- This file contains ALL alterations that should be applied to the\n-- existing Pharos DB schema (as it exists in the feature/storage-option\n-- branch) to make it match schema.sql.\n--\n-- All operations in this file must be idempotent, so we can run it\n-- any number of times and always know that it will leave the DB in\n-- consistent and known state that matches schema.sql.\n--\n-- NOTE: When migrating old Pharos DB, we will also need to create the\n--       views in the schema.sql file.\n-------------------------------------------------------------------------------\n\n---------------------------------------------------------\n-- START OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n---------------------------------------------------------\n\n-- Drop legacy table from Pharos DB.\ndrop table if exists work_item_states;\n\n-- Create the storage_records table, with indexes.\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\tcreate table public.storage_records (\n    \tid bigserial not null,\n    \tgeneric_file_id int8 not null,\n    \turl varchar not null,\n    \tconstraint storage_records_pkey primary key (id),\n    \tconstraint fk_rails_a126ea6adc foreign key (generic_file_id) references generic_files(id)\n\t);\n\tcreate index if not exists index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\tcreate unique index if not exists index_storage_records_on_url ON public.storage_records(\"url\");\n  end if;\nend\n$$;\n\n-- Add column generic_files.uuid.\nalter table generic_files add column if not exists \"uuid\" varchar;\n\n-- Copy uuid from uri into uuid field.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\tupdate generic_files set uuid=split_part(uri, '/', 5);\n  end if;\nend\n$$;\n\n-- Change generic_files.uuid to not null and add a unique index.\ndo\n$$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uuid' and is_nullable = 'YES') then\n  \talter table generic_files alter column \"uuid\" set not null;\n\tcreate unique index if not exists index_generic_files_on_uuid on generic_files(uuid);\n  end if;\nend\n$$;\n\n-- Copy generic_files.uri from storage_records.url.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\n  \t  -- Get the intial URL. All items, regadless of storage option, have one URL.\n      -- The inner if statement makes sure this hasn't already run. (Prevents duplicate inserts.)\n\t  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\t    if not exists (select 1 from storage_records where length(url) > 0) then\n\t\t  insert into storage_records (generic_file_id, url) select id, uri from generic_files gf order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- For items in standard storage, we need to add a Glacier URL. URLs differ per environment, so we check.\n\t  -- In each case, the inner if statement tries to ensure that these inserts have not already run.\n\n\t  -- Production\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.preservation.storage/', '/aptrust.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Test/Demo\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.test.preservation.oregon/%') then\n\t      insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.test.preservation/', '/aptrust.test.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Staging\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.staging.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.staging.preservation/', '/aptrust.staging.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n  end if;\nend\n$$;\n\n-- Now remove generic_files.uri, since the data is now in storage_records\nalter table generic_files drop column if exists uri;\n\n-------------------------------------------------------\n-- END OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n-------------------------------------------------------\n\n-- The premis_events.date_time column is varchar, but it should be\n-- timestamp. We need to change it. This change may fail if 1) there\n-- are invalid or badly formatted dates in the date_time column, or\n-- 2) if any views referencing premis_events.date_time already exist.\n-- Drop premis_events_view if necessary and recreate it after this alteration.\n--\n-- This change may take a long time, as premis_events has over 100M rows.\ndo\n$$\nbegin\n\tif exists(\n\t\tselect 1 from information_schema.columns\n\t\twhere table_schema = 'public'\n\t\tand table_name = 'premis_events'\n\t\tand column_name = 'date_time'\n\t\tand data_type = 'character varying')\n\tthen\n\t\talter table premis_events alter column date_time type timestamp\n\t\tusing TO_TIMESTAMP(date_time, 'YYYY-MM-DDTHH24:MI:SS');\n\tend if;\nend\n$$;\n\n-- We need to fix the user role structure. Pharos allows a user to have\n-- multiple roles at a single institution, though our business rules disallow\n-- that, and no user has ever had more than one role. To simplify the DB\n-- and our queries, we need to do the following:\n--\n-- 1. Create a role column in the users table.\n-- 2. Populate that column with the value with each user's role from\n--    user -> roles_user -> roles.\n-- 3. Drop the roles_users table.\n-- 4. Drop the roles table.\n\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='role') then\n \talter table users add column \"role\" varchar(50) not null default 'none';\n \tupdate users u set \"role\" = coalesce((select r.name from \"roles\" r inner join roles_users ru on ru.role_id = r.id where ru.user_id = u.id), 'none');\n    drop table if exists roles_users;\n    drop table if exists roles;\n  end if;\nend\n$$;\n\n-- Add awaiting_second_factor\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='awaiting_second_factor') then\n \talter table users add column \"awaiting_second_factor\" boolean not null default false;\n  end if;\nend\n$$;\n\n-- Add encrypted_otp_sent_at\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='encrypted_otp_sent_at') then\n \talter table users add column \"encrypted_otp_sent_at\" timestamp null;\n  end if;\nend\n$$;\n\n\n-- The ingest_state columns were part of a proposed architecture we never\n-- implemented. They have never been used, and we don't need them.\nalter table intellectual_objects drop column if exists ingest_state;\nalter table generic_files drop column if exists ingest_state;\n\n\n-- intellectual_objects.bag_group_identifier is almost always empty.\n-- Make this column nullable to ease inserts.\nalter table intellectual_objects alter column bag_group_identifier drop not null;\n\n\n-- Remove object_identifier and generic_file_identifier from work_items.\n-- We can use a view to join the files & objects tables, avoiding the\n-- duplicate data.\nalter table work_items drop column if exists object_identifier;\nalter table work_items drop column if exists generic_file_identifier;\n\n-- The work_items.date column actually refers to the datetime on which\n-- the item was last processed by one of our Go workers. The name \"date\"\n-- is too vague and ambiguous, so let's call it what it is.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns\n    where table_schema='public' AND table_name='work_items' AND column_name='date') then\n    alter table work_items rename column \"date\" to \"date_processed\";\n  end if;\nend\n$$;\n\n-- Update the indexes on work_items to reflect the change from date to\n-- date_processed.\n\ndrop index if exists index_work_items_on_date;\ndrop index if exists index_work_items_on_institution_id_and_date;\n\ncreate index if not exists index_work_items_on_date_processed on work_items(date_processed);\ncreate index if not exists index_work_items_on_inst_id_and_date_processed on work_items(institution_id, date_processed);\n\n-- These columns are unnecessary in the premis_events table.\n-- We can get them by joining other tables in a view.\n-- This will have a large impact on storage space, since these\n-- two fields together average ~100 bytes per record, and as of\n-- Jan. 2021, we have around 120M records. Dropping these columns\n-- also drops the indexes on these two columns, which are huge and\n-- are rarely used.\nalter table premis_events drop column if exists intellectual_object_identifier;\nalter table premis_events drop column if exists generic_file_identifier;\n\n-- Get rid of useless indexes. We can add these back if they actually turn\n-- out to be useful.\n--\n-- generic_files\ndrop index if exists index_files_on_inst_state_and_format;\ndrop index if exists index_files_on_inst_state_and_updated;\ndrop index if exists index_generic_files_on_file_format;\ndrop index if exists index_generic_files_on_file_format_and_state;\ndrop index if exists index_generic_files_on_institution_id_and_size_and_state;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_file_format;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_state;\ndrop index if exists index_generic_files_on_size;\ndrop index if exists index_generic_files_on_size_and_state;\ndrop index if exists index_generic_files_on_state;\ndrop index if exists index_generic_files_on_state_and_updated_at;\n\n-- intellectual_objects\ndrop index if exists index_intellectual_objects_on_access;\ndrop index if exists index_intellectual_objects_on_institution_id_and_state;\ndrop index if exists index_intellectual_objects_on_state;\n\n-- premis_events\ndrop index if exists index_premis_events_on_generic_file_id_and_event_type;\ndrop index if exists index_premis_events_on_identifier_and_institution_id;\n\n-- institutions\ncreate unique index if not exists index_institutions_identifier on institutions using btree(identifier);\ncreate unique index if not exists index_institutions_receiving_bucket on institutions using btree(receiving_bucket);\ncreate unique index if not exists index_institutions_restore_bucket on institutions using btree(restore_bucket);\n\n-- Allow institutions to turn spot restoration tests on or off.\n-- Default is off.\nalter table institutions add column if not exists enable_spot_restore boolean not null default false;\n\n-- ********************************************************************\n--\n-- Add tables for alerts and deletions that did not exist in Pharos\n--\n-- ********************************************************************\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table if not exists public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index if not exists index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table if not exists public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index if not exists index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table if not exists public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index if not exists index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table if not exists public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index if not exists index_alerts_institution_id ON public.alerts (institution_id);\ncreate index if not exists index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table if not exists public.alerts_users (\n\talert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index if not exists index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index if not exists index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index if not exists index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table if not exists public.alerts_work_items (\n\talert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index if not exists index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index if not exists index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table if not exists public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index if not exists index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index if not exists index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table if not exists public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index if not exists index_storage_options_name ON public.storage_options (\"name\");\n\n-- In Pharos DB, many generic_file_ids in premis_events are set to zero when they should be null.\n-- Fix that here.\nupdate premis_events set generic_file_id = null where generic_file_id = 0;\n\n-- In Pharos, the Devise auth system leaves stale password reset data forever.\n-- We have to clear these values in Registry, or all users will be stuck in\n-- the \"please finish resetting your password\" loop forever. We have no idea\n-- what reset tokens Devise sent two years ago, so no one will be able to\n-- unlock their accounts.\nupdate users set reset_password_token = null, reset_password_sent_at = null;\n\n\n-------------------------------------------------------------------------------\n-- Functions\n--\n-- Fuctions are defined in schema.sql as well. Adding them to migrations\n-- ensures they'll be present in converted DB.\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: -------------------------------------------------------------------------------\n-- Views\n-------------------------------------------------------------------------------\n\n-- Create a view to pull in columns that used to be in the WorkItems table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view work_items_view as\nselect\n\twi.id,\n\twi.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\twi.intellectual_object_id,\n\tio.identifier as \"object_identifier\",\n\tio.alt_identifier,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\twi.generic_file_id,\n\tgf.identifier as \"generic_file_identifier\",\n\twi.\"name\",\n\twi.etag,\n\twi.bucket,\n\twi.\"user\",\n\twi.note,\n\twi.\"action\",\n\twi.stage,\n\twi.status,\n\twi.outcome,\n\twi.bag_date,\n\twi.date_processed,\n\twi.retry,\n\twi.node,\n\twi.pid,\n\twi.needs_admin_review,\n\twi.\"size\",\n\twi.queued_at,\n\twi.stage_started_at,\n\twi.aptrust_approver,\n\twi.inst_approver,\n\twi.created_at,\n\twi.updated_at\nfrom work_items wi\nleft join institutions i on wi.institution_id = i.id\nleft join intellectual_objects io on wi.intellectual_object_id = io.id\nleft join generic_files gf on wi.generic_file_id = gf.id;\n\n\n-- Create a view to pull in columns that used to be in the PremisEvents table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view premis_events_view as\nselect\n\tpe.id,\n\tpe.identifier,\n\tpe.institution_id,\n\ti.\"name\" as institution_name,\n\tpe.intellectual_object_id,\n\tio.identifier as intellectual_object_identifier,\n\tpe.generic_file_id,\n\tgf.identifier as generic_file_identifier,\n\tpe.event_type,\n\tpe.date_time,\n\tpe.detail,\n\tpe.outcome,\n\tpe.outcome_detail,\n\tpe.outcome_information,\n\tpe.\"object\",\n\tpe.agent,\n\tpe.created_at,\n\tpe.updated_at,\n\tpe.old_uuid\nfrom premis_events pe\nleft join institutions i on pe.institution_id = i.id\nleft join intellectual_objects io on pe.intellectual_object_id = io.id\nleft join generic_files gf on pe.generic_file_id = gf.id;\n\n\n-- users_view makes it easier to list and search on institution-related\n-- attributes for users.\ncreate or replace view users_view as\nselect\n\tu.id,\n\tu.\"name\",\n\tu.email,\n\tu.phone_number,\n\tu.created_at,\n\tu.updated_at,\n\tu.reset_password_sent_at,\n\tu.remember_created_at,\n\tu.sign_in_count,\n\tu.current_sign_in_at,\n\tu.last_sign_in_at,\n\tu.current_sign_in_ip,\n\tu.last_sign_in_ip,\n\tu.institution_id,\n\tu.password_changed_at,\n\tu.consumed_timestep,\n\tu.otp_required_for_login,\n\tu.deactivated_at,\n\tu.enabled_two_factor,\n\tu.confirmed_two_factor,\n\tu.authy_id,\n\tu.last_sign_in_with_authy,\n\tu.authy_status,\n\tu.email_verified,\n\tu.initial_password_updated,\n\tu.force_password_update,\n\tu.account_confirmed,\n\tu.grace_period,\n\tu.\"role\",\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.state as institution_state,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id,\n\ti2.\"name\" as member_institution_name,\n\ti2.identifier as member_institution_identifier,\n\ti2.state as member_institution_state,\n\ti.otp_enabled,\n\ti.receiving_bucket,\n\ti.restore_bucket\nfrom users u\nleft join institutions i on u.institution_id = i.id\nleft join institutions i2 on i.member_institution_id = i2.id;\n\n\n-- institutions_view shows an institution along with essential\n-- information about its parent, if it has a parent.\n\ncreate or replace view institutions_view as\nselect\n\ti.id,\n\ti.\"name\",\n\ti.identifier,\n\ti.state,\n\ti.\"type\",\n\ti.deactivated_at,\n\ti.otp_enabled,\n\ti.enable_spot_restore,\n\ti.receiving_bucket,\n\ti.restore_bucket,\n\ti.created_at,\n\ti.updated_at,\n\ti.member_institution_id as \"parent_id\",\n\tparent.\"name\" as \"parent_name\",\n\tparent.identifier as \"parent_identifier\",\n\tparent.state as \"parent_state\",\n\tparent.deactivated_at as \"parent_deactivated_at\"\nfrom institutions i\nleft join institutions parent on i.member_institution_id = parent.id;\n\n-- intellectual_objects_view\n\ncreate or replace view intellectual_objects_view as\nselect\n\tio.id,\n\tio.title,\n\tio.description,\n\tio.identifier,\n\tio.alt_identifier,\n\tio.access,\n\tio.bag_name,\n\tio.institution_id,\n\tio.state,\n\tio.etag,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\tio.internal_sender_description,\n\tio.created_at,\n\tio.updated_at,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id as institution_parent_id,\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"size\",\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_size\"\nfrom intellectual_objects io\nleft join institutions i on io.institution_id = i.id;\n\n-- deletion_requests_view\n\ncreate or replace view deletion_requests_view as\nselect dr.id,\n       dr.institution_id,\n       i.\"name\" as institution_name,\n       i.identifier as institution_identifier,\n       dr.requested_by_id,\n       req.\"name\" as requested_by_name,\n       req.email as requested_by_email,\n       dr.requested_at,\n       dr.confirmed_by_id,\n       conf.\"name\" as confirmed_by_name,\n       conf.email as confirmed_by_email,\n       dr.confirmed_at,\n       dr.cancelled_by_id,\n       can.\"name\" as cancelled_by_name,\n       can.email as cancelled_by_email,\n       dr.cancelled_at,\n       (select count(*) from deletion_requests_generic_files drgf where drgf.deletion_request_id = dr.id) as file_count,\n       (select count(*) from deletion_requests_intellectual_objects drio where drio.deletion_request_id = dr.id) as object_count,\n       dr.work_item_id,\n       wi.stage,\n       wi.status,\n       wi.date_processed,\n       wi.\"size\",\n       wi.note\nfrom deletion_requests dr\nleft join institutions i on dr.institution_id = i.id\nleft join users req on dr.requested_by_id = req.id\nleft join users conf on dr.confirmed_by_id = conf.id\nleft join users can on dr.confirmed_by_id = can.id\nleft join work_items wi on dr.work_item_id = wi.id;\n\n-- alerts view\n\ncreate or replace view alerts_view as\nselect\n\ta.id,\n\ta.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ta.\"type\",\n\ta.subject,\n\ta.\"content\",\n\ta.deletion_request_id,\n\ta.created_at,\n\tau.user_id,\n\tu.\"name\" as user_name,\n\tau.sent_at,\n\tau.read_at\nfrom alerts a\nleft join alerts_users au on a.id = au.alert_id\nleft join users u on au.user_id = u.id\nleft join institutions i on a.institution_id = i.id;\n\n-- storage_option_stats\ncreate or replace view storage_option_stats as\nwith stats as (\n\tselect\n\t\tsum(\"gf\".\"size\") as total_bytes,\n\t\tcount(*) as file_count,\n\t\tgf.institution_id,\n\t\tgf.storage_option\n\tfrom generic_files gf\n\twhere gf.state = 'A'\n\tgroup by rollup (gf.institution_id, gf.storage_option)\n\t)\nselect\n\ts.total_bytes,\n\ts.file_count,\n\ts.institution_id,\n\ts.storage_option,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier\nfrom stats s\nleft join institutions i on s.institution_id = i.id;\n\ncreate or replace view generic_files_view as\nselect\n\tgf.id,\n\tgf.file_format,\n\tgf.\"size\",\n\tgf.identifier,\n\tgf.intellectual_object_id,\n\tio.identifier as object_identifier,\n\tio.\"access\",\n\tgf.state,\n\tgf.last_fixity_check,\n\tgf.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\tgf.storage_option,\n\tgf.uuid,\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='md5' order by created_at desc limit 1) as \"md5\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha1' order by created_at desc limit 1) as \"sha1\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha256' order by created_at desc limit 1) as \"sha256\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha512' order by created_at desc limit 1) as \"sha512\",\n\tgf.created_at,\n\tgf.updated_at\nfrom generic_files gf\nleft join intellectual_objects io on io.id = gf.intellectual_object_id\nleft join institutions i on i.id = gf.institution_id;\n\n-- Checksums view\ncreate or replace view checksums_view as\nselect cs.id,\n       cs.algorithm,\n       cs.datetime,\n       cs.digest,\n       gf.state,\n       gf.identifier as \"generic_file_identifier\",\n       cs.generic_file_id,\n       gf.intellectual_object_id,\n       gf.institution_id,\n       cs.created_at,\n       cs.updated_at\nfrom checksums cs\nleft join generic_files gf on cs.generic_file_id = gf.id;\n\n\n---------------------------------------------------------------------------\n--\n-- Count Views\n--\n-- We create these views because count queries on large tables are slow\n-- in postgres. Even if a query can use an index to get a count, it still\n-- has to scan every row in the result set to see if that row is visible\n-- under postgres' mvcc rules. \n--\n-- If the count returns a million rows, postgres has to scan all million\n-- rows. The result is a query that can take 5-15 seconds. The \n-- premis_events table is the worst of the lot. It should surpass 200M\n-- rows by the end of 2022. We do not want to scan those rows every time\n-- someone hits the events page or the events API endpoint.\n--\n-- We run count queries all the time to manage paging in both the web UI\n-- and the API. For large counts, such as \"all events for an institution\",\n-- or \"all files for an institution\", we'll use the counts in the views\n-- below. \n--\n-- For smaller counts, such as \"all files for my institution created \n-- within the past week\", we'll suck it up and let postgres scan the \n-- smaller row sets.\n--\n-- These views will be refreshed every hour or so using an async go \n-- routine so they don't slow down web and API requests.\n--\n-- That means some large counts may be up to an hour out of date, but we\n-- can live with that tradeoff, since this will vastly speed up the loading\n-- of our most commonly hit web and API endpoints.\n--\n-- Note the function update_counts() below. It refreshes all of the count\n-- views.\n-- \n---------------------------------------------------------------------------\n\n-- premis_event_counts\ncreate materialized view if not exists premis_event_counts as\n\tselect institution_id, count(id) as row_count, event_type, outcome\n\tfrom premis_events group by cube(institution_id, event_type, outcome)\n\torder by institution_id, event_type, outcome;\n\n-- intellectual_object_counts\ncreate materialized view if not exists intellectual_object_counts as\n\tselect institution_id, count(id) as row_count, \"state\" \n\tfrom intellectual_objects group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- generic_file_counts\ncreate materialized view if not exists generic_file_counts as\n\tselect institution_id, count(id) as row_count, \"state\"\n\tfrom generic_files group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- work_item_counts\ncreate materialized view if not exists work_item_counts as\n\tselect institution_id, count(id) as row_count, \"action\"\n\tfrom work_items group by cube(institution_id, \"action\")\n\torder by institution_id, \"action\";\n\n-- \nCREATE OR REPLACE FUNCTION update_counts ()\n  RETURNS integer\nAS\n$BODY$\n  begin\n    refresh materialized view premis_event_counts;\n    refresh materialized view intellectual_object_counts;\n    refresh materialized view generic_file_counts;\n    refresh materialized view work_item_counts;    \n    return 1;\n  end;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"storage_options\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_options.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"institutions\" from '/Users/diamond/aptrust/registry/db/fixtures/institutions.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"users\" from '/Users/diamond/aptrust/registry/db/fixtures/users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"checksums\" from '/Users/diamond/aptrust/registry/db/fixtures/checksums.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"storage_records\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_records.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"deletion_requests\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"deletion_requests_generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"deletion_requests_intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"alerts\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"alerts_premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"alerts_users\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: copy \"alerts_work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_options', 'id'), MAX(id)) FROM \"storage_options\";"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('institutions', 'id'), MAX(id)) FROM \"institutions\";"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('users', 'id'), MAX(id)) FROM \"users\";"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('intellectual_objects', 'id'), MAX(id)) FROM \"intellectual_objects\";"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('generic_files', 'id'), MAX(id)) FROM \"generic_files\";"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('checksums', 'id'), MAX(id)) FROM \"checksums\";"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_records', 'id'), MAX(id)) FROM \"storage_records\";"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('premis_events', 'id'), MAX(id)) FROM \"premis_events\";"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('work_items', 'id'), MAX(id)) FROM \"work_items\";"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('deletion_requests', 'id'), MAX(id)) FROM \"deletion_requests\";"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('alerts', 'id'), MAX(id)) FROM \"alerts\";"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: select update_counts();"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE ((\"generic_file\".\"identifier\" = 'institution1.edu/glass/shard3'))"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" WHERE ((institution_id = 2) AND (role = 'institutional_admin'))"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((generic_file_id = 9) AND (status NOT IN ('Cancelled', 'Failed', 'Success'))) ORDER BY \"date_processed\" desc"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 9) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (9)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (9)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (9))"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: INSERT INTO \"deletion_requests\" (\"id\", \"institution_id\", \"requested_by_id\", \"requested_at\", \"encrypted_confirmation_token\", \"confirmed_by_id\", \"confirmed_at\", \"cancelled_by_id\", \"cancelled_at\", \"work_item_id\") VALUES (DEFAULT, 2, 2, '2022-06-22 17:30:48.860405+00:00:00', '$2a$10$m7/guDgIWAcDNgukdL/b.e8Cb1K0/S7Rl6ZqRTyIbS8DdOknUxToK', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING \"id\", \"confirmed_by_id\", \"confirmed_at\", \"cancelled_by_id\", \"cancelled_at\", \"work_item_id\""}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: insert into deletion_requests_generic_files (deletion_request_id, generic_file_id) values (4, 9) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" WHERE ((institution_id = 2) AND (role = 'institutional_admin'))"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: INSERT INTO \"alerts\" (\"id\", \"institution_id\", \"type\", \"subject\", \"content\", \"deletion_request_id\", \"created_at\") VALUES (DEFAULT, 2, 'Deletion Requested', 'Deletion Requested', 'Hello from APTrust,\n\nUser Inst One Admin has requested some files or objects be deleted from preservation storage. We won''t process this request until you or another APTrust administrator at your institution approves it.\n\nFollow the link below to see the list of items in the deletion request. From there you may approve or cancel the request.\n\nhttps://example.com/deletions/review/4?token=842d35e52923322b23f5d352c90ee42c\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n', 4, '2022-06-22 17:30:48.867868+00:00:00') RETURNING \"id\""}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: insert into alerts_users (alert_id, user_id, sent_at, read_at) values (9, 2, NULL, NULL) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:30:48-04:00","message":"SES is disabled per config settings. Email to admin@inst1.edu. Subject: Deletion Requested\n\n. Hello from APTrust,\n\nUser Inst One Admin has requested some files or objects be deleted from preservation storage. We won't process this request until you or another APTrust administrator at your institution approves it.\n\nFollow the link below to see the list of items in the deletion request. From there you may approve or cancel the request.\n\nhttps://example.com/deletions/review/4?token=842d35e52923322b23f5d352c90ee42c\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: update alerts_users set sent_at = '2022-06-22 17:30:48.870809+00:00:00' where alert_id = 9 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 49) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (49)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (49)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (49))"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((generic_file_id = 49) AND (status NOT IN ('Cancelled', 'Failed', 'Success'))) ORDER BY \"date_processed\" desc"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'admin@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"deletion_request\".\"id\", \"deletion_request\".\"institution_id\", \"deletion_request\".\"requested_by_id\", \"deletion_request\".\"requested_at\", \"deletion_request\".\"encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\", \"deletion_request\".\"confirmed_at\", \"deletion_request\".\"cancelled_by_id\", \"deletion_request\".\"cancelled_at\", \"deletion_request\".\"work_item_id\", \"requested_by\".\"id\" AS \"requested_by__id\", \"requested_by\".\"created_at\" AS \"requested_by__created_at\", \"requested_by\".\"updated_at\" AS \"requested_by__updated_at\", \"requested_by\".\"name\" AS \"requested_by__name\", \"requested_by\".\"email\" AS \"requested_by__email\", \"requested_by\".\"phone_number\" AS \"requested_by__phone_number\", \"requested_by\".\"encrypted_password\" AS \"requested_by__encrypted_password\", \"requested_by\".\"reset_password_token\" AS \"requested_by__reset_password_token\", \"requested_by\".\"reset_password_sent_at\" AS \"requested_by__reset_password_sent_at\", \"requested_by\".\"remember_created_at\" AS \"requested_by__remember_created_at\", \"requested_by\".\"sign_in_count\" AS \"requested_by__sign_in_count\", \"requested_by\".\"current_sign_in_at\" AS \"requested_by__current_sign_in_at\", \"requested_by\".\"last_sign_in_at\" AS \"requested_by__last_sign_in_at\", \"requested_by\".\"current_sign_in_ip\" AS \"requested_by__current_sign_in_ip\", \"requested_by\".\"last_sign_in_ip\" AS \"requested_by__last_sign_in_ip\", \"requested_by\".\"institution_id\" AS \"requested_by__institution_id\", \"requested_by\".\"encrypted_api_secret_key\" AS \"requested_by__encrypted_api_secret_key\", \"requested_by\".\"password_changed_at\" AS \"requested_by__password_changed_at\", \"requested_by\".\"encrypted_otp_secret\" AS \"requested_by__encrypted_otp_secret\", \"requested_by\".\"encrypted_otp_secret_iv\" AS \"requested_by__encrypted_otp_secret_iv\", \"requested_by\".\"encrypted_otp_secret_salt\" AS \"requested_by__encrypted_otp_secret_salt\", \"requested_by\".\"encrypted_otp_sent_at\" AS \"requested_by__encrypted_otp_sent_at\", \"requested_by\".\"consumed_timestep\" AS \"requested_by__consumed_timestep\", \"requested_by\".\"otp_required_for_login\" AS \"requested_by__otp_required_for_login\", \"requested_by\".\"deactivated_at\" AS \"requested_by__deactivated_at\", \"requested_by\".\"enabled_two_factor\" AS \"requested_by__enabled_two_factor\", \"requested_by\".\"confirmed_two_factor\" AS \"requested_by__confirmed_two_factor\", \"requested_by\".\"otp_backup_codes\" AS \"requested_by__otp_backup_codes\", \"requested_by\".\"authy_id\" AS \"requested_by__authy_id\", \"requested_by\".\"last_sign_in_with_authy\" AS \"requested_by__last_sign_in_with_authy\", \"requested_by\".\"authy_status\" AS \"requested_by__authy_status\", \"requested_by\".\"email_verified\" AS \"requested_by__email_verified\", \"requested_by\".\"initial_password_updated\" AS \"requested_by__initial_password_updated\", \"requested_by\".\"force_password_update\" AS \"requested_by__force_password_update\", \"requested_by\".\"grace_period\" AS \"requested_by__grace_period\", \"requested_by\".\"awaiting_second_factor\" AS \"requested_by__awaiting_second_factor\", \"requested_by\".\"role\" AS \"requested_by__role\", \"confirmed_by\".\"id\" AS \"confirmed_by__id\", \"confirmed_by\".\"created_at\" AS \"confirmed_by__created_at\", \"confirmed_by\".\"updated_at\" AS \"confirmed_by__updated_at\", \"confirmed_by\".\"name\" AS \"confirmed_by__name\", \"confirmed_by\".\"email\" AS \"confirmed_by__email\", \"confirmed_by\".\"phone_number\" AS \"confirmed_by__phone_number\", \"confirmed_by\".\"encrypted_password\" AS \"confirmed_by__encrypted_password\", \"confirmed_by\".\"reset_password_token\" AS \"confirmed_by__reset_password_token\", \"confirmed_by\".\"reset_password_sent_at\" AS \"confirmed_by__reset_password_sent_at\", \"confirmed_by\".\"remember_created_at\" AS \"confirmed_by__remember_created_at\", \"confirmed_by\".\"sign_in_count\" AS \"confirmed_by__sign_in_count\", \"confirmed_by\".\"current_sign_in_at\" AS \"confirmed_by__current_sign_in_at\", \"confirmed_by\".\"last_sign_in_at\" AS \"confirmed_by__last_sign_in_at\", \"confirmed_by\".\"current_sign_in_ip\" AS \"confirmed_by__current_sign_in_ip\", \"confirmed_by\".\"last_sign_in_ip\" AS \"confirmed_by__last_sign_in_ip\", \"confirmed_by\".\"institution_id\" AS \"confirmed_by__institution_id\", \"confirmed_by\".\"encrypted_api_secret_key\" AS \"confirmed_by__encrypted_api_secret_key\", \"confirmed_by\".\"password_changed_at\" AS \"confirmed_by__password_changed_at\", \"confirmed_by\".\"encrypted_otp_secret\" AS \"confirmed_by__encrypted_otp_secret\", \"confirmed_by\".\"encrypted_otp_secret_iv\" AS \"confirmed_by__encrypted_otp_secret_iv\", \"confirmed_by\".\"encrypted_otp_secret_salt\" AS \"confirmed_by__encrypted_otp_secret_salt\", \"confirmed_by\".\"encrypted_otp_sent_at\" AS \"confirmed_by__encrypted_otp_sent_at\", \"confirmed_by\".\"consumed_timestep\" AS \"confirmed_by__consumed_timestep\", \"confirmed_by\".\"otp_required_for_login\" AS \"confirmed_by__otp_required_for_login\", \"confirmed_by\".\"deactivated_at\" AS \"confirmed_by__deactivated_at\", \"confirmed_by\".\"enabled_two_factor\" AS \"confirmed_by__enabled_two_factor\", \"confirmed_by\".\"confirmed_two_factor\" AS \"confirmed_by__confirmed_two_factor\", \"confirmed_by\".\"otp_backup_codes\" AS \"confirmed_by__otp_backup_codes\", \"confirmed_by\".\"authy_id\" AS \"confirmed_by__authy_id\", \"confirmed_by\".\"last_sign_in_with_authy\" AS \"confirmed_by__last_sign_in_with_authy\", \"confirmed_by\".\"authy_status\" AS \"confirmed_by__authy_status\", \"confirmed_by\".\"email_verified\" AS \"confirmed_by__email_verified\", \"confirmed_by\".\"initial_password_updated\" AS \"confirmed_by__initial_password_updated\", \"confirmed_by\".\"force_password_update\" AS \"confirmed_by__force_password_update\", \"confirmed_by\".\"grace_period\" AS \"confirmed_by__grace_period\", \"confirmed_by\".\"awaiting_second_factor\" AS \"confirmed_by__awaiting_second_factor\", \"confirmed_by\".\"role\" AS \"confirmed_by__role\", \"cancelled_by\".\"id\" AS \"cancelled_by__id\", \"cancelled_by\".\"created_at\" AS \"cancelled_by__created_at\", \"cancelled_by\".\"updated_at\" AS \"cancelled_by__updated_at\", \"cancelled_by\".\"name\" AS \"cancelled_by__name\", \"cancelled_by\".\"email\" AS \"cancelled_by__email\", \"cancelled_by\".\"phone_number\" AS \"cancelled_by__phone_number\", \"cancelled_by\".\"encrypted_password\" AS \"cancelled_by__encrypted_password\", \"cancelled_by\".\"reset_password_token\" AS \"cancelled_by__reset_password_token\", \"cancelled_by\".\"reset_password_sent_at\" AS \"cancelled_by__reset_password_sent_at\", \"cancelled_by\".\"remember_created_at\" AS \"cancelled_by__remember_created_at\", \"cancelled_by\".\"sign_in_count\" AS \"cancelled_by__sign_in_count\", \"cancelled_by\".\"current_sign_in_at\" AS \"cancelled_by__current_sign_in_at\", \"cancelled_by\".\"last_sign_in_at\" AS \"cancelled_by__last_sign_in_at\", \"cancelled_by\".\"current_sign_in_ip\" AS \"cancelled_by__current_sign_in_ip\", \"cancelled_by\".\"last_sign_in_ip\" AS \"cancelled_by__last_sign_in_ip\", \"cancelled_by\".\"institution_id\" AS \"cancelled_by__institution_id\", \"cancelled_by\".\"encrypted_api_secret_key\" AS \"cancelled_by__encrypted_api_secret_key\", \"cancelled_by\".\"password_changed_at\" AS \"cancelled_by__password_changed_at\", \"cancelled_by\".\"encrypted_otp_secret\" AS \"cancelled_by__encrypted_otp_secret\", \"cancelled_by\".\"encrypted_otp_secret_iv\" AS \"cancelled_by__encrypted_otp_secret_iv\", \"cancelled_by\".\"encrypted_otp_secret_salt\" AS \"cancelled_by__encrypted_otp_secret_salt\", \"cancelled_by\".\"encrypted_otp_sent_at\" AS \"cancelled_by__encrypted_otp_sent_at\", \"cancelled_by\".\"consumed_timestep\" AS \"cancelled_by__consumed_timestep\", \"cancelled_by\".\"otp_required_for_login\" AS \"cancelled_by__otp_required_for_login\", \"cancelled_by\".\"deactivated_at\" AS \"cancelled_by__deactivated_at\", \"cancelled_by\".\"enabled_two_factor\" AS \"cancelled_by__enabled_two_factor\", \"cancelled_by\".\"confirmed_two_factor\" AS \"cancelled_by__confirmed_two_factor\", \"cancelled_by\".\"otp_backup_codes\" AS \"cancelled_by__otp_backup_codes\", \"cancelled_by\".\"authy_id\" AS \"cancelled_by__authy_id\", \"cancelled_by\".\"last_sign_in_with_authy\" AS \"cancelled_by__last_sign_in_with_authy\", \"cancelled_by\".\"authy_status\" AS \"cancelled_by__authy_status\", \"cancelled_by\".\"email_verified\" AS \"cancelled_by__email_verified\", \"cancelled_by\".\"initial_password_updated\" AS \"cancelled_by__initial_password_updated\", \"cancelled_by\".\"force_password_update\" AS \"cancelled_by__force_password_update\", \"cancelled_by\".\"grace_period\" AS \"cancelled_by__grace_period\", \"cancelled_by\".\"awaiting_second_factor\" AS \"cancelled_by__awaiting_second_factor\", \"cancelled_by\".\"role\" AS \"cancelled_by__role\", \"work_item\".\"id\" AS \"work_item__id\", \"work_item\".\"created_at\" AS \"work_item__created_at\", \"work_item\".\"updated_at\" AS \"work_item__updated_at\", \"work_item\".\"name\" AS \"work_item__name\", \"work_item\".\"etag\" AS \"work_item__etag\", \"work_item\".\"institution_id\" AS \"work_item__institution_id\", \"work_item\".\"intellectual_object_id\" AS \"work_item__intellectual_object_id\", \"work_item\".\"generic_file_id\" AS \"work_item__generic_file_id\", \"work_item\".\"bucket\" AS \"work_item__bucket\", \"work_item\".\"user\" AS \"work_item__user\", \"work_item\".\"note\" AS \"work_item__note\", \"work_item\".\"action\" AS \"work_item__action\", \"work_item\".\"stage\" AS \"work_item__stage\", \"work_item\".\"status\" AS \"work_item__status\", \"work_item\".\"outcome\" AS \"work_item__outcome\", \"work_item\".\"bag_date\" AS \"work_item__bag_date\", \"work_item\".\"date_processed\" AS \"work_item__date_processed\", \"work_item\".\"retry\" AS \"work_item__retry\", \"work_item\".\"node\" AS \"work_item__node\", \"work_item\".\"pid\" AS \"work_item__pid\", \"work_item\".\"needs_admin_review\" AS \"work_item__needs_admin_review\", \"work_item\".\"queued_at\" AS \"work_item__queued_at\", \"work_item\".\"size\" AS \"work_item__size\", \"work_item\".\"stage_started_at\" AS \"work_item__stage_started_at\", \"work_item\".\"aptrust_approver\" AS \"work_item__aptrust_approver\", \"work_item\".\"inst_approver\" AS \"work_item__inst_approver\" FROM \"deletion_requests\" AS \"deletion_request\" LEFT JOIN \"users\" AS \"requested_by\" ON \"requested_by\".\"id\" = \"deletion_request\".\"requested_by_id\" LEFT JOIN \"users\" AS \"confirmed_by\" ON \"confirmed_by\".\"id\" = \"deletion_request\".\"confirmed_by_id\" LEFT JOIN \"users\" AS \"cancelled_by\" ON \"cancelled_by\".\"id\" = \"deletion_request\".\"cancelled_by_id\" LEFT JOIN \"work_items\" AS \"work_item\" ON \"work_item\".\"id\" = \"deletion_request\".\"work_item_id\" WHERE ((\"deletion_request\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".*, \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" JOIN \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" ON (\"deletion_requests_generic_files\".\"deletion_request_id\") IN (1) WHERE (\"generic_file\".\"id\" = \"deletion_requests_generic_files\".\"generic_file_id\")"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".*, \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" FROM \"intellectual_objects\" AS \"intellectual_object\" JOIN \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" ON (\"deletion_requests_intellectual_objects\".\"deletion_request_id\") IN (1) WHERE (\"intellectual_object\".\"id\" = \"deletion_requests_intellectual_objects\".\"intellectual_object_id\")"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'admin@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"deletion_request\".\"id\", \"deletion_request\".\"institution_id\", \"deletion_request\".\"requested_by_id\", \"deletion_request\".\"requested_at\", \"deletion_request\".\"encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\", \"deletion_request\".\"confirmed_at\", \"deletion_request\".\"cancelled_by_id\", \"deletion_request\".\"cancelled_at\", \"deletion_request\".\"work_item_id\", \"requested_by\".\"id\" AS \"requested_by__id\", \"requested_by\".\"created_at\" AS \"requested_by__created_at\", \"requested_by\".\"updated_at\" AS \"requested_by__updated_at\", \"requested_by\".\"name\" AS \"requested_by__name\", \"requested_by\".\"email\" AS \"requested_by__email\", \"requested_by\".\"phone_number\" AS \"requested_by__phone_number\", \"requested_by\".\"encrypted_password\" AS \"requested_by__encrypted_password\", \"requested_by\".\"reset_password_token\" AS \"requested_by__reset_password_token\", \"requested_by\".\"reset_password_sent_at\" AS \"requested_by__reset_password_sent_at\", \"requested_by\".\"remember_created_at\" AS \"requested_by__remember_created_at\", \"requested_by\".\"sign_in_count\" AS \"requested_by__sign_in_count\", \"requested_by\".\"current_sign_in_at\" AS \"requested_by__current_sign_in_at\", \"requested_by\".\"last_sign_in_at\" AS \"requested_by__last_sign_in_at\", \"requested_by\".\"current_sign_in_ip\" AS \"requested_by__current_sign_in_ip\", \"requested_by\".\"last_sign_in_ip\" AS \"requested_by__last_sign_in_ip\", \"requested_by\".\"institution_id\" AS \"requested_by__institution_id\", \"requested_by\".\"encrypted_api_secret_key\" AS \"requested_by__encrypted_api_secret_key\", \"requested_by\".\"password_changed_at\" AS \"requested_by__password_changed_at\", \"requested_by\".\"encrypted_otp_secret\" AS \"requested_by__encrypted_otp_secret\", \"requested_by\".\"encrypted_otp_secret_iv\" AS \"requested_by__encrypted_otp_secret_iv\", \"requested_by\".\"encrypted_otp_secret_salt\" AS \"requested_by__encrypted_otp_secret_salt\", \"requested_by\".\"encrypted_otp_sent_at\" AS \"requested_by__encrypted_otp_sent_at\", \"requested_by\".\"consumed_timestep\" AS \"requested_by__consumed_timestep\", \"requested_by\".\"otp_required_for_login\" AS \"requested_by__otp_required_for_login\", \"requested_by\".\"deactivated_at\" AS \"requested_by__deactivated_at\", \"requested_by\".\"enabled_two_factor\" AS \"requested_by__enabled_two_factor\", \"requested_by\".\"confirmed_two_factor\" AS \"requested_by__confirmed_two_factor\", \"requested_by\".\"otp_backup_codes\" AS \"requested_by__otp_backup_codes\", \"requested_by\".\"authy_id\" AS \"requested_by__authy_id\", \"requested_by\".\"last_sign_in_with_authy\" AS \"requested_by__last_sign_in_with_authy\", \"requested_by\".\"authy_status\" AS \"requested_by__authy_status\", \"requested_by\".\"email_verified\" AS \"requested_by__email_verified\", \"requested_by\".\"initial_password_updated\" AS \"requested_by__initial_password_updated\", \"requested_by\".\"force_password_update\" AS \"requested_by__force_password_update\", \"requested_by\".\"grace_period\" AS \"requested_by__grace_period\", \"requested_by\".\"awaiting_second_factor\" AS \"requested_by__awaiting_second_factor\", \"requested_by\".\"role\" AS \"requested_by__role\", \"confirmed_by\".\"id\" AS \"confirmed_by__id\", \"confirmed_by\".\"created_at\" AS \"confirmed_by__created_at\", \"confirmed_by\".\"updated_at\" AS \"confirmed_by__updated_at\", \"confirmed_by\".\"name\" AS \"confirmed_by__name\", \"confirmed_by\".\"email\" AS \"confirmed_by__email\", \"confirmed_by\".\"phone_number\" AS \"confirmed_by__phone_number\", \"confirmed_by\".\"encrypted_password\" AS \"confirmed_by__encrypted_password\", \"confirmed_by\".\"reset_password_token\" AS \"confirmed_by__reset_password_token\", \"confirmed_by\".\"reset_password_sent_at\" AS \"confirmed_by__reset_password_sent_at\", \"confirmed_by\".\"remember_created_at\" AS \"confirmed_by__remember_created_at\", \"confirmed_by\".\"sign_in_count\" AS \"confirmed_by__sign_in_count\", \"confirmed_by\".\"current_sign_in_at\" AS \"confirmed_by__current_sign_in_at\", \"confirmed_by\".\"last_sign_in_at\" AS \"confirmed_by__last_sign_in_at\", \"confirmed_by\".\"current_sign_in_ip\" AS \"confirmed_by__current_sign_in_ip\", \"confirmed_by\".\"last_sign_in_ip\" AS \"confirmed_by__last_sign_in_ip\", \"confirmed_by\".\"institution_id\" AS \"confirmed_by__institution_id\", \"confirmed_by\".\"encrypted_api_secret_key\" AS \"confirmed_by__encrypted_api_secret_key\", \"confirmed_by\".\"password_changed_at\" AS \"confirmed_by__password_changed_at\", \"confirmed_by\".\"encrypted_otp_secret\" AS \"confirmed_by__encrypted_otp_secret\", \"confirmed_by\".\"encrypted_otp_secret_iv\" AS \"confirmed_by__encrypted_otp_secret_iv\", \"confirmed_by\".\"encrypted_otp_secret_salt\" AS \"confirmed_by__encrypted_otp_secret_salt\", \"confirmed_by\".\"encrypted_otp_sent_at\" AS \"confirmed_by__encrypted_otp_sent_at\", \"confirmed_by\".\"consumed_timestep\" AS \"confirmed_by__consumed_timestep\", \"confirmed_by\".\"otp_required_for_login\" AS \"confirmed_by__otp_required_for_login\", \"confirmed_by\".\"deactivated_at\" AS \"confirmed_by__deactivated_at\", \"confirmed_by\".\"enabled_two_factor\" AS \"confirmed_by__enabled_two_factor\", \"confirmed_by\".\"confirmed_two_factor\" AS \"confirmed_by__confirmed_two_factor\", \"confirmed_by\".\"otp_backup_codes\" AS \"confirmed_by__otp_backup_codes\", \"confirmed_by\".\"authy_id\" AS \"confirmed_by__authy_id\", \"confirmed_by\".\"last_sign_in_with_authy\" AS \"confirmed_by__last_sign_in_with_authy\", \"confirmed_by\".\"authy_status\" AS \"confirmed_by__authy_status\", \"confirmed_by\".\"email_verified\" AS \"confirmed_by__email_verified\", \"confirmed_by\".\"initial_password_updated\" AS \"confirmed_by__initial_password_updated\", \"confirmed_by\".\"force_password_update\" AS \"confirmed_by__force_password_update\", \"confirmed_by\".\"grace_period\" AS \"confirmed_by__grace_period\", \"confirmed_by\".\"awaiting_second_factor\" AS \"confirmed_by__awaiting_second_factor\", \"confirmed_by\".\"role\" AS \"confirmed_by__role\", \"cancelled_by\".\"id\" AS \"cancelled_by__id\", \"cancelled_by\".\"created_at\" AS \"cancelled_by__created_at\", \"cancelled_by\".\"updated_at\" AS \"cancelled_by__updated_at\", \"cancelled_by\".\"name\" AS \"cancelled_by__name\", \"cancelled_by\".\"email\" AS \"cancelled_by__email\", \"cancelled_by\".\"phone_number\" AS \"cancelled_by__phone_number\", \"cancelled_by\".\"encrypted_password\" AS \"cancelled_by__encrypted_password\", \"cancelled_by\".\"reset_password_token\" AS \"cancelled_by__reset_password_token\", \"cancelled_by\".\"reset_password_sent_at\" AS \"cancelled_by__reset_password_sent_at\", \"cancelled_by\".\"remember_created_at\" AS \"cancelled_by__remember_created_at\", \"cancelled_by\".\"sign_in_count\" AS \"cancelled_by__sign_in_count\", \"cancelled_by\".\"current_sign_in_at\" AS \"cancelled_by__current_sign_in_at\", \"cancelled_by\".\"last_sign_in_at\" AS \"cancelled_by__last_sign_in_at\", \"cancelled_by\".\"current_sign_in_ip\" AS \"cancelled_by__current_sign_in_ip\", \"cancelled_by\".\"last_sign_in_ip\" AS \"cancelled_by__last_sign_in_ip\", \"cancelled_by\".\"institution_id\" AS \"cancelled_by__institution_id\", \"cancelled_by\".\"encrypted_api_secret_key\" AS \"cancelled_by__encrypted_api_secret_key\", \"cancelled_by\".\"password_changed_at\" AS \"cancelled_by__password_changed_at\", \"cancelled_by\".\"encrypted_otp_secret\" AS \"cancelled_by__encrypted_otp_secret\", \"cancelled_by\".\"encrypted_otp_secret_iv\" AS \"cancelled_by__encrypted_otp_secret_iv\", \"cancelled_by\".\"encrypted_otp_secret_salt\" AS \"cancelled_by__encrypted_otp_secret_salt\", \"cancelled_by\".\"encrypted_otp_sent_at\" AS \"cancelled_by__encrypted_otp_sent_at\", \"cancelled_by\".\"consumed_timestep\" AS \"cancelled_by__consumed_timestep\", \"cancelled_by\".\"otp_required_for_login\" AS \"cancelled_by__otp_required_for_login\", \"cancelled_by\".\"deactivated_at\" AS \"cancelled_by__deactivated_at\", \"cancelled_by\".\"enabled_two_factor\" AS \"cancelled_by__enabled_two_factor\", \"cancelled_by\".\"confirmed_two_factor\" AS \"cancelled_by__confirmed_two_factor\", \"cancelled_by\".\"otp_backup_codes\" AS \"cancelled_by__otp_backup_codes\", \"cancelled_by\".\"authy_id\" AS \"cancelled_by__authy_id\", \"cancelled_by\".\"last_sign_in_with_authy\" AS \"cancelled_by__last_sign_in_with_authy\", \"cancelled_by\".\"authy_status\" AS \"cancelled_by__authy_status\", \"cancelled_by\".\"email_verified\" AS \"cancelled_by__email_verified\", \"cancelled_by\".\"initial_password_updated\" AS \"cancelled_by__initial_password_updated\", \"cancelled_by\".\"force_password_update\" AS \"cancelled_by__force_password_update\", \"cancelled_by\".\"grace_period\" AS \"cancelled_by__grace_period\", \"cancelled_by\".\"awaiting_second_factor\" AS \"cancelled_by__awaiting_second_factor\", \"cancelled_by\".\"role\" AS \"cancelled_by__role\", \"work_item\".\"id\" AS \"work_item__id\", \"work_item\".\"created_at\" AS \"work_item__created_at\", \"work_item\".\"updated_at\" AS \"work_item__updated_at\", \"work_item\".\"name\" AS \"work_item__name\", \"work_item\".\"etag\" AS \"work_item__etag\", \"work_item\".\"institution_id\" AS \"work_item__institution_id\", \"work_item\".\"intellectual_object_id\" AS \"work_item__intellectual_object_id\", \"work_item\".\"generic_file_id\" AS \"work_item__generic_file_id\", \"work_item\".\"bucket\" AS \"work_item__bucket\", \"work_item\".\"user\" AS \"work_item__user\", \"work_item\".\"note\" AS \"work_item__note\", \"work_item\".\"action\" AS \"work_item__action\", \"work_item\".\"stage\" AS \"work_item__stage\", \"work_item\".\"status\" AS \"work_item__status\", \"work_item\".\"outcome\" AS \"work_item__outcome\", \"work_item\".\"bag_date\" AS \"work_item__bag_date\", \"work_item\".\"date_processed\" AS \"work_item__date_processed\", \"work_item\".\"retry\" AS \"work_item__retry\", \"work_item\".\"node\" AS \"work_item__node\", \"work_item\".\"pid\" AS \"work_item__pid\", \"work_item\".\"needs_admin_review\" AS \"work_item__needs_admin_review\", \"work_item\".\"queued_at\" AS \"work_item__queued_at\", \"work_item\".\"size\" AS \"work_item__size\", \"work_item\".\"stage_started_at\" AS \"work_item__stage_started_at\", \"work_item\".\"aptrust_approver\" AS \"work_item__aptrust_approver\", \"work_item\".\"inst_approver\" AS \"work_item__inst_approver\" FROM \"deletion_requests\" AS \"deletion_request\" LEFT JOIN \"users\" AS \"requested_by\" ON \"requested_by\".\"id\" = \"deletion_request\".\"requested_by_id\" LEFT JOIN \"users\" AS \"confirmed_by\" ON \"confirmed_by\".\"id\" = \"deletion_request\".\"confirmed_by_id\" LEFT JOIN \"users\" AS \"cancelled_by\" ON \"cancelled_by\".\"id\" = \"deletion_request\".\"cancelled_by_id\" LEFT JOIN \"work_items\" AS \"work_item\" ON \"work_item\".\"id\" = \"deletion_request\".\"work_item_id\" WHERE ((\"deletion_request\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".*, \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" JOIN \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" ON (\"deletion_requests_generic_files\".\"deletion_request_id\") IN (1) WHERE (\"generic_file\".\"id\" = \"deletion_requests_generic_files\".\"generic_file_id\")"}
{"level":"debug","time":"2022-06-22T13:30:48-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".*, \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" FROM \"intellectual_objects\" AS \"intellectual_object\" JOIN \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" ON (\"deletion_requests_intellectual_objects\".\"deletion_request_id\") IN (1) WHERE (\"intellectual_object\".\"id\" = \"deletion_requests_intellectual_objects\".\"intellectual_object_id\")"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" WHERE ((institution_id = 2) AND (role = 'institutional_admin'))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: UPDATE \"deletion_requests\" AS \"deletion_request\" SET \"institution_id\" = 2, \"requested_by_id\" = 3, \"requested_at\" = '2021-05-13 11:10:32+00:00:00', \"encrypted_confirmation_token\" = '$2a$10$TK8s1XnmWulSUdze8GN5uOgGmDDsnndQKF5/Rz1j0xaHT7AwXRVma', \"confirmed_by_id\" = NULL, \"confirmed_at\" = NULL, \"cancelled_by_id\" = 2, \"cancelled_at\" = '2022-06-22 17:30:49.030218+00:00:00', \"work_item_id\" = NULL WHERE \"deletion_request\".\"id\" = 1"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: insert into deletion_requests_generic_files (deletion_request_id, generic_file_id) values (1, 7) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: insert into deletion_requests_generic_files (deletion_request_id, generic_file_id) values (1, 8) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: insert into deletion_requests_generic_files (deletion_request_id, generic_file_id) values (1, 9) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: INSERT INTO \"alerts\" (\"id\", \"institution_id\", \"type\", \"subject\", \"content\", \"deletion_request_id\", \"created_at\") VALUES (DEFAULT, 2, 'Deletion Cancelled', 'Deletion Cancelled', 'Hello from APTrust,\n\nThe deletion requested by Inst One User has been cancelled by Inst One Admin.\n\nFor your reference, the link below has information about the cancelled request.\n\nhttps://example.com/deletions/show/1\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n', 1, '2022-06-22 17:30:49.032974+00:00:00') RETURNING \"id\""}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: insert into alerts_users (alert_id, user_id, sent_at, read_at) values (10, 2, NULL, NULL) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"SES is disabled per config settings. Email to admin@inst1.edu. Subject: Deletion Cancelled\n\n. Hello from APTrust,\n\nThe deletion requested by Inst One User has been cancelled by Inst One Admin.\n\nFor your reference, the link below has information about the cancelled request.\n\nhttps://example.com/deletions/show/1\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: update alerts_users set sent_at = '2022-06-22 17:30:49.034846+00:00:00' where alert_id = 10 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: UPDATE \"deletion_requests\" AS \"deletion_request\" SET \"institution_id\" = 2, \"requested_by_id\" = 3, \"requested_at\" = '2021-05-13 11:10:32+00:00:00', \"encrypted_confirmation_token\" = '$2a$10$TK8s1XnmWulSUdze8GN5uOgGmDDsnndQKF5/Rz1j0xaHT7AwXRVma', \"confirmed_by_id\" = 2, \"confirmed_at\" = '2022-06-22 17:30:49.035471+00:00:00', \"cancelled_by_id\" = NULL, \"cancelled_at\" = NULL, \"work_item_id\" = NULL WHERE \"deletion_request\".\"id\" = 1"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: insert into deletion_requests_generic_files (deletion_request_id, generic_file_id) values (1, 7) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: insert into deletion_requests_generic_files (deletion_request_id, generic_file_id) values (1, 8) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: insert into deletion_requests_generic_files (deletion_request_id, generic_file_id) values (1, 9) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"intellectual_objects\" AS \"intellectual_object\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"intellectual_object\".\"institution_id\" WHERE ((\"intellectual_object\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((intellectual_object_id = 3) AND (status = 'Success') AND (stage IN ('Record', 'Cleanup'))) ORDER BY \"date_processed\" desc LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: INSERT INTO \"work_items\" (\"id\", \"created_at\", \"updated_at\", \"name\", \"etag\", \"institution_id\", \"intellectual_object_id\", \"generic_file_id\", \"bucket\", \"user\", \"note\", \"action\", \"stage\", \"status\", \"outcome\", \"bag_date\", \"date_processed\", \"retry\", \"node\", \"pid\", \"needs_admin_review\", \"queued_at\", \"size\", \"stage_started_at\", \"aptrust_approver\", \"inst_approver\") VALUES (DEFAULT, '2022-06-22 17:30:49.039701+00:00:00', '2022-06-22 17:30:49.039702+00:00:00', 'glass_shards.tar', 'e24527590f31492b8f362c3d3c02ec80', 2, 3, 7, 'aptrust.receiving.institution1.edu', 'user@inst1.edu', 'Not started', 'Delete', 'Requested', 'Pending', 'Not started', '2016-08-24 10:04:06+00:00:00', '2022-06-22 17:30:49.039701+00:00:00', TRUE, DEFAULT, DEFAULT, FALSE, DEFAULT, 11169445000, DEFAULT, DEFAULT, 'admin@inst1.edu') RETURNING \"id\", \"node\", \"pid\", \"queued_at\", \"stage_started_at\", \"aptrust_approver\""}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: UPDATE \"deletion_requests\" AS \"deletion_request\" SET \"institution_id\" = 2, \"requested_by_id\" = 3, \"requested_at\" = '2021-05-13 11:10:32+00:00:00', \"encrypted_confirmation_token\" = '$2a$10$TK8s1XnmWulSUdze8GN5uOgGmDDsnndQKF5/Rz1j0xaHT7AwXRVma', \"confirmed_by_id\" = 2, \"confirmed_at\" = '2022-06-22 17:30:49.035471+00:00:00', \"cancelled_by_id\" = NULL, \"cancelled_at\" = NULL, \"work_item_id\" = NULL WHERE \"deletion_request\".\"id\" = 1"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: insert into deletion_requests_generic_files (deletion_request_id, generic_file_id) values (1, 7) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: insert into deletion_requests_generic_files (deletion_request_id, generic_file_id) values (1, 8) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: insert into deletion_requests_generic_files (deletion_request_id, generic_file_id) values (1, 9) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: UPDATE \"work_items\" AS \"work_item\" SET \"created_at\" = '2022-06-22 17:30:49.039701+00:00:00', \"updated_at\" = '2022-06-22 17:30:49.04449+00:00:00', \"name\" = 'glass_shards.tar', \"etag\" = 'e24527590f31492b8f362c3d3c02ec80', \"institution_id\" = 2, \"intellectual_object_id\" = 3, \"generic_file_id\" = 7, \"bucket\" = 'aptrust.receiving.institution1.edu', \"user\" = 'user@inst1.edu', \"note\" = 'Not started', \"action\" = 'Delete', \"stage\" = 'Requested', \"status\" = 'Pending', \"outcome\" = 'Not started', \"bag_date\" = '2016-08-24 10:04:06+00:00:00', \"date_processed\" = '2022-06-22 17:30:49.039701+00:00:00', \"retry\" = TRUE, \"node\" = NULL, \"pid\" = NULL, \"needs_admin_review\" = FALSE, \"queued_at\" = NULL, \"size\" = 11169445000, \"stage_started_at\" = NULL, \"aptrust_approver\" = NULL, \"inst_approver\" = 'admin@inst1.edu' WHERE \"work_item\".\"id\" = 33"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: update deletion_requests set work_item_id = 33 where id = 1"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"Queueing WorkItem 33 to topic delete_item"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"Enqueue: http://localhost:4151/pub?topic=delete_item"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"NSQ response from http://localhost:4151/pub?topic=delete_item: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: INSERT INTO \"alerts\" (\"id\", \"institution_id\", \"type\", \"subject\", \"content\", \"deletion_request_id\", \"created_at\") VALUES (DEFAULT, 2, 'Deletion Confirmed', 'Deletion Confirmed', 'Hello from APTrust,\n\nThe deletion requested by Inst One User has been approved by Inst One Admin. We''ll send a confirmation email when the deletion is complete.\n\nFor your reference, the link below has information about the request.\n\nhttps://example.com/deletions/show/1\n\nThe Work Item showing the status of this deletion is at https://example.com/work_items/show/33\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n', 1, '2022-06-22 17:30:49.050369+00:00:00') RETURNING \"id\""}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: insert into alerts_users (alert_id, user_id, sent_at, read_at) values (11, 2, NULL, NULL) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"SES is disabled per config settings. Email to admin@inst1.edu. Subject: Deletion Confirmed\n\n. Hello from APTrust,\n\nThe deletion requested by Inst One User has been approved by Inst One Admin. We'll send a confirmation email when the deletion is complete.\n\nFor your reference, the link below has information about the request.\n\nhttps://example.com/deletions/show/1\n\nThe Work Item showing the status of this deletion is at https://example.com/work_items/show/33\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: update alerts_users set sent_at = '2022-06-22 17:30:49.053774+00:00:00' where alert_id = 11 and user_id = 2"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 1) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (1)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (1)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (1))"}
{"level":"info","status":200,"method":"GET","path":"/files/show/1","ip":"","latency":22.726968,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 1) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (1)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (1)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (1))"}
{"level":"info","status":200,"method":"GET","path":"/files/show/1","ip":"","latency":23.204552,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 1) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (1)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (1)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (1))"}
{"level":"info","status":200,"method":"GET","path":"/files/show/1","ip":"","latency":22.884572,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 17)"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 17) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (17)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (17)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (17))"}
{"level":"info","status":200,"method":"GET","path":"/files/show/17","ip":"","latency":19.861166,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 17)"}
{"level":"error","time":"2022-06-22T13:30:49-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileShow, ResourceType: GenericFile, ResourceID: 17, InstID: 3, Gin Path: /files/show/:id, Request Path: /files/show/17, Permission: FileRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"IsAPIRoute - NO - /files/show/17"}
{"level":"warn","status":403,"method":"GET","path":"/files/show/17","ip":"","latency":20.86157,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 17)"}
{"level":"error","time":"2022-06-22T13:30:49-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileShow, ResourceType: GenericFile, ResourceID: 17, InstID: 3, Gin Path: /files/show/:id, Request Path: /files/show/17, Permission: FileRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"IsAPIRoute - NO - /files/show/17"}
{"level":"warn","status":403,"method":"GET","path":"/files/show/17","ip":"","latency":17.42235,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" ORDER BY \"id\" asc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"TypeName (1): GenericFile"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"WebUI: Using view to count query ''"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"TypeName (1): GenericFile"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"generic_file_counts\" AS \"generic_file_count\" WHERE ((institution_id is null) AND (state is null))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/files?sort=id","ip":"","latency":25.151418,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE ((institution_id = 2)) ORDER BY \"id\" asc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"TypeName (1): GenericFile"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"WebUI: Using view to count query '(institution_id = ?)'"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"TypeName (1): GenericFile"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"generic_file_counts\" AS \"generic_file_count\" WHERE ((institution_id = 2) AND (state is null))"}
{"level":"info","status":200,"method":"GET","path":"/files?sort=id","ip":"","latency":20.442273,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE ((institution_id = 2)) ORDER BY \"id\" asc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"TypeName (1): GenericFile"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"WebUI: Using view to count query '(institution_id = ?)'"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"TypeName (1): GenericFile"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"generic_file_counts\" AS \"generic_file_count\" WHERE ((institution_id = 2) AND (state is null))"}
{"level":"info","status":200,"method":"GET","path":"/files?sort=id","ip":"","latency":21.751843,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE ((size >= '100000000') AND (size <= '35500000000')) ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"TypeName (1): GenericFile"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"Filter too specific for GenericFile: size -> institution_id, state"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"WebUI: Using standard count query for '(size >= ?) AND (size <= ?)'"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT count(*) FROM \"generic_files\" AS \"generic_file\" WHERE ((size >= '100000000') AND (size <= '35500000000'))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/files?size__gteq=100000000&size__lteq=35500000000","ip":"","latency":21.150337,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE ((size >= '100000000') AND (size <= '35500000000') AND (institution_id = 2)) ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"TypeName (1): GenericFile"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"Filter too specific for GenericFile: size -> institution_id, state"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"WebUI: Using standard count query for '(size >= ?) AND (size <= ?) AND (institution_id = ?)'"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT count(*) FROM \"generic_files\" AS \"generic_file\" WHERE ((size >= '100000000') AND (size <= '35500000000') AND (institution_id = 2))"}
{"level":"info","status":200,"method":"GET","path":"/files?size__gteq=100000000&size__lteq=35500000000","ip":"","latency":21.781979,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE ((size >= '100000000') AND (size <= '35500000000') AND (institution_id = 2)) ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"TypeName (1): GenericFile"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"Filter too specific for GenericFile: size -> institution_id, state"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"WebUI: Using standard count query for '(size >= ?) AND (size <= ?) AND (institution_id = ?)'"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT count(*) FROM \"generic_files\" AS \"generic_file\" WHERE ((size >= '100000000') AND (size <= '35500000000') AND (institution_id = 2))"}
{"level":"info","status":200,"method":"GET","path":"/files?size__gteq=100000000&size__lteq=35500000000","ip":"","latency":21.877116,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE ((institution_id = '3')) ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"TypeName (1): GenericFile"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"WebUI: Using view to count query '(institution_id = ?)'"}
{"level":"info","time":"2022-06-22T13:30:49-04:00","message":"TypeName (1): GenericFile"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"generic_file_counts\" AS \"generic_file_count\" WHERE ((institution_id = '3') AND (state is null))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/files?institution_id=3","ip":"","latency":19.270587,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:30:49-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileIndex, ResourceType: GenericFile, ResourceID: 0, InstID: 3, Gin Path: /files, Request Path: /files, Permission: FileRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"IsAPIRoute - NO - /files"}
{"level":"warn","status":403,"method":"GET","path":"/files?institution_id=3","ip":"","latency":22.962448,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:30:49-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileIndex, ResourceType: GenericFile, ResourceID: 0, InstID: 3, Gin Path: /files, Request Path: /files, Permission: FileRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"IsAPIRoute - NO - /files"}
{"level":"warn","status":403,"method":"GET","path":"/files?institution_id=3","ip":"","latency":17.018066,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 1) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (1)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (1)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (1))"}
{"level":"info","status":200,"method":"GET","path":"/files/request_delete/1","ip":"","latency":21.714582,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 1)"}
{"level":"error","time":"2022-06-22T13:30:49-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileRequestDelete, ResourceType: GenericFile, ResourceID: 1, InstID: 2, Gin Path: /files/request_delete/:id, Request Path: /files/request_delete/1, Permission: FileRequestDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"IsAPIRoute - NO - /files/request_delete/1"}
{"level":"warn","status":403,"method":"GET","path":"/files/request_delete/1","ip":"","latency":19.89323,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 1)"}
{"level":"error","time":"2022-06-22T13:30:49-04:00","message":"Not Authorized: User system@aptrust.org, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileRequestDelete, ResourceType: GenericFile, ResourceID: 1, InstID: 2, Gin Path: /files/request_delete/:id, Request Path: /files/request_delete/1, Permission: FileRequestDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"IsAPIRoute - NO - /files/request_delete/1"}
{"level":"warn","status":403,"method":"GET","path":"/files/request_delete/1","ip":"","latency":17.182957,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 18)"}
{"level":"error","time":"2022-06-22T13:30:49-04:00","message":"Not Authorized: User system@aptrust.org, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileRequestDelete, ResourceType: GenericFile, ResourceID: 18, InstID: 3, Gin Path: /files/request_delete/:id, Request Path: /files/request_delete/18, Permission: FileRequestDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"IsAPIRoute - NO - /files/request_delete/18"}
{"level":"warn","status":403,"method":"GET","path":"/files/request_delete/18","ip":"","latency":20.598721,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 18)"}
{"level":"error","time":"2022-06-22T13:30:49-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileRequestDelete, ResourceType: GenericFile, ResourceID: 18, InstID: 3, Gin Path: /files/request_delete/:id, Request Path: /files/request_delete/18, Permission: FileRequestDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"IsAPIRoute - NO - /files/request_delete/18"}
{"level":"warn","status":403,"method":"GET","path":"/files/request_delete/18","ip":"","latency":18.965196,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 18)"}
{"level":"error","time":"2022-06-22T13:30:49-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileRequestDelete, ResourceType: GenericFile, ResourceID: 18, InstID: 3, Gin Path: /files/request_delete/:id, Request Path: /files/request_delete/18, Permission: FileRequestDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"IsAPIRoute - NO - /files/request_delete/18"}
{"level":"warn","status":403,"method":"GET","path":"/files/request_delete/18","ip":"","latency":17.990985,"user-agent":"","time":"2022-06-22T13:30:49-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"ar_internal_metadata\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"confirmation_tokens\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"emails_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"emails_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"emails_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"emails_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"old_passwords\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"schema_migrations\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"snapshots\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"usage_samples\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"alerts_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"alerts_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"alerts_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"alerts\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"deletion_requests\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"storage_records\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"checksums\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"roles_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"roles\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: drop table if exists \"storage_options\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: --\n-- schema.sql\n--\n-- This file represents the full registry schema.\n--\n-- The migrations.sql file updates the old Pharos schema, as it existed\n-- in the feature/storage_record branch, so that it matches this schema.\n--\n-- https://github.com/APTrust/pharos/blob/feature/storage-record/db/schema.rb\n--\n\n\n-- public.ar_internal_metadata definition\n--\n-- This is a legacy table used by ActiveRecord.\n-- We can drop this once production is stable.\n--\nCREATE TABLE public.ar_internal_metadata (\n\t\"key\" varchar NOT NULL,\n\tvalue varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT ar_internal_metadata_pkey PRIMARY KEY (key)\n);\n\n\n-- public.bulk_delete_jobs definition\n--\n-- This is the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs (\n\tid bigserial NOT NULL,\n\trequested_by varchar NULL,\n\tinstitutional_approver varchar NULL,\n\taptrust_approver varchar NULL,\n\tinstitutional_approval_at timestamp NULL,\n\taptrust_approval_at timestamp NULL,\n\tnote text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id int4 NOT NULL,\n\tCONSTRAINT bulk_delete_jobs_pkey PRIMARY KEY (id)\n);\n\n\n-- public.bulk_delete_jobs_emails definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_emails (\n\tbulk_delete_job_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_emails_on_bulk_delete_job_id ON public.bulk_delete_jobs_emails USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_emails_on_email_id ON public.bulk_delete_jobs_emails USING btree (email_id);\n\n\n-- public.bulk_delete_jobs_generic_files definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_generic_files (\n\tbulk_delete_job_id int8 NULL,\n\tgeneric_file_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_bulk_delete_job_id ON public.bulk_delete_jobs_generic_files USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_generic_file_id ON public.bulk_delete_jobs_generic_files USING btree (generic_file_id);\n\n\n-- public.bulk_delete_jobs_institutions definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_institutions (\n\tbulk_delete_job_id int8 NULL,\n\tinstitution_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_bulk_delete_job_id ON public.bulk_delete_jobs_institutions USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_institution_id ON public.bulk_delete_jobs_institutions USING btree (institution_id);\n\n\n-- public.bulk_delete_jobs_intellectual_objects definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_intellectual_objects (\n\tbulk_delete_job_id int8 NULL,\n\tintellectual_object_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_bulk_job_id ON public.bulk_delete_jobs_intellectual_objects USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_object_id ON public.bulk_delete_jobs_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.confirmation_tokens definition\n--\n-- This is a legacy table. We can likely delete it\n-- after production is stable.\n--\nCREATE TABLE public.confirmation_tokens (\n\tid bigserial NOT NULL,\n\t\"token\" varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tuser_id int4 NULL,\n\tCONSTRAINT confirmation_tokens_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails definition\n--\n-- This legacy table will be replaced by the new alerts table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails (\n\tid bigserial NOT NULL,\n\temail_type varchar NULL,\n\tevent_identifier varchar NULL,\n\titem_id int4 NULL,\n\temail_text text NULL,\n\tuser_list text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tCONSTRAINT emails_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails_generic_files definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_generic_files (\n\tgeneric_file_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_generic_files_on_email_id ON public.emails_generic_files USING btree (email_id);\nCREATE INDEX index_emails_generic_files_on_generic_file_id ON public.emails_generic_files USING btree (generic_file_id);\n\n\n-- public.emails_intellectual_objects definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_intellectual_objects (\n\tintellectual_object_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_intellectual_objects_on_email_id ON public.emails_intellectual_objects USING btree (email_id);\nCREATE INDEX index_emails_intellectual_objects_on_intellectual_object_id ON public.emails_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.emails_premis_events definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_premis_events (\n\tpremis_event_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_premis_events_on_email_id ON public.emails_premis_events USING btree (email_id);\nCREATE INDEX index_emails_premis_events_on_premis_event_id ON public.emails_premis_events USING btree (premis_event_id);\n\n\n-- public.emails_work_items definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_work_items (\n\twork_item_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_work_items_on_email_id ON public.emails_work_items USING btree (email_id);\nCREATE INDEX index_emails_work_items_on_work_item_id ON public.emails_work_items USING btree (work_item_id);\n\n\n-- public.generic_files definition\nCREATE TABLE public.generic_files (\n\tid serial NOT NULL,\n\tfile_format varchar NULL,\n\t\"size\" int8 NULL,\n\tidentifier varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tlast_fixity_check timestamp NOT NULL DEFAULT '2000-01-01 00:00:00'::timestamp without time zone,\n\tinstitution_id int4 NOT NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tuuid varchar NOT NULL,\n\tCONSTRAINT generic_files_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_generic_files_on_created_at ON public.generic_files USING btree (created_at);\nCREATE UNIQUE INDEX index_generic_files_on_identifier ON public.generic_files USING btree (identifier);\nCREATE INDEX index_generic_files_on_institution_id ON public.generic_files USING btree (institution_id);\nCREATE INDEX index_generic_files_on_institution_id_and_state ON public.generic_files USING btree (institution_id, state);\nCREATE INDEX index_generic_files_on_institution_id_and_updated_at ON public.generic_files USING btree (institution_id, updated_at);\nCREATE INDEX index_generic_files_on_intellectual_object_id ON public.generic_files USING btree (intellectual_object_id);\nCREATE INDEX index_generic_files_on_updated_at ON public.generic_files USING btree (updated_at);\nCREATE UNIQUE INDEX index_generic_files_on_uuid ON public.generic_files USING btree (uuid);\nCREATE INDEX ix_gf_last_fixity_check ON public.generic_files USING btree (last_fixity_check);\n\n\n-- public.institutions definition\nCREATE TABLE public.institutions (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\tidentifier varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\t\"type\" varchar NULL,\n\tmember_institution_id int4 NULL,\n\tdeactivated_at timestamp NULL,\n\totp_enabled bool NULL,\n    enable_spot_restore bool not null default false,\n\treceiving_bucket varchar NOT NULL,\n\trestore_bucket varchar NOT NULL,\n\tCONSTRAINT institutions_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_institutions_on_name ON public.institutions USING btree (name);\n\n\n-- public.intellectual_objects definition\nCREATE TABLE public.intellectual_objects (\n\tid serial NOT NULL,\n\ttitle varchar NULL,\n\tdescription text NULL,\n\tidentifier varchar NULL,\n\talt_identifier varchar NULL,\n\t\"access\" varchar NULL,\n\tbag_name varchar NULL,\n\tinstitution_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tetag varchar NULL,\n\tbag_group_identifier varchar NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tbagit_profile_identifier varchar NULL,\n\tsource_organization varchar NULL,\n\tinternal_sender_identifier varchar NULL,\n\tinternal_sender_description text NULL,\n\tCONSTRAINT intellectual_objects_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_intellectual_objects_on_bag_name ON public.intellectual_objects USING btree (bag_name);\nCREATE INDEX index_intellectual_objects_on_created_at ON public.intellectual_objects USING btree (created_at);\nCREATE UNIQUE INDEX index_intellectual_objects_on_identifier ON public.intellectual_objects USING btree (identifier);\nCREATE INDEX index_intellectual_objects_on_institution_id ON public.intellectual_objects USING btree (institution_id);\nCREATE INDEX index_intellectual_objects_on_updated_at ON public.intellectual_objects USING btree (updated_at);\n\n\n-- public.old_passwords definition\n--\n-- This is a legacy table. We can get rid of this if we\n-- abandon mandatory password changes. Wait until that's\n-- decided.\n--\nCREATE TABLE public.old_passwords (\n\tid bigserial NOT NULL,\n\tencrypted_password varchar NOT NULL,\n\tpassword_salt varchar NULL,\n\tpassword_archivable_type varchar NOT NULL,\n\tpassword_archivable_id int4 NOT NULL,\n\tcreated_at timestamp NULL,\n\tCONSTRAINT old_passwords_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_password_archivable ON public.old_passwords USING btree (password_archivable_type, password_archivable_id);\n\n\n-- public.premis_events definition\nCREATE TABLE public.premis_events (\n\tid serial NOT NULL,\n\tidentifier varchar NULL,\n\tevent_type varchar NULL,\n\tdate_time varchar NULL,\n\toutcome_detail varchar NULL,\n\tdetail varchar NULL,\n\toutcome_information varchar NULL,\n\t\"object\" varchar NULL,\n\tagent varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\toutcome varchar NULL,\n\tinstitution_id int4 NULL,\n\told_uuid varchar NULL,\n\tCONSTRAINT premis_events_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_premis_events_date_time_desc ON public.premis_events USING btree (date_time DESC);\nCREATE INDEX index_premis_events_on_event_type ON public.premis_events USING btree (event_type);\nCREATE INDEX index_premis_events_on_event_type_and_outcome ON public.premis_events USING btree (event_type, outcome);\nCREATE INDEX index_premis_events_on_generic_file_id ON public.premis_events USING btree (generic_file_id);\nCREATE UNIQUE INDEX index_premis_events_on_identifier ON public.premis_events USING btree (identifier);\nCREATE INDEX index_premis_events_on_institution_id ON public.premis_events USING btree (institution_id);\nCREATE INDEX index_premis_events_on_intellectual_object_id ON public.premis_events USING btree (intellectual_object_id);\nCREATE INDEX index_premis_events_on_outcome ON public.premis_events USING btree (outcome);\n\n\n-- public.schema_migrations definition\n--\n-- This is a legacy table used by ActiveRecord\n-- to track which migrations have been applied.\n--\n-- We can delete this when production is stable.\n--\nCREATE TABLE public.schema_migrations (\n\t\"version\" varchar NOT NULL,\n\tCONSTRAINT schema_migrations_pkey PRIMARY KEY (version)\n);\n\n\n-- public.snapshots definition\n--\n-- This table stores point-in-time snapshots\n-- of how much data each depositor has in the repo.\n--\n-- We may eventually delete this, but keep for now.\n--\nCREATE TABLE public.snapshots (\n\tid bigserial NOT NULL,\n\taudit_date timestamp NULL,\n\tinstitution_id int4 NULL,\n\tapt_bytes int8 NULL,\n\t\"cost\" numeric NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tsnapshot_type varchar NULL,\n\tcs_bytes int8 NULL,\n\tgo_bytes int8 NULL,\n\tCONSTRAINT snapshots_pkey PRIMARY KEY (id)\n);\n\n\n-- public.usage_samples definition\n--\n-- No idea what this was supposed to be, but the\n-- table never had any data in the production DB.\n-- Consider deleting this after we're sure it's not used.\n--\nCREATE TABLE public.usage_samples (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id varchar NULL,\n\t\"data\" text NULL,\n\tCONSTRAINT usage_samples_pkey PRIMARY KEY (id)\n);\n\n\n-- public.work_items definition\nCREATE TABLE public.work_items (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\t\"name\" varchar NULL,\n\tetag varchar NULL,\n\tbucket varchar NULL,\n\t\"user\" varchar NULL,\n\tnote text NULL,\n\t\"action\" varchar NULL,\n\tstage varchar NULL,\n\tstatus varchar NULL,\n\toutcome text NULL,\n\tbag_date timestamp NULL,\n\tdate_processed timestamp NULL,\n\tretry bool NOT NULL DEFAULT false,\n\tnode varchar(255) NULL,\n\tpid int4 NULL DEFAULT 0,\n\tneeds_admin_review bool NOT NULL DEFAULT false,\n\tinstitution_id int4 NULL,\n\tqueued_at timestamp NULL,\n\t\"size\" int8 NULL,\n\tstage_started_at timestamp NULL,\n\taptrust_approver varchar NULL,\n\tinst_approver varchar NULL,\n\tCONSTRAINT work_items_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_work_items_on_action ON public.work_items USING btree (action);\nCREATE INDEX index_work_items_on_date ON public.work_items USING btree (date_processed);\nCREATE INDEX index_work_items_on_etag_and_name ON public.work_items USING btree (etag, name);\nCREATE INDEX index_work_items_on_generic_file_id ON public.work_items USING btree (generic_file_id);\nCREATE INDEX index_work_items_on_institution_id ON public.work_items USING btree (institution_id);\nCREATE INDEX index_work_items_on_institution_id_and_date ON public.work_items USING btree (institution_id, date_processed);\nCREATE INDEX index_work_items_on_intellectual_object_id ON public.work_items USING btree (intellectual_object_id);\nCREATE INDEX index_work_items_on_stage ON public.work_items USING btree (stage);\nCREATE INDEX index_work_items_on_status ON public.work_items USING btree (status);\n\n\n-- public.checksums definition\nCREATE TABLE public.checksums (\n\tid serial NOT NULL,\n\talgorithm varchar NULL,\n\tdatetime timestamp NULL,\n\tdigest varchar NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT checksums_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_89bb0866e7 FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_checksums_on_generic_file_id ON public.checksums USING btree (generic_file_id);\n\n\n-- public.storage_records definition\nCREATE TABLE public.storage_records (\n\tid bigserial NOT NULL,\n\tgeneric_file_id int4 NULL,\n\turl varchar NULL,\n\tCONSTRAINT storage_records_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_a126ea6adc FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\n\n-- public.users definition\nCREATE TABLE public.users (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\temail varchar NULL,\n\tphone_number varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tencrypted_password varchar NOT NULL DEFAULT ''::character varying,\n\treset_password_token varchar NULL,\n\treset_password_sent_at timestamp NULL,\n\tremember_created_at timestamp NULL,\n\tsign_in_count int4 NOT NULL DEFAULT 0,\n\tcurrent_sign_in_at timestamp NULL,\n\tlast_sign_in_at timestamp NULL,\n\tcurrent_sign_in_ip varchar NULL,\n\tlast_sign_in_ip varchar NULL,\n\tinstitution_id int4 NULL,\n\tencrypted_api_secret_key text NULL,\n\tpassword_changed_at timestamp NULL,\n\tencrypted_otp_secret varchar NULL,\n\tencrypted_otp_secret_iv varchar NULL,\n\tencrypted_otp_secret_salt varchar NULL,\n    encrypted_otp_sent_at timestamp NULL,\n\tconsumed_timestep int4 NULL,\n\totp_required_for_login bool NULL,\n\tdeactivated_at timestamp NULL,\n\tenabled_two_factor bool NULL DEFAULT false,\n\tconfirmed_two_factor bool NULL DEFAULT false,\n\totp_backup_codes _varchar NULL,\n\tauthy_id varchar NULL,\n\tlast_sign_in_with_authy timestamp NULL,\n\tauthy_status varchar NULL,\n\temail_verified bool NULL DEFAULT false,\n\tinitial_password_updated bool NULL DEFAULT false,\n\tforce_password_update bool NULL DEFAULT false,\n\taccount_confirmed bool NULL DEFAULT true,\n\tgrace_period timestamp NULL,\n    awaiting_second_factor boolean not null default false,\n    \"role\" varchar(50) NOT NULL default 'none',\n\tCONSTRAINT users_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_7fcf39ca13 FOREIGN KEY (institution_id) REFERENCES institutions(id)\n);\nCREATE INDEX index_users_on_authy_id ON public.users USING btree (authy_id);\nCREATE UNIQUE INDEX index_users_on_email ON public.users USING btree (email);\nCREATE INDEX index_users_on_institution_id ON public.users USING btree (institution_id);\nCREATE INDEX index_users_on_password_changed_at ON public.users USING btree (password_changed_at);\nCREATE UNIQUE INDEX index_users_on_reset_password_token ON public.users USING btree (reset_password_token);\n\n-------------------------------------------------------------------------------\n-- New tables that were not part of Pharos.\n-- alerts              + join tables\n-- deletion_requests   + join tables\n-------------------------------------------------------------------------------\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index index_alerts_institution_id ON public.alerts (institution_id);\ncreate index index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table public.alerts_users (\n    alert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table public.alerts_work_items (\n    alert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index index_storage_options_name ON public.storage_options (\"name\");\n\n\n\n-------------------------------------------------------------------------------\n-- Functions\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:49-04:00","message":"Starting SQL: -- migrations.sql\n--\n-- This file contains ALL alterations that should be applied to the\n-- existing Pharos DB schema (as it exists in the feature/storage-option\n-- branch) to make it match schema.sql.\n--\n-- All operations in this file must be idempotent, so we can run it\n-- any number of times and always know that it will leave the DB in\n-- consistent and known state that matches schema.sql.\n--\n-- NOTE: When migrating old Pharos DB, we will also need to create the\n--       views in the schema.sql file.\n-------------------------------------------------------------------------------\n\n---------------------------------------------------------\n-- START OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n---------------------------------------------------------\n\n-- Drop legacy table from Pharos DB.\ndrop table if exists work_item_states;\n\n-- Create the storage_records table, with indexes.\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\tcreate table public.storage_records (\n    \tid bigserial not null,\n    \tgeneric_file_id int8 not null,\n    \turl varchar not null,\n    \tconstraint storage_records_pkey primary key (id),\n    \tconstraint fk_rails_a126ea6adc foreign key (generic_file_id) references generic_files(id)\n\t);\n\tcreate index if not exists index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\tcreate unique index if not exists index_storage_records_on_url ON public.storage_records(\"url\");\n  end if;\nend\n$$;\n\n-- Add column generic_files.uuid.\nalter table generic_files add column if not exists \"uuid\" varchar;\n\n-- Copy uuid from uri into uuid field.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\tupdate generic_files set uuid=split_part(uri, '/', 5);\n  end if;\nend\n$$;\n\n-- Change generic_files.uuid to not null and add a unique index.\ndo\n$$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uuid' and is_nullable = 'YES') then\n  \talter table generic_files alter column \"uuid\" set not null;\n\tcreate unique index if not exists index_generic_files_on_uuid on generic_files(uuid);\n  end if;\nend\n$$;\n\n-- Copy generic_files.uri from storage_records.url.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\n  \t  -- Get the intial URL. All items, regadless of storage option, have one URL.\n      -- The inner if statement makes sure this hasn't already run. (Prevents duplicate inserts.)\n\t  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\t    if not exists (select 1 from storage_records where length(url) > 0) then\n\t\t  insert into storage_records (generic_file_id, url) select id, uri from generic_files gf order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- For items in standard storage, we need to add a Glacier URL. URLs differ per environment, so we check.\n\t  -- In each case, the inner if statement tries to ensure that these inserts have not already run.\n\n\t  -- Production\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.preservation.storage/', '/aptrust.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Test/Demo\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.test.preservation.oregon/%') then\n\t      insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.test.preservation/', '/aptrust.test.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Staging\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.staging.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.staging.preservation/', '/aptrust.staging.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n  end if;\nend\n$$;\n\n-- Now remove generic_files.uri, since the data is now in storage_records\nalter table generic_files drop column if exists uri;\n\n-------------------------------------------------------\n-- END OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n-------------------------------------------------------\n\n-- The premis_events.date_time column is varchar, but it should be\n-- timestamp. We need to change it. This change may fail if 1) there\n-- are invalid or badly formatted dates in the date_time column, or\n-- 2) if any views referencing premis_events.date_time already exist.\n-- Drop premis_events_view if necessary and recreate it after this alteration.\n--\n-- This change may take a long time, as premis_events has over 100M rows.\ndo\n$$\nbegin\n\tif exists(\n\t\tselect 1 from information_schema.columns\n\t\twhere table_schema = 'public'\n\t\tand table_name = 'premis_events'\n\t\tand column_name = 'date_time'\n\t\tand data_type = 'character varying')\n\tthen\n\t\talter table premis_events alter column date_time type timestamp\n\t\tusing TO_TIMESTAMP(date_time, 'YYYY-MM-DDTHH24:MI:SS');\n\tend if;\nend\n$$;\n\n-- We need to fix the user role structure. Pharos allows a user to have\n-- multiple roles at a single institution, though our business rules disallow\n-- that, and no user has ever had more than one role. To simplify the DB\n-- and our queries, we need to do the following:\n--\n-- 1. Create a role column in the users table.\n-- 2. Populate that column with the value with each user's role from\n--    user -> roles_user -> roles.\n-- 3. Drop the roles_users table.\n-- 4. Drop the roles table.\n\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='role') then\n \talter table users add column \"role\" varchar(50) not null default 'none';\n \tupdate users u set \"role\" = coalesce((select r.name from \"roles\" r inner join roles_users ru on ru.role_id = r.id where ru.user_id = u.id), 'none');\n    drop table if exists roles_users;\n    drop table if exists roles;\n  end if;\nend\n$$;\n\n-- Add awaiting_second_factor\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='awaiting_second_factor') then\n \talter table users add column \"awaiting_second_factor\" boolean not null default false;\n  end if;\nend\n$$;\n\n-- Add encrypted_otp_sent_at\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='encrypted_otp_sent_at') then\n \talter table users add column \"encrypted_otp_sent_at\" timestamp null;\n  end if;\nend\n$$;\n\n\n-- The ingest_state columns were part of a proposed architecture we never\n-- implemented. They have never been used, and we don't need them.\nalter table intellectual_objects drop column if exists ingest_state;\nalter table generic_files drop column if exists ingest_state;\n\n\n-- intellectual_objects.bag_group_identifier is almost always empty.\n-- Make this column nullable to ease inserts.\nalter table intellectual_objects alter column bag_group_identifier drop not null;\n\n\n-- Remove object_identifier and generic_file_identifier from work_items.\n-- We can use a view to join the files & objects tables, avoiding the\n-- duplicate data.\nalter table work_items drop column if exists object_identifier;\nalter table work_items drop column if exists generic_file_identifier;\n\n-- The work_items.date column actually refers to the datetime on which\n-- the item was last processed by one of our Go workers. The name \"date\"\n-- is too vague and ambiguous, so let's call it what it is.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns\n    where table_schema='public' AND table_name='work_items' AND column_name='date') then\n    alter table work_items rename column \"date\" to \"date_processed\";\n  end if;\nend\n$$;\n\n-- Update the indexes on work_items to reflect the change from date to\n-- date_processed.\n\ndrop index if exists index_work_items_on_date;\ndrop index if exists index_work_items_on_institution_id_and_date;\n\ncreate index if not exists index_work_items_on_date_processed on work_items(date_processed);\ncreate index if not exists index_work_items_on_inst_id_and_date_processed on work_items(institution_id, date_processed);\n\n-- These columns are unnecessary in the premis_events table.\n-- We can get them by joining other tables in a view.\n-- This will have a large impact on storage space, since these\n-- two fields together average ~100 bytes per record, and as of\n-- Jan. 2021, we have around 120M records. Dropping these columns\n-- also drops the indexes on these two columns, which are huge and\n-- are rarely used.\nalter table premis_events drop column if exists intellectual_object_identifier;\nalter table premis_events drop column if exists generic_file_identifier;\n\n-- Get rid of useless indexes. We can add these back if they actually turn\n-- out to be useful.\n--\n-- generic_files\ndrop index if exists index_files_on_inst_state_and_format;\ndrop index if exists index_files_on_inst_state_and_updated;\ndrop index if exists index_generic_files_on_file_format;\ndrop index if exists index_generic_files_on_file_format_and_state;\ndrop index if exists index_generic_files_on_institution_id_and_size_and_state;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_file_format;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_state;\ndrop index if exists index_generic_files_on_size;\ndrop index if exists index_generic_files_on_size_and_state;\ndrop index if exists index_generic_files_on_state;\ndrop index if exists index_generic_files_on_state_and_updated_at;\n\n-- intellectual_objects\ndrop index if exists index_intellectual_objects_on_access;\ndrop index if exists index_intellectual_objects_on_institution_id_and_state;\ndrop index if exists index_intellectual_objects_on_state;\n\n-- premis_events\ndrop index if exists index_premis_events_on_generic_file_id_and_event_type;\ndrop index if exists index_premis_events_on_identifier_and_institution_id;\n\n-- institutions\ncreate unique index if not exists index_institutions_identifier on institutions using btree(identifier);\ncreate unique index if not exists index_institutions_receiving_bucket on institutions using btree(receiving_bucket);\ncreate unique index if not exists index_institutions_restore_bucket on institutions using btree(restore_bucket);\n\n-- Allow institutions to turn spot restoration tests on or off.\n-- Default is off.\nalter table institutions add column if not exists enable_spot_restore boolean not null default false;\n\n-- ********************************************************************\n--\n-- Add tables for alerts and deletions that did not exist in Pharos\n--\n-- ********************************************************************\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table if not exists public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index if not exists index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table if not exists public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index if not exists index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table if not exists public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index if not exists index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table if not exists public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index if not exists index_alerts_institution_id ON public.alerts (institution_id);\ncreate index if not exists index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table if not exists public.alerts_users (\n\talert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index if not exists index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index if not exists index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index if not exists index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table if not exists public.alerts_work_items (\n\talert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index if not exists index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index if not exists index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table if not exists public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index if not exists index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index if not exists index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table if not exists public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index if not exists index_storage_options_name ON public.storage_options (\"name\");\n\n-- In Pharos DB, many generic_file_ids in premis_events are set to zero when they should be null.\n-- Fix that here.\nupdate premis_events set generic_file_id = null where generic_file_id = 0;\n\n-- In Pharos, the Devise auth system leaves stale password reset data forever.\n-- We have to clear these values in Registry, or all users will be stuck in\n-- the \"please finish resetting your password\" loop forever. We have no idea\n-- what reset tokens Devise sent two years ago, so no one will be able to\n-- unlock their accounts.\nupdate users set reset_password_token = null, reset_password_sent_at = null;\n\n\n-------------------------------------------------------------------------------\n-- Functions\n--\n-- Fuctions are defined in schema.sql as well. Adding them to migrations\n-- ensures they'll be present in converted DB.\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: -------------------------------------------------------------------------------\n-- Views\n-------------------------------------------------------------------------------\n\n-- Create a view to pull in columns that used to be in the WorkItems table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view work_items_view as\nselect\n\twi.id,\n\twi.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\twi.intellectual_object_id,\n\tio.identifier as \"object_identifier\",\n\tio.alt_identifier,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\twi.generic_file_id,\n\tgf.identifier as \"generic_file_identifier\",\n\twi.\"name\",\n\twi.etag,\n\twi.bucket,\n\twi.\"user\",\n\twi.note,\n\twi.\"action\",\n\twi.stage,\n\twi.status,\n\twi.outcome,\n\twi.bag_date,\n\twi.date_processed,\n\twi.retry,\n\twi.node,\n\twi.pid,\n\twi.needs_admin_review,\n\twi.\"size\",\n\twi.queued_at,\n\twi.stage_started_at,\n\twi.aptrust_approver,\n\twi.inst_approver,\n\twi.created_at,\n\twi.updated_at\nfrom work_items wi\nleft join institutions i on wi.institution_id = i.id\nleft join intellectual_objects io on wi.intellectual_object_id = io.id\nleft join generic_files gf on wi.generic_file_id = gf.id;\n\n\n-- Create a view to pull in columns that used to be in the PremisEvents table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view premis_events_view as\nselect\n\tpe.id,\n\tpe.identifier,\n\tpe.institution_id,\n\ti.\"name\" as institution_name,\n\tpe.intellectual_object_id,\n\tio.identifier as intellectual_object_identifier,\n\tpe.generic_file_id,\n\tgf.identifier as generic_file_identifier,\n\tpe.event_type,\n\tpe.date_time,\n\tpe.detail,\n\tpe.outcome,\n\tpe.outcome_detail,\n\tpe.outcome_information,\n\tpe.\"object\",\n\tpe.agent,\n\tpe.created_at,\n\tpe.updated_at,\n\tpe.old_uuid\nfrom premis_events pe\nleft join institutions i on pe.institution_id = i.id\nleft join intellectual_objects io on pe.intellectual_object_id = io.id\nleft join generic_files gf on pe.generic_file_id = gf.id;\n\n\n-- users_view makes it easier to list and search on institution-related\n-- attributes for users.\ncreate or replace view users_view as\nselect\n\tu.id,\n\tu.\"name\",\n\tu.email,\n\tu.phone_number,\n\tu.created_at,\n\tu.updated_at,\n\tu.reset_password_sent_at,\n\tu.remember_created_at,\n\tu.sign_in_count,\n\tu.current_sign_in_at,\n\tu.last_sign_in_at,\n\tu.current_sign_in_ip,\n\tu.last_sign_in_ip,\n\tu.institution_id,\n\tu.password_changed_at,\n\tu.consumed_timestep,\n\tu.otp_required_for_login,\n\tu.deactivated_at,\n\tu.enabled_two_factor,\n\tu.confirmed_two_factor,\n\tu.authy_id,\n\tu.last_sign_in_with_authy,\n\tu.authy_status,\n\tu.email_verified,\n\tu.initial_password_updated,\n\tu.force_password_update,\n\tu.account_confirmed,\n\tu.grace_period,\n\tu.\"role\",\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.state as institution_state,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id,\n\ti2.\"name\" as member_institution_name,\n\ti2.identifier as member_institution_identifier,\n\ti2.state as member_institution_state,\n\ti.otp_enabled,\n\ti.receiving_bucket,\n\ti.restore_bucket\nfrom users u\nleft join institutions i on u.institution_id = i.id\nleft join institutions i2 on i.member_institution_id = i2.id;\n\n\n-- institutions_view shows an institution along with essential\n-- information about its parent, if it has a parent.\n\ncreate or replace view institutions_view as\nselect\n\ti.id,\n\ti.\"name\",\n\ti.identifier,\n\ti.state,\n\ti.\"type\",\n\ti.deactivated_at,\n\ti.otp_enabled,\n\ti.enable_spot_restore,\n\ti.receiving_bucket,\n\ti.restore_bucket,\n\ti.created_at,\n\ti.updated_at,\n\ti.member_institution_id as \"parent_id\",\n\tparent.\"name\" as \"parent_name\",\n\tparent.identifier as \"parent_identifier\",\n\tparent.state as \"parent_state\",\n\tparent.deactivated_at as \"parent_deactivated_at\"\nfrom institutions i\nleft join institutions parent on i.member_institution_id = parent.id;\n\n-- intellectual_objects_view\n\ncreate or replace view intellectual_objects_view as\nselect\n\tio.id,\n\tio.title,\n\tio.description,\n\tio.identifier,\n\tio.alt_identifier,\n\tio.access,\n\tio.bag_name,\n\tio.institution_id,\n\tio.state,\n\tio.etag,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\tio.internal_sender_description,\n\tio.created_at,\n\tio.updated_at,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id as institution_parent_id,\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"size\",\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_size\"\nfrom intellectual_objects io\nleft join institutions i on io.institution_id = i.id;\n\n-- deletion_requests_view\n\ncreate or replace view deletion_requests_view as\nselect dr.id,\n       dr.institution_id,\n       i.\"name\" as institution_name,\n       i.identifier as institution_identifier,\n       dr.requested_by_id,\n       req.\"name\" as requested_by_name,\n       req.email as requested_by_email,\n       dr.requested_at,\n       dr.confirmed_by_id,\n       conf.\"name\" as confirmed_by_name,\n       conf.email as confirmed_by_email,\n       dr.confirmed_at,\n       dr.cancelled_by_id,\n       can.\"name\" as cancelled_by_name,\n       can.email as cancelled_by_email,\n       dr.cancelled_at,\n       (select count(*) from deletion_requests_generic_files drgf where drgf.deletion_request_id = dr.id) as file_count,\n       (select count(*) from deletion_requests_intellectual_objects drio where drio.deletion_request_id = dr.id) as object_count,\n       dr.work_item_id,\n       wi.stage,\n       wi.status,\n       wi.date_processed,\n       wi.\"size\",\n       wi.note\nfrom deletion_requests dr\nleft join institutions i on dr.institution_id = i.id\nleft join users req on dr.requested_by_id = req.id\nleft join users conf on dr.confirmed_by_id = conf.id\nleft join users can on dr.confirmed_by_id = can.id\nleft join work_items wi on dr.work_item_id = wi.id;\n\n-- alerts view\n\ncreate or replace view alerts_view as\nselect\n\ta.id,\n\ta.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ta.\"type\",\n\ta.subject,\n\ta.\"content\",\n\ta.deletion_request_id,\n\ta.created_at,\n\tau.user_id,\n\tu.\"name\" as user_name,\n\tau.sent_at,\n\tau.read_at\nfrom alerts a\nleft join alerts_users au on a.id = au.alert_id\nleft join users u on au.user_id = u.id\nleft join institutions i on a.institution_id = i.id;\n\n-- storage_option_stats\ncreate or replace view storage_option_stats as\nwith stats as (\n\tselect\n\t\tsum(\"gf\".\"size\") as total_bytes,\n\t\tcount(*) as file_count,\n\t\tgf.institution_id,\n\t\tgf.storage_option\n\tfrom generic_files gf\n\twhere gf.state = 'A'\n\tgroup by rollup (gf.institution_id, gf.storage_option)\n\t)\nselect\n\ts.total_bytes,\n\ts.file_count,\n\ts.institution_id,\n\ts.storage_option,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier\nfrom stats s\nleft join institutions i on s.institution_id = i.id;\n\ncreate or replace view generic_files_view as\nselect\n\tgf.id,\n\tgf.file_format,\n\tgf.\"size\",\n\tgf.identifier,\n\tgf.intellectual_object_id,\n\tio.identifier as object_identifier,\n\tio.\"access\",\n\tgf.state,\n\tgf.last_fixity_check,\n\tgf.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\tgf.storage_option,\n\tgf.uuid,\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='md5' order by created_at desc limit 1) as \"md5\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha1' order by created_at desc limit 1) as \"sha1\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha256' order by created_at desc limit 1) as \"sha256\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha512' order by created_at desc limit 1) as \"sha512\",\n\tgf.created_at,\n\tgf.updated_at\nfrom generic_files gf\nleft join intellectual_objects io on io.id = gf.intellectual_object_id\nleft join institutions i on i.id = gf.institution_id;\n\n-- Checksums view\ncreate or replace view checksums_view as\nselect cs.id,\n       cs.algorithm,\n       cs.datetime,\n       cs.digest,\n       gf.state,\n       gf.identifier as \"generic_file_identifier\",\n       cs.generic_file_id,\n       gf.intellectual_object_id,\n       gf.institution_id,\n       cs.created_at,\n       cs.updated_at\nfrom checksums cs\nleft join generic_files gf on cs.generic_file_id = gf.id;\n\n\n---------------------------------------------------------------------------\n--\n-- Count Views\n--\n-- We create these views because count queries on large tables are slow\n-- in postgres. Even if a query can use an index to get a count, it still\n-- has to scan every row in the result set to see if that row is visible\n-- under postgres' mvcc rules. \n--\n-- If the count returns a million rows, postgres has to scan all million\n-- rows. The result is a query that can take 5-15 seconds. The \n-- premis_events table is the worst of the lot. It should surpass 200M\n-- rows by the end of 2022. We do not want to scan those rows every time\n-- someone hits the events page or the events API endpoint.\n--\n-- We run count queries all the time to manage paging in both the web UI\n-- and the API. For large counts, such as \"all events for an institution\",\n-- or \"all files for an institution\", we'll use the counts in the views\n-- below. \n--\n-- For smaller counts, such as \"all files for my institution created \n-- within the past week\", we'll suck it up and let postgres scan the \n-- smaller row sets.\n--\n-- These views will be refreshed every hour or so using an async go \n-- routine so they don't slow down web and API requests.\n--\n-- That means some large counts may be up to an hour out of date, but we\n-- can live with that tradeoff, since this will vastly speed up the loading\n-- of our most commonly hit web and API endpoints.\n--\n-- Note the function update_counts() below. It refreshes all of the count\n-- views.\n-- \n---------------------------------------------------------------------------\n\n-- premis_event_counts\ncreate materialized view if not exists premis_event_counts as\n\tselect institution_id, count(id) as row_count, event_type, outcome\n\tfrom premis_events group by cube(institution_id, event_type, outcome)\n\torder by institution_id, event_type, outcome;\n\n-- intellectual_object_counts\ncreate materialized view if not exists intellectual_object_counts as\n\tselect institution_id, count(id) as row_count, \"state\" \n\tfrom intellectual_objects group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- generic_file_counts\ncreate materialized view if not exists generic_file_counts as\n\tselect institution_id, count(id) as row_count, \"state\"\n\tfrom generic_files group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- work_item_counts\ncreate materialized view if not exists work_item_counts as\n\tselect institution_id, count(id) as row_count, \"action\"\n\tfrom work_items group by cube(institution_id, \"action\")\n\torder by institution_id, \"action\";\n\n-- \nCREATE OR REPLACE FUNCTION update_counts ()\n  RETURNS integer\nAS\n$BODY$\n  begin\n    refresh materialized view premis_event_counts;\n    refresh materialized view intellectual_object_counts;\n    refresh materialized view generic_file_counts;\n    refresh materialized view work_item_counts;    \n    return 1;\n  end;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"storage_options\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_options.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"institutions\" from '/Users/diamond/aptrust/registry/db/fixtures/institutions.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"users\" from '/Users/diamond/aptrust/registry/db/fixtures/users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"checksums\" from '/Users/diamond/aptrust/registry/db/fixtures/checksums.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"storage_records\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_records.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"deletion_requests\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"deletion_requests_generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"deletion_requests_intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"alerts\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"alerts_premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"alerts_users\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: copy \"alerts_work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_options', 'id'), MAX(id)) FROM \"storage_options\";"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('institutions', 'id'), MAX(id)) FROM \"institutions\";"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('users', 'id'), MAX(id)) FROM \"users\";"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('intellectual_objects', 'id'), MAX(id)) FROM \"intellectual_objects\";"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('generic_files', 'id'), MAX(id)) FROM \"generic_files\";"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('checksums', 'id'), MAX(id)) FROM \"checksums\";"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_records', 'id'), MAX(id)) FROM \"storage_records\";"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('premis_events', 'id'), MAX(id)) FROM \"premis_events\";"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('work_items', 'id'), MAX(id)) FROM \"work_items\";"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('deletion_requests', 'id'), MAX(id)) FROM \"deletion_requests\";"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('alerts', 'id'), MAX(id)) FROM \"alerts\";"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: select update_counts();"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 4)"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((generic_file_id = 4) AND (status NOT IN ('Cancelled', 'Failed', 'Success'))) ORDER BY \"date_processed\" desc"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 4) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (4)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (4)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (4))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: INSERT INTO \"deletion_requests\" (\"id\", \"institution_id\", \"requested_by_id\", \"requested_at\", \"encrypted_confirmation_token\", \"confirmed_by_id\", \"confirmed_at\", \"cancelled_by_id\", \"cancelled_at\", \"work_item_id\") VALUES (DEFAULT, 2, 2, '2022-06-22 17:30:50.439447+00:00:00', '$2a$10$EEoMeAT5YwYSaZJD/RZlmejaz01OmzUkIb/oM05.uU6C0Cu2el4a.', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING \"id\", \"confirmed_by_id\", \"confirmed_at\", \"cancelled_by_id\", \"cancelled_at\", \"work_item_id\""}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: insert into deletion_requests_generic_files (deletion_request_id, generic_file_id) values (4, 4) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" WHERE ((institution_id = 2) AND (role = 'institutional_admin'))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: INSERT INTO \"alerts\" (\"id\", \"institution_id\", \"type\", \"subject\", \"content\", \"deletion_request_id\", \"created_at\") VALUES (DEFAULT, 2, 'Deletion Requested', 'Deletion Requested', 'Hello from APTrust,\n\nUser Inst One Admin has requested some files or objects be deleted from preservation storage. We won''t process this request until you or another APTrust administrator at your institution approves it.\n\nFollow the link below to see the list of items in the deletion request. From there you may approve or cancel the request.\n\nhttp://localhost/deletions/review/4?token=712d96d9dd91dc78a0b7f5589cc9c48b\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n', 4, '2022-06-22 17:30:50.44535+00:00:00') RETURNING \"id\""}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: insert into alerts_users (alert_id, user_id, sent_at, read_at) values (9, 2, NULL, NULL) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:30:50-04:00","message":"SES is disabled per config settings. Email to admin@inst1.edu. Subject: Deletion Requested\n\n. Hello from APTrust,\n\nUser Inst One Admin has requested some files or objects be deleted from preservation storage. We won't process this request until you or another APTrust administrator at your institution approves it.\n\nFollow the link below to see the list of items in the deletion request. From there you may approve or cancel the request.\n\nhttp://localhost/deletions/review/4?token=712d96d9dd91dc78a0b7f5589cc9c48b\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: update alerts_users set sent_at = '2022-06-22 17:30:50.450884+00:00:00' where alert_id = 9 and user_id = 2"}
{"level":"info","status":201,"method":"POST","path":"/files/init_delete/4","ip":"","latency":113.468315,"user-agent":"","time":"2022-06-22T13:30:50-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".\"deletion_request_id\", \"deletion_requests_generic_files\".\"generic_file_id\" FROM \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" WHERE ((generic_file_id = 4))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"deletion_request\".\"id\", \"deletion_request\".\"institution_id\", \"deletion_request\".\"requested_by_id\", \"deletion_request\".\"requested_at\", \"deletion_request\".\"encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\", \"deletion_request\".\"confirmed_at\", \"deletion_request\".\"cancelled_by_id\", \"deletion_request\".\"cancelled_at\", \"deletion_request\".\"work_item_id\", \"requested_by\".\"id\" AS \"requested_by__id\", \"requested_by\".\"created_at\" AS \"requested_by__created_at\", \"requested_by\".\"updated_at\" AS \"requested_by__updated_at\", \"requested_by\".\"name\" AS \"requested_by__name\", \"requested_by\".\"email\" AS \"requested_by__email\", \"requested_by\".\"phone_number\" AS \"requested_by__phone_number\", \"requested_by\".\"encrypted_password\" AS \"requested_by__encrypted_password\", \"requested_by\".\"reset_password_token\" AS \"requested_by__reset_password_token\", \"requested_by\".\"reset_password_sent_at\" AS \"requested_by__reset_password_sent_at\", \"requested_by\".\"remember_created_at\" AS \"requested_by__remember_created_at\", \"requested_by\".\"sign_in_count\" AS \"requested_by__sign_in_count\", \"requested_by\".\"current_sign_in_at\" AS \"requested_by__current_sign_in_at\", \"requested_by\".\"last_sign_in_at\" AS \"requested_by__last_sign_in_at\", \"requested_by\".\"current_sign_in_ip\" AS \"requested_by__current_sign_in_ip\", \"requested_by\".\"last_sign_in_ip\" AS \"requested_by__last_sign_in_ip\", \"requested_by\".\"institution_id\" AS \"requested_by__institution_id\", \"requested_by\".\"encrypted_api_secret_key\" AS \"requested_by__encrypted_api_secret_key\", \"requested_by\".\"password_changed_at\" AS \"requested_by__password_changed_at\", \"requested_by\".\"encrypted_otp_secret\" AS \"requested_by__encrypted_otp_secret\", \"requested_by\".\"encrypted_otp_secret_iv\" AS \"requested_by__encrypted_otp_secret_iv\", \"requested_by\".\"encrypted_otp_secret_salt\" AS \"requested_by__encrypted_otp_secret_salt\", \"requested_by\".\"encrypted_otp_sent_at\" AS \"requested_by__encrypted_otp_sent_at\", \"requested_by\".\"consumed_timestep\" AS \"requested_by__consumed_timestep\", \"requested_by\".\"otp_required_for_login\" AS \"requested_by__otp_required_for_login\", \"requested_by\".\"deactivated_at\" AS \"requested_by__deactivated_at\", \"requested_by\".\"enabled_two_factor\" AS \"requested_by__enabled_two_factor\", \"requested_by\".\"confirmed_two_factor\" AS \"requested_by__confirmed_two_factor\", \"requested_by\".\"otp_backup_codes\" AS \"requested_by__otp_backup_codes\", \"requested_by\".\"authy_id\" AS \"requested_by__authy_id\", \"requested_by\".\"last_sign_in_with_authy\" AS \"requested_by__last_sign_in_with_authy\", \"requested_by\".\"authy_status\" AS \"requested_by__authy_status\", \"requested_by\".\"email_verified\" AS \"requested_by__email_verified\", \"requested_by\".\"initial_password_updated\" AS \"requested_by__initial_password_updated\", \"requested_by\".\"force_password_update\" AS \"requested_by__force_password_update\", \"requested_by\".\"grace_period\" AS \"requested_by__grace_period\", \"requested_by\".\"awaiting_second_factor\" AS \"requested_by__awaiting_second_factor\", \"requested_by\".\"role\" AS \"requested_by__role\", \"confirmed_by\".\"id\" AS \"confirmed_by__id\", \"confirmed_by\".\"created_at\" AS \"confirmed_by__created_at\", \"confirmed_by\".\"updated_at\" AS \"confirmed_by__updated_at\", \"confirmed_by\".\"name\" AS \"confirmed_by__name\", \"confirmed_by\".\"email\" AS \"confirmed_by__email\", \"confirmed_by\".\"phone_number\" AS \"confirmed_by__phone_number\", \"confirmed_by\".\"encrypted_password\" AS \"confirmed_by__encrypted_password\", \"confirmed_by\".\"reset_password_token\" AS \"confirmed_by__reset_password_token\", \"confirmed_by\".\"reset_password_sent_at\" AS \"confirmed_by__reset_password_sent_at\", \"confirmed_by\".\"remember_created_at\" AS \"confirmed_by__remember_created_at\", \"confirmed_by\".\"sign_in_count\" AS \"confirmed_by__sign_in_count\", \"confirmed_by\".\"current_sign_in_at\" AS \"confirmed_by__current_sign_in_at\", \"confirmed_by\".\"last_sign_in_at\" AS \"confirmed_by__last_sign_in_at\", \"confirmed_by\".\"current_sign_in_ip\" AS \"confirmed_by__current_sign_in_ip\", \"confirmed_by\".\"last_sign_in_ip\" AS \"confirmed_by__last_sign_in_ip\", \"confirmed_by\".\"institution_id\" AS \"confirmed_by__institution_id\", \"confirmed_by\".\"encrypted_api_secret_key\" AS \"confirmed_by__encrypted_api_secret_key\", \"confirmed_by\".\"password_changed_at\" AS \"confirmed_by__password_changed_at\", \"confirmed_by\".\"encrypted_otp_secret\" AS \"confirmed_by__encrypted_otp_secret\", \"confirmed_by\".\"encrypted_otp_secret_iv\" AS \"confirmed_by__encrypted_otp_secret_iv\", \"confirmed_by\".\"encrypted_otp_secret_salt\" AS \"confirmed_by__encrypted_otp_secret_salt\", \"confirmed_by\".\"encrypted_otp_sent_at\" AS \"confirmed_by__encrypted_otp_sent_at\", \"confirmed_by\".\"consumed_timestep\" AS \"confirmed_by__consumed_timestep\", \"confirmed_by\".\"otp_required_for_login\" AS \"confirmed_by__otp_required_for_login\", \"confirmed_by\".\"deactivated_at\" AS \"confirmed_by__deactivated_at\", \"confirmed_by\".\"enabled_two_factor\" AS \"confirmed_by__enabled_two_factor\", \"confirmed_by\".\"confirmed_two_factor\" AS \"confirmed_by__confirmed_two_factor\", \"confirmed_by\".\"otp_backup_codes\" AS \"confirmed_by__otp_backup_codes\", \"confirmed_by\".\"authy_id\" AS \"confirmed_by__authy_id\", \"confirmed_by\".\"last_sign_in_with_authy\" AS \"confirmed_by__last_sign_in_with_authy\", \"confirmed_by\".\"authy_status\" AS \"confirmed_by__authy_status\", \"confirmed_by\".\"email_verified\" AS \"confirmed_by__email_verified\", \"confirmed_by\".\"initial_password_updated\" AS \"confirmed_by__initial_password_updated\", \"confirmed_by\".\"force_password_update\" AS \"confirmed_by__force_password_update\", \"confirmed_by\".\"grace_period\" AS \"confirmed_by__grace_period\", \"confirmed_by\".\"awaiting_second_factor\" AS \"confirmed_by__awaiting_second_factor\", \"confirmed_by\".\"role\" AS \"confirmed_by__role\", \"cancelled_by\".\"id\" AS \"cancelled_by__id\", \"cancelled_by\".\"created_at\" AS \"cancelled_by__created_at\", \"cancelled_by\".\"updated_at\" AS \"cancelled_by__updated_at\", \"cancelled_by\".\"name\" AS \"cancelled_by__name\", \"cancelled_by\".\"email\" AS \"cancelled_by__email\", \"cancelled_by\".\"phone_number\" AS \"cancelled_by__phone_number\", \"cancelled_by\".\"encrypted_password\" AS \"cancelled_by__encrypted_password\", \"cancelled_by\".\"reset_password_token\" AS \"cancelled_by__reset_password_token\", \"cancelled_by\".\"reset_password_sent_at\" AS \"cancelled_by__reset_password_sent_at\", \"cancelled_by\".\"remember_created_at\" AS \"cancelled_by__remember_created_at\", \"cancelled_by\".\"sign_in_count\" AS \"cancelled_by__sign_in_count\", \"cancelled_by\".\"current_sign_in_at\" AS \"cancelled_by__current_sign_in_at\", \"cancelled_by\".\"last_sign_in_at\" AS \"cancelled_by__last_sign_in_at\", \"cancelled_by\".\"current_sign_in_ip\" AS \"cancelled_by__current_sign_in_ip\", \"cancelled_by\".\"last_sign_in_ip\" AS \"cancelled_by__last_sign_in_ip\", \"cancelled_by\".\"institution_id\" AS \"cancelled_by__institution_id\", \"cancelled_by\".\"encrypted_api_secret_key\" AS \"cancelled_by__encrypted_api_secret_key\", \"cancelled_by\".\"password_changed_at\" AS \"cancelled_by__password_changed_at\", \"cancelled_by\".\"encrypted_otp_secret\" AS \"cancelled_by__encrypted_otp_secret\", \"cancelled_by\".\"encrypted_otp_secret_iv\" AS \"cancelled_by__encrypted_otp_secret_iv\", \"cancelled_by\".\"encrypted_otp_secret_salt\" AS \"cancelled_by__encrypted_otp_secret_salt\", \"cancelled_by\".\"encrypted_otp_sent_at\" AS \"cancelled_by__encrypted_otp_sent_at\", \"cancelled_by\".\"consumed_timestep\" AS \"cancelled_by__consumed_timestep\", \"cancelled_by\".\"otp_required_for_login\" AS \"cancelled_by__otp_required_for_login\", \"cancelled_by\".\"deactivated_at\" AS \"cancelled_by__deactivated_at\", \"cancelled_by\".\"enabled_two_factor\" AS \"cancelled_by__enabled_two_factor\", \"cancelled_by\".\"confirmed_two_factor\" AS \"cancelled_by__confirmed_two_factor\", \"cancelled_by\".\"otp_backup_codes\" AS \"cancelled_by__otp_backup_codes\", \"cancelled_by\".\"authy_id\" AS \"cancelled_by__authy_id\", \"cancelled_by\".\"last_sign_in_with_authy\" AS \"cancelled_by__last_sign_in_with_authy\", \"cancelled_by\".\"authy_status\" AS \"cancelled_by__authy_status\", \"cancelled_by\".\"email_verified\" AS \"cancelled_by__email_verified\", \"cancelled_by\".\"initial_password_updated\" AS \"cancelled_by__initial_password_updated\", \"cancelled_by\".\"force_password_update\" AS \"cancelled_by__force_password_update\", \"cancelled_by\".\"grace_period\" AS \"cancelled_by__grace_period\", \"cancelled_by\".\"awaiting_second_factor\" AS \"cancelled_by__awaiting_second_factor\", \"cancelled_by\".\"role\" AS \"cancelled_by__role\", \"work_item\".\"id\" AS \"work_item__id\", \"work_item\".\"created_at\" AS \"work_item__created_at\", \"work_item\".\"updated_at\" AS \"work_item__updated_at\", \"work_item\".\"name\" AS \"work_item__name\", \"work_item\".\"etag\" AS \"work_item__etag\", \"work_item\".\"institution_id\" AS \"work_item__institution_id\", \"work_item\".\"intellectual_object_id\" AS \"work_item__intellectual_object_id\", \"work_item\".\"generic_file_id\" AS \"work_item__generic_file_id\", \"work_item\".\"bucket\" AS \"work_item__bucket\", \"work_item\".\"user\" AS \"work_item__user\", \"work_item\".\"note\" AS \"work_item__note\", \"work_item\".\"action\" AS \"work_item__action\", \"work_item\".\"stage\" AS \"work_item__stage\", \"work_item\".\"status\" AS \"work_item__status\", \"work_item\".\"outcome\" AS \"work_item__outcome\", \"work_item\".\"bag_date\" AS \"work_item__bag_date\", \"work_item\".\"date_processed\" AS \"work_item__date_processed\", \"work_item\".\"retry\" AS \"work_item__retry\", \"work_item\".\"node\" AS \"work_item__node\", \"work_item\".\"pid\" AS \"work_item__pid\", \"work_item\".\"needs_admin_review\" AS \"work_item__needs_admin_review\", \"work_item\".\"queued_at\" AS \"work_item__queued_at\", \"work_item\".\"size\" AS \"work_item__size\", \"work_item\".\"stage_started_at\" AS \"work_item__stage_started_at\", \"work_item\".\"aptrust_approver\" AS \"work_item__aptrust_approver\", \"work_item\".\"inst_approver\" AS \"work_item__inst_approver\" FROM \"deletion_requests\" AS \"deletion_request\" LEFT JOIN \"users\" AS \"requested_by\" ON \"requested_by\".\"id\" = \"deletion_request\".\"requested_by_id\" LEFT JOIN \"users\" AS \"confirmed_by\" ON \"confirmed_by\".\"id\" = \"deletion_request\".\"confirmed_by_id\" LEFT JOIN \"users\" AS \"cancelled_by\" ON \"cancelled_by\".\"id\" = \"deletion_request\".\"cancelled_by_id\" LEFT JOIN \"work_items\" AS \"work_item\" ON \"work_item\".\"id\" = \"deletion_request\".\"work_item_id\" WHERE ((\"deletion_request\".\"id\" = 4))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".*, \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" JOIN \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" ON (\"deletion_requests_generic_files\".\"deletion_request_id\") IN (4) WHERE (\"generic_file\".\"id\" = \"deletion_requests_generic_files\".\"generic_file_id\")"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".*, \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" FROM \"intellectual_objects\" AS \"intellectual_object\" JOIN \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" ON (\"deletion_requests_intellectual_objects\".\"deletion_request_id\") IN (4) WHERE (\"intellectual_object\".\"id\" = \"deletion_requests_intellectual_objects\".\"intellectual_object_id\")"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((deletion_request_id = 4))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (9) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 34)"}
{"level":"error","time":"2022-06-22T13:30:50-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileInitDelete, ResourceType: GenericFile, ResourceID: 34, InstID: 3, Gin Path: /files/init_delete/:id, Request Path: /files/init_delete/34, Permission: FileRequestDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"IsAPIRoute - NO - /files/init_delete/34"}
{"level":"warn","status":403,"method":"POST","path":"/files/init_delete/34","ip":"","latency":17.26675,"user-agent":"","time":"2022-06-22T13:30:50-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 2) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (2)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (2)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (2))"}
{"level":"info","status":200,"method":"GET","path":"/files/request_restore/2","ip":"","latency":24.531123,"user-agent":"","time":"2022-06-22T13:30:50-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 2) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (2)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (2)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (2))"}
{"level":"info","status":200,"method":"GET","path":"/files/request_restore/2","ip":"","latency":19.618284,"user-agent":"","time":"2022-06-22T13:30:50-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 2) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (2)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (2)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (2))"}
{"level":"info","status":200,"method":"GET","path":"/files/request_restore/2","ip":"","latency":27.812314,"user-agent":"","time":"2022-06-22T13:30:50-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 18)"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 18) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (18)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (18)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (18))"}
{"level":"info","status":200,"method":"GET","path":"/files/request_restore/18","ip":"","latency":20.887059,"user-agent":"","time":"2022-06-22T13:30:50-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 18)"}
{"level":"error","time":"2022-06-22T13:30:50-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileRequestRestore, ResourceType: GenericFile, ResourceID: 18, InstID: 3, Gin Path: /files/request_restore/:id, Request Path: /files/request_restore/18, Permission: FileRestore, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"IsAPIRoute - NO - /files/request_restore/18"}
{"level":"warn","status":403,"method":"GET","path":"/files/request_restore/18","ip":"","latency":25.472486,"user-agent":"","time":"2022-06-22T13:30:50-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 18)"}
{"level":"error","time":"2022-06-22T13:30:50-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileRequestRestore, ResourceType: GenericFile, ResourceID: 18, InstID: 3, Gin Path: /files/request_restore/:id, Request Path: /files/request_restore/18, Permission: FileRestore, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"IsAPIRoute - NO - /files/request_restore/18"}
{"level":"warn","status":403,"method":"GET","path":"/files/request_restore/18","ip":"","latency":17.042321,"user-agent":"","time":"2022-06-22T13:30:50-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"ar_internal_metadata\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"confirmation_tokens\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"emails_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"emails_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"emails_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"emails_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"old_passwords\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"schema_migrations\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"snapshots\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"usage_samples\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"alerts_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"alerts_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"alerts_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"alerts\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"deletion_requests\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"storage_records\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"checksums\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"roles_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"roles\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: drop table if exists \"storage_options\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:50-04:00","message":"Starting SQL: --\n-- schema.sql\n--\n-- This file represents the full registry schema.\n--\n-- The migrations.sql file updates the old Pharos schema, as it existed\n-- in the feature/storage_record branch, so that it matches this schema.\n--\n-- https://github.com/APTrust/pharos/blob/feature/storage-record/db/schema.rb\n--\n\n\n-- public.ar_internal_metadata definition\n--\n-- This is a legacy table used by ActiveRecord.\n-- We can drop this once production is stable.\n--\nCREATE TABLE public.ar_internal_metadata (\n\t\"key\" varchar NOT NULL,\n\tvalue varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT ar_internal_metadata_pkey PRIMARY KEY (key)\n);\n\n\n-- public.bulk_delete_jobs definition\n--\n-- This is the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs (\n\tid bigserial NOT NULL,\n\trequested_by varchar NULL,\n\tinstitutional_approver varchar NULL,\n\taptrust_approver varchar NULL,\n\tinstitutional_approval_at timestamp NULL,\n\taptrust_approval_at timestamp NULL,\n\tnote text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id int4 NOT NULL,\n\tCONSTRAINT bulk_delete_jobs_pkey PRIMARY KEY (id)\n);\n\n\n-- public.bulk_delete_jobs_emails definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_emails (\n\tbulk_delete_job_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_emails_on_bulk_delete_job_id ON public.bulk_delete_jobs_emails USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_emails_on_email_id ON public.bulk_delete_jobs_emails USING btree (email_id);\n\n\n-- public.bulk_delete_jobs_generic_files definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_generic_files (\n\tbulk_delete_job_id int8 NULL,\n\tgeneric_file_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_bulk_delete_job_id ON public.bulk_delete_jobs_generic_files USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_generic_file_id ON public.bulk_delete_jobs_generic_files USING btree (generic_file_id);\n\n\n-- public.bulk_delete_jobs_institutions definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_institutions (\n\tbulk_delete_job_id int8 NULL,\n\tinstitution_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_bulk_delete_job_id ON public.bulk_delete_jobs_institutions USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_institution_id ON public.bulk_delete_jobs_institutions USING btree (institution_id);\n\n\n-- public.bulk_delete_jobs_intellectual_objects definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_intellectual_objects (\n\tbulk_delete_job_id int8 NULL,\n\tintellectual_object_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_bulk_job_id ON public.bulk_delete_jobs_intellectual_objects USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_object_id ON public.bulk_delete_jobs_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.confirmation_tokens definition\n--\n-- This is a legacy table. We can likely delete it\n-- after production is stable.\n--\nCREATE TABLE public.confirmation_tokens (\n\tid bigserial NOT NULL,\n\t\"token\" varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tuser_id int4 NULL,\n\tCONSTRAINT confirmation_tokens_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails definition\n--\n-- This legacy table will be replaced by the new alerts table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails (\n\tid bigserial NOT NULL,\n\temail_type varchar NULL,\n\tevent_identifier varchar NULL,\n\titem_id int4 NULL,\n\temail_text text NULL,\n\tuser_list text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tCONSTRAINT emails_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails_generic_files definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_generic_files (\n\tgeneric_file_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_generic_files_on_email_id ON public.emails_generic_files USING btree (email_id);\nCREATE INDEX index_emails_generic_files_on_generic_file_id ON public.emails_generic_files USING btree (generic_file_id);\n\n\n-- public.emails_intellectual_objects definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_intellectual_objects (\n\tintellectual_object_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_intellectual_objects_on_email_id ON public.emails_intellectual_objects USING btree (email_id);\nCREATE INDEX index_emails_intellectual_objects_on_intellectual_object_id ON public.emails_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.emails_premis_events definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_premis_events (\n\tpremis_event_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_premis_events_on_email_id ON public.emails_premis_events USING btree (email_id);\nCREATE INDEX index_emails_premis_events_on_premis_event_id ON public.emails_premis_events USING btree (premis_event_id);\n\n\n-- public.emails_work_items definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_work_items (\n\twork_item_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_work_items_on_email_id ON public.emails_work_items USING btree (email_id);\nCREATE INDEX index_emails_work_items_on_work_item_id ON public.emails_work_items USING btree (work_item_id);\n\n\n-- public.generic_files definition\nCREATE TABLE public.generic_files (\n\tid serial NOT NULL,\n\tfile_format varchar NULL,\n\t\"size\" int8 NULL,\n\tidentifier varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tlast_fixity_check timestamp NOT NULL DEFAULT '2000-01-01 00:00:00'::timestamp without time zone,\n\tinstitution_id int4 NOT NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tuuid varchar NOT NULL,\n\tCONSTRAINT generic_files_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_generic_files_on_created_at ON public.generic_files USING btree (created_at);\nCREATE UNIQUE INDEX index_generic_files_on_identifier ON public.generic_files USING btree (identifier);\nCREATE INDEX index_generic_files_on_institution_id ON public.generic_files USING btree (institution_id);\nCREATE INDEX index_generic_files_on_institution_id_and_state ON public.generic_files USING btree (institution_id, state);\nCREATE INDEX index_generic_files_on_institution_id_and_updated_at ON public.generic_files USING btree (institution_id, updated_at);\nCREATE INDEX index_generic_files_on_intellectual_object_id ON public.generic_files USING btree (intellectual_object_id);\nCREATE INDEX index_generic_files_on_updated_at ON public.generic_files USING btree (updated_at);\nCREATE UNIQUE INDEX index_generic_files_on_uuid ON public.generic_files USING btree (uuid);\nCREATE INDEX ix_gf_last_fixity_check ON public.generic_files USING btree (last_fixity_check);\n\n\n-- public.institutions definition\nCREATE TABLE public.institutions (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\tidentifier varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\t\"type\" varchar NULL,\n\tmember_institution_id int4 NULL,\n\tdeactivated_at timestamp NULL,\n\totp_enabled bool NULL,\n    enable_spot_restore bool not null default false,\n\treceiving_bucket varchar NOT NULL,\n\trestore_bucket varchar NOT NULL,\n\tCONSTRAINT institutions_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_institutions_on_name ON public.institutions USING btree (name);\n\n\n-- public.intellectual_objects definition\nCREATE TABLE public.intellectual_objects (\n\tid serial NOT NULL,\n\ttitle varchar NULL,\n\tdescription text NULL,\n\tidentifier varchar NULL,\n\talt_identifier varchar NULL,\n\t\"access\" varchar NULL,\n\tbag_name varchar NULL,\n\tinstitution_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tetag varchar NULL,\n\tbag_group_identifier varchar NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tbagit_profile_identifier varchar NULL,\n\tsource_organization varchar NULL,\n\tinternal_sender_identifier varchar NULL,\n\tinternal_sender_description text NULL,\n\tCONSTRAINT intellectual_objects_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_intellectual_objects_on_bag_name ON public.intellectual_objects USING btree (bag_name);\nCREATE INDEX index_intellectual_objects_on_created_at ON public.intellectual_objects USING btree (created_at);\nCREATE UNIQUE INDEX index_intellectual_objects_on_identifier ON public.intellectual_objects USING btree (identifier);\nCREATE INDEX index_intellectual_objects_on_institution_id ON public.intellectual_objects USING btree (institution_id);\nCREATE INDEX index_intellectual_objects_on_updated_at ON public.intellectual_objects USING btree (updated_at);\n\n\n-- public.old_passwords definition\n--\n-- This is a legacy table. We can get rid of this if we\n-- abandon mandatory password changes. Wait until that's\n-- decided.\n--\nCREATE TABLE public.old_passwords (\n\tid bigserial NOT NULL,\n\tencrypted_password varchar NOT NULL,\n\tpassword_salt varchar NULL,\n\tpassword_archivable_type varchar NOT NULL,\n\tpassword_archivable_id int4 NOT NULL,\n\tcreated_at timestamp NULL,\n\tCONSTRAINT old_passwords_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_password_archivable ON public.old_passwords USING btree (password_archivable_type, password_archivable_id);\n\n\n-- public.premis_events definition\nCREATE TABLE public.premis_events (\n\tid serial NOT NULL,\n\tidentifier varchar NULL,\n\tevent_type varchar NULL,\n\tdate_time varchar NULL,\n\toutcome_detail varchar NULL,\n\tdetail varchar NULL,\n\toutcome_information varchar NULL,\n\t\"object\" varchar NULL,\n\tagent varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\toutcome varchar NULL,\n\tinstitution_id int4 NULL,\n\told_uuid varchar NULL,\n\tCONSTRAINT premis_events_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_premis_events_date_time_desc ON public.premis_events USING btree (date_time DESC);\nCREATE INDEX index_premis_events_on_event_type ON public.premis_events USING btree (event_type);\nCREATE INDEX index_premis_events_on_event_type_and_outcome ON public.premis_events USING btree (event_type, outcome);\nCREATE INDEX index_premis_events_on_generic_file_id ON public.premis_events USING btree (generic_file_id);\nCREATE UNIQUE INDEX index_premis_events_on_identifier ON public.premis_events USING btree (identifier);\nCREATE INDEX index_premis_events_on_institution_id ON public.premis_events USING btree (institution_id);\nCREATE INDEX index_premis_events_on_intellectual_object_id ON public.premis_events USING btree (intellectual_object_id);\nCREATE INDEX index_premis_events_on_outcome ON public.premis_events USING btree (outcome);\n\n\n-- public.schema_migrations definition\n--\n-- This is a legacy table used by ActiveRecord\n-- to track which migrations have been applied.\n--\n-- We can delete this when production is stable.\n--\nCREATE TABLE public.schema_migrations (\n\t\"version\" varchar NOT NULL,\n\tCONSTRAINT schema_migrations_pkey PRIMARY KEY (version)\n);\n\n\n-- public.snapshots definition\n--\n-- This table stores point-in-time snapshots\n-- of how much data each depositor has in the repo.\n--\n-- We may eventually delete this, but keep for now.\n--\nCREATE TABLE public.snapshots (\n\tid bigserial NOT NULL,\n\taudit_date timestamp NULL,\n\tinstitution_id int4 NULL,\n\tapt_bytes int8 NULL,\n\t\"cost\" numeric NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tsnapshot_type varchar NULL,\n\tcs_bytes int8 NULL,\n\tgo_bytes int8 NULL,\n\tCONSTRAINT snapshots_pkey PRIMARY KEY (id)\n);\n\n\n-- public.usage_samples definition\n--\n-- No idea what this was supposed to be, but the\n-- table never had any data in the production DB.\n-- Consider deleting this after we're sure it's not used.\n--\nCREATE TABLE public.usage_samples (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id varchar NULL,\n\t\"data\" text NULL,\n\tCONSTRAINT usage_samples_pkey PRIMARY KEY (id)\n);\n\n\n-- public.work_items definition\nCREATE TABLE public.work_items (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\t\"name\" varchar NULL,\n\tetag varchar NULL,\n\tbucket varchar NULL,\n\t\"user\" varchar NULL,\n\tnote text NULL,\n\t\"action\" varchar NULL,\n\tstage varchar NULL,\n\tstatus varchar NULL,\n\toutcome text NULL,\n\tbag_date timestamp NULL,\n\tdate_processed timestamp NULL,\n\tretry bool NOT NULL DEFAULT false,\n\tnode varchar(255) NULL,\n\tpid int4 NULL DEFAULT 0,\n\tneeds_admin_review bool NOT NULL DEFAULT false,\n\tinstitution_id int4 NULL,\n\tqueued_at timestamp NULL,\n\t\"size\" int8 NULL,\n\tstage_started_at timestamp NULL,\n\taptrust_approver varchar NULL,\n\tinst_approver varchar NULL,\n\tCONSTRAINT work_items_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_work_items_on_action ON public.work_items USING btree (action);\nCREATE INDEX index_work_items_on_date ON public.work_items USING btree (date_processed);\nCREATE INDEX index_work_items_on_etag_and_name ON public.work_items USING btree (etag, name);\nCREATE INDEX index_work_items_on_generic_file_id ON public.work_items USING btree (generic_file_id);\nCREATE INDEX index_work_items_on_institution_id ON public.work_items USING btree (institution_id);\nCREATE INDEX index_work_items_on_institution_id_and_date ON public.work_items USING btree (institution_id, date_processed);\nCREATE INDEX index_work_items_on_intellectual_object_id ON public.work_items USING btree (intellectual_object_id);\nCREATE INDEX index_work_items_on_stage ON public.work_items USING btree (stage);\nCREATE INDEX index_work_items_on_status ON public.work_items USING btree (status);\n\n\n-- public.checksums definition\nCREATE TABLE public.checksums (\n\tid serial NOT NULL,\n\talgorithm varchar NULL,\n\tdatetime timestamp NULL,\n\tdigest varchar NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT checksums_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_89bb0866e7 FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_checksums_on_generic_file_id ON public.checksums USING btree (generic_file_id);\n\n\n-- public.storage_records definition\nCREATE TABLE public.storage_records (\n\tid bigserial NOT NULL,\n\tgeneric_file_id int4 NULL,\n\turl varchar NULL,\n\tCONSTRAINT storage_records_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_a126ea6adc FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\n\n-- public.users definition\nCREATE TABLE public.users (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\temail varchar NULL,\n\tphone_number varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tencrypted_password varchar NOT NULL DEFAULT ''::character varying,\n\treset_password_token varchar NULL,\n\treset_password_sent_at timestamp NULL,\n\tremember_created_at timestamp NULL,\n\tsign_in_count int4 NOT NULL DEFAULT 0,\n\tcurrent_sign_in_at timestamp NULL,\n\tlast_sign_in_at timestamp NULL,\n\tcurrent_sign_in_ip varchar NULL,\n\tlast_sign_in_ip varchar NULL,\n\tinstitution_id int4 NULL,\n\tencrypted_api_secret_key text NULL,\n\tpassword_changed_at timestamp NULL,\n\tencrypted_otp_secret varchar NULL,\n\tencrypted_otp_secret_iv varchar NULL,\n\tencrypted_otp_secret_salt varchar NULL,\n    encrypted_otp_sent_at timestamp NULL,\n\tconsumed_timestep int4 NULL,\n\totp_required_for_login bool NULL,\n\tdeactivated_at timestamp NULL,\n\tenabled_two_factor bool NULL DEFAULT false,\n\tconfirmed_two_factor bool NULL DEFAULT false,\n\totp_backup_codes _varchar NULL,\n\tauthy_id varchar NULL,\n\tlast_sign_in_with_authy timestamp NULL,\n\tauthy_status varchar NULL,\n\temail_verified bool NULL DEFAULT false,\n\tinitial_password_updated bool NULL DEFAULT false,\n\tforce_password_update bool NULL DEFAULT false,\n\taccount_confirmed bool NULL DEFAULT true,\n\tgrace_period timestamp NULL,\n    awaiting_second_factor boolean not null default false,\n    \"role\" varchar(50) NOT NULL default 'none',\n\tCONSTRAINT users_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_7fcf39ca13 FOREIGN KEY (institution_id) REFERENCES institutions(id)\n);\nCREATE INDEX index_users_on_authy_id ON public.users USING btree (authy_id);\nCREATE UNIQUE INDEX index_users_on_email ON public.users USING btree (email);\nCREATE INDEX index_users_on_institution_id ON public.users USING btree (institution_id);\nCREATE INDEX index_users_on_password_changed_at ON public.users USING btree (password_changed_at);\nCREATE UNIQUE INDEX index_users_on_reset_password_token ON public.users USING btree (reset_password_token);\n\n-------------------------------------------------------------------------------\n-- New tables that were not part of Pharos.\n-- alerts              + join tables\n-- deletion_requests   + join tables\n-------------------------------------------------------------------------------\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index index_alerts_institution_id ON public.alerts (institution_id);\ncreate index index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table public.alerts_users (\n    alert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table public.alerts_work_items (\n    alert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index index_storage_options_name ON public.storage_options (\"name\");\n\n\n\n-------------------------------------------------------------------------------\n-- Functions\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: -- migrations.sql\n--\n-- This file contains ALL alterations that should be applied to the\n-- existing Pharos DB schema (as it exists in the feature/storage-option\n-- branch) to make it match schema.sql.\n--\n-- All operations in this file must be idempotent, so we can run it\n-- any number of times and always know that it will leave the DB in\n-- consistent and known state that matches schema.sql.\n--\n-- NOTE: When migrating old Pharos DB, we will also need to create the\n--       views in the schema.sql file.\n-------------------------------------------------------------------------------\n\n---------------------------------------------------------\n-- START OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n---------------------------------------------------------\n\n-- Drop legacy table from Pharos DB.\ndrop table if exists work_item_states;\n\n-- Create the storage_records table, with indexes.\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\tcreate table public.storage_records (\n    \tid bigserial not null,\n    \tgeneric_file_id int8 not null,\n    \turl varchar not null,\n    \tconstraint storage_records_pkey primary key (id),\n    \tconstraint fk_rails_a126ea6adc foreign key (generic_file_id) references generic_files(id)\n\t);\n\tcreate index if not exists index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\tcreate unique index if not exists index_storage_records_on_url ON public.storage_records(\"url\");\n  end if;\nend\n$$;\n\n-- Add column generic_files.uuid.\nalter table generic_files add column if not exists \"uuid\" varchar;\n\n-- Copy uuid from uri into uuid field.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\tupdate generic_files set uuid=split_part(uri, '/', 5);\n  end if;\nend\n$$;\n\n-- Change generic_files.uuid to not null and add a unique index.\ndo\n$$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uuid' and is_nullable = 'YES') then\n  \talter table generic_files alter column \"uuid\" set not null;\n\tcreate unique index if not exists index_generic_files_on_uuid on generic_files(uuid);\n  end if;\nend\n$$;\n\n-- Copy generic_files.uri from storage_records.url.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\n  \t  -- Get the intial URL. All items, regadless of storage option, have one URL.\n      -- The inner if statement makes sure this hasn't already run. (Prevents duplicate inserts.)\n\t  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\t    if not exists (select 1 from storage_records where length(url) > 0) then\n\t\t  insert into storage_records (generic_file_id, url) select id, uri from generic_files gf order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- For items in standard storage, we need to add a Glacier URL. URLs differ per environment, so we check.\n\t  -- In each case, the inner if statement tries to ensure that these inserts have not already run.\n\n\t  -- Production\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.preservation.storage/', '/aptrust.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Test/Demo\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.test.preservation.oregon/%') then\n\t      insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.test.preservation/', '/aptrust.test.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Staging\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.staging.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.staging.preservation/', '/aptrust.staging.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n  end if;\nend\n$$;\n\n-- Now remove generic_files.uri, since the data is now in storage_records\nalter table generic_files drop column if exists uri;\n\n-------------------------------------------------------\n-- END OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n-------------------------------------------------------\n\n-- The premis_events.date_time column is varchar, but it should be\n-- timestamp. We need to change it. This change may fail if 1) there\n-- are invalid or badly formatted dates in the date_time column, or\n-- 2) if any views referencing premis_events.date_time already exist.\n-- Drop premis_events_view if necessary and recreate it after this alteration.\n--\n-- This change may take a long time, as premis_events has over 100M rows.\ndo\n$$\nbegin\n\tif exists(\n\t\tselect 1 from information_schema.columns\n\t\twhere table_schema = 'public'\n\t\tand table_name = 'premis_events'\n\t\tand column_name = 'date_time'\n\t\tand data_type = 'character varying')\n\tthen\n\t\talter table premis_events alter column date_time type timestamp\n\t\tusing TO_TIMESTAMP(date_time, 'YYYY-MM-DDTHH24:MI:SS');\n\tend if;\nend\n$$;\n\n-- We need to fix the user role structure. Pharos allows a user to have\n-- multiple roles at a single institution, though our business rules disallow\n-- that, and no user has ever had more than one role. To simplify the DB\n-- and our queries, we need to do the following:\n--\n-- 1. Create a role column in the users table.\n-- 2. Populate that column with the value with each user's role from\n--    user -> roles_user -> roles.\n-- 3. Drop the roles_users table.\n-- 4. Drop the roles table.\n\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='role') then\n \talter table users add column \"role\" varchar(50) not null default 'none';\n \tupdate users u set \"role\" = coalesce((select r.name from \"roles\" r inner join roles_users ru on ru.role_id = r.id where ru.user_id = u.id), 'none');\n    drop table if exists roles_users;\n    drop table if exists roles;\n  end if;\nend\n$$;\n\n-- Add awaiting_second_factor\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='awaiting_second_factor') then\n \talter table users add column \"awaiting_second_factor\" boolean not null default false;\n  end if;\nend\n$$;\n\n-- Add encrypted_otp_sent_at\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='encrypted_otp_sent_at') then\n \talter table users add column \"encrypted_otp_sent_at\" timestamp null;\n  end if;\nend\n$$;\n\n\n-- The ingest_state columns were part of a proposed architecture we never\n-- implemented. They have never been used, and we don't need them.\nalter table intellectual_objects drop column if exists ingest_state;\nalter table generic_files drop column if exists ingest_state;\n\n\n-- intellectual_objects.bag_group_identifier is almost always empty.\n-- Make this column nullable to ease inserts.\nalter table intellectual_objects alter column bag_group_identifier drop not null;\n\n\n-- Remove object_identifier and generic_file_identifier from work_items.\n-- We can use a view to join the files & objects tables, avoiding the\n-- duplicate data.\nalter table work_items drop column if exists object_identifier;\nalter table work_items drop column if exists generic_file_identifier;\n\n-- The work_items.date column actually refers to the datetime on which\n-- the item was last processed by one of our Go workers. The name \"date\"\n-- is too vague and ambiguous, so let's call it what it is.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns\n    where table_schema='public' AND table_name='work_items' AND column_name='date') then\n    alter table work_items rename column \"date\" to \"date_processed\";\n  end if;\nend\n$$;\n\n-- Update the indexes on work_items to reflect the change from date to\n-- date_processed.\n\ndrop index if exists index_work_items_on_date;\ndrop index if exists index_work_items_on_institution_id_and_date;\n\ncreate index if not exists index_work_items_on_date_processed on work_items(date_processed);\ncreate index if not exists index_work_items_on_inst_id_and_date_processed on work_items(institution_id, date_processed);\n\n-- These columns are unnecessary in the premis_events table.\n-- We can get them by joining other tables in a view.\n-- This will have a large impact on storage space, since these\n-- two fields together average ~100 bytes per record, and as of\n-- Jan. 2021, we have around 120M records. Dropping these columns\n-- also drops the indexes on these two columns, which are huge and\n-- are rarely used.\nalter table premis_events drop column if exists intellectual_object_identifier;\nalter table premis_events drop column if exists generic_file_identifier;\n\n-- Get rid of useless indexes. We can add these back if they actually turn\n-- out to be useful.\n--\n-- generic_files\ndrop index if exists index_files_on_inst_state_and_format;\ndrop index if exists index_files_on_inst_state_and_updated;\ndrop index if exists index_generic_files_on_file_format;\ndrop index if exists index_generic_files_on_file_format_and_state;\ndrop index if exists index_generic_files_on_institution_id_and_size_and_state;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_file_format;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_state;\ndrop index if exists index_generic_files_on_size;\ndrop index if exists index_generic_files_on_size_and_state;\ndrop index if exists index_generic_files_on_state;\ndrop index if exists index_generic_files_on_state_and_updated_at;\n\n-- intellectual_objects\ndrop index if exists index_intellectual_objects_on_access;\ndrop index if exists index_intellectual_objects_on_institution_id_and_state;\ndrop index if exists index_intellectual_objects_on_state;\n\n-- premis_events\ndrop index if exists index_premis_events_on_generic_file_id_and_event_type;\ndrop index if exists index_premis_events_on_identifier_and_institution_id;\n\n-- institutions\ncreate unique index if not exists index_institutions_identifier on institutions using btree(identifier);\ncreate unique index if not exists index_institutions_receiving_bucket on institutions using btree(receiving_bucket);\ncreate unique index if not exists index_institutions_restore_bucket on institutions using btree(restore_bucket);\n\n-- Allow institutions to turn spot restoration tests on or off.\n-- Default is off.\nalter table institutions add column if not exists enable_spot_restore boolean not null default false;\n\n-- ********************************************************************\n--\n-- Add tables for alerts and deletions that did not exist in Pharos\n--\n-- ********************************************************************\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table if not exists public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index if not exists index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table if not exists public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index if not exists index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table if not exists public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index if not exists index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table if not exists public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index if not exists index_alerts_institution_id ON public.alerts (institution_id);\ncreate index if not exists index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table if not exists public.alerts_users (\n\talert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index if not exists index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index if not exists index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index if not exists index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table if not exists public.alerts_work_items (\n\talert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index if not exists index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index if not exists index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table if not exists public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index if not exists index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index if not exists index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table if not exists public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index if not exists index_storage_options_name ON public.storage_options (\"name\");\n\n-- In Pharos DB, many generic_file_ids in premis_events are set to zero when they should be null.\n-- Fix that here.\nupdate premis_events set generic_file_id = null where generic_file_id = 0;\n\n-- In Pharos, the Devise auth system leaves stale password reset data forever.\n-- We have to clear these values in Registry, or all users will be stuck in\n-- the \"please finish resetting your password\" loop forever. We have no idea\n-- what reset tokens Devise sent two years ago, so no one will be able to\n-- unlock their accounts.\nupdate users set reset_password_token = null, reset_password_sent_at = null;\n\n\n-------------------------------------------------------------------------------\n-- Functions\n--\n-- Fuctions are defined in schema.sql as well. Adding them to migrations\n-- ensures they'll be present in converted DB.\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: -------------------------------------------------------------------------------\n-- Views\n-------------------------------------------------------------------------------\n\n-- Create a view to pull in columns that used to be in the WorkItems table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view work_items_view as\nselect\n\twi.id,\n\twi.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\twi.intellectual_object_id,\n\tio.identifier as \"object_identifier\",\n\tio.alt_identifier,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\twi.generic_file_id,\n\tgf.identifier as \"generic_file_identifier\",\n\twi.\"name\",\n\twi.etag,\n\twi.bucket,\n\twi.\"user\",\n\twi.note,\n\twi.\"action\",\n\twi.stage,\n\twi.status,\n\twi.outcome,\n\twi.bag_date,\n\twi.date_processed,\n\twi.retry,\n\twi.node,\n\twi.pid,\n\twi.needs_admin_review,\n\twi.\"size\",\n\twi.queued_at,\n\twi.stage_started_at,\n\twi.aptrust_approver,\n\twi.inst_approver,\n\twi.created_at,\n\twi.updated_at\nfrom work_items wi\nleft join institutions i on wi.institution_id = i.id\nleft join intellectual_objects io on wi.intellectual_object_id = io.id\nleft join generic_files gf on wi.generic_file_id = gf.id;\n\n\n-- Create a view to pull in columns that used to be in the PremisEvents table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view premis_events_view as\nselect\n\tpe.id,\n\tpe.identifier,\n\tpe.institution_id,\n\ti.\"name\" as institution_name,\n\tpe.intellectual_object_id,\n\tio.identifier as intellectual_object_identifier,\n\tpe.generic_file_id,\n\tgf.identifier as generic_file_identifier,\n\tpe.event_type,\n\tpe.date_time,\n\tpe.detail,\n\tpe.outcome,\n\tpe.outcome_detail,\n\tpe.outcome_information,\n\tpe.\"object\",\n\tpe.agent,\n\tpe.created_at,\n\tpe.updated_at,\n\tpe.old_uuid\nfrom premis_events pe\nleft join institutions i on pe.institution_id = i.id\nleft join intellectual_objects io on pe.intellectual_object_id = io.id\nleft join generic_files gf on pe.generic_file_id = gf.id;\n\n\n-- users_view makes it easier to list and search on institution-related\n-- attributes for users.\ncreate or replace view users_view as\nselect\n\tu.id,\n\tu.\"name\",\n\tu.email,\n\tu.phone_number,\n\tu.created_at,\n\tu.updated_at,\n\tu.reset_password_sent_at,\n\tu.remember_created_at,\n\tu.sign_in_count,\n\tu.current_sign_in_at,\n\tu.last_sign_in_at,\n\tu.current_sign_in_ip,\n\tu.last_sign_in_ip,\n\tu.institution_id,\n\tu.password_changed_at,\n\tu.consumed_timestep,\n\tu.otp_required_for_login,\n\tu.deactivated_at,\n\tu.enabled_two_factor,\n\tu.confirmed_two_factor,\n\tu.authy_id,\n\tu.last_sign_in_with_authy,\n\tu.authy_status,\n\tu.email_verified,\n\tu.initial_password_updated,\n\tu.force_password_update,\n\tu.account_confirmed,\n\tu.grace_period,\n\tu.\"role\",\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.state as institution_state,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id,\n\ti2.\"name\" as member_institution_name,\n\ti2.identifier as member_institution_identifier,\n\ti2.state as member_institution_state,\n\ti.otp_enabled,\n\ti.receiving_bucket,\n\ti.restore_bucket\nfrom users u\nleft join institutions i on u.institution_id = i.id\nleft join institutions i2 on i.member_institution_id = i2.id;\n\n\n-- institutions_view shows an institution along with essential\n-- information about its parent, if it has a parent.\n\ncreate or replace view institutions_view as\nselect\n\ti.id,\n\ti.\"name\",\n\ti.identifier,\n\ti.state,\n\ti.\"type\",\n\ti.deactivated_at,\n\ti.otp_enabled,\n\ti.enable_spot_restore,\n\ti.receiving_bucket,\n\ti.restore_bucket,\n\ti.created_at,\n\ti.updated_at,\n\ti.member_institution_id as \"parent_id\",\n\tparent.\"name\" as \"parent_name\",\n\tparent.identifier as \"parent_identifier\",\n\tparent.state as \"parent_state\",\n\tparent.deactivated_at as \"parent_deactivated_at\"\nfrom institutions i\nleft join institutions parent on i.member_institution_id = parent.id;\n\n-- intellectual_objects_view\n\ncreate or replace view intellectual_objects_view as\nselect\n\tio.id,\n\tio.title,\n\tio.description,\n\tio.identifier,\n\tio.alt_identifier,\n\tio.access,\n\tio.bag_name,\n\tio.institution_id,\n\tio.state,\n\tio.etag,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\tio.internal_sender_description,\n\tio.created_at,\n\tio.updated_at,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id as institution_parent_id,\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"size\",\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_size\"\nfrom intellectual_objects io\nleft join institutions i on io.institution_id = i.id;\n\n-- deletion_requests_view\n\ncreate or replace view deletion_requests_view as\nselect dr.id,\n       dr.institution_id,\n       i.\"name\" as institution_name,\n       i.identifier as institution_identifier,\n       dr.requested_by_id,\n       req.\"name\" as requested_by_name,\n       req.email as requested_by_email,\n       dr.requested_at,\n       dr.confirmed_by_id,\n       conf.\"name\" as confirmed_by_name,\n       conf.email as confirmed_by_email,\n       dr.confirmed_at,\n       dr.cancelled_by_id,\n       can.\"name\" as cancelled_by_name,\n       can.email as cancelled_by_email,\n       dr.cancelled_at,\n       (select count(*) from deletion_requests_generic_files drgf where drgf.deletion_request_id = dr.id) as file_count,\n       (select count(*) from deletion_requests_intellectual_objects drio where drio.deletion_request_id = dr.id) as object_count,\n       dr.work_item_id,\n       wi.stage,\n       wi.status,\n       wi.date_processed,\n       wi.\"size\",\n       wi.note\nfrom deletion_requests dr\nleft join institutions i on dr.institution_id = i.id\nleft join users req on dr.requested_by_id = req.id\nleft join users conf on dr.confirmed_by_id = conf.id\nleft join users can on dr.confirmed_by_id = can.id\nleft join work_items wi on dr.work_item_id = wi.id;\n\n-- alerts view\n\ncreate or replace view alerts_view as\nselect\n\ta.id,\n\ta.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ta.\"type\",\n\ta.subject,\n\ta.\"content\",\n\ta.deletion_request_id,\n\ta.created_at,\n\tau.user_id,\n\tu.\"name\" as user_name,\n\tau.sent_at,\n\tau.read_at\nfrom alerts a\nleft join alerts_users au on a.id = au.alert_id\nleft join users u on au.user_id = u.id\nleft join institutions i on a.institution_id = i.id;\n\n-- storage_option_stats\ncreate or replace view storage_option_stats as\nwith stats as (\n\tselect\n\t\tsum(\"gf\".\"size\") as total_bytes,\n\t\tcount(*) as file_count,\n\t\tgf.institution_id,\n\t\tgf.storage_option\n\tfrom generic_files gf\n\twhere gf.state = 'A'\n\tgroup by rollup (gf.institution_id, gf.storage_option)\n\t)\nselect\n\ts.total_bytes,\n\ts.file_count,\n\ts.institution_id,\n\ts.storage_option,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier\nfrom stats s\nleft join institutions i on s.institution_id = i.id;\n\ncreate or replace view generic_files_view as\nselect\n\tgf.id,\n\tgf.file_format,\n\tgf.\"size\",\n\tgf.identifier,\n\tgf.intellectual_object_id,\n\tio.identifier as object_identifier,\n\tio.\"access\",\n\tgf.state,\n\tgf.last_fixity_check,\n\tgf.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\tgf.storage_option,\n\tgf.uuid,\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='md5' order by created_at desc limit 1) as \"md5\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha1' order by created_at desc limit 1) as \"sha1\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha256' order by created_at desc limit 1) as \"sha256\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha512' order by created_at desc limit 1) as \"sha512\",\n\tgf.created_at,\n\tgf.updated_at\nfrom generic_files gf\nleft join intellectual_objects io on io.id = gf.intellectual_object_id\nleft join institutions i on i.id = gf.institution_id;\n\n-- Checksums view\ncreate or replace view checksums_view as\nselect cs.id,\n       cs.algorithm,\n       cs.datetime,\n       cs.digest,\n       gf.state,\n       gf.identifier as \"generic_file_identifier\",\n       cs.generic_file_id,\n       gf.intellectual_object_id,\n       gf.institution_id,\n       cs.created_at,\n       cs.updated_at\nfrom checksums cs\nleft join generic_files gf on cs.generic_file_id = gf.id;\n\n\n---------------------------------------------------------------------------\n--\n-- Count Views\n--\n-- We create these views because count queries on large tables are slow\n-- in postgres. Even if a query can use an index to get a count, it still\n-- has to scan every row in the result set to see if that row is visible\n-- under postgres' mvcc rules. \n--\n-- If the count returns a million rows, postgres has to scan all million\n-- rows. The result is a query that can take 5-15 seconds. The \n-- premis_events table is the worst of the lot. It should surpass 200M\n-- rows by the end of 2022. We do not want to scan those rows every time\n-- someone hits the events page or the events API endpoint.\n--\n-- We run count queries all the time to manage paging in both the web UI\n-- and the API. For large counts, such as \"all events for an institution\",\n-- or \"all files for an institution\", we'll use the counts in the views\n-- below. \n--\n-- For smaller counts, such as \"all files for my institution created \n-- within the past week\", we'll suck it up and let postgres scan the \n-- smaller row sets.\n--\n-- These views will be refreshed every hour or so using an async go \n-- routine so they don't slow down web and API requests.\n--\n-- That means some large counts may be up to an hour out of date, but we\n-- can live with that tradeoff, since this will vastly speed up the loading\n-- of our most commonly hit web and API endpoints.\n--\n-- Note the function update_counts() below. It refreshes all of the count\n-- views.\n-- \n---------------------------------------------------------------------------\n\n-- premis_event_counts\ncreate materialized view if not exists premis_event_counts as\n\tselect institution_id, count(id) as row_count, event_type, outcome\n\tfrom premis_events group by cube(institution_id, event_type, outcome)\n\torder by institution_id, event_type, outcome;\n\n-- intellectual_object_counts\ncreate materialized view if not exists intellectual_object_counts as\n\tselect institution_id, count(id) as row_count, \"state\" \n\tfrom intellectual_objects group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- generic_file_counts\ncreate materialized view if not exists generic_file_counts as\n\tselect institution_id, count(id) as row_count, \"state\"\n\tfrom generic_files group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- work_item_counts\ncreate materialized view if not exists work_item_counts as\n\tselect institution_id, count(id) as row_count, \"action\"\n\tfrom work_items group by cube(institution_id, \"action\")\n\torder by institution_id, \"action\";\n\n-- \nCREATE OR REPLACE FUNCTION update_counts ()\n  RETURNS integer\nAS\n$BODY$\n  begin\n    refresh materialized view premis_event_counts;\n    refresh materialized view intellectual_object_counts;\n    refresh materialized view generic_file_counts;\n    refresh materialized view work_item_counts;    \n    return 1;\n  end;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"storage_options\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_options.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"institutions\" from '/Users/diamond/aptrust/registry/db/fixtures/institutions.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"users\" from '/Users/diamond/aptrust/registry/db/fixtures/users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"checksums\" from '/Users/diamond/aptrust/registry/db/fixtures/checksums.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"storage_records\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_records.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"deletion_requests\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"deletion_requests_generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"deletion_requests_intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"alerts\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"alerts_premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"alerts_users\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: copy \"alerts_work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_options', 'id'), MAX(id)) FROM \"storage_options\";"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('institutions', 'id'), MAX(id)) FROM \"institutions\";"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('users', 'id'), MAX(id)) FROM \"users\";"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('intellectual_objects', 'id'), MAX(id)) FROM \"intellectual_objects\";"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('generic_files', 'id'), MAX(id)) FROM \"generic_files\";"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('checksums', 'id'), MAX(id)) FROM \"checksums\";"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_records', 'id'), MAX(id)) FROM \"storage_records\";"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('premis_events', 'id'), MAX(id)) FROM \"premis_events\";"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('work_items', 'id'), MAX(id)) FROM \"work_items\";"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('deletion_requests', 'id'), MAX(id)) FROM \"deletion_requests\";"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('alerts', 'id'), MAX(id)) FROM \"alerts\";"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: select update_counts();"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","time":"2022-06-22T13:30:51-04:00","message":"[GenericFileInitRestore] Got restore request for GenericFile 2"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\", \"intellectual_object\".\"id\" AS \"intellectual_object__id\", \"intellectual_object\".\"created_at\" AS \"intellectual_object__created_at\", \"intellectual_object\".\"updated_at\" AS \"intellectual_object__updated_at\", \"intellectual_object\".\"title\" AS \"intellectual_object__title\", \"intellectual_object\".\"description\" AS \"intellectual_object__description\", \"intellectual_object\".\"identifier\" AS \"intellectual_object__identifier\", \"intellectual_object\".\"alt_identifier\" AS \"intellectual_object__alt_identifier\", \"intellectual_object\".\"access\" AS \"intellectual_object__access\", \"intellectual_object\".\"bag_name\" AS \"intellectual_object__bag_name\", \"intellectual_object\".\"institution_id\" AS \"intellectual_object__institution_id\", \"intellectual_object\".\"state\" AS \"intellectual_object__state\", \"intellectual_object\".\"etag\" AS \"intellectual_object__etag\", \"intellectual_object\".\"bag_group_identifier\" AS \"intellectual_object__bag_group_identifier\", \"intellectual_object\".\"storage_option\" AS \"intellectual_object__storage_option\", \"intellectual_object\".\"bagit_profile_identifier\" AS \"intellectual_object__bagit_profile_identifier\", \"intellectual_object\".\"source_organization\" AS \"intellectual_object__source_organization\", \"intellectual_object\".\"internal_sender_identifier\" AS \"intellectual_object__internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" AS \"intellectual_object__internal_sender_description\" FROM \"generic_files\" AS \"generic_file\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"generic_file\".\"institution_id\" LEFT JOIN \"intellectual_objects\" AS \"intellectual_object\" ON \"intellectual_object\".\"id\" = \"generic_file\".\"intellectual_object_id\" WHERE (generic_file.id = 2) ORDER BY \"generic_file\".\"id\" LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE (\"premis_event\".\"generic_file_id\" IN (2)) ORDER BY \"premis_event\".\"date_time\" desc"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (2)) ORDER BY \"checksum\".\"created_at\" desc"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (2))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((generic_file_id = 2) AND (status NOT IN ('Cancelled', 'Failed', 'Success'))) ORDER BY \"date_processed\" desc"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"intellectual_objects\" AS \"intellectual_object\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"intellectual_object\".\"institution_id\" WHERE ((\"intellectual_object\".\"id\" = 1))"}
{"level":"info","time":"2022-06-22T13:30:51-04:00","message":"[GenericFileInitRestore] Found Object 2 for GenericFile 1"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((intellectual_object_id = 1) AND (status = 'Success') AND (stage IN ('Record', 'Cleanup'))) ORDER BY \"date_processed\" desc LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: INSERT INTO \"work_items\" (\"id\", \"created_at\", \"updated_at\", \"name\", \"etag\", \"institution_id\", \"intellectual_object_id\", \"generic_file_id\", \"bucket\", \"user\", \"note\", \"action\", \"stage\", \"status\", \"outcome\", \"bag_date\", \"date_processed\", \"retry\", \"node\", \"pid\", \"needs_admin_review\", \"queued_at\", \"size\", \"stage_started_at\", \"aptrust_approver\", \"inst_approver\") VALUES (DEFAULT, '2022-06-22 17:30:51.500608+00:00:00', '2022-06-22 17:30:51.50061+00:00:00', 'photos.tar', '1f594a4e5bb944e59c74aefe781a3726', 2, 1, 2, 'aptrust.receiving.institution1.edu', 'user@inst1.edu', 'Not started', 'Restore File', 'Requested', 'Pending', 'Not started', '2016-08-24 10:04:06+00:00:00', '2022-06-22 17:30:51.500608+00:00:00', TRUE, DEFAULT, DEFAULT, FALSE, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING \"id\", \"node\", \"pid\", \"queued_at\", \"size\", \"stage_started_at\", \"aptrust_approver\", \"inst_approver\""}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:30:51-04:00","message":"[GenericFileInitRestore] Created restoration WorkItem 33 for GenericFile 2"}
{"level":"info","time":"2022-06-22T13:30:51-04:00","message":"Enqueue: http://localhost:4151/pub?topic=restore_file"}
{"level":"info","time":"2022-06-22T13:30:51-04:00","message":"NSQ response from http://localhost:4151/pub?topic=restore_file: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:51-04:00","message":"[GenericFileInitRestore] Queued WorkItem 33 in topic restore_file"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: UPDATE \"work_items\" AS \"work_item\" SET \"created_at\" = '2022-06-22 17:30:51.500608+00:00:00', \"updated_at\" = '2022-06-22 17:30:51.503768+00:00:00', \"name\" = 'photos.tar', \"etag\" = '1f594a4e5bb944e59c74aefe781a3726', \"institution_id\" = 2, \"intellectual_object_id\" = 1, \"generic_file_id\" = 2, \"bucket\" = 'aptrust.receiving.institution1.edu', \"user\" = 'user@inst1.edu', \"note\" = 'Not started', \"action\" = 'Restore File', \"stage\" = 'Requested', \"status\" = 'Pending', \"outcome\" = 'Not started', \"bag_date\" = '2016-08-24 10:04:06+00:00:00', \"date_processed\" = '2022-06-22 17:30:51.500608+00:00:00', \"retry\" = TRUE, \"node\" = NULL, \"pid\" = NULL, \"needs_admin_review\" = FALSE, \"queued_at\" = '2022-06-22 17:30:51.503768+00:00:00', \"size\" = NULL, \"stage_started_at\" = NULL, \"aptrust_approver\" = NULL, \"inst_approver\" = NULL WHERE \"work_item\".\"id\" = 33"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:30:51-04:00","message":"[GenericFileInitRestore] Marked WorkItem 33 as queued"}
{"level":"info","status":302,"method":"POST","path":"/files/init_restore/2","ip":"","latency":44.728817,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((\"intellectual_object_view\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE (intellectual_object_id = 1 and state = 'A') LIMIT 20"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (1, 2, 3))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (1, 2, 3)) ORDER BY \"datetime\" desc, \"algorithm\" asc"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT count(*) FROM \"generic_files\" AS \"generic_file\" WHERE (intellectual_object_id = 1 and state = 'A')"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE ((intellectual_object_id = 1) AND (generic_file_id is null)) ORDER BY \"created_at\" desc LIMIT 5"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT count(*) FROM \"premis_events\" AS \"premis_event\" WHERE (intellectual_object_id = 1 and generic_file_id is null)"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: \n    select\n        sum(\"size\") as \"total_bytes\",\n        (sum(\"size\") / 1073741824) as \"total_gb\",\n        (sum(\"size\") / 1099511627776) as \"total_tb\",\n        count(*) as file_count,\n        coalesce(file_format, 'Total') as \"file_format\"\n        from generic_files\n        where (2 = 0 or institution_id = 2)\n        and   (1 = 0 or intellectual_object_id = 1)\n        and   (state = 'A')\n        group by rollup(file_format)\n        order by file_format\n"}
{"level":"info","status":200,"method":"GET","path":"/objects/show/1","ip":"","latency":40.669795,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((action = 'Restore File') AND (generic_file_id = 2)) LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 18)"}
{"level":"error","time":"2022-06-22T13:30:51-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileInitRestore, ResourceType: GenericFile, ResourceID: 18, InstID: 3, Gin Path: /files/init_restore/:id, Request Path: /files/init_restore/18, Permission: FileRestore, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRoute - NO - /files/init_restore/18"}
{"level":"warn","status":403,"method":"POST","path":"/files/init_restore/18","ip":"","latency":16.75568,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"generic_files\" AS \"generic_file\" WHERE (id = 18)"}
{"level":"error","time":"2022-06-22T13:30:51-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.GenericFileInitRestore, ResourceType: GenericFile, ResourceID: 18, InstID: 3, Gin Path: /files/init_restore/:id, Request Path: /files/init_restore/18, Permission: FileRestore, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRoute - NO - /files/init_restore/18"}
{"level":"warn","status":403,"method":"POST","path":"/files/init_restore/18","ip":"","latency":20.778985,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((id = 2))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((parent_id = 2)) ORDER BY \"name\" asc"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user_view\".\"id\", \"user_view\".\"name\", \"user_view\".\"email\", \"user_view\".\"phone_number\", \"user_view\".\"created_at\", \"user_view\".\"updated_at\", \"user_view\".\"reset_password_sent_at\", \"user_view\".\"remember_created_at\", \"user_view\".\"sign_in_count\", \"user_view\".\"current_sign_in_at\", \"user_view\".\"last_sign_in_at\", \"user_view\".\"current_sign_in_ip\", \"user_view\".\"last_sign_in_ip\", \"user_view\".\"institution_id\", \"user_view\".\"password_changed_at\", \"user_view\".\"consumed_timestep\", \"user_view\".\"otp_required_for_login\", \"user_view\".\"deactivated_at\", \"user_view\".\"enabled_two_factor\", \"user_view\".\"confirmed_two_factor\", \"user_view\".\"authy_id\", \"user_view\".\"last_sign_in_with_authy\", \"user_view\".\"authy_status\", \"user_view\".\"email_verified\", \"user_view\".\"initial_password_updated\", \"user_view\".\"force_password_update\", \"user_view\".\"grace_period\", \"user_view\".\"role\", \"user_view\".\"institution_name\", \"user_view\".\"institution_identifier\", \"user_view\".\"institution_state\", \"user_view\".\"institution_type\", \"user_view\".\"member_institution_id\", \"user_view\".\"member_institution_name\", \"user_view\".\"member_institution_identifier\", \"user_view\".\"member_institution_state\", \"user_view\".\"otp_enabled\", \"user_view\".\"receiving_bucket\", \"user_view\".\"restore_bucket\" FROM \"users_view\" AS \"user_view\" WHERE ((institution_id = 2) AND (deactivated_at is null)) ORDER BY \"name\" asc"}
{"level":"info","status":200,"method":"GET","path":"/institutions/show/2","ip":"","latency":25.732382,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((id = 2))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((parent_id = 2)) ORDER BY \"name\" asc"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user_view\".\"id\", \"user_view\".\"name\", \"user_view\".\"email\", \"user_view\".\"phone_number\", \"user_view\".\"created_at\", \"user_view\".\"updated_at\", \"user_view\".\"reset_password_sent_at\", \"user_view\".\"remember_created_at\", \"user_view\".\"sign_in_count\", \"user_view\".\"current_sign_in_at\", \"user_view\".\"last_sign_in_at\", \"user_view\".\"current_sign_in_ip\", \"user_view\".\"last_sign_in_ip\", \"user_view\".\"institution_id\", \"user_view\".\"password_changed_at\", \"user_view\".\"consumed_timestep\", \"user_view\".\"otp_required_for_login\", \"user_view\".\"deactivated_at\", \"user_view\".\"enabled_two_factor\", \"user_view\".\"confirmed_two_factor\", \"user_view\".\"authy_id\", \"user_view\".\"last_sign_in_with_authy\", \"user_view\".\"authy_status\", \"user_view\".\"email_verified\", \"user_view\".\"initial_password_updated\", \"user_view\".\"force_password_update\", \"user_view\".\"grace_period\", \"user_view\".\"role\", \"user_view\".\"institution_name\", \"user_view\".\"institution_identifier\", \"user_view\".\"institution_state\", \"user_view\".\"institution_type\", \"user_view\".\"member_institution_id\", \"user_view\".\"member_institution_name\", \"user_view\".\"member_institution_identifier\", \"user_view\".\"member_institution_state\", \"user_view\".\"otp_enabled\", \"user_view\".\"receiving_bucket\", \"user_view\".\"restore_bucket\" FROM \"users_view\" AS \"user_view\" WHERE ((institution_id = 2) AND (deactivated_at is null)) ORDER BY \"name\" asc"}
{"level":"info","status":200,"method":"GET","path":"/institutions/show/2","ip":"","latency":25.649289,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((id = 2))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((parent_id = 2)) ORDER BY \"name\" asc"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user_view\".\"id\", \"user_view\".\"name\", \"user_view\".\"email\", \"user_view\".\"phone_number\", \"user_view\".\"created_at\", \"user_view\".\"updated_at\", \"user_view\".\"reset_password_sent_at\", \"user_view\".\"remember_created_at\", \"user_view\".\"sign_in_count\", \"user_view\".\"current_sign_in_at\", \"user_view\".\"last_sign_in_at\", \"user_view\".\"current_sign_in_ip\", \"user_view\".\"last_sign_in_ip\", \"user_view\".\"institution_id\", \"user_view\".\"password_changed_at\", \"user_view\".\"consumed_timestep\", \"user_view\".\"otp_required_for_login\", \"user_view\".\"deactivated_at\", \"user_view\".\"enabled_two_factor\", \"user_view\".\"confirmed_two_factor\", \"user_view\".\"authy_id\", \"user_view\".\"last_sign_in_with_authy\", \"user_view\".\"authy_status\", \"user_view\".\"email_verified\", \"user_view\".\"initial_password_updated\", \"user_view\".\"force_password_update\", \"user_view\".\"grace_period\", \"user_view\".\"role\", \"user_view\".\"institution_name\", \"user_view\".\"institution_identifier\", \"user_view\".\"institution_state\", \"user_view\".\"institution_type\", \"user_view\".\"member_institution_id\", \"user_view\".\"member_institution_name\", \"user_view\".\"member_institution_identifier\", \"user_view\".\"member_institution_state\", \"user_view\".\"otp_enabled\", \"user_view\".\"receiving_bucket\", \"user_view\".\"restore_bucket\" FROM \"users_view\" AS \"user_view\" WHERE ((institution_id = 2) AND (deactivated_at is null)) ORDER BY \"name\" asc"}
{"level":"info","status":200,"method":"GET","path":"/institutions/show/2","ip":"","latency":18.554324,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((id = 3))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((parent_id = 3)) ORDER BY \"name\" asc"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user_view\".\"id\", \"user_view\".\"name\", \"user_view\".\"email\", \"user_view\".\"phone_number\", \"user_view\".\"created_at\", \"user_view\".\"updated_at\", \"user_view\".\"reset_password_sent_at\", \"user_view\".\"remember_created_at\", \"user_view\".\"sign_in_count\", \"user_view\".\"current_sign_in_at\", \"user_view\".\"last_sign_in_at\", \"user_view\".\"current_sign_in_ip\", \"user_view\".\"last_sign_in_ip\", \"user_view\".\"institution_id\", \"user_view\".\"password_changed_at\", \"user_view\".\"consumed_timestep\", \"user_view\".\"otp_required_for_login\", \"user_view\".\"deactivated_at\", \"user_view\".\"enabled_two_factor\", \"user_view\".\"confirmed_two_factor\", \"user_view\".\"authy_id\", \"user_view\".\"last_sign_in_with_authy\", \"user_view\".\"authy_status\", \"user_view\".\"email_verified\", \"user_view\".\"initial_password_updated\", \"user_view\".\"force_password_update\", \"user_view\".\"grace_period\", \"user_view\".\"role\", \"user_view\".\"institution_name\", \"user_view\".\"institution_identifier\", \"user_view\".\"institution_state\", \"user_view\".\"institution_type\", \"user_view\".\"member_institution_id\", \"user_view\".\"member_institution_name\", \"user_view\".\"member_institution_identifier\", \"user_view\".\"member_institution_state\", \"user_view\".\"otp_enabled\", \"user_view\".\"receiving_bucket\", \"user_view\".\"restore_bucket\" FROM \"users_view\" AS \"user_view\" WHERE ((institution_id = 3) AND (deactivated_at is null)) ORDER BY \"name\" asc"}
{"level":"info","status":200,"method":"GET","path":"/institutions/show/3","ip":"","latency":21.411007,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:30:51-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionShow, ResourceType: Institution, ResourceID: 3, InstID: 3, Gin Path: /institutions/show/:id, Request Path: /institutions/show/3, Permission: InstitutionRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRoute - NO - /institutions/show/3"}
{"level":"warn","status":403,"method":"GET","path":"/institutions/show/3","ip":"","latency":18.354709,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:30:51-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionShow, ResourceType: Institution, ResourceID: 3, InstID: 3, Gin Path: /institutions/show/:id, Request Path: /institutions/show/3, Permission: InstitutionRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRoute - NO - /institutions/show/3"}
{"level":"warn","status":403,"method":"GET","path":"/institutions/show/3","ip":"","latency":16.571108,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" WHERE ((type = 'MemberInstitution')) ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/institutions/new","ip":"","latency":22.241892,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:30:51-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionNew, ResourceType: Institution, ResourceID: 0, InstID: 2, Gin Path: /institutions/new, Request Path: /institutions/new, Permission: InstitutionCreate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRoute - NO - /institutions/new"}
{"level":"warn","status":403,"method":"GET","path":"/institutions/new","ip":"","latency":17.474855,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:30:51-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionNew, ResourceType: Institution, ResourceID: 0, InstID: 2, Gin Path: /institutions/new, Request Path: /institutions/new, Permission: InstitutionCreate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRoute - NO - /institutions/new"}
{"level":"warn","status":403,"method":"GET","path":"/institutions/new","ip":"","latency":16.819798,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:30:51-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionCreate, ResourceType: Institution, ResourceID: 0, InstID: 2, Gin Path: /institutions/new, Request Path: /institutions/new, Permission: InstitutionCreate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRoute - NO - /institutions/new"}
{"level":"warn","status":403,"method":"POST","path":"/institutions/new","ip":"","latency":20.154689,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:30:51-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionCreate, ResourceType: Institution, ResourceID: 0, InstID: 2, Gin Path: /institutions/new, Request Path: /institutions/new, Permission: InstitutionCreate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRoute - NO - /institutions/new"}
{"level":"warn","status":403,"method":"POST","path":"/institutions/new","ip":"","latency":18.521444,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" WHERE ((type = 'MemberInstitution')) ORDER BY \"name\" asc LIMIT 100"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: INSERT INTO \"institutions\" (\"id\", \"created_at\", \"updated_at\", \"name\", \"identifier\", \"state\", \"type\", \"member_institution_id\", \"deactivated_at\", \"otp_enabled\", \"enable_spot_restore\", \"receiving_bucket\", \"restore_bucket\") VALUES (DEFAULT, '2022-06-22 17:30:51.83789+00:00:00', '2022-06-22 17:30:51.83789+00:00:00', 'Springfield Yooniversity', 'springfield.kom', 'A', 'MemberInstitution', DEFAULT, DEFAULT, FALSE, FALSE, 'aptrust.receiving.test.springfield.kom', 'aptrust.restore.test.springfield.kom') RETURNING \"id\", \"member_institution_id\", \"deactivated_at\""}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":303,"method":"POST","path":"/institutions/new","ip":"","latency":3.48915,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((id = 6))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((parent_id = 6)) ORDER BY \"name\" asc"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user_view\".\"id\", \"user_view\".\"name\", \"user_view\".\"email\", \"user_view\".\"phone_number\", \"user_view\".\"created_at\", \"user_view\".\"updated_at\", \"user_view\".\"reset_password_sent_at\", \"user_view\".\"remember_created_at\", \"user_view\".\"sign_in_count\", \"user_view\".\"current_sign_in_at\", \"user_view\".\"last_sign_in_at\", \"user_view\".\"current_sign_in_ip\", \"user_view\".\"last_sign_in_ip\", \"user_view\".\"institution_id\", \"user_view\".\"password_changed_at\", \"user_view\".\"consumed_timestep\", \"user_view\".\"otp_required_for_login\", \"user_view\".\"deactivated_at\", \"user_view\".\"enabled_two_factor\", \"user_view\".\"confirmed_two_factor\", \"user_view\".\"authy_id\", \"user_view\".\"last_sign_in_with_authy\", \"user_view\".\"authy_status\", \"user_view\".\"email_verified\", \"user_view\".\"initial_password_updated\", \"user_view\".\"force_password_update\", \"user_view\".\"grace_period\", \"user_view\".\"role\", \"user_view\".\"institution_name\", \"user_view\".\"institution_identifier\", \"user_view\".\"institution_state\", \"user_view\".\"institution_type\", \"user_view\".\"member_institution_id\", \"user_view\".\"member_institution_name\", \"user_view\".\"member_institution_identifier\", \"user_view\".\"member_institution_state\", \"user_view\".\"otp_enabled\", \"user_view\".\"receiving_bucket\", \"user_view\".\"restore_bucket\" FROM \"users_view\" AS \"user_view\" WHERE ((institution_id = 6) AND (deactivated_at is null)) ORDER BY \"name\" asc"}
{"level":"info","status":200,"method":"GET","path":"/institutions/show/6","ip":"","latency":23.921036,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution\".\"id\", \"institution\".\"created_at\", \"institution\".\"updated_at\", \"institution\".\"name\", \"institution\".\"identifier\", \"institution\".\"state\", \"institution\".\"type\", \"institution\".\"member_institution_id\", \"institution\".\"deactivated_at\", \"institution\".\"otp_enabled\", \"institution\".\"enable_spot_restore\", \"institution\".\"receiving_bucket\", \"institution\".\"restore_bucket\" FROM \"institutions\" AS \"institution\" WHERE ((name = 'Springfield Yooniversity'))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution\".\"id\", \"institution\".\"created_at\", \"institution\".\"updated_at\", \"institution\".\"name\", \"institution\".\"identifier\", \"institution\".\"state\", \"institution\".\"type\", \"institution\".\"member_institution_id\", \"institution\".\"deactivated_at\", \"institution\".\"otp_enabled\", \"institution\".\"enable_spot_restore\", \"institution\".\"receiving_bucket\", \"institution\".\"restore_bucket\" FROM \"institutions\" AS \"institution\" WHERE ((id = 6))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" WHERE ((type = 'MemberInstitution')) ORDER BY \"name\" asc LIMIT 100"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: UPDATE \"institutions\" AS \"institution\" SET \"created_at\" = '2022-06-22 17:30:51.83789+00:00:00', \"updated_at\" = '2022-06-22 17:30:51.868592+00:00:00', \"name\" = 'Springfield University', \"identifier\" = 'springfield.kom', \"state\" = 'A', \"type\" = 'MemberInstitution', \"member_institution_id\" = NULL, \"deactivated_at\" = NULL, \"otp_enabled\" = FALSE, \"enable_spot_restore\" = FALSE, \"receiving_bucket\" = 'aptrust.receiving.test.springfield.kom', \"restore_bucket\" = 'aptrust.restore.test.springfield.kom' WHERE \"institution\".\"id\" = 6"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":303,"method":"PUT","path":"/institutions/edit/6","ip":"","latency":4.056755,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((id = 6))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((parent_id = 6)) ORDER BY \"name\" asc"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user_view\".\"id\", \"user_view\".\"name\", \"user_view\".\"email\", \"user_view\".\"phone_number\", \"user_view\".\"created_at\", \"user_view\".\"updated_at\", \"user_view\".\"reset_password_sent_at\", \"user_view\".\"remember_created_at\", \"user_view\".\"sign_in_count\", \"user_view\".\"current_sign_in_at\", \"user_view\".\"last_sign_in_at\", \"user_view\".\"current_sign_in_ip\", \"user_view\".\"last_sign_in_ip\", \"user_view\".\"institution_id\", \"user_view\".\"password_changed_at\", \"user_view\".\"consumed_timestep\", \"user_view\".\"otp_required_for_login\", \"user_view\".\"deactivated_at\", \"user_view\".\"enabled_two_factor\", \"user_view\".\"confirmed_two_factor\", \"user_view\".\"authy_id\", \"user_view\".\"last_sign_in_with_authy\", \"user_view\".\"authy_status\", \"user_view\".\"email_verified\", \"user_view\".\"initial_password_updated\", \"user_view\".\"force_password_update\", \"user_view\".\"grace_period\", \"user_view\".\"role\", \"user_view\".\"institution_name\", \"user_view\".\"institution_identifier\", \"user_view\".\"institution_state\", \"user_view\".\"institution_type\", \"user_view\".\"member_institution_id\", \"user_view\".\"member_institution_name\", \"user_view\".\"member_institution_identifier\", \"user_view\".\"member_institution_state\", \"user_view\".\"otp_enabled\", \"user_view\".\"receiving_bucket\", \"user_view\".\"restore_bucket\" FROM \"users_view\" AS \"user_view\" WHERE ((institution_id = 6) AND (deactivated_at is null)) ORDER BY \"name\" asc"}
{"level":"info","status":200,"method":"GET","path":"/institutions/show/6","ip":"","latency":19.251405,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:30:51-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionUpdate, ResourceType: Institution, ResourceID: 6, InstID: 6, Gin Path: /institutions/edit/:id, Request Path: /institutions/edit/6, Permission: InstitutionUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRoute - NO - /institutions/edit/6"}
{"level":"warn","status":403,"method":"PUT","path":"/institutions/edit/6","ip":"","latency":22.201521,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:30:51-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionUpdate, ResourceType: Institution, ResourceID: 6, InstID: 6, Gin Path: /institutions/edit/:id, Request Path: /institutions/edit/6, Permission: InstitutionUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRoute - NO - /institutions/edit/6"}
{"level":"warn","status":403,"method":"PUT","path":"/institutions/edit/6","ip":"","latency":16.602117,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution\".\"id\", \"institution\".\"created_at\", \"institution\".\"updated_at\", \"institution\".\"name\", \"institution\".\"identifier\", \"institution\".\"state\", \"institution\".\"type\", \"institution\".\"member_institution_id\", \"institution\".\"deactivated_at\", \"institution\".\"otp_enabled\", \"institution\".\"enable_spot_restore\", \"institution\".\"receiving_bucket\", \"institution\".\"restore_bucket\" FROM \"institutions\" AS \"institution\" WHERE ((id = 6))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: UPDATE \"institutions\" AS \"institution\" SET \"created_at\" = '2022-06-22 17:30:51.83789+00:00:00', \"updated_at\" = '2022-06-22 17:30:51.868592+00:00:00', \"name\" = 'Springfield University', \"identifier\" = 'springfield.kom', \"state\" = 'D', \"type\" = 'MemberInstitution', \"member_institution_id\" = NULL, \"deactivated_at\" = '2022-06-22 17:30:51.930568+00:00:00', \"otp_enabled\" = FALSE, \"enable_spot_restore\" = FALSE, \"receiving_bucket\" = 'aptrust.receiving.test.springfield.kom', \"restore_bucket\" = 'aptrust.restore.test.springfield.kom' WHERE \"institution\".\"id\" = 6"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"GET","path":"/institutions/delete/6","ip":"","latency":2.961073,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" ORDER BY \"name\" asc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:51-04:00","message":"TypeName (1): InstitutionView"}
{"level":"info","time":"2022-06-22T13:30:51-04:00","message":"Cannot query count view for type InstitutionView: type is not supported for view count"}
{"level":"info","time":"2022-06-22T13:30:51-04:00","message":"WebUI: Using standard count query for ''"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT count(*) FROM \"institutions_view\" AS \"institution_view\""}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/institutions","ip":"","latency":20.762798,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution\".\"id\", \"institution\".\"created_at\", \"institution\".\"updated_at\", \"institution\".\"name\", \"institution\".\"identifier\", \"institution\".\"state\", \"institution\".\"type\", \"institution\".\"member_institution_id\", \"institution\".\"deactivated_at\", \"institution\".\"otp_enabled\", \"institution\".\"enable_spot_restore\", \"institution\".\"receiving_bucket\", \"institution\".\"restore_bucket\" FROM \"institutions\" AS \"institution\" WHERE ((id = 6))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: UPDATE \"institutions\" AS \"institution\" SET \"created_at\" = '2022-06-22 17:30:51.83789+00:00:00', \"updated_at\" = '2022-06-22 17:30:51.868592+00:00:00', \"name\" = 'Springfield University', \"identifier\" = 'springfield.kom', \"state\" = 'A', \"type\" = 'MemberInstitution', \"member_institution_id\" = NULL, \"deactivated_at\" = NULL, \"otp_enabled\" = FALSE, \"enable_spot_restore\" = FALSE, \"receiving_bucket\" = 'aptrust.receiving.test.springfield.kom', \"restore_bucket\" = 'aptrust.restore.test.springfield.kom' WHERE \"institution\".\"id\" = 6"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"GET","path":"/institutions/undelete/6","ip":"","latency":4.001262,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((id = 6))"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" WHERE ((parent_id = 6)) ORDER BY \"name\" asc"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user_view\".\"id\", \"user_view\".\"name\", \"user_view\".\"email\", \"user_view\".\"phone_number\", \"user_view\".\"created_at\", \"user_view\".\"updated_at\", \"user_view\".\"reset_password_sent_at\", \"user_view\".\"remember_created_at\", \"user_view\".\"sign_in_count\", \"user_view\".\"current_sign_in_at\", \"user_view\".\"last_sign_in_at\", \"user_view\".\"current_sign_in_ip\", \"user_view\".\"last_sign_in_ip\", \"user_view\".\"institution_id\", \"user_view\".\"password_changed_at\", \"user_view\".\"consumed_timestep\", \"user_view\".\"otp_required_for_login\", \"user_view\".\"deactivated_at\", \"user_view\".\"enabled_two_factor\", \"user_view\".\"confirmed_two_factor\", \"user_view\".\"authy_id\", \"user_view\".\"last_sign_in_with_authy\", \"user_view\".\"authy_status\", \"user_view\".\"email_verified\", \"user_view\".\"initial_password_updated\", \"user_view\".\"force_password_update\", \"user_view\".\"grace_period\", \"user_view\".\"role\", \"user_view\".\"institution_name\", \"user_view\".\"institution_identifier\", \"user_view\".\"institution_state\", \"user_view\".\"institution_type\", \"user_view\".\"member_institution_id\", \"user_view\".\"member_institution_name\", \"user_view\".\"member_institution_identifier\", \"user_view\".\"member_institution_state\", \"user_view\".\"otp_enabled\", \"user_view\".\"receiving_bucket\", \"user_view\".\"restore_bucket\" FROM \"users_view\" AS \"user_view\" WHERE ((institution_id = 6) AND (deactivated_at is null)) ORDER BY \"name\" asc"}
{"level":"info","status":200,"method":"GET","path":"/institutions/show/6","ip":"","latency":23.104865,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:30:51-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionDelete, ResourceType: Institution, ResourceID: 2, InstID: 2, Gin Path: /institutions/delete/:id, Request Path: /institutions/delete/2, Permission: InstitutionDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"IsAPIRoute - NO - /institutions/delete/2"}
{"level":"warn","status":403,"method":"GET","path":"/institutions/delete/2","ip":"","latency":17.834474,"user-agent":"","time":"2022-06-22T13:30:51-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:51-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionDelete, ResourceType: Institution, ResourceID: 2, InstID: 2, Gin Path: /institutions/delete/:id, Request Path: /institutions/delete/2, Permission: InstitutionDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /institutions/delete/2"}
{"level":"warn","status":403,"method":"GET","path":"/institutions/delete/2","ip":"","latency":20.226449,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionUndelete, ResourceType: Institution, ResourceID: 2, InstID: 2, Gin Path: /institutions/undelete/:id, Request Path: /institutions/undelete/2, Permission: InstitutionUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /institutions/undelete/2"}
{"level":"warn","status":403,"method":"GET","path":"/institutions/undelete/2","ip":"","latency":16.378326,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionUndelete, ResourceType: Institution, ResourceID: 2, InstID: 2, Gin Path: /institutions/undelete/:id, Request Path: /institutions/undelete/2, Permission: InstitutionUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /institutions/undelete/2"}
{"level":"warn","status":403,"method":"GET","path":"/institutions/undelete/2","ip":"","latency":18.03243,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution_view\".\"id\", \"institution_view\".\"name\", \"institution_view\".\"identifier\", \"institution_view\".\"state\", \"institution_view\".\"type\", \"institution_view\".\"deactivated_at\", \"institution_view\".\"otp_enabled\", \"institution_view\".\"enable_spot_restore\", \"institution_view\".\"receiving_bucket\", \"institution_view\".\"restore_bucket\", \"institution_view\".\"created_at\", \"institution_view\".\"updated_at\", \"institution_view\".\"parent_id\", \"institution_view\".\"parent_name\", \"institution_view\".\"parent_identifier\", \"institution_view\".\"parent_state\", \"institution_view\".\"parent_deactivated_at\" FROM \"institutions_view\" AS \"institution_view\" ORDER BY \"name\" asc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:52-04:00","message":"TypeName (1): InstitutionView"}
{"level":"info","time":"2022-06-22T13:30:52-04:00","message":"Cannot query count view for type InstitutionView: type is not supported for view count"}
{"level":"info","time":"2022-06-22T13:30:52-04:00","message":"WebUI: Using standard count query for ''"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT count(*) FROM \"institutions_view\" AS \"institution_view\""}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/institutions","ip":"","latency":22.292275,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionIndex, ResourceType: Institution, ResourceID: 0, InstID: 2, Gin Path: /institutions, Request Path: /institutions, Permission: InstitutionList, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /institutions"}
{"level":"warn","status":403,"method":"GET","path":"/institutions","ip":"","latency":15.525725,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionIndex, ResourceType: Institution, ResourceID: 0, InstID: 2, Gin Path: /institutions, Request Path: /institutions, Permission: InstitutionList, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /institutions"}
{"level":"warn","status":403,"method":"GET","path":"/institutions","ip":"","latency":19.871932,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution\".\"id\", \"institution\".\"created_at\", \"institution\".\"updated_at\", \"institution\".\"name\", \"institution\".\"identifier\", \"institution\".\"state\", \"institution\".\"type\", \"institution\".\"member_institution_id\", \"institution\".\"deactivated_at\", \"institution\".\"otp_enabled\", \"institution\".\"enable_spot_restore\", \"institution\".\"receiving_bucket\", \"institution\".\"restore_bucket\" FROM \"institutions\" AS \"institution\" WHERE ((id = 2))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" WHERE ((type = 'MemberInstitution')) ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/institutions/edit/2","ip":"","latency":18.265033,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionEdit, ResourceType: Institution, ResourceID: 2, InstID: 2, Gin Path: /institutions/edit/:id, Request Path: /institutions/edit/2, Permission: InstitutionUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /institutions/edit/2"}
{"level":"warn","status":403,"method":"GET","path":"/institutions/edit/2","ip":"","latency":18.051089,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionEdit, ResourceType: Institution, ResourceID: 2, InstID: 2, Gin Path: /institutions/edit/:id, Request Path: /institutions/edit/2, Permission: InstitutionUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /institutions/edit/2"}
{"level":"warn","status":403,"method":"GET","path":"/institutions/edit/2","ip":"","latency":20.618857,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 5))"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User admin@inst2.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionEdit, ResourceType: Institution, ResourceID: 2, InstID: 2, Gin Path: /institutions/edit/:id, Request Path: /institutions/edit/2, Permission: InstitutionUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /institutions/edit/2"}
{"level":"warn","status":403,"method":"GET","path":"/institutions/edit/2","ip":"","latency":16.558992,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 7))"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User user@inst2.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.InstitutionEdit, ResourceType: Institution, ResourceID: 2, InstID: 2, Gin Path: /institutions/edit/:id, Request Path: /institutions/edit/2, Permission: InstitutionUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /institutions/edit/2"}
{"level":"warn","status":403,"method":"GET","path":"/institutions/edit/2","ip":"","latency":19.431189,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((\"intellectual_object_view\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE (intellectual_object_id = 1 and state = 'A') LIMIT 20"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (1, 2, 3))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (1, 2, 3)) ORDER BY \"datetime\" desc, \"algorithm\" asc"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT count(*) FROM \"generic_files\" AS \"generic_file\" WHERE (intellectual_object_id = 1 and state = 'A')"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE ((intellectual_object_id = 1) AND (generic_file_id is null)) ORDER BY \"created_at\" desc LIMIT 5"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT count(*) FROM \"premis_events\" AS \"premis_event\" WHERE (intellectual_object_id = 1 and generic_file_id is null)"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: \n    select\n        sum(\"size\") as \"total_bytes\",\n        (sum(\"size\") / 1073741824) as \"total_gb\",\n        (sum(\"size\") / 1099511627776) as \"total_tb\",\n        count(*) as file_count,\n        coalesce(file_format, 'Total') as \"file_format\"\n        from generic_files\n        where (2 = 0 or institution_id = 2)\n        and   (1 = 0 or intellectual_object_id = 1)\n        and   (state = 'A')\n        group by rollup(file_format)\n        order by file_format\n"}
{"level":"info","status":200,"method":"GET","path":"/objects/show/1","ip":"","latency":26.720475,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((\"intellectual_object_view\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE (intellectual_object_id = 1 and state = 'A') LIMIT 20"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (1, 2, 3))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (1, 2, 3)) ORDER BY \"datetime\" desc, \"algorithm\" asc"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT count(*) FROM \"generic_files\" AS \"generic_file\" WHERE (intellectual_object_id = 1 and state = 'A')"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE ((intellectual_object_id = 1) AND (generic_file_id is null)) ORDER BY \"created_at\" desc LIMIT 5"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT count(*) FROM \"premis_events\" AS \"premis_event\" WHERE (intellectual_object_id = 1 and generic_file_id is null)"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: \n    select\n        sum(\"size\") as \"total_bytes\",\n        (sum(\"size\") / 1073741824) as \"total_gb\",\n        (sum(\"size\") / 1099511627776) as \"total_tb\",\n        count(*) as file_count,\n        coalesce(file_format, 'Total') as \"file_format\"\n        from generic_files\n        where (2 = 0 or institution_id = 2)\n        and   (1 = 0 or intellectual_object_id = 1)\n        and   (state = 'A')\n        group by rollup(file_format)\n        order by file_format\n"}
{"level":"info","status":200,"method":"GET","path":"/objects/show/1","ip":"","latency":30.156867,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((\"intellectual_object_view\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE (intellectual_object_id = 1 and state = 'A') LIMIT 20"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (1, 2, 3))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (1, 2, 3)) ORDER BY \"datetime\" desc, \"algorithm\" asc"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT count(*) FROM \"generic_files\" AS \"generic_file\" WHERE (intellectual_object_id = 1 and state = 'A')"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE ((intellectual_object_id = 1) AND (generic_file_id is null)) ORDER BY \"created_at\" desc LIMIT 5"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT count(*) FROM \"premis_events\" AS \"premis_event\" WHERE (intellectual_object_id = 1 and generic_file_id is null)"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: \n    select\n        sum(\"size\") as \"total_bytes\",\n        (sum(\"size\") / 1073741824) as \"total_gb\",\n        (sum(\"size\") / 1099511627776) as \"total_tb\",\n        count(*) as file_count,\n        coalesce(file_format, 'Total') as \"file_format\"\n        from generic_files\n        where (2 = 0 or institution_id = 2)\n        and   (1 = 0 or intellectual_object_id = 1)\n        and   (state = 'A')\n        group by rollup(file_format)\n        order by file_format\n"}
{"level":"info","status":200,"method":"GET","path":"/objects/show/1","ip":"","latency":23.680348,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 6)"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.IntellectualObjectShow, ResourceType: IntellectualObject, ResourceID: 6, InstID: 3, Gin Path: /objects/show/:id, Request Path: /objects/show/6, Permission: IntellectualObjectRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /objects/show/6"}
{"level":"warn","status":403,"method":"GET","path":"/objects/show/6","ip":"","latency":22.635128,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 6)"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.IntellectualObjectShow, ResourceType: IntellectualObject, ResourceID: 6, InstID: 3, Gin Path: /objects/show/:id, Request Path: /objects/show/6, Permission: IntellectualObjectRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /objects/show/6"}
{"level":"warn","status":403,"method":"GET","path":"/objects/show/6","ip":"","latency":17.366342,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:52-04:00","message":"TypeName (1): IntellectualObjectView"}
{"level":"info","time":"2022-06-22T13:30:52-04:00","message":"WebUI: Using view to count query ''"}
{"level":"info","time":"2022-06-22T13:30:52-04:00","message":"TypeName (1): IntellectualObjectView"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"intellectual_object_counts\" AS \"intellectual_object_count\" WHERE ((institution_id is null) AND (state is null))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/objects","ip":"","latency":25.561217,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((institution_id = 2)) ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:52-04:00","message":"TypeName (1): IntellectualObjectView"}
{"level":"info","time":"2022-06-22T13:30:52-04:00","message":"WebUI: Using view to count query '(institution_id = ?)'"}
{"level":"info","time":"2022-06-22T13:30:52-04:00","message":"TypeName (1): IntellectualObjectView"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"intellectual_object_counts\" AS \"intellectual_object_count\" WHERE ((institution_id = 2) AND (state is null))"}
{"level":"info","status":200,"method":"GET","path":"/objects","ip":"","latency":25.689933,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((institution_id = 2)) ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:30:52-04:00","message":"TypeName (1): IntellectualObjectView"}
{"level":"info","time":"2022-06-22T13:30:52-04:00","message":"WebUI: Using view to count query '(institution_id = ?)'"}
{"level":"info","time":"2022-06-22T13:30:52-04:00","message":"TypeName (1): IntellectualObjectView"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"intellectual_object_counts\" AS \"intellectual_object_count\" WHERE ((institution_id = 2) AND (state is null))"}
{"level":"info","status":200,"method":"GET","path":"/objects","ip":"","latency":22.352617,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 2)"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User system@aptrust.org, Remote IP: , Handler: github.com/APTrust/registry/web/webui.IntellectualObjectRequestDelete, ResourceType: IntellectualObject, ResourceID: 2, InstID: 2, Gin Path: /objects/request_delete/:id, Request Path: /objects/request_delete/2, Permission: IntellectualObjectRequestDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /objects/request_delete/2"}
{"level":"warn","status":403,"method":"GET","path":"/objects/request_delete/2","ip":"","latency":25.029884,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((\"intellectual_object_view\".\"id\" = 2))"}
{"level":"info","status":200,"method":"GET","path":"/objects/request_delete/2","ip":"","latency":30.006484,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 2)"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.IntellectualObjectRequestDelete, ResourceType: IntellectualObject, ResourceID: 2, InstID: 2, Gin Path: /objects/request_delete/:id, Request Path: /objects/request_delete/2, Permission: IntellectualObjectRequestDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /objects/request_delete/2"}
{"level":"warn","status":403,"method":"GET","path":"/objects/request_delete/2","ip":"","latency":31.663391,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 6)"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User system@aptrust.org, Remote IP: , Handler: github.com/APTrust/registry/web/webui.IntellectualObjectRequestDelete, ResourceType: IntellectualObject, ResourceID: 6, InstID: 3, Gin Path: /objects/request_delete/:id, Request Path: /objects/request_delete/6, Permission: IntellectualObjectRequestDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /objects/request_delete/6"}
{"level":"warn","status":403,"method":"GET","path":"/objects/request_delete/6","ip":"","latency":24.147695,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 6)"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.IntellectualObjectRequestDelete, ResourceType: IntellectualObject, ResourceID: 6, InstID: 3, Gin Path: /objects/request_delete/:id, Request Path: /objects/request_delete/6, Permission: IntellectualObjectRequestDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /objects/request_delete/6"}
{"level":"warn","status":403,"method":"GET","path":"/objects/request_delete/6","ip":"","latency":30.145617,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 6)"}
{"level":"error","time":"2022-06-22T13:30:52-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.IntellectualObjectRequestDelete, ResourceType: IntellectualObject, ResourceID: 6, InstID: 3, Gin Path: /objects/request_delete/:id, Request Path: /objects/request_delete/6, Permission: IntellectualObjectRequestDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"IsAPIRoute - NO - /objects/request_delete/6"}
{"level":"warn","status":403,"method":"GET","path":"/objects/request_delete/6","ip":"","latency":31.219539,"user-agent":"","time":"2022-06-22T13:30:52-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"ar_internal_metadata\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"confirmation_tokens\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"emails_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"emails_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"emails_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"emails_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"old_passwords\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"schema_migrations\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"snapshots\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"usage_samples\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"alerts_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"alerts_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"alerts_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"alerts\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"deletion_requests\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"storage_records\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"checksums\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"roles_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"roles\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: drop table if exists \"storage_options\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:52-04:00","message":"Starting SQL: --\n-- schema.sql\n--\n-- This file represents the full registry schema.\n--\n-- The migrations.sql file updates the old Pharos schema, as it existed\n-- in the feature/storage_record branch, so that it matches this schema.\n--\n-- https://github.com/APTrust/pharos/blob/feature/storage-record/db/schema.rb\n--\n\n\n-- public.ar_internal_metadata definition\n--\n-- This is a legacy table used by ActiveRecord.\n-- We can drop this once production is stable.\n--\nCREATE TABLE public.ar_internal_metadata (\n\t\"key\" varchar NOT NULL,\n\tvalue varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT ar_internal_metadata_pkey PRIMARY KEY (key)\n);\n\n\n-- public.bulk_delete_jobs definition\n--\n-- This is the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs (\n\tid bigserial NOT NULL,\n\trequested_by varchar NULL,\n\tinstitutional_approver varchar NULL,\n\taptrust_approver varchar NULL,\n\tinstitutional_approval_at timestamp NULL,\n\taptrust_approval_at timestamp NULL,\n\tnote text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id int4 NOT NULL,\n\tCONSTRAINT bulk_delete_jobs_pkey PRIMARY KEY (id)\n);\n\n\n-- public.bulk_delete_jobs_emails definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_emails (\n\tbulk_delete_job_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_emails_on_bulk_delete_job_id ON public.bulk_delete_jobs_emails USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_emails_on_email_id ON public.bulk_delete_jobs_emails USING btree (email_id);\n\n\n-- public.bulk_delete_jobs_generic_files definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_generic_files (\n\tbulk_delete_job_id int8 NULL,\n\tgeneric_file_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_bulk_delete_job_id ON public.bulk_delete_jobs_generic_files USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_generic_file_id ON public.bulk_delete_jobs_generic_files USING btree (generic_file_id);\n\n\n-- public.bulk_delete_jobs_institutions definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_institutions (\n\tbulk_delete_job_id int8 NULL,\n\tinstitution_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_bulk_delete_job_id ON public.bulk_delete_jobs_institutions USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_institution_id ON public.bulk_delete_jobs_institutions USING btree (institution_id);\n\n\n-- public.bulk_delete_jobs_intellectual_objects definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_intellectual_objects (\n\tbulk_delete_job_id int8 NULL,\n\tintellectual_object_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_bulk_job_id ON public.bulk_delete_jobs_intellectual_objects USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_object_id ON public.bulk_delete_jobs_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.confirmation_tokens definition\n--\n-- This is a legacy table. We can likely delete it\n-- after production is stable.\n--\nCREATE TABLE public.confirmation_tokens (\n\tid bigserial NOT NULL,\n\t\"token\" varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tuser_id int4 NULL,\n\tCONSTRAINT confirmation_tokens_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails definition\n--\n-- This legacy table will be replaced by the new alerts table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails (\n\tid bigserial NOT NULL,\n\temail_type varchar NULL,\n\tevent_identifier varchar NULL,\n\titem_id int4 NULL,\n\temail_text text NULL,\n\tuser_list text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tCONSTRAINT emails_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails_generic_files definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_generic_files (\n\tgeneric_file_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_generic_files_on_email_id ON public.emails_generic_files USING btree (email_id);\nCREATE INDEX index_emails_generic_files_on_generic_file_id ON public.emails_generic_files USING btree (generic_file_id);\n\n\n-- public.emails_intellectual_objects definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_intellectual_objects (\n\tintellectual_object_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_intellectual_objects_on_email_id ON public.emails_intellectual_objects USING btree (email_id);\nCREATE INDEX index_emails_intellectual_objects_on_intellectual_object_id ON public.emails_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.emails_premis_events definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_premis_events (\n\tpremis_event_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_premis_events_on_email_id ON public.emails_premis_events USING btree (email_id);\nCREATE INDEX index_emails_premis_events_on_premis_event_id ON public.emails_premis_events USING btree (premis_event_id);\n\n\n-- public.emails_work_items definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_work_items (\n\twork_item_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_work_items_on_email_id ON public.emails_work_items USING btree (email_id);\nCREATE INDEX index_emails_work_items_on_work_item_id ON public.emails_work_items USING btree (work_item_id);\n\n\n-- public.generic_files definition\nCREATE TABLE public.generic_files (\n\tid serial NOT NULL,\n\tfile_format varchar NULL,\n\t\"size\" int8 NULL,\n\tidentifier varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tlast_fixity_check timestamp NOT NULL DEFAULT '2000-01-01 00:00:00'::timestamp without time zone,\n\tinstitution_id int4 NOT NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tuuid varchar NOT NULL,\n\tCONSTRAINT generic_files_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_generic_files_on_created_at ON public.generic_files USING btree (created_at);\nCREATE UNIQUE INDEX index_generic_files_on_identifier ON public.generic_files USING btree (identifier);\nCREATE INDEX index_generic_files_on_institution_id ON public.generic_files USING btree (institution_id);\nCREATE INDEX index_generic_files_on_institution_id_and_state ON public.generic_files USING btree (institution_id, state);\nCREATE INDEX index_generic_files_on_institution_id_and_updated_at ON public.generic_files USING btree (institution_id, updated_at);\nCREATE INDEX index_generic_files_on_intellectual_object_id ON public.generic_files USING btree (intellectual_object_id);\nCREATE INDEX index_generic_files_on_updated_at ON public.generic_files USING btree (updated_at);\nCREATE UNIQUE INDEX index_generic_files_on_uuid ON public.generic_files USING btree (uuid);\nCREATE INDEX ix_gf_last_fixity_check ON public.generic_files USING btree (last_fixity_check);\n\n\n-- public.institutions definition\nCREATE TABLE public.institutions (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\tidentifier varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\t\"type\" varchar NULL,\n\tmember_institution_id int4 NULL,\n\tdeactivated_at timestamp NULL,\n\totp_enabled bool NULL,\n    enable_spot_restore bool not null default false,\n\treceiving_bucket varchar NOT NULL,\n\trestore_bucket varchar NOT NULL,\n\tCONSTRAINT institutions_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_institutions_on_name ON public.institutions USING btree (name);\n\n\n-- public.intellectual_objects definition\nCREATE TABLE public.intellectual_objects (\n\tid serial NOT NULL,\n\ttitle varchar NULL,\n\tdescription text NULL,\n\tidentifier varchar NULL,\n\talt_identifier varchar NULL,\n\t\"access\" varchar NULL,\n\tbag_name varchar NULL,\n\tinstitution_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tetag varchar NULL,\n\tbag_group_identifier varchar NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tbagit_profile_identifier varchar NULL,\n\tsource_organization varchar NULL,\n\tinternal_sender_identifier varchar NULL,\n\tinternal_sender_description text NULL,\n\tCONSTRAINT intellectual_objects_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_intellectual_objects_on_bag_name ON public.intellectual_objects USING btree (bag_name);\nCREATE INDEX index_intellectual_objects_on_created_at ON public.intellectual_objects USING btree (created_at);\nCREATE UNIQUE INDEX index_intellectual_objects_on_identifier ON public.intellectual_objects USING btree (identifier);\nCREATE INDEX index_intellectual_objects_on_institution_id ON public.intellectual_objects USING btree (institution_id);\nCREATE INDEX index_intellectual_objects_on_updated_at ON public.intellectual_objects USING btree (updated_at);\n\n\n-- public.old_passwords definition\n--\n-- This is a legacy table. We can get rid of this if we\n-- abandon mandatory password changes. Wait until that's\n-- decided.\n--\nCREATE TABLE public.old_passwords (\n\tid bigserial NOT NULL,\n\tencrypted_password varchar NOT NULL,\n\tpassword_salt varchar NULL,\n\tpassword_archivable_type varchar NOT NULL,\n\tpassword_archivable_id int4 NOT NULL,\n\tcreated_at timestamp NULL,\n\tCONSTRAINT old_passwords_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_password_archivable ON public.old_passwords USING btree (password_archivable_type, password_archivable_id);\n\n\n-- public.premis_events definition\nCREATE TABLE public.premis_events (\n\tid serial NOT NULL,\n\tidentifier varchar NULL,\n\tevent_type varchar NULL,\n\tdate_time varchar NULL,\n\toutcome_detail varchar NULL,\n\tdetail varchar NULL,\n\toutcome_information varchar NULL,\n\t\"object\" varchar NULL,\n\tagent varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\toutcome varchar NULL,\n\tinstitution_id int4 NULL,\n\told_uuid varchar NULL,\n\tCONSTRAINT premis_events_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_premis_events_date_time_desc ON public.premis_events USING btree (date_time DESC);\nCREATE INDEX index_premis_events_on_event_type ON public.premis_events USING btree (event_type);\nCREATE INDEX index_premis_events_on_event_type_and_outcome ON public.premis_events USING btree (event_type, outcome);\nCREATE INDEX index_premis_events_on_generic_file_id ON public.premis_events USING btree (generic_file_id);\nCREATE UNIQUE INDEX index_premis_events_on_identifier ON public.premis_events USING btree (identifier);\nCREATE INDEX index_premis_events_on_institution_id ON public.premis_events USING btree (institution_id);\nCREATE INDEX index_premis_events_on_intellectual_object_id ON public.premis_events USING btree (intellectual_object_id);\nCREATE INDEX index_premis_events_on_outcome ON public.premis_events USING btree (outcome);\n\n\n-- public.schema_migrations definition\n--\n-- This is a legacy table used by ActiveRecord\n-- to track which migrations have been applied.\n--\n-- We can delete this when production is stable.\n--\nCREATE TABLE public.schema_migrations (\n\t\"version\" varchar NOT NULL,\n\tCONSTRAINT schema_migrations_pkey PRIMARY KEY (version)\n);\n\n\n-- public.snapshots definition\n--\n-- This table stores point-in-time snapshots\n-- of how much data each depositor has in the repo.\n--\n-- We may eventually delete this, but keep for now.\n--\nCREATE TABLE public.snapshots (\n\tid bigserial NOT NULL,\n\taudit_date timestamp NULL,\n\tinstitution_id int4 NULL,\n\tapt_bytes int8 NULL,\n\t\"cost\" numeric NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tsnapshot_type varchar NULL,\n\tcs_bytes int8 NULL,\n\tgo_bytes int8 NULL,\n\tCONSTRAINT snapshots_pkey PRIMARY KEY (id)\n);\n\n\n-- public.usage_samples definition\n--\n-- No idea what this was supposed to be, but the\n-- table never had any data in the production DB.\n-- Consider deleting this after we're sure it's not used.\n--\nCREATE TABLE public.usage_samples (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id varchar NULL,\n\t\"data\" text NULL,\n\tCONSTRAINT usage_samples_pkey PRIMARY KEY (id)\n);\n\n\n-- public.work_items definition\nCREATE TABLE public.work_items (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\t\"name\" varchar NULL,\n\tetag varchar NULL,\n\tbucket varchar NULL,\n\t\"user\" varchar NULL,\n\tnote text NULL,\n\t\"action\" varchar NULL,\n\tstage varchar NULL,\n\tstatus varchar NULL,\n\toutcome text NULL,\n\tbag_date timestamp NULL,\n\tdate_processed timestamp NULL,\n\tretry bool NOT NULL DEFAULT false,\n\tnode varchar(255) NULL,\n\tpid int4 NULL DEFAULT 0,\n\tneeds_admin_review bool NOT NULL DEFAULT false,\n\tinstitution_id int4 NULL,\n\tqueued_at timestamp NULL,\n\t\"size\" int8 NULL,\n\tstage_started_at timestamp NULL,\n\taptrust_approver varchar NULL,\n\tinst_approver varchar NULL,\n\tCONSTRAINT work_items_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_work_items_on_action ON public.work_items USING btree (action);\nCREATE INDEX index_work_items_on_date ON public.work_items USING btree (date_processed);\nCREATE INDEX index_work_items_on_etag_and_name ON public.work_items USING btree (etag, name);\nCREATE INDEX index_work_items_on_generic_file_id ON public.work_items USING btree (generic_file_id);\nCREATE INDEX index_work_items_on_institution_id ON public.work_items USING btree (institution_id);\nCREATE INDEX index_work_items_on_institution_id_and_date ON public.work_items USING btree (institution_id, date_processed);\nCREATE INDEX index_work_items_on_intellectual_object_id ON public.work_items USING btree (intellectual_object_id);\nCREATE INDEX index_work_items_on_stage ON public.work_items USING btree (stage);\nCREATE INDEX index_work_items_on_status ON public.work_items USING btree (status);\n\n\n-- public.checksums definition\nCREATE TABLE public.checksums (\n\tid serial NOT NULL,\n\talgorithm varchar NULL,\n\tdatetime timestamp NULL,\n\tdigest varchar NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT checksums_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_89bb0866e7 FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_checksums_on_generic_file_id ON public.checksums USING btree (generic_file_id);\n\n\n-- public.storage_records definition\nCREATE TABLE public.storage_records (\n\tid bigserial NOT NULL,\n\tgeneric_file_id int4 NULL,\n\turl varchar NULL,\n\tCONSTRAINT storage_records_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_a126ea6adc FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\n\n-- public.users definition\nCREATE TABLE public.users (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\temail varchar NULL,\n\tphone_number varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tencrypted_password varchar NOT NULL DEFAULT ''::character varying,\n\treset_password_token varchar NULL,\n\treset_password_sent_at timestamp NULL,\n\tremember_created_at timestamp NULL,\n\tsign_in_count int4 NOT NULL DEFAULT 0,\n\tcurrent_sign_in_at timestamp NULL,\n\tlast_sign_in_at timestamp NULL,\n\tcurrent_sign_in_ip varchar NULL,\n\tlast_sign_in_ip varchar NULL,\n\tinstitution_id int4 NULL,\n\tencrypted_api_secret_key text NULL,\n\tpassword_changed_at timestamp NULL,\n\tencrypted_otp_secret varchar NULL,\n\tencrypted_otp_secret_iv varchar NULL,\n\tencrypted_otp_secret_salt varchar NULL,\n    encrypted_otp_sent_at timestamp NULL,\n\tconsumed_timestep int4 NULL,\n\totp_required_for_login bool NULL,\n\tdeactivated_at timestamp NULL,\n\tenabled_two_factor bool NULL DEFAULT false,\n\tconfirmed_two_factor bool NULL DEFAULT false,\n\totp_backup_codes _varchar NULL,\n\tauthy_id varchar NULL,\n\tlast_sign_in_with_authy timestamp NULL,\n\tauthy_status varchar NULL,\n\temail_verified bool NULL DEFAULT false,\n\tinitial_password_updated bool NULL DEFAULT false,\n\tforce_password_update bool NULL DEFAULT false,\n\taccount_confirmed bool NULL DEFAULT true,\n\tgrace_period timestamp NULL,\n    awaiting_second_factor boolean not null default false,\n    \"role\" varchar(50) NOT NULL default 'none',\n\tCONSTRAINT users_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_7fcf39ca13 FOREIGN KEY (institution_id) REFERENCES institutions(id)\n);\nCREATE INDEX index_users_on_authy_id ON public.users USING btree (authy_id);\nCREATE UNIQUE INDEX index_users_on_email ON public.users USING btree (email);\nCREATE INDEX index_users_on_institution_id ON public.users USING btree (institution_id);\nCREATE INDEX index_users_on_password_changed_at ON public.users USING btree (password_changed_at);\nCREATE UNIQUE INDEX index_users_on_reset_password_token ON public.users USING btree (reset_password_token);\n\n-------------------------------------------------------------------------------\n-- New tables that were not part of Pharos.\n-- alerts              + join tables\n-- deletion_requests   + join tables\n-------------------------------------------------------------------------------\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index index_alerts_institution_id ON public.alerts (institution_id);\ncreate index index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table public.alerts_users (\n    alert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table public.alerts_work_items (\n    alert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index index_storage_options_name ON public.storage_options (\"name\");\n\n\n\n-------------------------------------------------------------------------------\n-- Functions\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: -- migrations.sql\n--\n-- This file contains ALL alterations that should be applied to the\n-- existing Pharos DB schema (as it exists in the feature/storage-option\n-- branch) to make it match schema.sql.\n--\n-- All operations in this file must be idempotent, so we can run it\n-- any number of times and always know that it will leave the DB in\n-- consistent and known state that matches schema.sql.\n--\n-- NOTE: When migrating old Pharos DB, we will also need to create the\n--       views in the schema.sql file.\n-------------------------------------------------------------------------------\n\n---------------------------------------------------------\n-- START OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n---------------------------------------------------------\n\n-- Drop legacy table from Pharos DB.\ndrop table if exists work_item_states;\n\n-- Create the storage_records table, with indexes.\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\tcreate table public.storage_records (\n    \tid bigserial not null,\n    \tgeneric_file_id int8 not null,\n    \turl varchar not null,\n    \tconstraint storage_records_pkey primary key (id),\n    \tconstraint fk_rails_a126ea6adc foreign key (generic_file_id) references generic_files(id)\n\t);\n\tcreate index if not exists index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\tcreate unique index if not exists index_storage_records_on_url ON public.storage_records(\"url\");\n  end if;\nend\n$$;\n\n-- Add column generic_files.uuid.\nalter table generic_files add column if not exists \"uuid\" varchar;\n\n-- Copy uuid from uri into uuid field.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\tupdate generic_files set uuid=split_part(uri, '/', 5);\n  end if;\nend\n$$;\n\n-- Change generic_files.uuid to not null and add a unique index.\ndo\n$$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uuid' and is_nullable = 'YES') then\n  \talter table generic_files alter column \"uuid\" set not null;\n\tcreate unique index if not exists index_generic_files_on_uuid on generic_files(uuid);\n  end if;\nend\n$$;\n\n-- Copy generic_files.uri from storage_records.url.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\n  \t  -- Get the intial URL. All items, regadless of storage option, have one URL.\n      -- The inner if statement makes sure this hasn't already run. (Prevents duplicate inserts.)\n\t  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\t    if not exists (select 1 from storage_records where length(url) > 0) then\n\t\t  insert into storage_records (generic_file_id, url) select id, uri from generic_files gf order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- For items in standard storage, we need to add a Glacier URL. URLs differ per environment, so we check.\n\t  -- In each case, the inner if statement tries to ensure that these inserts have not already run.\n\n\t  -- Production\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.preservation.storage/', '/aptrust.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Test/Demo\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.test.preservation.oregon/%') then\n\t      insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.test.preservation/', '/aptrust.test.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Staging\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.staging.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.staging.preservation/', '/aptrust.staging.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n  end if;\nend\n$$;\n\n-- Now remove generic_files.uri, since the data is now in storage_records\nalter table generic_files drop column if exists uri;\n\n-------------------------------------------------------\n-- END OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n-------------------------------------------------------\n\n-- The premis_events.date_time column is varchar, but it should be\n-- timestamp. We need to change it. This change may fail if 1) there\n-- are invalid or badly formatted dates in the date_time column, or\n-- 2) if any views referencing premis_events.date_time already exist.\n-- Drop premis_events_view if necessary and recreate it after this alteration.\n--\n-- This change may take a long time, as premis_events has over 100M rows.\ndo\n$$\nbegin\n\tif exists(\n\t\tselect 1 from information_schema.columns\n\t\twhere table_schema = 'public'\n\t\tand table_name = 'premis_events'\n\t\tand column_name = 'date_time'\n\t\tand data_type = 'character varying')\n\tthen\n\t\talter table premis_events alter column date_time type timestamp\n\t\tusing TO_TIMESTAMP(date_time, 'YYYY-MM-DDTHH24:MI:SS');\n\tend if;\nend\n$$;\n\n-- We need to fix the user role structure. Pharos allows a user to have\n-- multiple roles at a single institution, though our business rules disallow\n-- that, and no user has ever had more than one role. To simplify the DB\n-- and our queries, we need to do the following:\n--\n-- 1. Create a role column in the users table.\n-- 2. Populate that column with the value with each user's role from\n--    user -> roles_user -> roles.\n-- 3. Drop the roles_users table.\n-- 4. Drop the roles table.\n\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='role') then\n \talter table users add column \"role\" varchar(50) not null default 'none';\n \tupdate users u set \"role\" = coalesce((select r.name from \"roles\" r inner join roles_users ru on ru.role_id = r.id where ru.user_id = u.id), 'none');\n    drop table if exists roles_users;\n    drop table if exists roles;\n  end if;\nend\n$$;\n\n-- Add awaiting_second_factor\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='awaiting_second_factor') then\n \talter table users add column \"awaiting_second_factor\" boolean not null default false;\n  end if;\nend\n$$;\n\n-- Add encrypted_otp_sent_at\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='encrypted_otp_sent_at') then\n \talter table users add column \"encrypted_otp_sent_at\" timestamp null;\n  end if;\nend\n$$;\n\n\n-- The ingest_state columns were part of a proposed architecture we never\n-- implemented. They have never been used, and we don't need them.\nalter table intellectual_objects drop column if exists ingest_state;\nalter table generic_files drop column if exists ingest_state;\n\n\n-- intellectual_objects.bag_group_identifier is almost always empty.\n-- Make this column nullable to ease inserts.\nalter table intellectual_objects alter column bag_group_identifier drop not null;\n\n\n-- Remove object_identifier and generic_file_identifier from work_items.\n-- We can use a view to join the files & objects tables, avoiding the\n-- duplicate data.\nalter table work_items drop column if exists object_identifier;\nalter table work_items drop column if exists generic_file_identifier;\n\n-- The work_items.date column actually refers to the datetime on which\n-- the item was last processed by one of our Go workers. The name \"date\"\n-- is too vague and ambiguous, so let's call it what it is.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns\n    where table_schema='public' AND table_name='work_items' AND column_name='date') then\n    alter table work_items rename column \"date\" to \"date_processed\";\n  end if;\nend\n$$;\n\n-- Update the indexes on work_items to reflect the change from date to\n-- date_processed.\n\ndrop index if exists index_work_items_on_date;\ndrop index if exists index_work_items_on_institution_id_and_date;\n\ncreate index if not exists index_work_items_on_date_processed on work_items(date_processed);\ncreate index if not exists index_work_items_on_inst_id_and_date_processed on work_items(institution_id, date_processed);\n\n-- These columns are unnecessary in the premis_events table.\n-- We can get them by joining other tables in a view.\n-- This will have a large impact on storage space, since these\n-- two fields together average ~100 bytes per record, and as of\n-- Jan. 2021, we have around 120M records. Dropping these columns\n-- also drops the indexes on these two columns, which are huge and\n-- are rarely used.\nalter table premis_events drop column if exists intellectual_object_identifier;\nalter table premis_events drop column if exists generic_file_identifier;\n\n-- Get rid of useless indexes. We can add these back if they actually turn\n-- out to be useful.\n--\n-- generic_files\ndrop index if exists index_files_on_inst_state_and_format;\ndrop index if exists index_files_on_inst_state_and_updated;\ndrop index if exists index_generic_files_on_file_format;\ndrop index if exists index_generic_files_on_file_format_and_state;\ndrop index if exists index_generic_files_on_institution_id_and_size_and_state;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_file_format;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_state;\ndrop index if exists index_generic_files_on_size;\ndrop index if exists index_generic_files_on_size_and_state;\ndrop index if exists index_generic_files_on_state;\ndrop index if exists index_generic_files_on_state_and_updated_at;\n\n-- intellectual_objects\ndrop index if exists index_intellectual_objects_on_access;\ndrop index if exists index_intellectual_objects_on_institution_id_and_state;\ndrop index if exists index_intellectual_objects_on_state;\n\n-- premis_events\ndrop index if exists index_premis_events_on_generic_file_id_and_event_type;\ndrop index if exists index_premis_events_on_identifier_and_institution_id;\n\n-- institutions\ncreate unique index if not exists index_institutions_identifier on institutions using btree(identifier);\ncreate unique index if not exists index_institutions_receiving_bucket on institutions using btree(receiving_bucket);\ncreate unique index if not exists index_institutions_restore_bucket on institutions using btree(restore_bucket);\n\n-- Allow institutions to turn spot restoration tests on or off.\n-- Default is off.\nalter table institutions add column if not exists enable_spot_restore boolean not null default false;\n\n-- ********************************************************************\n--\n-- Add tables for alerts and deletions that did not exist in Pharos\n--\n-- ********************************************************************\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table if not exists public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index if not exists index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table if not exists public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index if not exists index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table if not exists public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index if not exists index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table if not exists public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index if not exists index_alerts_institution_id ON public.alerts (institution_id);\ncreate index if not exists index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table if not exists public.alerts_users (\n\talert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index if not exists index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index if not exists index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index if not exists index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table if not exists public.alerts_work_items (\n\talert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index if not exists index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index if not exists index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table if not exists public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index if not exists index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index if not exists index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table if not exists public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index if not exists index_storage_options_name ON public.storage_options (\"name\");\n\n-- In Pharos DB, many generic_file_ids in premis_events are set to zero when they should be null.\n-- Fix that here.\nupdate premis_events set generic_file_id = null where generic_file_id = 0;\n\n-- In Pharos, the Devise auth system leaves stale password reset data forever.\n-- We have to clear these values in Registry, or all users will be stuck in\n-- the \"please finish resetting your password\" loop forever. We have no idea\n-- what reset tokens Devise sent two years ago, so no one will be able to\n-- unlock their accounts.\nupdate users set reset_password_token = null, reset_password_sent_at = null;\n\n\n-------------------------------------------------------------------------------\n-- Functions\n--\n-- Fuctions are defined in schema.sql as well. Adding them to migrations\n-- ensures they'll be present in converted DB.\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: -------------------------------------------------------------------------------\n-- Views\n-------------------------------------------------------------------------------\n\n-- Create a view to pull in columns that used to be in the WorkItems table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view work_items_view as\nselect\n\twi.id,\n\twi.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\twi.intellectual_object_id,\n\tio.identifier as \"object_identifier\",\n\tio.alt_identifier,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\twi.generic_file_id,\n\tgf.identifier as \"generic_file_identifier\",\n\twi.\"name\",\n\twi.etag,\n\twi.bucket,\n\twi.\"user\",\n\twi.note,\n\twi.\"action\",\n\twi.stage,\n\twi.status,\n\twi.outcome,\n\twi.bag_date,\n\twi.date_processed,\n\twi.retry,\n\twi.node,\n\twi.pid,\n\twi.needs_admin_review,\n\twi.\"size\",\n\twi.queued_at,\n\twi.stage_started_at,\n\twi.aptrust_approver,\n\twi.inst_approver,\n\twi.created_at,\n\twi.updated_at\nfrom work_items wi\nleft join institutions i on wi.institution_id = i.id\nleft join intellectual_objects io on wi.intellectual_object_id = io.id\nleft join generic_files gf on wi.generic_file_id = gf.id;\n\n\n-- Create a view to pull in columns that used to be in the PremisEvents table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view premis_events_view as\nselect\n\tpe.id,\n\tpe.identifier,\n\tpe.institution_id,\n\ti.\"name\" as institution_name,\n\tpe.intellectual_object_id,\n\tio.identifier as intellectual_object_identifier,\n\tpe.generic_file_id,\n\tgf.identifier as generic_file_identifier,\n\tpe.event_type,\n\tpe.date_time,\n\tpe.detail,\n\tpe.outcome,\n\tpe.outcome_detail,\n\tpe.outcome_information,\n\tpe.\"object\",\n\tpe.agent,\n\tpe.created_at,\n\tpe.updated_at,\n\tpe.old_uuid\nfrom premis_events pe\nleft join institutions i on pe.institution_id = i.id\nleft join intellectual_objects io on pe.intellectual_object_id = io.id\nleft join generic_files gf on pe.generic_file_id = gf.id;\n\n\n-- users_view makes it easier to list and search on institution-related\n-- attributes for users.\ncreate or replace view users_view as\nselect\n\tu.id,\n\tu.\"name\",\n\tu.email,\n\tu.phone_number,\n\tu.created_at,\n\tu.updated_at,\n\tu.reset_password_sent_at,\n\tu.remember_created_at,\n\tu.sign_in_count,\n\tu.current_sign_in_at,\n\tu.last_sign_in_at,\n\tu.current_sign_in_ip,\n\tu.last_sign_in_ip,\n\tu.institution_id,\n\tu.password_changed_at,\n\tu.consumed_timestep,\n\tu.otp_required_for_login,\n\tu.deactivated_at,\n\tu.enabled_two_factor,\n\tu.confirmed_two_factor,\n\tu.authy_id,\n\tu.last_sign_in_with_authy,\n\tu.authy_status,\n\tu.email_verified,\n\tu.initial_password_updated,\n\tu.force_password_update,\n\tu.account_confirmed,\n\tu.grace_period,\n\tu.\"role\",\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.state as institution_state,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id,\n\ti2.\"name\" as member_institution_name,\n\ti2.identifier as member_institution_identifier,\n\ti2.state as member_institution_state,\n\ti.otp_enabled,\n\ti.receiving_bucket,\n\ti.restore_bucket\nfrom users u\nleft join institutions i on u.institution_id = i.id\nleft join institutions i2 on i.member_institution_id = i2.id;\n\n\n-- institutions_view shows an institution along with essential\n-- information about its parent, if it has a parent.\n\ncreate or replace view institutions_view as\nselect\n\ti.id,\n\ti.\"name\",\n\ti.identifier,\n\ti.state,\n\ti.\"type\",\n\ti.deactivated_at,\n\ti.otp_enabled,\n\ti.enable_spot_restore,\n\ti.receiving_bucket,\n\ti.restore_bucket,\n\ti.created_at,\n\ti.updated_at,\n\ti.member_institution_id as \"parent_id\",\n\tparent.\"name\" as \"parent_name\",\n\tparent.identifier as \"parent_identifier\",\n\tparent.state as \"parent_state\",\n\tparent.deactivated_at as \"parent_deactivated_at\"\nfrom institutions i\nleft join institutions parent on i.member_institution_id = parent.id;\n\n-- intellectual_objects_view\n\ncreate or replace view intellectual_objects_view as\nselect\n\tio.id,\n\tio.title,\n\tio.description,\n\tio.identifier,\n\tio.alt_identifier,\n\tio.access,\n\tio.bag_name,\n\tio.institution_id,\n\tio.state,\n\tio.etag,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\tio.internal_sender_description,\n\tio.created_at,\n\tio.updated_at,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id as institution_parent_id,\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"size\",\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_size\"\nfrom intellectual_objects io\nleft join institutions i on io.institution_id = i.id;\n\n-- deletion_requests_view\n\ncreate or replace view deletion_requests_view as\nselect dr.id,\n       dr.institution_id,\n       i.\"name\" as institution_name,\n       i.identifier as institution_identifier,\n       dr.requested_by_id,\n       req.\"name\" as requested_by_name,\n       req.email as requested_by_email,\n       dr.requested_at,\n       dr.confirmed_by_id,\n       conf.\"name\" as confirmed_by_name,\n       conf.email as confirmed_by_email,\n       dr.confirmed_at,\n       dr.cancelled_by_id,\n       can.\"name\" as cancelled_by_name,\n       can.email as cancelled_by_email,\n       dr.cancelled_at,\n       (select count(*) from deletion_requests_generic_files drgf where drgf.deletion_request_id = dr.id) as file_count,\n       (select count(*) from deletion_requests_intellectual_objects drio where drio.deletion_request_id = dr.id) as object_count,\n       dr.work_item_id,\n       wi.stage,\n       wi.status,\n       wi.date_processed,\n       wi.\"size\",\n       wi.note\nfrom deletion_requests dr\nleft join institutions i on dr.institution_id = i.id\nleft join users req on dr.requested_by_id = req.id\nleft join users conf on dr.confirmed_by_id = conf.id\nleft join users can on dr.confirmed_by_id = can.id\nleft join work_items wi on dr.work_item_id = wi.id;\n\n-- alerts view\n\ncreate or replace view alerts_view as\nselect\n\ta.id,\n\ta.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ta.\"type\",\n\ta.subject,\n\ta.\"content\",\n\ta.deletion_request_id,\n\ta.created_at,\n\tau.user_id,\n\tu.\"name\" as user_name,\n\tau.sent_at,\n\tau.read_at\nfrom alerts a\nleft join alerts_users au on a.id = au.alert_id\nleft join users u on au.user_id = u.id\nleft join institutions i on a.institution_id = i.id;\n\n-- storage_option_stats\ncreate or replace view storage_option_stats as\nwith stats as (\n\tselect\n\t\tsum(\"gf\".\"size\") as total_bytes,\n\t\tcount(*) as file_count,\n\t\tgf.institution_id,\n\t\tgf.storage_option\n\tfrom generic_files gf\n\twhere gf.state = 'A'\n\tgroup by rollup (gf.institution_id, gf.storage_option)\n\t)\nselect\n\ts.total_bytes,\n\ts.file_count,\n\ts.institution_id,\n\ts.storage_option,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier\nfrom stats s\nleft join institutions i on s.institution_id = i.id;\n\ncreate or replace view generic_files_view as\nselect\n\tgf.id,\n\tgf.file_format,\n\tgf.\"size\",\n\tgf.identifier,\n\tgf.intellectual_object_id,\n\tio.identifier as object_identifier,\n\tio.\"access\",\n\tgf.state,\n\tgf.last_fixity_check,\n\tgf.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\tgf.storage_option,\n\tgf.uuid,\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='md5' order by created_at desc limit 1) as \"md5\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha1' order by created_at desc limit 1) as \"sha1\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha256' order by created_at desc limit 1) as \"sha256\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha512' order by created_at desc limit 1) as \"sha512\",\n\tgf.created_at,\n\tgf.updated_at\nfrom generic_files gf\nleft join intellectual_objects io on io.id = gf.intellectual_object_id\nleft join institutions i on i.id = gf.institution_id;\n\n-- Checksums view\ncreate or replace view checksums_view as\nselect cs.id,\n       cs.algorithm,\n       cs.datetime,\n       cs.digest,\n       gf.state,\n       gf.identifier as \"generic_file_identifier\",\n       cs.generic_file_id,\n       gf.intellectual_object_id,\n       gf.institution_id,\n       cs.created_at,\n       cs.updated_at\nfrom checksums cs\nleft join generic_files gf on cs.generic_file_id = gf.id;\n\n\n---------------------------------------------------------------------------\n--\n-- Count Views\n--\n-- We create these views because count queries on large tables are slow\n-- in postgres. Even if a query can use an index to get a count, it still\n-- has to scan every row in the result set to see if that row is visible\n-- under postgres' mvcc rules. \n--\n-- If the count returns a million rows, postgres has to scan all million\n-- rows. The result is a query that can take 5-15 seconds. The \n-- premis_events table is the worst of the lot. It should surpass 200M\n-- rows by the end of 2022. We do not want to scan those rows every time\n-- someone hits the events page or the events API endpoint.\n--\n-- We run count queries all the time to manage paging in both the web UI\n-- and the API. For large counts, such as \"all events for an institution\",\n-- or \"all files for an institution\", we'll use the counts in the views\n-- below. \n--\n-- For smaller counts, such as \"all files for my institution created \n-- within the past week\", we'll suck it up and let postgres scan the \n-- smaller row sets.\n--\n-- These views will be refreshed every hour or so using an async go \n-- routine so they don't slow down web and API requests.\n--\n-- That means some large counts may be up to an hour out of date, but we\n-- can live with that tradeoff, since this will vastly speed up the loading\n-- of our most commonly hit web and API endpoints.\n--\n-- Note the function update_counts() below. It refreshes all of the count\n-- views.\n-- \n---------------------------------------------------------------------------\n\n-- premis_event_counts\ncreate materialized view if not exists premis_event_counts as\n\tselect institution_id, count(id) as row_count, event_type, outcome\n\tfrom premis_events group by cube(institution_id, event_type, outcome)\n\torder by institution_id, event_type, outcome;\n\n-- intellectual_object_counts\ncreate materialized view if not exists intellectual_object_counts as\n\tselect institution_id, count(id) as row_count, \"state\" \n\tfrom intellectual_objects group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- generic_file_counts\ncreate materialized view if not exists generic_file_counts as\n\tselect institution_id, count(id) as row_count, \"state\"\n\tfrom generic_files group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- work_item_counts\ncreate materialized view if not exists work_item_counts as\n\tselect institution_id, count(id) as row_count, \"action\"\n\tfrom work_items group by cube(institution_id, \"action\")\n\torder by institution_id, \"action\";\n\n-- \nCREATE OR REPLACE FUNCTION update_counts ()\n  RETURNS integer\nAS\n$BODY$\n  begin\n    refresh materialized view premis_event_counts;\n    refresh materialized view intellectual_object_counts;\n    refresh materialized view generic_file_counts;\n    refresh materialized view work_item_counts;    \n    return 1;\n  end;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"storage_options\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_options.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"institutions\" from '/Users/diamond/aptrust/registry/db/fixtures/institutions.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"users\" from '/Users/diamond/aptrust/registry/db/fixtures/users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"checksums\" from '/Users/diamond/aptrust/registry/db/fixtures/checksums.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"storage_records\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_records.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"deletion_requests\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"deletion_requests_generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"deletion_requests_intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"alerts\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"alerts_premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"alerts_users\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: copy \"alerts_work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_options', 'id'), MAX(id)) FROM \"storage_options\";"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('institutions', 'id'), MAX(id)) FROM \"institutions\";"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('users', 'id'), MAX(id)) FROM \"users\";"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('intellectual_objects', 'id'), MAX(id)) FROM \"intellectual_objects\";"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('generic_files', 'id'), MAX(id)) FROM \"generic_files\";"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('checksums', 'id'), MAX(id)) FROM \"checksums\";"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_records', 'id'), MAX(id)) FROM \"storage_records\";"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('premis_events', 'id'), MAX(id)) FROM \"premis_events\";"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('work_items', 'id'), MAX(id)) FROM \"work_items\";"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('deletion_requests', 'id'), MAX(id)) FROM \"deletion_requests\";"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('alerts', 'id'), MAX(id)) FROM \"alerts\";"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: select update_counts();"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"intellectual_objects\" AS \"intellectual_object\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"intellectual_object\".\"institution_id\" WHERE ((\"intellectual_object\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((institution_id = 2) AND (name = 'pdfs.tar') AND (status NOT IN ('Cancelled', 'Failed', 'Success'))) ORDER BY \"date_processed\" desc"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"intellectual_objects\" AS \"intellectual_object\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"intellectual_object\".\"institution_id\" WHERE ((\"intellectual_object\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: INSERT INTO \"deletion_requests\" (\"id\", \"institution_id\", \"requested_by_id\", \"requested_at\", \"encrypted_confirmation_token\", \"confirmed_by_id\", \"confirmed_at\", \"cancelled_by_id\", \"cancelled_at\", \"work_item_id\") VALUES (DEFAULT, 2, 2, '2022-06-22 17:30:53.760393+00:00:00', '$2a$10$138x6LqviXnQyzWYBo197OM9kNB6hiIV1IE0PUpnyFcKD7NZYM0qq', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING \"id\", \"confirmed_by_id\", \"confirmed_at\", \"cancelled_by_id\", \"cancelled_at\", \"work_item_id\""}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: insert into deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id) values (4, 2) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" WHERE ((institution_id = 2) AND (role = 'institutional_admin'))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: INSERT INTO \"alerts\" (\"id\", \"institution_id\", \"type\", \"subject\", \"content\", \"deletion_request_id\", \"created_at\") VALUES (DEFAULT, 2, 'Deletion Requested', 'Deletion Requested', 'Hello from APTrust,\n\nUser Inst One Admin has requested some files or objects be deleted from preservation storage. We won''t process this request until you or another APTrust administrator at your institution approves it.\n\nFollow the link below to see the list of items in the deletion request. From there you may approve or cancel the request.\n\nhttp://localhost/deletions/review/4?token=91e21c873d4a04c71cdf5b8054f6f68e\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n', 4, '2022-06-22 17:30:53.770513+00:00:00') RETURNING \"id\""}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: insert into alerts_users (alert_id, user_id, sent_at, read_at) values (9, 2, NULL, NULL) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:30:53-04:00","message":"SES is disabled per config settings. Email to admin@inst1.edu. Subject: Deletion Requested\n\n. Hello from APTrust,\n\nUser Inst One Admin has requested some files or objects be deleted from preservation storage. We won't process this request until you or another APTrust administrator at your institution approves it.\n\nFollow the link below to see the list of items in the deletion request. From there you may approve or cancel the request.\n\nhttp://localhost/deletions/review/4?token=91e21c873d4a04c71cdf5b8054f6f68e\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n\nMore about deletions: https://aptrust.github.io/userguide/preservation/deletion/\n"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: update alerts_users set sent_at = '2022-06-22 17:30:53.774495+00:00:00' where alert_id = 9 and user_id = 2"}
{"level":"info","status":201,"method":"POST","path":"/objects/init_delete/2","ip":"","latency":115.091214,"user-agent":"","time":"2022-06-22T13:30:53-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".\"deletion_request_id\", \"deletion_requests_intellectual_objects\".\"intellectual_object_id\" FROM \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" WHERE ((intellectual_object_id = 2)) LIMIT 1 OFFSET 1"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"deletion_request\".\"id\", \"deletion_request\".\"institution_id\", \"deletion_request\".\"requested_by_id\", \"deletion_request\".\"requested_at\", \"deletion_request\".\"encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\", \"deletion_request\".\"confirmed_at\", \"deletion_request\".\"cancelled_by_id\", \"deletion_request\".\"cancelled_at\", \"deletion_request\".\"work_item_id\", \"requested_by\".\"id\" AS \"requested_by__id\", \"requested_by\".\"created_at\" AS \"requested_by__created_at\", \"requested_by\".\"updated_at\" AS \"requested_by__updated_at\", \"requested_by\".\"name\" AS \"requested_by__name\", \"requested_by\".\"email\" AS \"requested_by__email\", \"requested_by\".\"phone_number\" AS \"requested_by__phone_number\", \"requested_by\".\"encrypted_password\" AS \"requested_by__encrypted_password\", \"requested_by\".\"reset_password_token\" AS \"requested_by__reset_password_token\", \"requested_by\".\"reset_password_sent_at\" AS \"requested_by__reset_password_sent_at\", \"requested_by\".\"remember_created_at\" AS \"requested_by__remember_created_at\", \"requested_by\".\"sign_in_count\" AS \"requested_by__sign_in_count\", \"requested_by\".\"current_sign_in_at\" AS \"requested_by__current_sign_in_at\", \"requested_by\".\"last_sign_in_at\" AS \"requested_by__last_sign_in_at\", \"requested_by\".\"current_sign_in_ip\" AS \"requested_by__current_sign_in_ip\", \"requested_by\".\"last_sign_in_ip\" AS \"requested_by__last_sign_in_ip\", \"requested_by\".\"institution_id\" AS \"requested_by__institution_id\", \"requested_by\".\"encrypted_api_secret_key\" AS \"requested_by__encrypted_api_secret_key\", \"requested_by\".\"password_changed_at\" AS \"requested_by__password_changed_at\", \"requested_by\".\"encrypted_otp_secret\" AS \"requested_by__encrypted_otp_secret\", \"requested_by\".\"encrypted_otp_secret_iv\" AS \"requested_by__encrypted_otp_secret_iv\", \"requested_by\".\"encrypted_otp_secret_salt\" AS \"requested_by__encrypted_otp_secret_salt\", \"requested_by\".\"encrypted_otp_sent_at\" AS \"requested_by__encrypted_otp_sent_at\", \"requested_by\".\"consumed_timestep\" AS \"requested_by__consumed_timestep\", \"requested_by\".\"otp_required_for_login\" AS \"requested_by__otp_required_for_login\", \"requested_by\".\"deactivated_at\" AS \"requested_by__deactivated_at\", \"requested_by\".\"enabled_two_factor\" AS \"requested_by__enabled_two_factor\", \"requested_by\".\"confirmed_two_factor\" AS \"requested_by__confirmed_two_factor\", \"requested_by\".\"otp_backup_codes\" AS \"requested_by__otp_backup_codes\", \"requested_by\".\"authy_id\" AS \"requested_by__authy_id\", \"requested_by\".\"last_sign_in_with_authy\" AS \"requested_by__last_sign_in_with_authy\", \"requested_by\".\"authy_status\" AS \"requested_by__authy_status\", \"requested_by\".\"email_verified\" AS \"requested_by__email_verified\", \"requested_by\".\"initial_password_updated\" AS \"requested_by__initial_password_updated\", \"requested_by\".\"force_password_update\" AS \"requested_by__force_password_update\", \"requested_by\".\"grace_period\" AS \"requested_by__grace_period\", \"requested_by\".\"awaiting_second_factor\" AS \"requested_by__awaiting_second_factor\", \"requested_by\".\"role\" AS \"requested_by__role\", \"confirmed_by\".\"id\" AS \"confirmed_by__id\", \"confirmed_by\".\"created_at\" AS \"confirmed_by__created_at\", \"confirmed_by\".\"updated_at\" AS \"confirmed_by__updated_at\", \"confirmed_by\".\"name\" AS \"confirmed_by__name\", \"confirmed_by\".\"email\" AS \"confirmed_by__email\", \"confirmed_by\".\"phone_number\" AS \"confirmed_by__phone_number\", \"confirmed_by\".\"encrypted_password\" AS \"confirmed_by__encrypted_password\", \"confirmed_by\".\"reset_password_token\" AS \"confirmed_by__reset_password_token\", \"confirmed_by\".\"reset_password_sent_at\" AS \"confirmed_by__reset_password_sent_at\", \"confirmed_by\".\"remember_created_at\" AS \"confirmed_by__remember_created_at\", \"confirmed_by\".\"sign_in_count\" AS \"confirmed_by__sign_in_count\", \"confirmed_by\".\"current_sign_in_at\" AS \"confirmed_by__current_sign_in_at\", \"confirmed_by\".\"last_sign_in_at\" AS \"confirmed_by__last_sign_in_at\", \"confirmed_by\".\"current_sign_in_ip\" AS \"confirmed_by__current_sign_in_ip\", \"confirmed_by\".\"last_sign_in_ip\" AS \"confirmed_by__last_sign_in_ip\", \"confirmed_by\".\"institution_id\" AS \"confirmed_by__institution_id\", \"confirmed_by\".\"encrypted_api_secret_key\" AS \"confirmed_by__encrypted_api_secret_key\", \"confirmed_by\".\"password_changed_at\" AS \"confirmed_by__password_changed_at\", \"confirmed_by\".\"encrypted_otp_secret\" AS \"confirmed_by__encrypted_otp_secret\", \"confirmed_by\".\"encrypted_otp_secret_iv\" AS \"confirmed_by__encrypted_otp_secret_iv\", \"confirmed_by\".\"encrypted_otp_secret_salt\" AS \"confirmed_by__encrypted_otp_secret_salt\", \"confirmed_by\".\"encrypted_otp_sent_at\" AS \"confirmed_by__encrypted_otp_sent_at\", \"confirmed_by\".\"consumed_timestep\" AS \"confirmed_by__consumed_timestep\", \"confirmed_by\".\"otp_required_for_login\" AS \"confirmed_by__otp_required_for_login\", \"confirmed_by\".\"deactivated_at\" AS \"confirmed_by__deactivated_at\", \"confirmed_by\".\"enabled_two_factor\" AS \"confirmed_by__enabled_two_factor\", \"confirmed_by\".\"confirmed_two_factor\" AS \"confirmed_by__confirmed_two_factor\", \"confirmed_by\".\"otp_backup_codes\" AS \"confirmed_by__otp_backup_codes\", \"confirmed_by\".\"authy_id\" AS \"confirmed_by__authy_id\", \"confirmed_by\".\"last_sign_in_with_authy\" AS \"confirmed_by__last_sign_in_with_authy\", \"confirmed_by\".\"authy_status\" AS \"confirmed_by__authy_status\", \"confirmed_by\".\"email_verified\" AS \"confirmed_by__email_verified\", \"confirmed_by\".\"initial_password_updated\" AS \"confirmed_by__initial_password_updated\", \"confirmed_by\".\"force_password_update\" AS \"confirmed_by__force_password_update\", \"confirmed_by\".\"grace_period\" AS \"confirmed_by__grace_period\", \"confirmed_by\".\"awaiting_second_factor\" AS \"confirmed_by__awaiting_second_factor\", \"confirmed_by\".\"role\" AS \"confirmed_by__role\", \"cancelled_by\".\"id\" AS \"cancelled_by__id\", \"cancelled_by\".\"created_at\" AS \"cancelled_by__created_at\", \"cancelled_by\".\"updated_at\" AS \"cancelled_by__updated_at\", \"cancelled_by\".\"name\" AS \"cancelled_by__name\", \"cancelled_by\".\"email\" AS \"cancelled_by__email\", \"cancelled_by\".\"phone_number\" AS \"cancelled_by__phone_number\", \"cancelled_by\".\"encrypted_password\" AS \"cancelled_by__encrypted_password\", \"cancelled_by\".\"reset_password_token\" AS \"cancelled_by__reset_password_token\", \"cancelled_by\".\"reset_password_sent_at\" AS \"cancelled_by__reset_password_sent_at\", \"cancelled_by\".\"remember_created_at\" AS \"cancelled_by__remember_created_at\", \"cancelled_by\".\"sign_in_count\" AS \"cancelled_by__sign_in_count\", \"cancelled_by\".\"current_sign_in_at\" AS \"cancelled_by__current_sign_in_at\", \"cancelled_by\".\"last_sign_in_at\" AS \"cancelled_by__last_sign_in_at\", \"cancelled_by\".\"current_sign_in_ip\" AS \"cancelled_by__current_sign_in_ip\", \"cancelled_by\".\"last_sign_in_ip\" AS \"cancelled_by__last_sign_in_ip\", \"cancelled_by\".\"institution_id\" AS \"cancelled_by__institution_id\", \"cancelled_by\".\"encrypted_api_secret_key\" AS \"cancelled_by__encrypted_api_secret_key\", \"cancelled_by\".\"password_changed_at\" AS \"cancelled_by__password_changed_at\", \"cancelled_by\".\"encrypted_otp_secret\" AS \"cancelled_by__encrypted_otp_secret\", \"cancelled_by\".\"encrypted_otp_secret_iv\" AS \"cancelled_by__encrypted_otp_secret_iv\", \"cancelled_by\".\"encrypted_otp_secret_salt\" AS \"cancelled_by__encrypted_otp_secret_salt\", \"cancelled_by\".\"encrypted_otp_sent_at\" AS \"cancelled_by__encrypted_otp_sent_at\", \"cancelled_by\".\"consumed_timestep\" AS \"cancelled_by__consumed_timestep\", \"cancelled_by\".\"otp_required_for_login\" AS \"cancelled_by__otp_required_for_login\", \"cancelled_by\".\"deactivated_at\" AS \"cancelled_by__deactivated_at\", \"cancelled_by\".\"enabled_two_factor\" AS \"cancelled_by__enabled_two_factor\", \"cancelled_by\".\"confirmed_two_factor\" AS \"cancelled_by__confirmed_two_factor\", \"cancelled_by\".\"otp_backup_codes\" AS \"cancelled_by__otp_backup_codes\", \"cancelled_by\".\"authy_id\" AS \"cancelled_by__authy_id\", \"cancelled_by\".\"last_sign_in_with_authy\" AS \"cancelled_by__last_sign_in_with_authy\", \"cancelled_by\".\"authy_status\" AS \"cancelled_by__authy_status\", \"cancelled_by\".\"email_verified\" AS \"cancelled_by__email_verified\", \"cancelled_by\".\"initial_password_updated\" AS \"cancelled_by__initial_password_updated\", \"cancelled_by\".\"force_password_update\" AS \"cancelled_by__force_password_update\", \"cancelled_by\".\"grace_period\" AS \"cancelled_by__grace_period\", \"cancelled_by\".\"awaiting_second_factor\" AS \"cancelled_by__awaiting_second_factor\", \"cancelled_by\".\"role\" AS \"cancelled_by__role\", \"work_item\".\"id\" AS \"work_item__id\", \"work_item\".\"created_at\" AS \"work_item__created_at\", \"work_item\".\"updated_at\" AS \"work_item__updated_at\", \"work_item\".\"name\" AS \"work_item__name\", \"work_item\".\"etag\" AS \"work_item__etag\", \"work_item\".\"institution_id\" AS \"work_item__institution_id\", \"work_item\".\"intellectual_object_id\" AS \"work_item__intellectual_object_id\", \"work_item\".\"generic_file_id\" AS \"work_item__generic_file_id\", \"work_item\".\"bucket\" AS \"work_item__bucket\", \"work_item\".\"user\" AS \"work_item__user\", \"work_item\".\"note\" AS \"work_item__note\", \"work_item\".\"action\" AS \"work_item__action\", \"work_item\".\"stage\" AS \"work_item__stage\", \"work_item\".\"status\" AS \"work_item__status\", \"work_item\".\"outcome\" AS \"work_item__outcome\", \"work_item\".\"bag_date\" AS \"work_item__bag_date\", \"work_item\".\"date_processed\" AS \"work_item__date_processed\", \"work_item\".\"retry\" AS \"work_item__retry\", \"work_item\".\"node\" AS \"work_item__node\", \"work_item\".\"pid\" AS \"work_item__pid\", \"work_item\".\"needs_admin_review\" AS \"work_item__needs_admin_review\", \"work_item\".\"queued_at\" AS \"work_item__queued_at\", \"work_item\".\"size\" AS \"work_item__size\", \"work_item\".\"stage_started_at\" AS \"work_item__stage_started_at\", \"work_item\".\"aptrust_approver\" AS \"work_item__aptrust_approver\", \"work_item\".\"inst_approver\" AS \"work_item__inst_approver\" FROM \"deletion_requests\" AS \"deletion_request\" LEFT JOIN \"users\" AS \"requested_by\" ON \"requested_by\".\"id\" = \"deletion_request\".\"requested_by_id\" LEFT JOIN \"users\" AS \"confirmed_by\" ON \"confirmed_by\".\"id\" = \"deletion_request\".\"confirmed_by_id\" LEFT JOIN \"users\" AS \"cancelled_by\" ON \"cancelled_by\".\"id\" = \"deletion_request\".\"cancelled_by_id\" LEFT JOIN \"work_items\" AS \"work_item\" ON \"work_item\".\"id\" = \"deletion_request\".\"work_item_id\" WHERE ((\"deletion_request\".\"id\" = 4))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"deletion_requests_generic_files\".*, \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" JOIN \"deletion_requests_generic_files\" AS \"deletion_requests_generic_files\" ON (\"deletion_requests_generic_files\".\"deletion_request_id\") IN (4) WHERE (\"generic_file\".\"id\" = \"deletion_requests_generic_files\".\"generic_file_id\")"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"deletion_requests_intellectual_objects\".*, \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\" FROM \"intellectual_objects\" AS \"intellectual_object\" JOIN \"deletion_requests_intellectual_objects\" AS \"deletion_requests_intellectual_objects\" ON (\"deletion_requests_intellectual_objects\".\"deletion_request_id\") IN (4) WHERE (\"intellectual_object\".\"id\" = \"deletion_requests_intellectual_objects\".\"intellectual_object_id\")"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"alert\".\"id\", \"alert\".\"institution_id\", \"alert\".\"type\", \"alert\".\"subject\", \"alert\".\"content\", \"alert\".\"deletion_request_id\", \"alert\".\"created_at\", \"deletion_request\".\"id\" AS \"deletion_request__id\", \"deletion_request\".\"institution_id\" AS \"deletion_request__institution_id\", \"deletion_request\".\"requested_by_id\" AS \"deletion_request__requested_by_id\", \"deletion_request\".\"requested_at\" AS \"deletion_request__requested_at\", \"deletion_request\".\"encrypted_confirmation_token\" AS \"deletion_request__encrypted_confirmation_token\", \"deletion_request\".\"confirmed_by_id\" AS \"deletion_request__confirmed_by_id\", \"deletion_request\".\"confirmed_at\" AS \"deletion_request__confirmed_at\", \"deletion_request\".\"cancelled_by_id\" AS \"deletion_request__cancelled_by_id\", \"deletion_request\".\"cancelled_at\" AS \"deletion_request__cancelled_at\", \"deletion_request\".\"work_item_id\" AS \"deletion_request__work_item_id\" FROM \"alerts\" AS \"alert\" LEFT JOIN \"deletion_requests\" AS \"deletion_request\" ON \"deletion_request\".\"id\" = \"alert\".\"deletion_request_id\" WHERE ((deletion_request_id = 4))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"alerts_users\".*, \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\" FROM \"users\" AS \"user\" JOIN \"alerts_users\" AS \"alerts_users\" ON (\"alerts_users\".\"alert_id\") IN (9) WHERE (\"user\".\"id\" = \"alerts_users\".\"user_id\")"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 6)"}
{"level":"error","time":"2022-06-22T13:30:53-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.IntellectualObjectInitDelete, ResourceType: IntellectualObject, ResourceID: 6, InstID: 3, Gin Path: /objects/init_delete/:id, Request Path: /objects/init_delete/6, Permission: IntellectualObjectRequestDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"IsAPIRoute - NO - /objects/init_delete/6"}
{"level":"warn","status":403,"method":"POST","path":"/objects/init_delete/6","ip":"","latency":20.41218,"user-agent":"","time":"2022-06-22T13:30:53-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((\"intellectual_object_view\".\"id\" = 2))"}
{"level":"info","status":200,"method":"GET","path":"/objects/request_restore/2","ip":"","latency":23.118236,"user-agent":"","time":"2022-06-22T13:30:53-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((\"intellectual_object_view\".\"id\" = 2))"}
{"level":"info","status":200,"method":"GET","path":"/objects/request_restore/2","ip":"","latency":24.659901,"user-agent":"","time":"2022-06-22T13:30:53-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((\"intellectual_object_view\".\"id\" = 2))"}
{"level":"info","status":200,"method":"GET","path":"/objects/request_restore/2","ip":"","latency":19.516693,"user-agent":"","time":"2022-06-22T13:30:53-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 6)"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((\"intellectual_object_view\".\"id\" = 6))"}
{"level":"info","status":200,"method":"GET","path":"/objects/request_restore/6","ip":"","latency":27.46985,"user-agent":"","time":"2022-06-22T13:30:53-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 6)"}
{"level":"error","time":"2022-06-22T13:30:53-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.IntellectualObjectRequestRestore, ResourceType: IntellectualObject, ResourceID: 6, InstID: 3, Gin Path: /objects/request_restore/:id, Request Path: /objects/request_restore/6, Permission: IntellectualObjectRestore, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"IsAPIRoute - NO - /objects/request_restore/6"}
{"level":"warn","status":403,"method":"GET","path":"/objects/request_restore/6","ip":"","latency":19.640576,"user-agent":"","time":"2022-06-22T13:30:53-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 6)"}
{"level":"error","time":"2022-06-22T13:30:53-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.IntellectualObjectRequestRestore, ResourceType: IntellectualObject, ResourceID: 6, InstID: 3, Gin Path: /objects/request_restore/:id, Request Path: /objects/request_restore/6, Permission: IntellectualObjectRestore, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"IsAPIRoute - NO - /objects/request_restore/6"}
{"level":"warn","status":403,"method":"GET","path":"/objects/request_restore/6","ip":"","latency":21.289565,"user-agent":"","time":"2022-06-22T13:30:53-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: drop table if exists \"ar_internal_metadata\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: drop table if exists \"bulk_delete_jobs_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: drop table if exists \"confirmation_tokens\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: drop table if exists \"emails\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: drop table if exists \"emails_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: drop table if exists \"emails_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:53-04:00","message":"Starting SQL: drop table if exists \"emails_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"emails_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"old_passwords\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"schema_migrations\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"snapshots\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"usage_samples\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"alerts_work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"alerts_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"alerts_premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"alerts\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"deletion_requests_intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"deletion_requests\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"work_items\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"premis_events\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"storage_records\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"checksums\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"generic_files\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"intellectual_objects\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"roles_users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"users\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"institutions\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"roles\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: drop table if exists \"storage_options\" cascade"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: --\n-- schema.sql\n--\n-- This file represents the full registry schema.\n--\n-- The migrations.sql file updates the old Pharos schema, as it existed\n-- in the feature/storage_record branch, so that it matches this schema.\n--\n-- https://github.com/APTrust/pharos/blob/feature/storage-record/db/schema.rb\n--\n\n\n-- public.ar_internal_metadata definition\n--\n-- This is a legacy table used by ActiveRecord.\n-- We can drop this once production is stable.\n--\nCREATE TABLE public.ar_internal_metadata (\n\t\"key\" varchar NOT NULL,\n\tvalue varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT ar_internal_metadata_pkey PRIMARY KEY (key)\n);\n\n\n-- public.bulk_delete_jobs definition\n--\n-- This is the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs (\n\tid bigserial NOT NULL,\n\trequested_by varchar NULL,\n\tinstitutional_approver varchar NULL,\n\taptrust_approver varchar NULL,\n\tinstitutional_approval_at timestamp NULL,\n\taptrust_approval_at timestamp NULL,\n\tnote text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id int4 NOT NULL,\n\tCONSTRAINT bulk_delete_jobs_pkey PRIMARY KEY (id)\n);\n\n\n-- public.bulk_delete_jobs_emails definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_emails (\n\tbulk_delete_job_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_emails_on_bulk_delete_job_id ON public.bulk_delete_jobs_emails USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_emails_on_email_id ON public.bulk_delete_jobs_emails USING btree (email_id);\n\n\n-- public.bulk_delete_jobs_generic_files definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_generic_files (\n\tbulk_delete_job_id int8 NULL,\n\tgeneric_file_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_bulk_delete_job_id ON public.bulk_delete_jobs_generic_files USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_generic_files_on_generic_file_id ON public.bulk_delete_jobs_generic_files USING btree (generic_file_id);\n\n\n-- public.bulk_delete_jobs_institutions definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_institutions (\n\tbulk_delete_job_id int8 NULL,\n\tinstitution_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_bulk_delete_job_id ON public.bulk_delete_jobs_institutions USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_institutions_on_institution_id ON public.bulk_delete_jobs_institutions USING btree (institution_id);\n\n\n-- public.bulk_delete_jobs_intellectual_objects definition\n--\n-- Related to the legacy bulk delete table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.bulk_delete_jobs_intellectual_objects (\n\tbulk_delete_job_id int8 NULL,\n\tintellectual_object_id int8 NULL\n);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_bulk_job_id ON public.bulk_delete_jobs_intellectual_objects USING btree (bulk_delete_job_id);\nCREATE INDEX index_bulk_delete_jobs_intellectual_objects_on_object_id ON public.bulk_delete_jobs_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.confirmation_tokens definition\n--\n-- This is a legacy table. We can likely delete it\n-- after production is stable.\n--\nCREATE TABLE public.confirmation_tokens (\n\tid bigserial NOT NULL,\n\t\"token\" varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tuser_id int4 NULL,\n\tCONSTRAINT confirmation_tokens_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails definition\n--\n-- This legacy table will be replaced by the new alerts table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails (\n\tid bigserial NOT NULL,\n\temail_type varchar NULL,\n\tevent_identifier varchar NULL,\n\titem_id int4 NULL,\n\temail_text text NULL,\n\tuser_list text NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tinstitution_id int4 NULL,\n\tCONSTRAINT emails_pkey PRIMARY KEY (id)\n);\n\n\n-- public.emails_generic_files definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_generic_files (\n\tgeneric_file_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_generic_files_on_email_id ON public.emails_generic_files USING btree (email_id);\nCREATE INDEX index_emails_generic_files_on_generic_file_id ON public.emails_generic_files USING btree (generic_file_id);\n\n\n-- public.emails_intellectual_objects definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_intellectual_objects (\n\tintellectual_object_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_intellectual_objects_on_email_id ON public.emails_intellectual_objects USING btree (email_id);\nCREATE INDEX index_emails_intellectual_objects_on_intellectual_object_id ON public.emails_intellectual_objects USING btree (intellectual_object_id);\n\n\n-- public.emails_premis_events definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_premis_events (\n\tpremis_event_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_premis_events_on_email_id ON public.emails_premis_events USING btree (email_id);\nCREATE INDEX index_emails_premis_events_on_premis_event_id ON public.emails_premis_events USING btree (premis_event_id);\n\n\n-- public.emails_work_items definition\n--\n-- Related to the legacy emails table.\n-- We should eventually archive this, but keep the\n-- data somewhere for historical and audit purposes.\n--\nCREATE TABLE public.emails_work_items (\n\twork_item_id int8 NULL,\n\temail_id int8 NULL\n);\nCREATE INDEX index_emails_work_items_on_email_id ON public.emails_work_items USING btree (email_id);\nCREATE INDEX index_emails_work_items_on_work_item_id ON public.emails_work_items USING btree (work_item_id);\n\n\n-- public.generic_files definition\nCREATE TABLE public.generic_files (\n\tid serial NOT NULL,\n\tfile_format varchar NULL,\n\t\"size\" int8 NULL,\n\tidentifier varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tlast_fixity_check timestamp NOT NULL DEFAULT '2000-01-01 00:00:00'::timestamp without time zone,\n\tinstitution_id int4 NOT NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tuuid varchar NOT NULL,\n\tCONSTRAINT generic_files_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_generic_files_on_created_at ON public.generic_files USING btree (created_at);\nCREATE UNIQUE INDEX index_generic_files_on_identifier ON public.generic_files USING btree (identifier);\nCREATE INDEX index_generic_files_on_institution_id ON public.generic_files USING btree (institution_id);\nCREATE INDEX index_generic_files_on_institution_id_and_state ON public.generic_files USING btree (institution_id, state);\nCREATE INDEX index_generic_files_on_institution_id_and_updated_at ON public.generic_files USING btree (institution_id, updated_at);\nCREATE INDEX index_generic_files_on_intellectual_object_id ON public.generic_files USING btree (intellectual_object_id);\nCREATE INDEX index_generic_files_on_updated_at ON public.generic_files USING btree (updated_at);\nCREATE UNIQUE INDEX index_generic_files_on_uuid ON public.generic_files USING btree (uuid);\nCREATE INDEX ix_gf_last_fixity_check ON public.generic_files USING btree (last_fixity_check);\n\n\n-- public.institutions definition\nCREATE TABLE public.institutions (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\tidentifier varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\t\"type\" varchar NULL,\n\tmember_institution_id int4 NULL,\n\tdeactivated_at timestamp NULL,\n\totp_enabled bool NULL,\n    enable_spot_restore bool not null default false,\n\treceiving_bucket varchar NOT NULL,\n\trestore_bucket varchar NOT NULL,\n\tCONSTRAINT institutions_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_institutions_on_name ON public.institutions USING btree (name);\n\n\n-- public.intellectual_objects definition\nCREATE TABLE public.intellectual_objects (\n\tid serial NOT NULL,\n\ttitle varchar NULL,\n\tdescription text NULL,\n\tidentifier varchar NULL,\n\talt_identifier varchar NULL,\n\t\"access\" varchar NULL,\n\tbag_name varchar NULL,\n\tinstitution_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tstate varchar NULL,\n\tetag varchar NULL,\n\tbag_group_identifier varchar NULL,\n\tstorage_option varchar NOT NULL DEFAULT 'Standard'::character varying,\n\tbagit_profile_identifier varchar NULL,\n\tsource_organization varchar NULL,\n\tinternal_sender_identifier varchar NULL,\n\tinternal_sender_description text NULL,\n\tCONSTRAINT intellectual_objects_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_intellectual_objects_on_bag_name ON public.intellectual_objects USING btree (bag_name);\nCREATE INDEX index_intellectual_objects_on_created_at ON public.intellectual_objects USING btree (created_at);\nCREATE UNIQUE INDEX index_intellectual_objects_on_identifier ON public.intellectual_objects USING btree (identifier);\nCREATE INDEX index_intellectual_objects_on_institution_id ON public.intellectual_objects USING btree (institution_id);\nCREATE INDEX index_intellectual_objects_on_updated_at ON public.intellectual_objects USING btree (updated_at);\n\n\n-- public.old_passwords definition\n--\n-- This is a legacy table. We can get rid of this if we\n-- abandon mandatory password changes. Wait until that's\n-- decided.\n--\nCREATE TABLE public.old_passwords (\n\tid bigserial NOT NULL,\n\tencrypted_password varchar NOT NULL,\n\tpassword_salt varchar NULL,\n\tpassword_archivable_type varchar NOT NULL,\n\tpassword_archivable_id int4 NOT NULL,\n\tcreated_at timestamp NULL,\n\tCONSTRAINT old_passwords_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_password_archivable ON public.old_passwords USING btree (password_archivable_type, password_archivable_id);\n\n\n-- public.premis_events definition\nCREATE TABLE public.premis_events (\n\tid serial NOT NULL,\n\tidentifier varchar NULL,\n\tevent_type varchar NULL,\n\tdate_time varchar NULL,\n\toutcome_detail varchar NULL,\n\tdetail varchar NULL,\n\toutcome_information varchar NULL,\n\t\"object\" varchar NULL,\n\tagent varchar NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\toutcome varchar NULL,\n\tinstitution_id int4 NULL,\n\told_uuid varchar NULL,\n\tCONSTRAINT premis_events_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_premis_events_date_time_desc ON public.premis_events USING btree (date_time DESC);\nCREATE INDEX index_premis_events_on_event_type ON public.premis_events USING btree (event_type);\nCREATE INDEX index_premis_events_on_event_type_and_outcome ON public.premis_events USING btree (event_type, outcome);\nCREATE INDEX index_premis_events_on_generic_file_id ON public.premis_events USING btree (generic_file_id);\nCREATE UNIQUE INDEX index_premis_events_on_identifier ON public.premis_events USING btree (identifier);\nCREATE INDEX index_premis_events_on_institution_id ON public.premis_events USING btree (institution_id);\nCREATE INDEX index_premis_events_on_intellectual_object_id ON public.premis_events USING btree (intellectual_object_id);\nCREATE INDEX index_premis_events_on_outcome ON public.premis_events USING btree (outcome);\n\n\n-- public.schema_migrations definition\n--\n-- This is a legacy table used by ActiveRecord\n-- to track which migrations have been applied.\n--\n-- We can delete this when production is stable.\n--\nCREATE TABLE public.schema_migrations (\n\t\"version\" varchar NOT NULL,\n\tCONSTRAINT schema_migrations_pkey PRIMARY KEY (version)\n);\n\n\n-- public.snapshots definition\n--\n-- This table stores point-in-time snapshots\n-- of how much data each depositor has in the repo.\n--\n-- We may eventually delete this, but keep for now.\n--\nCREATE TABLE public.snapshots (\n\tid bigserial NOT NULL,\n\taudit_date timestamp NULL,\n\tinstitution_id int4 NULL,\n\tapt_bytes int8 NULL,\n\t\"cost\" numeric NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tsnapshot_type varchar NULL,\n\tcs_bytes int8 NULL,\n\tgo_bytes int8 NULL,\n\tCONSTRAINT snapshots_pkey PRIMARY KEY (id)\n);\n\n\n-- public.usage_samples definition\n--\n-- No idea what this was supposed to be, but the\n-- table never had any data in the production DB.\n-- Consider deleting this after we're sure it's not used.\n--\nCREATE TABLE public.usage_samples (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tinstitution_id varchar NULL,\n\t\"data\" text NULL,\n\tCONSTRAINT usage_samples_pkey PRIMARY KEY (id)\n);\n\n\n-- public.work_items definition\nCREATE TABLE public.work_items (\n\tid serial NOT NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tintellectual_object_id int4 NULL,\n\tgeneric_file_id int4 NULL,\n\t\"name\" varchar NULL,\n\tetag varchar NULL,\n\tbucket varchar NULL,\n\t\"user\" varchar NULL,\n\tnote text NULL,\n\t\"action\" varchar NULL,\n\tstage varchar NULL,\n\tstatus varchar NULL,\n\toutcome text NULL,\n\tbag_date timestamp NULL,\n\tdate_processed timestamp NULL,\n\tretry bool NOT NULL DEFAULT false,\n\tnode varchar(255) NULL,\n\tpid int4 NULL DEFAULT 0,\n\tneeds_admin_review bool NOT NULL DEFAULT false,\n\tinstitution_id int4 NULL,\n\tqueued_at timestamp NULL,\n\t\"size\" int8 NULL,\n\tstage_started_at timestamp NULL,\n\taptrust_approver varchar NULL,\n\tinst_approver varchar NULL,\n\tCONSTRAINT work_items_pkey PRIMARY KEY (id)\n);\nCREATE INDEX index_work_items_on_action ON public.work_items USING btree (action);\nCREATE INDEX index_work_items_on_date ON public.work_items USING btree (date_processed);\nCREATE INDEX index_work_items_on_etag_and_name ON public.work_items USING btree (etag, name);\nCREATE INDEX index_work_items_on_generic_file_id ON public.work_items USING btree (generic_file_id);\nCREATE INDEX index_work_items_on_institution_id ON public.work_items USING btree (institution_id);\nCREATE INDEX index_work_items_on_institution_id_and_date ON public.work_items USING btree (institution_id, date_processed);\nCREATE INDEX index_work_items_on_intellectual_object_id ON public.work_items USING btree (intellectual_object_id);\nCREATE INDEX index_work_items_on_stage ON public.work_items USING btree (stage);\nCREATE INDEX index_work_items_on_status ON public.work_items USING btree (status);\n\n\n-- public.checksums definition\nCREATE TABLE public.checksums (\n\tid serial NOT NULL,\n\talgorithm varchar NULL,\n\tdatetime timestamp NULL,\n\tdigest varchar NULL,\n\tgeneric_file_id int4 NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tCONSTRAINT checksums_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_89bb0866e7 FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_checksums_on_generic_file_id ON public.checksums USING btree (generic_file_id);\n\n\n-- public.storage_records definition\nCREATE TABLE public.storage_records (\n\tid bigserial NOT NULL,\n\tgeneric_file_id int4 NULL,\n\turl varchar NULL,\n\tCONSTRAINT storage_records_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_a126ea6adc FOREIGN KEY (generic_file_id) REFERENCES generic_files(id)\n);\nCREATE INDEX index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\n\n-- public.users definition\nCREATE TABLE public.users (\n\tid serial NOT NULL,\n\t\"name\" varchar NULL,\n\temail varchar NULL,\n\tphone_number varchar NULL,\n\tcreated_at timestamp NOT NULL,\n\tupdated_at timestamp NOT NULL,\n\tencrypted_password varchar NOT NULL DEFAULT ''::character varying,\n\treset_password_token varchar NULL,\n\treset_password_sent_at timestamp NULL,\n\tremember_created_at timestamp NULL,\n\tsign_in_count int4 NOT NULL DEFAULT 0,\n\tcurrent_sign_in_at timestamp NULL,\n\tlast_sign_in_at timestamp NULL,\n\tcurrent_sign_in_ip varchar NULL,\n\tlast_sign_in_ip varchar NULL,\n\tinstitution_id int4 NULL,\n\tencrypted_api_secret_key text NULL,\n\tpassword_changed_at timestamp NULL,\n\tencrypted_otp_secret varchar NULL,\n\tencrypted_otp_secret_iv varchar NULL,\n\tencrypted_otp_secret_salt varchar NULL,\n    encrypted_otp_sent_at timestamp NULL,\n\tconsumed_timestep int4 NULL,\n\totp_required_for_login bool NULL,\n\tdeactivated_at timestamp NULL,\n\tenabled_two_factor bool NULL DEFAULT false,\n\tconfirmed_two_factor bool NULL DEFAULT false,\n\totp_backup_codes _varchar NULL,\n\tauthy_id varchar NULL,\n\tlast_sign_in_with_authy timestamp NULL,\n\tauthy_status varchar NULL,\n\temail_verified bool NULL DEFAULT false,\n\tinitial_password_updated bool NULL DEFAULT false,\n\tforce_password_update bool NULL DEFAULT false,\n\taccount_confirmed bool NULL DEFAULT true,\n\tgrace_period timestamp NULL,\n    awaiting_second_factor boolean not null default false,\n    \"role\" varchar(50) NOT NULL default 'none',\n\tCONSTRAINT users_pkey PRIMARY KEY (id),\n\tCONSTRAINT fk_rails_7fcf39ca13 FOREIGN KEY (institution_id) REFERENCES institutions(id)\n);\nCREATE INDEX index_users_on_authy_id ON public.users USING btree (authy_id);\nCREATE UNIQUE INDEX index_users_on_email ON public.users USING btree (email);\nCREATE INDEX index_users_on_institution_id ON public.users USING btree (institution_id);\nCREATE INDEX index_users_on_password_changed_at ON public.users USING btree (password_changed_at);\nCREATE UNIQUE INDEX index_users_on_reset_password_token ON public.users USING btree (reset_password_token);\n\n-------------------------------------------------------------------------------\n-- New tables that were not part of Pharos.\n-- alerts              + join tables\n-- deletion_requests   + join tables\n-------------------------------------------------------------------------------\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index index_alerts_institution_id ON public.alerts (institution_id);\ncreate index index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table public.alerts_users (\n    alert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table public.alerts_work_items (\n    alert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index index_storage_options_name ON public.storage_options (\"name\");\n\n\n\n-------------------------------------------------------------------------------\n-- Functions\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: -- migrations.sql\n--\n-- This file contains ALL alterations that should be applied to the\n-- existing Pharos DB schema (as it exists in the feature/storage-option\n-- branch) to make it match schema.sql.\n--\n-- All operations in this file must be idempotent, so we can run it\n-- any number of times and always know that it will leave the DB in\n-- consistent and known state that matches schema.sql.\n--\n-- NOTE: When migrating old Pharos DB, we will also need to create the\n--       views in the schema.sql file.\n-------------------------------------------------------------------------------\n\n---------------------------------------------------------\n-- START OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n---------------------------------------------------------\n\n-- Drop legacy table from Pharos DB.\ndrop table if exists work_item_states;\n\n-- Create the storage_records table, with indexes.\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\tcreate table public.storage_records (\n    \tid bigserial not null,\n    \tgeneric_file_id int8 not null,\n    \turl varchar not null,\n    \tconstraint storage_records_pkey primary key (id),\n    \tconstraint fk_rails_a126ea6adc foreign key (generic_file_id) references generic_files(id)\n\t);\n\tcreate index if not exists index_storage_records_on_generic_file_id ON public.storage_records USING btree (generic_file_id);\n\tcreate unique index if not exists index_storage_records_on_url ON public.storage_records(\"url\");\n  end if;\nend\n$$;\n\n-- Add column generic_files.uuid.\nalter table generic_files add column if not exists \"uuid\" varchar;\n\n-- Copy uuid from uri into uuid field.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\tupdate generic_files set uuid=split_part(uri, '/', 5);\n  end if;\nend\n$$;\n\n-- Change generic_files.uuid to not null and add a unique index.\ndo\n$$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uuid' and is_nullable = 'YES') then\n  \talter table generic_files alter column \"uuid\" set not null;\n\tcreate unique index if not exists index_generic_files_on_uuid on generic_files(uuid);\n  end if;\nend\n$$;\n\n-- Copy generic_files.uri from storage_records.url.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='generic_files' AND column_name='uri') then\n\n  \t  -- Get the intial URL. All items, regadless of storage option, have one URL.\n      -- The inner if statement makes sure this hasn't already run. (Prevents duplicate inserts.)\n\t  if exists (select 1 from information_schema.columns where table_schema='public' AND table_name='storage_records') then\n\t    if not exists (select 1 from storage_records where length(url) > 0) then\n\t\t  insert into storage_records (generic_file_id, url) select id, uri from generic_files gf order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- For items in standard storage, we need to add a Glacier URL. URLs differ per environment, so we check.\n\t  -- In each case, the inner if statement tries to ensure that these inserts have not already run.\n\n\t  -- Production\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.preservation.storage/', '/aptrust.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.preservation.storage/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Test/Demo\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.test.preservation.oregon/%') then\n\t      insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.test.preservation/', '/aptrust.test.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.test.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n\t  -- Staging\n\t  if exists (select 1 from generic_files gf where uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%') then\n\t    if not exists (select 1 from storage_records where url like 'https://s3.amazonaws.com/aptrust.staging.preservation.oregon/%') then\n\t\t  insert into storage_records(generic_file_id, url)\n\t\t  select gf.id, replace(uri, '/aptrust.staging.preservation/', '/aptrust.staging.preservation.oregon/') from generic_files gf\n\t\t  where gf.uri like 'https://s3.amazonaws.com/aptrust.staging.preservation/%' order by gf.id;\n\t\tend if;\n\t  end if;\n\n  end if;\nend\n$$;\n\n-- Now remove generic_files.uri, since the data is now in storage_records\nalter table generic_files drop column if exists uri;\n\n-------------------------------------------------------\n-- END OF PHAROS MASTER -> STORAGE RECORD MIGRATIONS --\n-------------------------------------------------------\n\n-- The premis_events.date_time column is varchar, but it should be\n-- timestamp. We need to change it. This change may fail if 1) there\n-- are invalid or badly formatted dates in the date_time column, or\n-- 2) if any views referencing premis_events.date_time already exist.\n-- Drop premis_events_view if necessary and recreate it after this alteration.\n--\n-- This change may take a long time, as premis_events has over 100M rows.\ndo\n$$\nbegin\n\tif exists(\n\t\tselect 1 from information_schema.columns\n\t\twhere table_schema = 'public'\n\t\tand table_name = 'premis_events'\n\t\tand column_name = 'date_time'\n\t\tand data_type = 'character varying')\n\tthen\n\t\talter table premis_events alter column date_time type timestamp\n\t\tusing TO_TIMESTAMP(date_time, 'YYYY-MM-DDTHH24:MI:SS');\n\tend if;\nend\n$$;\n\n-- We need to fix the user role structure. Pharos allows a user to have\n-- multiple roles at a single institution, though our business rules disallow\n-- that, and no user has ever had more than one role. To simplify the DB\n-- and our queries, we need to do the following:\n--\n-- 1. Create a role column in the users table.\n-- 2. Populate that column with the value with each user's role from\n--    user -> roles_user -> roles.\n-- 3. Drop the roles_users table.\n-- 4. Drop the roles table.\n\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='role') then\n \talter table users add column \"role\" varchar(50) not null default 'none';\n \tupdate users u set \"role\" = coalesce((select r.name from \"roles\" r inner join roles_users ru on ru.role_id = r.id where ru.user_id = u.id), 'none');\n    drop table if exists roles_users;\n    drop table if exists roles;\n  end if;\nend\n$$;\n\n-- Add awaiting_second_factor\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='awaiting_second_factor') then\n \talter table users add column \"awaiting_second_factor\" boolean not null default false;\n  end if;\nend\n$$;\n\n-- Add encrypted_otp_sent_at\ndo $$\nbegin\n  if not exists (select 1 from information_schema.columns where table_schema='public' AND table_name='users' AND column_name='encrypted_otp_sent_at') then\n \talter table users add column \"encrypted_otp_sent_at\" timestamp null;\n  end if;\nend\n$$;\n\n\n-- The ingest_state columns were part of a proposed architecture we never\n-- implemented. They have never been used, and we don't need them.\nalter table intellectual_objects drop column if exists ingest_state;\nalter table generic_files drop column if exists ingest_state;\n\n\n-- intellectual_objects.bag_group_identifier is almost always empty.\n-- Make this column nullable to ease inserts.\nalter table intellectual_objects alter column bag_group_identifier drop not null;\n\n\n-- Remove object_identifier and generic_file_identifier from work_items.\n-- We can use a view to join the files & objects tables, avoiding the\n-- duplicate data.\nalter table work_items drop column if exists object_identifier;\nalter table work_items drop column if exists generic_file_identifier;\n\n-- The work_items.date column actually refers to the datetime on which\n-- the item was last processed by one of our Go workers. The name \"date\"\n-- is too vague and ambiguous, so let's call it what it is.\ndo $$\nbegin\n  if exists (select 1 from information_schema.columns\n    where table_schema='public' AND table_name='work_items' AND column_name='date') then\n    alter table work_items rename column \"date\" to \"date_processed\";\n  end if;\nend\n$$;\n\n-- Update the indexes on work_items to reflect the change from date to\n-- date_processed.\n\ndrop index if exists index_work_items_on_date;\ndrop index if exists index_work_items_on_institution_id_and_date;\n\ncreate index if not exists index_work_items_on_date_processed on work_items(date_processed);\ncreate index if not exists index_work_items_on_inst_id_and_date_processed on work_items(institution_id, date_processed);\n\n-- These columns are unnecessary in the premis_events table.\n-- We can get them by joining other tables in a view.\n-- This will have a large impact on storage space, since these\n-- two fields together average ~100 bytes per record, and as of\n-- Jan. 2021, we have around 120M records. Dropping these columns\n-- also drops the indexes on these two columns, which are huge and\n-- are rarely used.\nalter table premis_events drop column if exists intellectual_object_identifier;\nalter table premis_events drop column if exists generic_file_identifier;\n\n-- Get rid of useless indexes. We can add these back if they actually turn\n-- out to be useful.\n--\n-- generic_files\ndrop index if exists index_files_on_inst_state_and_format;\ndrop index if exists index_files_on_inst_state_and_updated;\ndrop index if exists index_generic_files_on_file_format;\ndrop index if exists index_generic_files_on_file_format_and_state;\ndrop index if exists index_generic_files_on_institution_id_and_size_and_state;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_file_format;\ndrop index if exists index_generic_files_on_intellectual_object_id_and_state;\ndrop index if exists index_generic_files_on_size;\ndrop index if exists index_generic_files_on_size_and_state;\ndrop index if exists index_generic_files_on_state;\ndrop index if exists index_generic_files_on_state_and_updated_at;\n\n-- intellectual_objects\ndrop index if exists index_intellectual_objects_on_access;\ndrop index if exists index_intellectual_objects_on_institution_id_and_state;\ndrop index if exists index_intellectual_objects_on_state;\n\n-- premis_events\ndrop index if exists index_premis_events_on_generic_file_id_and_event_type;\ndrop index if exists index_premis_events_on_identifier_and_institution_id;\n\n-- institutions\ncreate unique index if not exists index_institutions_identifier on institutions using btree(identifier);\ncreate unique index if not exists index_institutions_receiving_bucket on institutions using btree(receiving_bucket);\ncreate unique index if not exists index_institutions_restore_bucket on institutions using btree(restore_bucket);\n\n-- Allow institutions to turn spot restoration tests on or off.\n-- Default is off.\nalter table institutions add column if not exists enable_spot_restore boolean not null default false;\n\n-- ********************************************************************\n--\n-- Add tables for alerts and deletions that did not exist in Pharos\n--\n-- ********************************************************************\n\n-- deletion_requests track requests for file and object deletions,\n-- who initiated them and who approved them\ncreate table if not exists public.deletion_requests (\n\tid bigserial primary key,\n\tinstitution_id integer not null references public.institutions(id),\n\trequested_by_id integer not null references public.users(id),\n\trequested_at timestamp not null,\n\tencrypted_confirmation_token varchar not null,\n\tconfirmed_by_id integer references public.users(id),\n\tconfirmed_at timestamp,\n\tcancelled_by_id integer references public.users(id),\n\tcancelled_at timestamp,\n    work_item_id integer null references public.work_items(id)\n);\ncreate index if not exists index_deletion_requests_institution_id ON public.deletion_requests (institution_id);\n\n\n-- deletion_requests_generic_files records which files belong to a deletion request\ncreate table if not exists public.deletion_requests_generic_files (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tgeneric_file_id integer not null references public.generic_files(id)\n);\ncreate unique index if not exists index_drgf_unique ON public.deletion_requests_generic_files (deletion_request_id, generic_file_id);\n\n-- deletion_requests_intellectual_objects records which objects belong to a deletion request\ncreate table if not exists public.deletion_requests_intellectual_objects (\n\tdeletion_request_id integer not null references public.deletion_requests(id),\n\tintellectual_object_id integer not null references public.intellectual_objects(id)\n);\ncreate unique index if not exists index_drio_unique ON public.deletion_requests_intellectual_objects (deletion_request_id, intellectual_object_id);\n\n\n-- alerts stores the content of alert messages. These messages appear in the web UI\n-- and may also be emailed to users, depending on the alert type.\n-- Column deletion_request_id will typically be null.\ncreate table if not exists public.alerts (\n\tid bigserial primary key,\n\tinstitution_id integer references public.institutions(id),\n\t\"type\" varchar not null,\n    \"subject\" varchar not null,\n\t\"content\" text not null,\n\tdeletion_request_id integer references public.deletion_requests(id),\n\tcreated_at timestamp not null\n);\ncreate index if not exists index_alerts_institution_id ON public.alerts (institution_id);\ncreate index if not exists index_alerts_type ON public.alerts (\"type\");\n\n\n-- alerts_users tracks which users should see which alerts. Depending on alert.type,\n-- the message may be emailed to the user (for example, a deletion approval alert),\n-- or it may simply be displayed in the web UI.\ncreate table if not exists public.alerts_users (\n\talert_id integer not null references public.alerts(id),\n\tuser_id integer not null references public.users(id),\n\tsent_at timestamp default null,\n\tread_at timestamp default null\n);\ncreate index if not exists index_alerts_users_alert_id ON public.alerts_users (alert_id);\ncreate index if not exists index_alerts_users_user_id ON public.alerts_users (user_id);\ncreate unique index if not exists index_alerts_users_unique ON public.alerts_users (alert_id, user_id);\n\n\n-- alerts_work_items link an alerts to one or more work items.\ncreate table if not exists public.alerts_work_items (\n\talert_id integer not null references public.alerts(id),\n\twork_item_id integer not null references public.work_items(id)\n);\ncreate index if not exists index_alerts_work_items_alert_id ON public.alerts_work_items (alert_id);\ncreate unique index if not exists index_alerts_work_items_unique ON public.alerts_work_items (alert_id, work_item_id);\n\n\n-- alerts_premis_events link alerts to one or more premis_events.\ncreate table if not exists public.alerts_premis_events (\n\talert_id integer not null references public.alerts(id),\n\tpremis_event_id integer not null references public.premis_events(id)\n);\ncreate index if not exists index_alerts_premis_events_alert_id ON public.alerts_premis_events(alert_id);\ncreate unique index if not exists index_alerts_premis_events_unique ON public.alerts_premis_events(alert_id, premis_event_id);\n\n\n-- storage_options contains info about storage options that we use\n-- to calculate monthly bills.\ncreate table if not exists public.storage_options (\n\tid bigserial primary key,\n\t\"provider\" varchar not null,\n    \"service\" varchar not null,\n    \"region\" varchar not null,\n    \"name\" varchar not null,\n    cost_gb_per_month decimal(12,8) not null,\n    \"comment\" varchar not null,\n\tupdated_at timestamp not null\n);\ncreate unique index if not exists index_storage_options_name ON public.storage_options (\"name\");\n\n-- In Pharos DB, many generic_file_ids in premis_events are set to zero when they should be null.\n-- Fix that here.\nupdate premis_events set generic_file_id = null where generic_file_id = 0;\n\n-- In Pharos, the Devise auth system leaves stale password reset data forever.\n-- We have to clear these values in Registry, or all users will be stuck in\n-- the \"please finish resetting your password\" loop forever. We have no idea\n-- what reset tokens Devise sent two years ago, so no one will be able to\n-- unlock their accounts.\nupdate users set reset_password_token = null, reset_password_sent_at = null;\n\n\n-------------------------------------------------------------------------------\n-- Functions\n--\n-- Fuctions are defined in schema.sql as well. Adding them to migrations\n-- ensures they'll be present in converted DB.\n-------------------------------------------------------------------------------\n\nCREATE OR REPLACE FUNCTION create_constraint_if_not_exists (t_name text, c_name text, constraint_sql text)\n  RETURNS void\nAS\n$BODY$\n  begin\n    -- Look for our constraint\n    if not exists (select constraint_name\n                   from information_schema.constraint_column_usage\n                   where table_name = t_name  and constraint_name = c_name) then\n        execute 'ALTER TABLE ' || t_name || ' ADD CONSTRAINT ' || c_name || ' ' || constraint_sql;\n    end if;\nend;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: -------------------------------------------------------------------------------\n-- Views\n-------------------------------------------------------------------------------\n\n-- Create a view to pull in columns that used to be in the WorkItems table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view work_items_view as\nselect\n\twi.id,\n\twi.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\twi.intellectual_object_id,\n\tio.identifier as \"object_identifier\",\n\tio.alt_identifier,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\twi.generic_file_id,\n\tgf.identifier as \"generic_file_identifier\",\n\twi.\"name\",\n\twi.etag,\n\twi.bucket,\n\twi.\"user\",\n\twi.note,\n\twi.\"action\",\n\twi.stage,\n\twi.status,\n\twi.outcome,\n\twi.bag_date,\n\twi.date_processed,\n\twi.retry,\n\twi.node,\n\twi.pid,\n\twi.needs_admin_review,\n\twi.\"size\",\n\twi.queued_at,\n\twi.stage_started_at,\n\twi.aptrust_approver,\n\twi.inst_approver,\n\twi.created_at,\n\twi.updated_at\nfrom work_items wi\nleft join institutions i on wi.institution_id = i.id\nleft join intellectual_objects io on wi.intellectual_object_id = io.id\nleft join generic_files gf on wi.generic_file_id = gf.id;\n\n\n-- Create a view to pull in columns that used to be in the PremisEvents table.\n-- These include intellectual_object_identifier and generic_file_identifier.\ncreate or replace view premis_events_view as\nselect\n\tpe.id,\n\tpe.identifier,\n\tpe.institution_id,\n\ti.\"name\" as institution_name,\n\tpe.intellectual_object_id,\n\tio.identifier as intellectual_object_identifier,\n\tpe.generic_file_id,\n\tgf.identifier as generic_file_identifier,\n\tpe.event_type,\n\tpe.date_time,\n\tpe.detail,\n\tpe.outcome,\n\tpe.outcome_detail,\n\tpe.outcome_information,\n\tpe.\"object\",\n\tpe.agent,\n\tpe.created_at,\n\tpe.updated_at,\n\tpe.old_uuid\nfrom premis_events pe\nleft join institutions i on pe.institution_id = i.id\nleft join intellectual_objects io on pe.intellectual_object_id = io.id\nleft join generic_files gf on pe.generic_file_id = gf.id;\n\n\n-- users_view makes it easier to list and search on institution-related\n-- attributes for users.\ncreate or replace view users_view as\nselect\n\tu.id,\n\tu.\"name\",\n\tu.email,\n\tu.phone_number,\n\tu.created_at,\n\tu.updated_at,\n\tu.reset_password_sent_at,\n\tu.remember_created_at,\n\tu.sign_in_count,\n\tu.current_sign_in_at,\n\tu.last_sign_in_at,\n\tu.current_sign_in_ip,\n\tu.last_sign_in_ip,\n\tu.institution_id,\n\tu.password_changed_at,\n\tu.consumed_timestep,\n\tu.otp_required_for_login,\n\tu.deactivated_at,\n\tu.enabled_two_factor,\n\tu.confirmed_two_factor,\n\tu.authy_id,\n\tu.last_sign_in_with_authy,\n\tu.authy_status,\n\tu.email_verified,\n\tu.initial_password_updated,\n\tu.force_password_update,\n\tu.account_confirmed,\n\tu.grace_period,\n\tu.\"role\",\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.state as institution_state,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id,\n\ti2.\"name\" as member_institution_name,\n\ti2.identifier as member_institution_identifier,\n\ti2.state as member_institution_state,\n\ti.otp_enabled,\n\ti.receiving_bucket,\n\ti.restore_bucket\nfrom users u\nleft join institutions i on u.institution_id = i.id\nleft join institutions i2 on i.member_institution_id = i2.id;\n\n\n-- institutions_view shows an institution along with essential\n-- information about its parent, if it has a parent.\n\ncreate or replace view institutions_view as\nselect\n\ti.id,\n\ti.\"name\",\n\ti.identifier,\n\ti.state,\n\ti.\"type\",\n\ti.deactivated_at,\n\ti.otp_enabled,\n\ti.enable_spot_restore,\n\ti.receiving_bucket,\n\ti.restore_bucket,\n\ti.created_at,\n\ti.updated_at,\n\ti.member_institution_id as \"parent_id\",\n\tparent.\"name\" as \"parent_name\",\n\tparent.identifier as \"parent_identifier\",\n\tparent.state as \"parent_state\",\n\tparent.deactivated_at as \"parent_deactivated_at\"\nfrom institutions i\nleft join institutions parent on i.member_institution_id = parent.id;\n\n-- intellectual_objects_view\n\ncreate or replace view intellectual_objects_view as\nselect\n\tio.id,\n\tio.title,\n\tio.description,\n\tio.identifier,\n\tio.alt_identifier,\n\tio.access,\n\tio.bag_name,\n\tio.institution_id,\n\tio.state,\n\tio.etag,\n\tio.bag_group_identifier,\n\tio.storage_option,\n\tio.bagit_profile_identifier,\n\tio.source_organization,\n\tio.internal_sender_identifier,\n\tio.internal_sender_description,\n\tio.created_at,\n\tio.updated_at,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ti.\"type\" as institution_type,\n\ti.member_institution_id as institution_parent_id,\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A') as \"size\",\n\t(select count(*) from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_file_count\",\n\t(select sum(gf.\"size\") from generic_files gf where gf.intellectual_object_id = io.id and gf.state = 'A' and identifier like concat(io.identifier, '/data/%')) as \"payload_size\"\nfrom intellectual_objects io\nleft join institutions i on io.institution_id = i.id;\n\n-- deletion_requests_view\n\ncreate or replace view deletion_requests_view as\nselect dr.id,\n       dr.institution_id,\n       i.\"name\" as institution_name,\n       i.identifier as institution_identifier,\n       dr.requested_by_id,\n       req.\"name\" as requested_by_name,\n       req.email as requested_by_email,\n       dr.requested_at,\n       dr.confirmed_by_id,\n       conf.\"name\" as confirmed_by_name,\n       conf.email as confirmed_by_email,\n       dr.confirmed_at,\n       dr.cancelled_by_id,\n       can.\"name\" as cancelled_by_name,\n       can.email as cancelled_by_email,\n       dr.cancelled_at,\n       (select count(*) from deletion_requests_generic_files drgf where drgf.deletion_request_id = dr.id) as file_count,\n       (select count(*) from deletion_requests_intellectual_objects drio where drio.deletion_request_id = dr.id) as object_count,\n       dr.work_item_id,\n       wi.stage,\n       wi.status,\n       wi.date_processed,\n       wi.\"size\",\n       wi.note\nfrom deletion_requests dr\nleft join institutions i on dr.institution_id = i.id\nleft join users req on dr.requested_by_id = req.id\nleft join users conf on dr.confirmed_by_id = conf.id\nleft join users can on dr.confirmed_by_id = can.id\nleft join work_items wi on dr.work_item_id = wi.id;\n\n-- alerts view\n\ncreate or replace view alerts_view as\nselect\n\ta.id,\n\ta.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\ta.\"type\",\n\ta.subject,\n\ta.\"content\",\n\ta.deletion_request_id,\n\ta.created_at,\n\tau.user_id,\n\tu.\"name\" as user_name,\n\tau.sent_at,\n\tau.read_at\nfrom alerts a\nleft join alerts_users au on a.id = au.alert_id\nleft join users u on au.user_id = u.id\nleft join institutions i on a.institution_id = i.id;\n\n-- storage_option_stats\ncreate or replace view storage_option_stats as\nwith stats as (\n\tselect\n\t\tsum(\"gf\".\"size\") as total_bytes,\n\t\tcount(*) as file_count,\n\t\tgf.institution_id,\n\t\tgf.storage_option\n\tfrom generic_files gf\n\twhere gf.state = 'A'\n\tgroup by rollup (gf.institution_id, gf.storage_option)\n\t)\nselect\n\ts.total_bytes,\n\ts.file_count,\n\ts.institution_id,\n\ts.storage_option,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier\nfrom stats s\nleft join institutions i on s.institution_id = i.id;\n\ncreate or replace view generic_files_view as\nselect\n\tgf.id,\n\tgf.file_format,\n\tgf.\"size\",\n\tgf.identifier,\n\tgf.intellectual_object_id,\n\tio.identifier as object_identifier,\n\tio.\"access\",\n\tgf.state,\n\tgf.last_fixity_check,\n\tgf.institution_id,\n\ti.\"name\" as institution_name,\n\ti.identifier as institution_identifier,\n\tgf.storage_option,\n\tgf.uuid,\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='md5' order by created_at desc limit 1) as \"md5\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha1' order by created_at desc limit 1) as \"sha1\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha256' order by created_at desc limit 1) as \"sha256\",\n\t(select digest from checksums where generic_file_id = gf.id and algorithm='sha512' order by created_at desc limit 1) as \"sha512\",\n\tgf.created_at,\n\tgf.updated_at\nfrom generic_files gf\nleft join intellectual_objects io on io.id = gf.intellectual_object_id\nleft join institutions i on i.id = gf.institution_id;\n\n-- Checksums view\ncreate or replace view checksums_view as\nselect cs.id,\n       cs.algorithm,\n       cs.datetime,\n       cs.digest,\n       gf.state,\n       gf.identifier as \"generic_file_identifier\",\n       cs.generic_file_id,\n       gf.intellectual_object_id,\n       gf.institution_id,\n       cs.created_at,\n       cs.updated_at\nfrom checksums cs\nleft join generic_files gf on cs.generic_file_id = gf.id;\n\n\n---------------------------------------------------------------------------\n--\n-- Count Views\n--\n-- We create these views because count queries on large tables are slow\n-- in postgres. Even if a query can use an index to get a count, it still\n-- has to scan every row in the result set to see if that row is visible\n-- under postgres' mvcc rules. \n--\n-- If the count returns a million rows, postgres has to scan all million\n-- rows. The result is a query that can take 5-15 seconds. The \n-- premis_events table is the worst of the lot. It should surpass 200M\n-- rows by the end of 2022. We do not want to scan those rows every time\n-- someone hits the events page or the events API endpoint.\n--\n-- We run count queries all the time to manage paging in both the web UI\n-- and the API. For large counts, such as \"all events for an institution\",\n-- or \"all files for an institution\", we'll use the counts in the views\n-- below. \n--\n-- For smaller counts, such as \"all files for my institution created \n-- within the past week\", we'll suck it up and let postgres scan the \n-- smaller row sets.\n--\n-- These views will be refreshed every hour or so using an async go \n-- routine so they don't slow down web and API requests.\n--\n-- That means some large counts may be up to an hour out of date, but we\n-- can live with that tradeoff, since this will vastly speed up the loading\n-- of our most commonly hit web and API endpoints.\n--\n-- Note the function update_counts() below. It refreshes all of the count\n-- views.\n-- \n---------------------------------------------------------------------------\n\n-- premis_event_counts\ncreate materialized view if not exists premis_event_counts as\n\tselect institution_id, count(id) as row_count, event_type, outcome\n\tfrom premis_events group by cube(institution_id, event_type, outcome)\n\torder by institution_id, event_type, outcome;\n\n-- intellectual_object_counts\ncreate materialized view if not exists intellectual_object_counts as\n\tselect institution_id, count(id) as row_count, \"state\" \n\tfrom intellectual_objects group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- generic_file_counts\ncreate materialized view if not exists generic_file_counts as\n\tselect institution_id, count(id) as row_count, \"state\"\n\tfrom generic_files group by cube(institution_id, \"state\")\n\torder by institution_id, state; \n\n-- work_item_counts\ncreate materialized view if not exists work_item_counts as\n\tselect institution_id, count(id) as row_count, \"action\"\n\tfrom work_items group by cube(institution_id, \"action\")\n\torder by institution_id, \"action\";\n\n-- \nCREATE OR REPLACE FUNCTION update_counts ()\n  RETURNS integer\nAS\n$BODY$\n  begin\n    refresh materialized view premis_event_counts;\n    refresh materialized view intellectual_object_counts;\n    refresh materialized view generic_file_counts;\n    refresh materialized view work_item_counts;    \n    return 1;\n  end;\n$BODY$\nLANGUAGE plpgsql VOLATILE;\n"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: copy \"storage_options\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_options.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: copy \"institutions\" from '/Users/diamond/aptrust/registry/db/fixtures/institutions.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: copy \"users\" from '/Users/diamond/aptrust/registry/db/fixtures/users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: copy \"intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: copy \"generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: copy \"checksums\" from '/Users/diamond/aptrust/registry/db/fixtures/checksums.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: copy \"storage_records\" from '/Users/diamond/aptrust/registry/db/fixtures/storage_records.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: copy \"premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: copy \"work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: copy \"deletion_requests\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:54-04:00","message":"Starting SQL: copy \"deletion_requests_generic_files\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_generic_files.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: copy \"deletion_requests_intellectual_objects\" from '/Users/diamond/aptrust/registry/db/fixtures/deletion_requests_intellectual_objects.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: copy \"alerts\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: copy \"alerts_premis_events\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_premis_events.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: copy \"alerts_users\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_users.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: copy \"alerts_work_items\" from '/Users/diamond/aptrust/registry/db/fixtures/alerts_work_items.csv' csv header"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_options', 'id'), MAX(id)) FROM \"storage_options\";"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('institutions', 'id'), MAX(id)) FROM \"institutions\";"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('users', 'id'), MAX(id)) FROM \"users\";"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('intellectual_objects', 'id'), MAX(id)) FROM \"intellectual_objects\";"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('generic_files', 'id'), MAX(id)) FROM \"generic_files\";"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('checksums', 'id'), MAX(id)) FROM \"checksums\";"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('storage_records', 'id'), MAX(id)) FROM \"storage_records\";"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('premis_events', 'id'), MAX(id)) FROM \"premis_events\";"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('work_items', 'id'), MAX(id)) FROM \"work_items\";"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('deletion_requests', 'id'), MAX(id)) FROM \"deletion_requests\";"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT setval(pg_get_serial_sequence('alerts', 'id'), MAX(id)) FROM \"alerts\";"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: select update_counts();"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"intellectual_objects\" AS \"intellectual_object\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"intellectual_object\".\"institution_id\" WHERE ((\"intellectual_object\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((institution_id = 2) AND (name = 'pdfs.tar') AND (status NOT IN ('Cancelled', 'Failed', 'Success'))) ORDER BY \"date_processed\" desc"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((intellectual_object_id = 2) AND (status = 'Success') AND (stage IN ('Record', 'Cleanup'))) ORDER BY \"date_processed\" desc LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: INSERT INTO \"work_items\" (\"id\", \"created_at\", \"updated_at\", \"name\", \"etag\", \"institution_id\", \"intellectual_object_id\", \"generic_file_id\", \"bucket\", \"user\", \"note\", \"action\", \"stage\", \"status\", \"outcome\", \"bag_date\", \"date_processed\", \"retry\", \"node\", \"pid\", \"needs_admin_review\", \"queued_at\", \"size\", \"stage_started_at\", \"aptrust_approver\", \"inst_approver\") VALUES (DEFAULT, '2022-06-22 17:30:55.202663+00:00:00', '2022-06-22 17:30:55.202665+00:00:00', 'pdfs.tar', '6b5b18c999dc4fdc9c47a2db90782cee', 2, 2, DEFAULT, 'aptrust.receiving.institution1.edu', 'user@inst1.edu', 'Not started', 'Restore Object', 'Requested', 'Pending', 'Not started', '2016-08-24 10:04:06+00:00:00', '2022-06-22 17:30:55.202663+00:00:00', TRUE, DEFAULT, DEFAULT, FALSE, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT) RETURNING \"id\", \"generic_file_id\", \"node\", \"pid\", \"queued_at\", \"size\", \"stage_started_at\", \"aptrust_approver\", \"inst_approver\""}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=restore_object"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=restore_object: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: UPDATE \"work_items\" AS \"work_item\" SET \"created_at\" = '2022-06-22 17:30:55.202663+00:00:00', \"updated_at\" = '2022-06-22 17:30:55.245555+00:00:00', \"name\" = 'pdfs.tar', \"etag\" = '6b5b18c999dc4fdc9c47a2db90782cee', \"institution_id\" = 2, \"intellectual_object_id\" = 2, \"generic_file_id\" = NULL, \"bucket\" = 'aptrust.receiving.institution1.edu', \"user\" = 'user@inst1.edu', \"note\" = 'Not started', \"action\" = 'Restore Object', \"stage\" = 'Requested', \"status\" = 'Pending', \"outcome\" = 'Not started', \"bag_date\" = '2016-08-24 10:04:06+00:00:00', \"date_processed\" = '2022-06-22 17:30:55.202663+00:00:00', \"retry\" = TRUE, \"node\" = NULL, \"pid\" = NULL, \"needs_admin_review\" = FALSE, \"queued_at\" = '2022-06-22 17:30:55.245555+00:00:00', \"size\" = NULL, \"stage_started_at\" = NULL, \"aptrust_approver\" = NULL, \"inst_approver\" = NULL WHERE \"work_item\".\"id\" = 33"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/objects/init_restore/2","ip":"","latency":93.26874,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((\"intellectual_object_view\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE (intellectual_object_id = 2 and state = 'A') LIMIT 20"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (4, 5, 6))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (4, 5, 6)) ORDER BY \"datetime\" desc, \"algorithm\" asc"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT count(*) FROM \"generic_files\" AS \"generic_file\" WHERE (intellectual_object_id = 2 and state = 'A')"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE ((intellectual_object_id = 2) AND (generic_file_id is null)) ORDER BY \"created_at\" desc LIMIT 5"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT count(*) FROM \"premis_events\" AS \"premis_event\" WHERE (intellectual_object_id = 2 and generic_file_id is null)"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: \n    select\n        sum(\"size\") as \"total_bytes\",\n        (sum(\"size\") / 1073741824) as \"total_gb\",\n        (sum(\"size\") / 1099511627776) as \"total_tb\",\n        count(*) as file_count,\n        coalesce(file_format, 'Total') as \"file_format\"\n        from generic_files\n        where (2 = 0 or institution_id = 2)\n        and   (2 = 0 or intellectual_object_id = 2)\n        and   (state = 'A')\n        group by rollup(file_format)\n        order by file_format\n"}
{"level":"info","status":200,"method":"GET","path":"/objects/show/2","ip":"","latency":30.331909,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((action = 'Restore Object') AND (intellectual_object_id = 2)) LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 6)"}
{"level":"error","time":"2022-06-22T13:30:55-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.IntellectualObjectInitRestore, ResourceType: IntellectualObject, ResourceID: 6, InstID: 3, Gin Path: /objects/init_restore/:id, Request Path: /objects/init_restore/6, Permission: IntellectualObjectRestore, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRoute - NO - /objects/init_restore/6"}
{"level":"warn","status":403,"method":"POST","path":"/objects/init_restore/6","ip":"","latency":16.021132,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 6)"}
{"level":"error","time":"2022-06-22T13:30:55-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.IntellectualObjectInitRestore, ResourceType: IntellectualObject, ResourceID: 6, InstID: 3, Gin Path: /objects/init_restore/:id, Request Path: /objects/init_restore/6, Permission: IntellectualObjectRestore, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRoute - NO - /objects/init_restore/6"}
{"level":"warn","status":403,"method":"POST","path":"/objects/init_restore/6","ip":"","latency":19.411653,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 7))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"premis_events\" AS \"premis_event\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"premis_event\".\"id\", \"premis_event\".\"created_at\", \"premis_event\".\"updated_at\", \"premis_event\".\"agent\", \"premis_event\".\"date_time\", \"premis_event\".\"detail\", \"premis_event\".\"event_type\", \"premis_event\".\"generic_file_id\", \"premis_event\".\"identifier\", \"premis_event\".\"institution_id\", \"premis_event\".\"intellectual_object_id\", \"premis_event\".\"object\", \"premis_event\".\"old_uuid\", \"premis_event\".\"outcome\", \"premis_event\".\"outcome_detail\", \"premis_event\".\"outcome_information\" FROM \"premis_events\" AS \"premis_event\" WHERE ((intellectual_object_id = 1) AND (generic_file_id is null)) ORDER BY \"created_at\" desc LIMIT 5"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT count(*) FROM \"premis_events\" AS \"premis_event\" WHERE (intellectual_object_id = 1 and generic_file_id is null)"}
{"level":"info","status":200,"method":"GET","path":"/objects/events/1","ip":"","latency":23.380095,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"intellectual_objects\" AS \"intellectual_object\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"generic_file\".\"id\", \"generic_file\".\"created_at\", \"generic_file\".\"updated_at\", \"generic_file\".\"file_format\", \"generic_file\".\"size\", \"generic_file\".\"identifier\", \"generic_file\".\"intellectual_object_id\", \"generic_file\".\"state\", \"generic_file\".\"last_fixity_check\", \"generic_file\".\"institution_id\", \"generic_file\".\"storage_option\", \"generic_file\".\"uuid\" FROM \"generic_files\" AS \"generic_file\" WHERE (intellectual_object_id = 1 and state = 'A') LIMIT 20"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"storage_record\".\"id\", \"storage_record\".\"generic_file_id\", \"storage_record\".\"url\" FROM \"storage_records\" AS \"storage_record\" WHERE (\"storage_record\".\"generic_file_id\" IN (1, 2, 3))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"checksum\".\"id\", \"checksum\".\"created_at\", \"checksum\".\"updated_at\", \"checksum\".\"algorithm\", \"checksum\".\"datetime\", \"checksum\".\"digest\", \"checksum\".\"generic_file_id\" FROM \"checksums\" AS \"checksum\" WHERE (\"checksum\".\"generic_file_id\" IN (1, 2, 3)) ORDER BY \"datetime\" desc, \"algorithm\" asc"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"intellectual_object_view\".\"id\", \"intellectual_object_view\".\"title\", \"intellectual_object_view\".\"description\", \"intellectual_object_view\".\"identifier\", \"intellectual_object_view\".\"alt_identifier\", \"intellectual_object_view\".\"access\", \"intellectual_object_view\".\"bag_name\", \"intellectual_object_view\".\"institution_id\", \"intellectual_object_view\".\"created_at\", \"intellectual_object_view\".\"updated_at\", \"intellectual_object_view\".\"state\", \"intellectual_object_view\".\"etag\", \"intellectual_object_view\".\"bag_group_identifier\", \"intellectual_object_view\".\"storage_option\", \"intellectual_object_view\".\"bagit_profile_identifier\", \"intellectual_object_view\".\"source_organization\", \"intellectual_object_view\".\"internal_sender_identifier\", \"intellectual_object_view\".\"internal_sender_description\", \"intellectual_object_view\".\"institution_name\", \"intellectual_object_view\".\"institution_identifier\", \"intellectual_object_view\".\"institution_type\", \"intellectual_object_view\".\"institution_parent_id\", \"intellectual_object_view\".\"file_count\", \"intellectual_object_view\".\"size\", \"intellectual_object_view\".\"payload_file_count\", \"intellectual_object_view\".\"payload_size\" FROM \"intellectual_objects_view\" AS \"intellectual_object_view\" WHERE ((\"intellectual_object_view\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT count(*) FROM \"generic_files\" AS \"generic_file\" WHERE (intellectual_object_id = 1 and state = 'A')"}
{"level":"info","status":200,"method":"GET","path":"/objects/files/1","ip":"","latency":23.318631,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.372168,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:30:55-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.NsqShow, ResourceType: NSQ, ResourceID: 0, InstID: 2, Gin Path: /nsq, Request Path: /nsq, Permission: NsqAdmin, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRoute - NO - /nsq"}
{"level":"warn","status":403,"method":"GET","path":"/nsq","ip":"","latency":16.239382,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:30:55-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.NsqShow, ResourceType: NSQ, ResourceID: 0, InstID: 2, Gin Path: /nsq, Request Path: /nsq, Permission: NsqAdmin, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRoute - NO - /nsq"}
{"level":"warn","status":403,"method":"GET","path":"/nsq","ip":"","latency":17.842374,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/init","ip":"","latency":137.209096,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":29.284779,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:30:55-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.NsqInit, ResourceType: NSQ, ResourceID: 0, InstID: 2, Gin Path: /nsq/init, Request Path: /nsq/init, Permission: NsqAdmin, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRoute - NO - /nsq/init"}
{"level":"warn","status":403,"method":"POST","path":"/nsq/init","ip":"","latency":16.297313,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:30:55-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.NsqInit, ResourceType: NSQ, ResourceID: 0, InstID: 2, Gin Path: /nsq/init, Request Path: /nsq/init, Permission: NsqAdmin, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRoute - NO - /nsq/init"}
{"level":"warn","status":403,"method":"POST","path":"/nsq/init","ip":"","latency":19.01131,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.208508,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.660579,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.233799,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":18.984782,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.605075,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":19.677889,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.735329,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.839102,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.682991,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":26.680453,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.107327,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.193924,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.007858,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":25.492202,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:55-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":4.88698,"user-agent":"","time":"2022-06-22T13:30:55-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:55-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":25.013459,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.35568,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":25.173885,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":4.984636,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":22.850743,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.325248,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":22.839698,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.647082,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.575319,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.468114,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":19.438337,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.369041,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.330259,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.273477,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.089547,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.210171,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.024259,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":4.980455,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":25.11211,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.623634,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.689719,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":4.902881,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":27.853681,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.917775,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":33.774587,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":7.232969,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":22.372815,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.129433,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":22.984521,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":7.345609,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.364879,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":4.859161,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.184302,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.460783,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":26.555221,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.136159,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.293657,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.482679,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":18.443619,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.650612,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.971345,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":7.135865,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":19.128849,"user-agent":"","time":"2022-06-22T13:30:56-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:56-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:56-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.088915,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.242475,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.222441,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":22.287305,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.995873,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.067329,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.610552,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":25.41601,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":4.943681,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":27.272686,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.141282,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":25.460501,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.084277,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":27.561833,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.081671,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":28.3479,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.109386,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":25.06868,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.46199,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.332198,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.232122,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.509078,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":7.629612,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":31.478261,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.104328,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":26.133946,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.165832,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.569832,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":4.983606,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":18.290185,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.071064,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":19.58847,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.859127,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.719705,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.307767,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.295562,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.430565,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":26.44427,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.44157,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.050559,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":7.244492,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.613498,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:57-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":4.866202,"user-agent":"","time":"2022-06-22T13:30:57-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:57-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":26.031392,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.727217,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.367624,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.403998,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":19.143809,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":7.108495,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":18.442167,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":9.185558,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":26.979472,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":8.347655,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":30.893452,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.683756,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":28.276521,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.193437,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.731366,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":6.187174,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":25.209343,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":5.126468,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":22.763403,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.614218,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":19.273551,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.425217,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":22.984873,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.624399,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.532596,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.726573,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":26.63234,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.678891,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":19.62154,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.971646,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":15.883639,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.506035,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.159692,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.491627,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.447309,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.551479,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.102333,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.529024,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":33.096098,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.951537,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.031613,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.804569,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":19.769494,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.70719,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:58-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":18.397454,"user-agent":"","time":"2022-06-22T13:30:58-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:58-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":3.098708,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":18.901831,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.821018,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.72595,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.976473,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.175389,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.674538,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.882147,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.094239,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.28929,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.545765,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":17.817678,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.526405,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.710524,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.624248,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":26.025749,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.393577,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":18.308767,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.824268,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":17.527217,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.206018,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":18.594962,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.226999,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.489401,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.634398,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":19.475746,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.68098,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":18.553884,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.685436,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.362917,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.694816,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.612819,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.609178,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":16.854725,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":35.240846,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.509076,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.013539,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.465274,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.762245,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.89819,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.680624,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.525091,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.6454,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.367025,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.526381,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":25.037178,"user-agent":"","time":"2022-06-22T13:30:59-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:30:59-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:30:59-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":32.666208,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":19.851457,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.965914,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.019771,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.175965,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":25.381241,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.139274,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.680737,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.309532,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":29.278227,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.683453,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.579935,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":33.407253,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.026338,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.74651,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.463484,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.737811,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":67.873415,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.814703,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":27.886526,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.6119,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.87512,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.756161,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.616833,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":34.3737,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":18.242195,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:00-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.743576,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:00-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.378337,"user-agent":"","time":"2022-06-22T13:31:00-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.667538,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.3165,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.688238,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.87338,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.643535,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.992999,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":2.4543,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.854885,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":33.338184,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.048008,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":3.803545,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.031092,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.794956,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":29.455703,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.599463,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":23.334943,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.826117,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":24.33242,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":1.777585,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":26.615268,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":90.283895,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":19.677231,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":181.917873,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":25.734503,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":91.688059,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:01-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.049893,"user-agent":"","time":"2022-06-22T13:31:01-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:01-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:02-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:02-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":182.91559,"user-agent":"","time":"2022-06-22T13:31:02-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:02-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.295025,"user-agent":"","time":"2022-06-22T13:31:02-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:02-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:02-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":7.111792,"user-agent":"","time":"2022-06-22T13:31:02-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:02-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":20.932032,"user-agent":"","time":"2022-06-22T13:31:02-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:02-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:02-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":11.361071,"user-agent":"","time":"2022-06-22T13:31:02-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:02-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":17.700087,"user-agent":"","time":"2022-06-22T13:31:02-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:02-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:02-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":277.256671,"user-agent":"","time":"2022-06-22T13:31:02-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:02-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":18.124726,"user-agent":"","time":"2022-06-22T13:31:02-04:00","message":"Request"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_0"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_0: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_1"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_1: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_2"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_2: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:02-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_3"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_3: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"Enqueue: http://localhost:4151/pub?topic=admin_topic_4"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"NSQ response from http://localhost:4151/pub?topic=admin_topic_4: [200]  OK"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":303,"method":"POST","path":"/nsq/admin","ip":"","latency":131.725136,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/nsq","ip":"","latency":21.477363,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:31:03-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.NsqAdmin, ResourceType: NSQ, ResourceID: 0, InstID: 2, Gin Path: /nsq/admin, Request Path: /nsq/admin, Permission: NsqAdmin, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"IsAPIRoute - NO - /nsq/admin"}
{"level":"warn","status":403,"method":"POST","path":"/nsq/admin","ip":"","latency":17.32674,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:31:03-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.NsqAdmin, ResourceType: NSQ, ResourceID: 0, InstID: 2, Gin Path: /nsq/admin, Request Path: /nsq/admin, Permission: NsqAdmin, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"IsAPIRoute - NO - /nsq/admin"}
{"level":"warn","status":403,"method":"POST","path":"/nsq/admin","ip":"","latency":16.632528,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"premis_events\" AS \"premis_event\" WHERE (id = 31)"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"premis_event_view\".\"id\", \"premis_event_view\".\"agent\", \"premis_event_view\".\"created_at\", \"premis_event_view\".\"date_time\", \"premis_event_view\".\"detail\", \"premis_event_view\".\"event_type\", \"premis_event_view\".\"generic_file_id\", \"premis_event_view\".\"generic_file_identifier\", \"premis_event_view\".\"identifier\", \"premis_event_view\".\"institution_id\", \"premis_event_view\".\"institution_name\", \"premis_event_view\".\"intellectual_object_id\", \"premis_event_view\".\"intellectual_object_identifier\", \"premis_event_view\".\"object\", \"premis_event_view\".\"old_uuid\", \"premis_event_view\".\"outcome\", \"premis_event_view\".\"outcome_detail\", \"premis_event_view\".\"outcome_information\", \"premis_event_view\".\"updated_at\" FROM \"premis_events_view\" AS \"premis_event_view\" WHERE ((id = 31))"}
{"level":"info","status":200,"method":"GET","path":"/events/show/31","ip":"","latency":18.834892,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"premis_events\" AS \"premis_event\" WHERE (id = 31)"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"premis_event_view\".\"id\", \"premis_event_view\".\"agent\", \"premis_event_view\".\"created_at\", \"premis_event_view\".\"date_time\", \"premis_event_view\".\"detail\", \"premis_event_view\".\"event_type\", \"premis_event_view\".\"generic_file_id\", \"premis_event_view\".\"generic_file_identifier\", \"premis_event_view\".\"identifier\", \"premis_event_view\".\"institution_id\", \"premis_event_view\".\"institution_name\", \"premis_event_view\".\"intellectual_object_id\", \"premis_event_view\".\"intellectual_object_identifier\", \"premis_event_view\".\"object\", \"premis_event_view\".\"old_uuid\", \"premis_event_view\".\"outcome\", \"premis_event_view\".\"outcome_detail\", \"premis_event_view\".\"outcome_information\", \"premis_event_view\".\"updated_at\" FROM \"premis_events_view\" AS \"premis_event_view\" WHERE ((id = 31))"}
{"level":"info","status":200,"method":"GET","path":"/events/show/31","ip":"","latency":20.824372,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"premis_events\" AS \"premis_event\" WHERE (id = 31)"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"premis_event_view\".\"id\", \"premis_event_view\".\"agent\", \"premis_event_view\".\"created_at\", \"premis_event_view\".\"date_time\", \"premis_event_view\".\"detail\", \"premis_event_view\".\"event_type\", \"premis_event_view\".\"generic_file_id\", \"premis_event_view\".\"generic_file_identifier\", \"premis_event_view\".\"identifier\", \"premis_event_view\".\"institution_id\", \"premis_event_view\".\"institution_name\", \"premis_event_view\".\"intellectual_object_id\", \"premis_event_view\".\"intellectual_object_identifier\", \"premis_event_view\".\"object\", \"premis_event_view\".\"old_uuid\", \"premis_event_view\".\"outcome\", \"premis_event_view\".\"outcome_detail\", \"premis_event_view\".\"outcome_information\", \"premis_event_view\".\"updated_at\" FROM \"premis_events_view\" AS \"premis_event_view\" WHERE ((id = 31))"}
{"level":"info","status":200,"method":"GET","path":"/events/show/31","ip":"","latency":18.977729,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"premis_events\" AS \"premis_event\" WHERE (id = 42)"}
{"level":"error","time":"2022-06-22T13:31:03-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.PremisEventShow, ResourceType: PremisEvent, ResourceID: 42, InstID: 3, Gin Path: /events/show/:id, Request Path: /events/show/42, Permission: EventRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"IsAPIRoute - NO - /events/show/42"}
{"level":"warn","status":403,"method":"GET","path":"/events/show/42","ip":"","latency":16.048188,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"premis_events\" AS \"premis_event\" WHERE (id = 42)"}
{"level":"error","time":"2022-06-22T13:31:03-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.PremisEventShow, ResourceType: PremisEvent, ResourceID: 42, InstID: 3, Gin Path: /events/show/:id, Request Path: /events/show/42, Permission: EventRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"IsAPIRoute - NO - /events/show/42"}
{"level":"warn","status":403,"method":"GET","path":"/events/show/42","ip":"","latency":19.199031,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"premis_event_view\".\"id\", \"premis_event_view\".\"agent\", \"premis_event_view\".\"created_at\", \"premis_event_view\".\"date_time\", \"premis_event_view\".\"detail\", \"premis_event_view\".\"event_type\", \"premis_event_view\".\"generic_file_id\", \"premis_event_view\".\"generic_file_identifier\", \"premis_event_view\".\"identifier\", \"premis_event_view\".\"institution_id\", \"premis_event_view\".\"institution_name\", \"premis_event_view\".\"intellectual_object_id\", \"premis_event_view\".\"intellectual_object_identifier\", \"premis_event_view\".\"object\", \"premis_event_view\".\"old_uuid\", \"premis_event_view\".\"outcome\", \"premis_event_view\".\"outcome_detail\", \"premis_event_view\".\"outcome_information\", \"premis_event_view\".\"updated_at\" FROM \"premis_events_view\" AS \"premis_event_view\" ORDER BY \"date_time\" desc, \"id\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"TypeName (1): PremisEventView"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"WebUI: Using view to count query ''"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"TypeName (1): PremisEventView"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"premis_event_counts\" AS \"premis_event_count\" WHERE ((institution_id is null) AND (event_type is null) AND (outcome is null))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/events?sort=date_time__desc&sort=id__desc","ip":"","latency":20.339129,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"premis_event_view\".\"id\", \"premis_event_view\".\"agent\", \"premis_event_view\".\"created_at\", \"premis_event_view\".\"date_time\", \"premis_event_view\".\"detail\", \"premis_event_view\".\"event_type\", \"premis_event_view\".\"generic_file_id\", \"premis_event_view\".\"generic_file_identifier\", \"premis_event_view\".\"identifier\", \"premis_event_view\".\"institution_id\", \"premis_event_view\".\"institution_name\", \"premis_event_view\".\"intellectual_object_id\", \"premis_event_view\".\"intellectual_object_identifier\", \"premis_event_view\".\"object\", \"premis_event_view\".\"old_uuid\", \"premis_event_view\".\"outcome\", \"premis_event_view\".\"outcome_detail\", \"premis_event_view\".\"outcome_information\", \"premis_event_view\".\"updated_at\" FROM \"premis_events_view\" AS \"premis_event_view\" WHERE ((institution_id = 2)) ORDER BY \"date_time\" desc, \"id\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"TypeName (1): PremisEventView"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"WebUI: Using view to count query '(institution_id = ?)'"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"TypeName (1): PremisEventView"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"premis_event_counts\" AS \"premis_event_count\" WHERE ((institution_id = 2) AND (event_type is null) AND (outcome is null))"}
{"level":"info","status":200,"method":"GET","path":"/events?sort=date_time__desc&sort=id__desc","ip":"","latency":23.325925,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"premis_event_view\".\"id\", \"premis_event_view\".\"agent\", \"premis_event_view\".\"created_at\", \"premis_event_view\".\"date_time\", \"premis_event_view\".\"detail\", \"premis_event_view\".\"event_type\", \"premis_event_view\".\"generic_file_id\", \"premis_event_view\".\"generic_file_identifier\", \"premis_event_view\".\"identifier\", \"premis_event_view\".\"institution_id\", \"premis_event_view\".\"institution_name\", \"premis_event_view\".\"intellectual_object_id\", \"premis_event_view\".\"intellectual_object_identifier\", \"premis_event_view\".\"object\", \"premis_event_view\".\"old_uuid\", \"premis_event_view\".\"outcome\", \"premis_event_view\".\"outcome_detail\", \"premis_event_view\".\"outcome_information\", \"premis_event_view\".\"updated_at\" FROM \"premis_events_view\" AS \"premis_event_view\" WHERE ((institution_id = 2)) ORDER BY \"date_time\" desc, \"id\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"TypeName (1): PremisEventView"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"WebUI: Using view to count query '(institution_id = ?)'"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"TypeName (1): PremisEventView"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"premis_event_counts\" AS \"premis_event_count\" WHERE ((institution_id = 2) AND (event_type is null) AND (outcome is null))"}
{"level":"info","status":200,"method":"GET","path":"/events?sort=date_time__desc&sort=id__desc","ip":"","latency":19.89013,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"premis_events\" AS \"premis_event\" WHERE (id = 31)"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"premis_event_view\".\"id\", \"premis_event_view\".\"agent\", \"premis_event_view\".\"created_at\", \"premis_event_view\".\"date_time\", \"premis_event_view\".\"detail\", \"premis_event_view\".\"event_type\", \"premis_event_view\".\"generic_file_id\", \"premis_event_view\".\"generic_file_identifier\", \"premis_event_view\".\"identifier\", \"premis_event_view\".\"institution_id\", \"premis_event_view\".\"institution_name\", \"premis_event_view\".\"intellectual_object_id\", \"premis_event_view\".\"intellectual_object_identifier\", \"premis_event_view\".\"object\", \"premis_event_view\".\"old_uuid\", \"premis_event_view\".\"outcome\", \"premis_event_view\".\"outcome_detail\", \"premis_event_view\".\"outcome_information\", \"premis_event_view\".\"updated_at\" FROM \"premis_events_view\" AS \"premis_event_view\" WHERE ((id = 31))"}
{"level":"info","status":200,"method":"GET","path":"/events/show_xhr/31","ip":"","latency":19.243458,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"premis_events\" AS \"premis_event\" WHERE (id = 31)"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"premis_event_view\".\"id\", \"premis_event_view\".\"agent\", \"premis_event_view\".\"created_at\", \"premis_event_view\".\"date_time\", \"premis_event_view\".\"detail\", \"premis_event_view\".\"event_type\", \"premis_event_view\".\"generic_file_id\", \"premis_event_view\".\"generic_file_identifier\", \"premis_event_view\".\"identifier\", \"premis_event_view\".\"institution_id\", \"premis_event_view\".\"institution_name\", \"premis_event_view\".\"intellectual_object_id\", \"premis_event_view\".\"intellectual_object_identifier\", \"premis_event_view\".\"object\", \"premis_event_view\".\"old_uuid\", \"premis_event_view\".\"outcome\", \"premis_event_view\".\"outcome_detail\", \"premis_event_view\".\"outcome_information\", \"premis_event_view\".\"updated_at\" FROM \"premis_events_view\" AS \"premis_event_view\" WHERE ((id = 31))"}
{"level":"info","status":200,"method":"GET","path":"/events/show_xhr/31","ip":"","latency":20.603188,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"premis_events\" AS \"premis_event\" WHERE (id = 31)"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"premis_event_view\".\"id\", \"premis_event_view\".\"agent\", \"premis_event_view\".\"created_at\", \"premis_event_view\".\"date_time\", \"premis_event_view\".\"detail\", \"premis_event_view\".\"event_type\", \"premis_event_view\".\"generic_file_id\", \"premis_event_view\".\"generic_file_identifier\", \"premis_event_view\".\"identifier\", \"premis_event_view\".\"institution_id\", \"premis_event_view\".\"institution_name\", \"premis_event_view\".\"intellectual_object_id\", \"premis_event_view\".\"intellectual_object_identifier\", \"premis_event_view\".\"object\", \"premis_event_view\".\"old_uuid\", \"premis_event_view\".\"outcome\", \"premis_event_view\".\"outcome_detail\", \"premis_event_view\".\"outcome_information\", \"premis_event_view\".\"updated_at\" FROM \"premis_events_view\" AS \"premis_event_view\" WHERE ((id = 31))"}
{"level":"info","status":200,"method":"GET","path":"/events/show_xhr/31","ip":"","latency":17.746833,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"premis_events\" AS \"premis_event\" WHERE (id = 42)"}
{"level":"error","time":"2022-06-22T13:31:03-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.PremisEventShowXHR, ResourceType: PremisEvent, ResourceID: 42, InstID: 3, Gin Path: /events/show_xhr/:id, Request Path: /events/show_xhr/42, Permission: EventRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"IsAPIRoute - NO - /events/show_xhr/42"}
{"level":"warn","status":403,"method":"GET","path":"/events/show_xhr/42","ip":"","latency":16.906372,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"premis_events\" AS \"premis_event\" WHERE (id = 42)"}
{"level":"error","time":"2022-06-22T13:31:03-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.PremisEventShowXHR, ResourceType: PremisEvent, ResourceID: 42, InstID: 3, Gin Path: /events/show_xhr/:id, Request Path: /events/show_xhr/42, Permission: EventRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"IsAPIRoute - NO - /events/show_xhr/42"}
{"level":"warn","status":403,"method":"GET","path":"/events/show_xhr/42","ip":"","latency":18.470532,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('Standard' = '' or gf.storage_option = 'Standard')\n\t\t  and ('2022-06-22 17:31:03.47724+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:03.47724+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/reports/deposits?institution_id=2&storage_option=Standard&updated_before=2022-06-22T17%3A31%3A03Z","ip":"","latency":19.642634,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:31:03-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.DepositReportShow, ResourceType: DepositStats, ResourceID: 0, InstID: 3, Gin Path: /reports/deposits, Request Path: /reports/deposits, Permission: DepositReportShow, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"IsAPIRoute - NO - /reports/deposits"}
{"level":"warn","status":403,"method":"GET","path":"/reports/deposits?institution_id=3&storage_option=Standard&updated_before=2022-06-22T17%3A31%3A03Z","ip":"","latency":17.02436,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('Standard' = '' or gf.storage_option = 'Standard')\n\t\t  and ('2022-06-22 17:31:03.514815+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:03.514815+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/reports/deposits?institution_id=2&storage_option=Standard&updated_before=2022-06-22T17%3A31%3A03Z","ip":"","latency":19.527388,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (0 = 0 or i.id = 0)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:31:03.534065+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:03.534065+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/reports/deposits?institution_id=0&updated_before=2022-06-22T17%3A31%3A03Z","ip":"","latency":21.928038,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.554843+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.623582+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$5xERRz1MBOyHrRVviwxSY.nQLReyoR3N5WNNOO4MQMf8dsM4keluS', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"SMS is disabled per config settings. OTP message to +14345551212: Your Registry one time password is 634796"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.625131+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$5xERRz1MBOyHrRVviwxSY.nQLReyoR3N5WNNOO4MQMf8dsM4keluS', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:03.625131+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.626397+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-09-10 14:25:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.627781+00:00:00', \"name\" = 'Two Factor SMS User', \"email\" = 'sms_user@example.com', \"phone_number\" = '+12125551212', \"encrypted_password\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 1, \"current_sign_in_at\" = '2022-06-22 17:30:45.000817+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = TRUE, \"deactivated_at\" = NULL, \"enabled_two_factor\" = TRUE, \"confirmed_two_factor\" = TRUE, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = 'sms', \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = '2021-11-09 05:00:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 6"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'sms_user@example.com'))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-09-10 14:25:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.697245+00:00:00', \"name\" = 'Two Factor SMS User', \"email\" = 'sms_user@example.com', \"phone_number\" = '+12125551212', \"encrypted_password\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:31:03.697244+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = TRUE, \"deactivated_at\" = NULL, \"enabled_two_factor\" = TRUE, \"confirmed_two_factor\" = TRUE, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = 'sms', \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = '2021-11-09 05:00:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 6"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":69.882075,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 6))"}
{"level":"info","status":200,"method":"GET","path":"/users/2fa_choose","ip":"","latency":17.759254,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.786561+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:03.786561+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":70.921848,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 3)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:31:03.794282+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:03.794282+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":24.291376,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-09-10 14:25:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.81273+00:00:00', \"name\" = 'Two Factor SMS User', \"email\" = 'sms_user@example.com', \"phone_number\" = '+12125551212', \"encrypted_password\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 1, \"current_sign_in_at\" = '2022-06-22 17:30:45.000817+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = TRUE, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = '2021-11-09 05:00:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 6"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/2fa_backup","ip":"","latency":15.384134,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.898461+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:03.786561+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$tBVlRTlJPst4hbz0vm3qDOSNw31VlthAsIyCEAXGGb7wS9dVjIEAm', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:31:03-04:00","message":"SMS is disabled per config settings. OTP message to +14345551212: Your Registry one time password is 907058"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.900174+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:03.786561+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$tBVlRTlJPst4hbz0vm3qDOSNw31VlthAsIyCEAXGGb7wS9dVjIEAm', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:03.900174+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"POST","path":"/users/2fa_sms","ip":"","latency":86.288372,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.917346+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.918512+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = 'abc123', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.920918+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = 'abc123', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/2fa_push","ip":"","latency":2.532043,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 3)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:31:03.926917+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:03.926917+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":25.955942,"user-agent":"","time":"2022-06-22T13:31:03-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:03.9486+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:03-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.017507+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$W5dzNg1hgnLWK0fDJd2CE.AJ2VTT/Iyd41rLY9PQ02TEwSg2iy0lm', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.019045+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$W5dzNg1hgnLWK0fDJd2CE.AJ2VTT/Iyd41rLY9PQ02TEwSg2iy0lm', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:04.019044+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.088665+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:04.088664+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$W5dzNg1hgnLWK0fDJd2CE.AJ2VTT/Iyd41rLY9PQ02TEwSg2iy0lm', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:04.019044+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":69.72752,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 3)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:31:04.094072+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:04.094072+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":20.569394,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"warn","status":400,"method":"POST","path":"/users/2fa_verify","ip":"","latency":83.0625,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.262083+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$O6LaKiWGg.Lef9yBTbzW6epvmmkjL3M4pUhcsK6uQH27LwcoZEiW6', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:04.019044+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.26363+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$O6LaKiWGg.Lef9yBTbzW6epvmmkjL3M4pUhcsK6uQH27LwcoZEiW6', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:04.263629+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.332745+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:04.332745+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$O6LaKiWGg.Lef9yBTbzW6epvmmkjL3M4pUhcsK6uQH27LwcoZEiW6', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:04.263629+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":69.375475,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 3)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:31:04.339086+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:04.339086+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":21.550879,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.426781+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:04.332745+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/2fa_verify","ip":"","latency":71.914144,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 3)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:31:04.432373+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:04.432373+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":20.676401,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.450266+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/2fa_setup","ip":"","latency":16.011112,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":302,"method":"POST","path":"/users/2fa_setup","ip":"","latency":1.238951,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/my_account","ip":"","latency":15.648484,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.486632+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+12223334444', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/2fa_setup","ip":"","latency":2.925099,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/my_account","ip":"","latency":14.026554,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.506537+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+15556662627', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = 'onetouch', \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.508347+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+15556662627', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = 'Cow', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = 'onetouch', \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.509943+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+15556662627', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = 'Cow', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = 'onetouch', \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.511646+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+15556662627', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = TRUE, \"otp_backup_codes\" = NULL, \"authy_id\" = 'Cow', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = 'onetouch', \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/2fa_setup","ip":"","latency":10.629696,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/my_account","ip":"","latency":15.438041,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.530646+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+15556662888', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = 'Cow', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = 'sms', \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.60103+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+15556662888', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$A8MMgnH1AMnnenBnsjzakealKuuxubkQVjBDsVA9PW6MFGro2KlWG', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = 'Cow', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = 'sms', \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:31:04-04:00","message":"SMS is disabled per config settings. OTP message to +15556662888: Your Registry one time password is 867168"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.603221+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+15556662888', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$A8MMgnH1AMnnenBnsjzakealKuuxubkQVjBDsVA9PW6MFGro2KlWG', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:04.60322+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = 'Cow', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = 'sms', \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"POST","path":"/users/2fa_setup","ip":"","latency":92.84766,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","status":302,"method":"POST","path":"/users/2fa_setup","ip":"","latency":1.20912,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/my_account","ip":"","latency":16.062255,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.710162+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$D4FEv9PHC7OnF0gOIHFhR.A2xAvR.W5xc5b./eOtvR4nu6VyjwPGK', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.712422+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$D4FEv9PHC7OnF0gOIHFhR.A2xAvR.W5xc5b./eOtvR4nu6VyjwPGK', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:04.712422+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.783261+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:04.783261+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$D4FEv9PHC7OnF0gOIHFhR.A2xAvR.W5xc5b./eOtvR4nu6VyjwPGK', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:04.712422+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":71.624987,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 3)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:31:04.790452+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:04.790452+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":26.055686,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"warn","status":400,"method":"POST","path":"/users/confirm_phone","ip":"","latency":88.203739,"user-agent":"","time":"2022-06-22T13:31:04-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.970203+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$VkQccXDN6CRjAC4xY4DEQ.wehwMCTEc2jvfIyQJJ3GkrxSVtuFL.C', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:04.712422+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:04.971756+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$VkQccXDN6CRjAC4xY4DEQ.wehwMCTEc2jvfIyQJJ3GkrxSVtuFL.C', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:04.971755+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:04-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:05.042667+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:05.042667+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = '$2a$10$VkQccXDN6CRjAC4xY4DEQ.wehwMCTEc2jvfIyQJJ3GkrxSVtuFL.C', \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = '2022-06-22 17:31:04.971755+00:00:00', \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":71.093936,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 3)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:31:05.051867+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:05.051867+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":26.967979,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:05.141597+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:05.042667+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = TRUE, \"confirmed_two_factor\" = TRUE, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/confirm_phone","ip":"","latency":71.619544,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/my_account","ip":"","latency":22.372578,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:05.166904+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:05.168311+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{}', \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:05.583933+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{\"$2a$10$d.S939exBKHNYJJcpc.HNuXrqeJjz5HOS5sl2Avl3EQC1dJPzhlLu\",\"$2a$10$Y1UfxnbD5/N.FIi1n1hD8Os7k2pr4Z3EI8IUAEaM64goQc4A6uHRq\",\"$2a$10$LFwYcvSuk7kURug1HyO22uYy56eitRtsHacbszw2OUKo8vWHodCn.\",\"$2a$10$vzWfGXxApnWPebpYjVAQaOtwsrp7ZVwsiy2X6XTR/.PkVWDqqGC.W\",\"$2a$10$.b1gUv089YFkgl4CWOHrLOHpydfSFOolm.w2EzaHZhtlirvd0nKQS\",\"$2a$10$XImKrJmwGe3scBl9OvcXAu8rGDRZH6uihkfdALLPuhT9YPlUtoa4W\"}', \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"POST","path":"/users/backup_codes","ip":"","latency":432.534085,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:05.675554+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{\"$2a$10$Y1UfxnbD5/N.FIi1n1hD8Os7k2pr4Z3EI8IUAEaM64goQc4A6uHRq\",\"$2a$10$LFwYcvSuk7kURug1HyO22uYy56eitRtsHacbszw2OUKo8vWHodCn.\",\"$2a$10$vzWfGXxApnWPebpYjVAQaOtwsrp7ZVwsiy2X6XTR/.PkVWDqqGC.W\",\"$2a$10$.b1gUv089YFkgl4CWOHrLOHpydfSFOolm.w2EzaHZhtlirvd0nKQS\",\"$2a$10$XImKrJmwGe3scBl9OvcXAu8rGDRZH6uihkfdALLPuhT9YPlUtoa4W\"}', \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:05.677032+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{\"$2a$10$Y1UfxnbD5/N.FIi1n1hD8Os7k2pr4Z3EI8IUAEaM64goQc4A6uHRq\",\"$2a$10$LFwYcvSuk7kURug1HyO22uYy56eitRtsHacbszw2OUKo8vWHodCn.\",\"$2a$10$vzWfGXxApnWPebpYjVAQaOtwsrp7ZVwsiy2X6XTR/.PkVWDqqGC.W\",\"$2a$10$.b1gUv089YFkgl4CWOHrLOHpydfSFOolm.w2EzaHZhtlirvd0nKQS\",\"$2a$10$XImKrJmwGe3scBl9OvcXAu8rGDRZH6uihkfdALLPuhT9YPlUtoa4W\"}', \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/2fa_verify","ip":"","latency":73.334904,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 3)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:31:05.682649+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:05.682649+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":23.038642,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 3)"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/show/3","ip":"","latency":19.986451,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 3)"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/show/3","ip":"","latency":19.513068,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 1)"}
{"level":"error","time":"2022-06-22T13:31:05-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.UserShow, ResourceType: User, ResourceID: 1, InstID: 1, Gin Path: /users/show/:id, Request Path: /users/show/1, Permission: UserRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"IsAPIRoute - NO - /users/show/1"}
{"level":"warn","status":403,"method":"GET","path":"/users/show/1","ip":"","latency":21.504373,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 3)"}
{"level":"error","time":"2022-06-22T13:31:05-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.UserShow, ResourceType: User, ResourceID: 3, InstID: 2, Gin Path: /users/show/:id, Request Path: /users/show/3, Permission: UserRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"IsAPIRoute - NO - /users/show/3"}
{"level":"warn","status":403,"method":"GET","path":"/users/show/3","ip":"","latency":17.045502,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user_view\".\"id\", \"user_view\".\"name\", \"user_view\".\"email\", \"user_view\".\"phone_number\", \"user_view\".\"created_at\", \"user_view\".\"updated_at\", \"user_view\".\"reset_password_sent_at\", \"user_view\".\"remember_created_at\", \"user_view\".\"sign_in_count\", \"user_view\".\"current_sign_in_at\", \"user_view\".\"last_sign_in_at\", \"user_view\".\"current_sign_in_ip\", \"user_view\".\"last_sign_in_ip\", \"user_view\".\"institution_id\", \"user_view\".\"password_changed_at\", \"user_view\".\"consumed_timestep\", \"user_view\".\"otp_required_for_login\", \"user_view\".\"deactivated_at\", \"user_view\".\"enabled_two_factor\", \"user_view\".\"confirmed_two_factor\", \"user_view\".\"authy_id\", \"user_view\".\"last_sign_in_with_authy\", \"user_view\".\"authy_status\", \"user_view\".\"email_verified\", \"user_view\".\"initial_password_updated\", \"user_view\".\"force_password_update\", \"user_view\".\"grace_period\", \"user_view\".\"role\", \"user_view\".\"institution_name\", \"user_view\".\"institution_identifier\", \"user_view\".\"institution_state\", \"user_view\".\"institution_type\", \"user_view\".\"member_institution_id\", \"user_view\".\"member_institution_name\", \"user_view\".\"member_institution_identifier\", \"user_view\".\"member_institution_state\", \"user_view\".\"otp_enabled\", \"user_view\".\"receiving_bucket\", \"user_view\".\"restore_bucket\" FROM \"users_view\" AS \"user_view\" ORDER BY \"name\" asc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:31:05-04:00","message":"TypeName (1): UserView"}
{"level":"info","time":"2022-06-22T13:31:05-04:00","message":"Cannot query count view for type UserView: type is not supported for view count"}
{"level":"info","time":"2022-06-22T13:31:05-04:00","message":"WebUI: Using standard count query for ''"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT count(*) FROM \"users_view\" AS \"user_view\""}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/users","ip":"","latency":24.637256,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user_view\".\"id\", \"user_view\".\"name\", \"user_view\".\"email\", \"user_view\".\"phone_number\", \"user_view\".\"created_at\", \"user_view\".\"updated_at\", \"user_view\".\"reset_password_sent_at\", \"user_view\".\"remember_created_at\", \"user_view\".\"sign_in_count\", \"user_view\".\"current_sign_in_at\", \"user_view\".\"last_sign_in_at\", \"user_view\".\"current_sign_in_ip\", \"user_view\".\"last_sign_in_ip\", \"user_view\".\"institution_id\", \"user_view\".\"password_changed_at\", \"user_view\".\"consumed_timestep\", \"user_view\".\"otp_required_for_login\", \"user_view\".\"deactivated_at\", \"user_view\".\"enabled_two_factor\", \"user_view\".\"confirmed_two_factor\", \"user_view\".\"authy_id\", \"user_view\".\"last_sign_in_with_authy\", \"user_view\".\"authy_status\", \"user_view\".\"email_verified\", \"user_view\".\"initial_password_updated\", \"user_view\".\"force_password_update\", \"user_view\".\"grace_period\", \"user_view\".\"role\", \"user_view\".\"institution_name\", \"user_view\".\"institution_identifier\", \"user_view\".\"institution_state\", \"user_view\".\"institution_type\", \"user_view\".\"member_institution_id\", \"user_view\".\"member_institution_name\", \"user_view\".\"member_institution_identifier\", \"user_view\".\"member_institution_state\", \"user_view\".\"otp_enabled\", \"user_view\".\"receiving_bucket\", \"user_view\".\"restore_bucket\" FROM \"users_view\" AS \"user_view\" WHERE ((institution_id = 2)) ORDER BY \"name\" asc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:31:05-04:00","message":"TypeName (1): UserView"}
{"level":"info","time":"2022-06-22T13:31:05-04:00","message":"Cannot query count view for type UserView: type is not supported for view count"}
{"level":"info","time":"2022-06-22T13:31:05-04:00","message":"WebUI: Using standard count query for '(institution_id = ?)'"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT count(*) FROM \"users_view\" AS \"user_view\" WHERE ((institution_id = 2))"}
{"level":"info","status":200,"method":"GET","path":"/users","ip":"","latency":24.102897,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:31:05-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.UserIndex, ResourceType: User, ResourceID: 0, InstID: 2, Gin Path: /users, Request Path: /users, Permission: UserRead, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"IsAPIRoute - NO - /users"}
{"level":"warn","status":403,"method":"GET","path":"/users","ip":"","latency":18.609828,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/users/new","ip":"","latency":18.981629,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"info","status":200,"method":"GET","path":"/users/new","ip":"","latency":16.21295,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:31:05-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.UserNew, ResourceType: User, ResourceID: 0, InstID: 2, Gin Path: /users/new, Request Path: /users/new, Permission: UserCreate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"IsAPIRoute - NO - /users/new"}
{"level":"warn","status":403,"method":"GET","path":"/users/new","ip":"","latency":21.130981,"user-agent":"","time":"2022-06-22T13:31:05-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: INSERT INTO \"users\" (\"id\", \"created_at\", \"updated_at\", \"name\", \"email\", \"phone_number\", \"encrypted_password\", \"reset_password_token\", \"reset_password_sent_at\", \"remember_created_at\", \"sign_in_count\", \"current_sign_in_at\", \"last_sign_in_at\", \"current_sign_in_ip\", \"last_sign_in_ip\", \"institution_id\", \"encrypted_api_secret_key\", \"password_changed_at\", \"encrypted_otp_secret\", \"encrypted_otp_secret_iv\", \"encrypted_otp_secret_salt\", \"encrypted_otp_sent_at\", \"consumed_timestep\", \"otp_required_for_login\", \"deactivated_at\", \"enabled_two_factor\", \"confirmed_two_factor\", \"otp_backup_codes\", \"authy_id\", \"last_sign_in_with_authy\", \"authy_status\", \"email_verified\", \"initial_password_updated\", \"force_password_update\", \"grace_period\", \"awaiting_second_factor\", \"role\") VALUES (DEFAULT, '2022-06-22 17:31:05.978437+00:00:00', '2022-06-22 17:31:05.978437+00:00:00', 'Unit Test User', 'utest-user@inst1.edu', '+12025559815', '$2a$10$S0MerJiT8oI.LzTCWuCYMOASCRs0ZUbrmTXFcvE0YW1imgI9vhDA2', DEFAULT, DEFAULT, DEFAULT, 0, DEFAULT, DEFAULT, DEFAULT, DEFAULT, 2, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT, FALSE, 'institutional_user') RETURNING \"id\", \"reset_password_token\", \"reset_password_sent_at\", \"remember_created_at\", \"current_sign_in_at\", \"last_sign_in_at\", \"current_sign_in_ip\", \"last_sign_in_ip\", \"encrypted_api_secret_key\", \"password_changed_at\", \"encrypted_otp_secret\", \"encrypted_otp_secret_iv\", \"encrypted_otp_secret_salt\", \"encrypted_otp_sent_at\", \"consumed_timestep\", \"otp_required_for_login\", \"deactivated_at\", \"enabled_two_factor\", \"confirmed_two_factor\", \"otp_backup_codes\", \"authy_id\", \"last_sign_in_with_authy\", \"authy_status\", \"email_verified\", \"initial_password_updated\", \"force_password_update\", \"grace_period\""}
{"level":"debug","time":"2022-06-22T13:31:05-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2022-06-22 17:31:05.978437+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.04933+00:00:00', \"name\" = 'Unit Test User', \"email\" = 'utest-user@inst1.edu', \"phone_number\" = '+12025559815', \"encrypted_password\" = '$2a$10$S0MerJiT8oI.LzTCWuCYMOASCRs0ZUbrmTXFcvE0YW1imgI9vhDA2', \"reset_password_token\" = '$2a$10$gvaBQwVLIO4zsjQXALAiTujupR10SOWV46YF7cCYSq8.bwR1Bqkp.', \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = NULL, \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: INSERT INTO \"alerts\" (\"id\", \"institution_id\", \"type\", \"subject\", \"content\", \"deletion_request_id\", \"created_at\") VALUES (DEFAULT, 2, 'Welcome New User', 'Your New APTrust Registry Account', 'Hello from APTrust,\n\nInst One Admin just set up an APTrust Registry account for you. To complete the setup, follow the link below and choose a new password.\n\nhttp://localhost/users/complete_password_reset/10?token=a7b8359df9051fefde96c0a4c7ce7389\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n', DEFAULT, '2022-06-22 17:31:06.052193+00:00:00') RETURNING \"id\", \"deletion_request_id\""}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: insert into alerts_users (alert_id, user_id, sent_at, read_at) values (9, 10, NULL, NULL) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:31:06-04:00","message":"SES is disabled per config settings. Email to utest-user@inst1.edu. Subject: Your New APTrust Registry Account\n\n. Hello from APTrust,\n\nInst One Admin just set up an APTrust Registry account for you. To complete the setup, follow the link below and choose a new password.\n\nhttp://localhost/users/complete_password_reset/10?token=a7b8359df9051fefde96c0a4c7ce7389\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: update alerts_users set sent_at = '2022-06-22 17:31:06.056106+00:00:00' where alert_id = 9 and user_id = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2022-06-22 17:31:05.978437+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.057124+00:00:00', \"name\" = 'Unit Test User', \"email\" = 'utest-user@inst1.edu', \"phone_number\" = '+12025559815', \"encrypted_password\" = '$2a$10$S0MerJiT8oI.LzTCWuCYMOASCRs0ZUbrmTXFcvE0YW1imgI9vhDA2', \"reset_password_token\" = '$2a$10$gvaBQwVLIO4zsjQXALAiTujupR10SOWV46YF7cCYSq8.bwR1Bqkp.', \"reset_password_sent_at\" = '2022-06-22 17:31:06.057123+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = NULL, \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":303,"method":"POST","path":"/users/new","ip":"","latency":150.941247,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"info","status":200,"method":"GET","path":"/users/show/10","ip":"","latency":18.09957,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'utest-user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((type = 'Welcome New User') AND (user_id = 10)) LIMIT 1"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"info","status":200,"method":"GET","path":"/users/edit/10","ip":"","latency":19.209639,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2022-06-22 17:31:05.978437+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.104537+00:00:00', \"name\" = 'Unit Test User (edited)', \"email\" = 'utest-user@inst1.edu', \"phone_number\" = '+15058981234', \"encrypted_password\" = '$2a$10$S0MerJiT8oI.LzTCWuCYMOASCRs0ZUbrmTXFcvE0YW1imgI9vhDA2', \"reset_password_token\" = '$2a$10$gvaBQwVLIO4zsjQXALAiTujupR10SOWV46YF7cCYSq8.bwR1Bqkp.', \"reset_password_sent_at\" = '2022-06-22 17:31:06.057123+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = NULL, \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":303,"method":"PUT","path":"/users/edit/10","ip":"","latency":8.234418,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"info","status":200,"method":"GET","path":"/users/show/10","ip":"","latency":18.014736,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'utest-user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2022-06-22 17:31:05.978437+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.129729+00:00:00', \"name\" = 'Named edited XHR', \"email\" = 'utest-user@inst1.edu', \"phone_number\" = '+15058981234', \"encrypted_password\" = '$2a$10$S0MerJiT8oI.LzTCWuCYMOASCRs0ZUbrmTXFcvE0YW1imgI9vhDA2', \"reset_password_token\" = '$2a$10$gvaBQwVLIO4zsjQXALAiTujupR10SOWV46YF7cCYSq8.bwR1Bqkp.', \"reset_password_sent_at\" = '2022-06-22 17:31:06.057123+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = NULL, \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"PUT","path":"/users/edit_xhr/10","ip":"","latency":3.503861,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2022-06-22 17:31:05.978437+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.135425+00:00:00', \"name\" = 'Named edited XHR', \"email\" = 'xhr@example.com', \"phone_number\" = '+15058981234', \"encrypted_password\" = '$2a$10$S0MerJiT8oI.LzTCWuCYMOASCRs0ZUbrmTXFcvE0YW1imgI9vhDA2', \"reset_password_token\" = '$2a$10$gvaBQwVLIO4zsjQXALAiTujupR10SOWV46YF7cCYSq8.bwR1Bqkp.', \"reset_password_sent_at\" = '2022-06-22 17:31:06.057123+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = NULL, \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"PUT","path":"/users/edit_xhr/10","ip":"","latency":4.443417,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2022-06-22 17:31:05.978437+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.211347+00:00:00', \"name\" = 'Named edited XHR', \"email\" = 'xhr@example.com', \"phone_number\" = '+13039998888', \"encrypted_password\" = '$2a$10$kLYjlUdMSktjHpYl/lry8O4Nbllll2HK6TsbmoJqKrv.83WdCb2W6', \"reset_password_token\" = '$2a$10$gvaBQwVLIO4zsjQXALAiTujupR10SOWV46YF7cCYSq8.bwR1Bqkp.', \"reset_password_sent_at\" = '2022-06-22 17:31:06.057123+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = '2022-06-22 17:31:06.211345+00:00:00', \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = NULL, \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_admin' WHERE \"user\".\"id\" = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"PUT","path":"/users/edit_xhr/10","ip":"","latency":75.692975,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2022-06-22 17:31:05.978437+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.218239+00:00:00', \"name\" = 'Named edited XHR', \"email\" = 'xhr@example.com', \"phone_number\" = '+13039998888', \"encrypted_password\" = '$2a$10$kLYjlUdMSktjHpYl/lry8O4Nbllll2HK6TsbmoJqKrv.83WdCb2W6', \"reset_password_token\" = '$2a$10$gvaBQwVLIO4zsjQXALAiTujupR10SOWV46YF7cCYSq8.bwR1Bqkp.', \"reset_password_sent_at\" = '2022-06-22 17:31:06.057123+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = '2022-06-22 17:31:06.211345+00:00:00', \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = '2022-06-22 17:31:06.218238+00:00:00', \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = NULL, \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_admin' WHERE \"user\".\"id\" = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"PUT","path":"/users/edit_xhr/10","ip":"","latency":4.134201,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2022-06-22 17:31:05.978437+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.223036+00:00:00', \"name\" = 'Named edited XHR', \"email\" = 'xhr@example.com', \"phone_number\" = '+13039998888', \"encrypted_password\" = '$2a$10$kLYjlUdMSktjHpYl/lry8O4Nbllll2HK6TsbmoJqKrv.83WdCb2W6', \"reset_password_token\" = '$2a$10$gvaBQwVLIO4zsjQXALAiTujupR10SOWV46YF7cCYSq8.bwR1Bqkp.', \"reset_password_sent_at\" = '2022-06-22 17:31:06.057123+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = '2022-06-22 17:31:06.211345+00:00:00', \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = NULL, \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_admin' WHERE \"user\".\"id\" = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"PUT","path":"/users/edit_xhr/10","ip":"","latency":3.376178,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2022-06-22 17:31:05.978437+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.227144+00:00:00', \"name\" = 'Named edited XHR', \"email\" = 'xhr@example.com', \"phone_number\" = '+13039998888', \"encrypted_password\" = '$2a$10$kLYjlUdMSktjHpYl/lry8O4Nbllll2HK6TsbmoJqKrv.83WdCb2W6', \"reset_password_token\" = '$2a$10$gvaBQwVLIO4zsjQXALAiTujupR10SOWV46YF7cCYSq8.bwR1Bqkp.', \"reset_password_sent_at\" = '2022-06-22 17:31:06.057123+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = '2022-06-22 17:31:06.211345+00:00:00', \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = TRUE, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = '2022-07-22 17:31:06.227144+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_admin' WHERE \"user\".\"id\" = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"PUT","path":"/users/edit_xhr/10","ip":"","latency":3.321046,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2022-06-22 17:31:05.978437+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.232347+00:00:00', \"name\" = 'Named edited XHR', \"email\" = 'xhr@example.com', \"phone_number\" = '+13039998888', \"encrypted_password\" = '$2a$10$kLYjlUdMSktjHpYl/lry8O4Nbllll2HK6TsbmoJqKrv.83WdCb2W6', \"reset_password_token\" = '$2a$10$gvaBQwVLIO4zsjQXALAiTujupR10SOWV46YF7cCYSq8.bwR1Bqkp.', \"reset_password_sent_at\" = '2022-06-22 17:31:06.057123+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = '2022-06-22 17:31:06.211345+00:00:00', \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = '2022-07-22 17:31:06.232346+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_admin' WHERE \"user\".\"id\" = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"PUT","path":"/users/edit_xhr/10","ip":"","latency":5.451817,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2022-06-22 17:31:05.978437+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.232347+00:00:00', \"name\" = 'Named edited XHR', \"email\" = 'xhr@example.com', \"phone_number\" = '+13039998888', \"encrypted_password\" = '$2a$10$kLYjlUdMSktjHpYl/lry8O4Nbllll2HK6TsbmoJqKrv.83WdCb2W6', \"reset_password_token\" = '$2a$10$gvaBQwVLIO4zsjQXALAiTujupR10SOWV46YF7cCYSq8.bwR1Bqkp.', \"reset_password_sent_at\" = '2022-06-22 17:31:06.057123+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = '2022-06-22 17:31:06.211345+00:00:00', \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = '2022-06-22 17:31:06.239878+00:00:00', \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = '2022-07-22 17:31:06.232346+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_admin' WHERE \"user\".\"id\" = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"DELETE","path":"/users/delete/10","ip":"","latency":5.214455,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user_view\".\"id\", \"user_view\".\"name\", \"user_view\".\"email\", \"user_view\".\"phone_number\", \"user_view\".\"created_at\", \"user_view\".\"updated_at\", \"user_view\".\"reset_password_sent_at\", \"user_view\".\"remember_created_at\", \"user_view\".\"sign_in_count\", \"user_view\".\"current_sign_in_at\", \"user_view\".\"last_sign_in_at\", \"user_view\".\"current_sign_in_ip\", \"user_view\".\"last_sign_in_ip\", \"user_view\".\"institution_id\", \"user_view\".\"password_changed_at\", \"user_view\".\"consumed_timestep\", \"user_view\".\"otp_required_for_login\", \"user_view\".\"deactivated_at\", \"user_view\".\"enabled_two_factor\", \"user_view\".\"confirmed_two_factor\", \"user_view\".\"authy_id\", \"user_view\".\"last_sign_in_with_authy\", \"user_view\".\"authy_status\", \"user_view\".\"email_verified\", \"user_view\".\"initial_password_updated\", \"user_view\".\"force_password_update\", \"user_view\".\"grace_period\", \"user_view\".\"role\", \"user_view\".\"institution_name\", \"user_view\".\"institution_identifier\", \"user_view\".\"institution_state\", \"user_view\".\"institution_type\", \"user_view\".\"member_institution_id\", \"user_view\".\"member_institution_name\", \"user_view\".\"member_institution_identifier\", \"user_view\".\"member_institution_state\", \"user_view\".\"otp_enabled\", \"user_view\".\"receiving_bucket\", \"user_view\".\"restore_bucket\" FROM \"users_view\" AS \"user_view\" WHERE ((institution_id = 2)) ORDER BY \"name\" asc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:31:06-04:00","message":"TypeName (1): UserView"}
{"level":"info","time":"2022-06-22T13:31:06-04:00","message":"Cannot query count view for type UserView: type is not supported for view count"}
{"level":"info","time":"2022-06-22T13:31:06-04:00","message":"WebUI: Using standard count query for '(institution_id = ?)'"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT count(*) FROM \"users_view\" AS \"user_view\" WHERE ((institution_id = 2))"}
{"level":"info","status":200,"method":"GET","path":"/users","ip":"","latency":25.034437,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2022-06-22 17:31:05.978437+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.232347+00:00:00', \"name\" = 'Named edited XHR', \"email\" = 'xhr@example.com', \"phone_number\" = '+13039998888', \"encrypted_password\" = '$2a$10$kLYjlUdMSktjHpYl/lry8O4Nbllll2HK6TsbmoJqKrv.83WdCb2W6', \"reset_password_token\" = '$2a$10$gvaBQwVLIO4zsjQXALAiTujupR10SOWV46YF7cCYSq8.bwR1Bqkp.', \"reset_password_sent_at\" = '2022-06-22 17:31:06.057123+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = NULL, \"password_changed_at\" = '2022-06-22 17:31:06.211345+00:00:00', \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = NULL, \"initial_password_updated\" = NULL, \"force_password_update\" = TRUE, \"grace_period\" = '2022-07-22 17:31:06.232346+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_admin' WHERE \"user\".\"id\" = 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/undelete/10","ip":"","latency":3.772337,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 10)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 10))"}
{"level":"info","status":200,"method":"GET","path":"/users/show/10","ip":"","latency":17.022985,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"info","status":200,"method":"GET","path":"/","ip":"","latency":21.823642,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'user@inst1.edu'))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.380039+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$raEJqJ7eRcEwWmeoiJ2vxenR8dqVXCI1SU9zcgkrxeS.6/haWGi4K', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:06.380038+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{\"$2a$10$Y1UfxnbD5/N.FIi1n1hD8Os7k2pr4Z3EI8IUAEaM64goQc4A6uHRq\",\"$2a$10$LFwYcvSuk7kURug1HyO22uYy56eitRtsHacbszw2OUKo8vWHodCn.\",\"$2a$10$vzWfGXxApnWPebpYjVAQaOtwsrp7ZVwsiy2X6XTR/.PkVWDqqGC.W\",\"$2a$10$.b1gUv089YFkgl4CWOHrLOHpydfSFOolm.w2EzaHZhtlirvd0nKQS\",\"$2a$10$XImKrJmwGe3scBl9OvcXAu8rGDRZH6uihkfdALLPuhT9YPlUtoa4W\"}', \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"POST","path":"/users/sign_in","ip":"","latency":71.571668,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 3)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:31:06.387155+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:06.387155+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":25.962947,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"info","status":200,"method":"GET","path":"/users/sign_out","ip":"","latency":16.346132,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"warn","status":401,"method":"GET","path":"/dashboard","ip":"","latency":16.467942,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"email\" = 'bad-email@inst1.edu'))"}
{"level":"warn","status":400,"method":"POST","path":"/users/sign_in","ip":"","latency":19.268652,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Error #01: invalid login or password\n"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 3)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/change_password/3","ip":"","latency":29.668411,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 3)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.576967+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$u3Cnlk7VwzB77w3F8HTMdOp2YUaE5E2Bnz72Z28WuPk2NHfWFmQce', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:06.380038+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = '2022-06-22 17:31:06.576966+00:00:00', \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{\"$2a$10$Y1UfxnbD5/N.FIi1n1hD8Os7k2pr4Z3EI8IUAEaM64goQc4A6uHRq\",\"$2a$10$LFwYcvSuk7kURug1HyO22uYy56eitRtsHacbszw2OUKo8vWHodCn.\",\"$2a$10$vzWfGXxApnWPebpYjVAQaOtwsrp7ZVwsiy2X6XTR/.PkVWDqqGC.W\",\"$2a$10$.b1gUv089YFkgl4CWOHrLOHpydfSFOolm.w2EzaHZhtlirvd0nKQS\",\"$2a$10$XImKrJmwGe3scBl9OvcXAu8rGDRZH6uihkfdALLPuhT9YPlUtoa4W\"}', \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: INSERT INTO \"alerts\" (\"id\", \"institution_id\", \"type\", \"subject\", \"content\", \"deletion_request_id\", \"created_at\") VALUES (DEFAULT, 2, 'Password Changed', 'Your APTrust password has been changed', 'Hello from APTrust,\n\nThe password for your account at http://localhost was changed by Inst One User on 2022-06-22T13:31:06-04:00.\n\nThis change came from user agent  at IP address .\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n', DEFAULT, '2022-06-22 17:31:06.578734+00:00:00') RETURNING \"id\", \"deletion_request_id\""}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: insert into alerts_users (alert_id, user_id, sent_at, read_at) values (10, 3, NULL, NULL) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:31:06-04:00","message":"SES is disabled per config settings. Email to user@inst1.edu. Subject: Your APTrust password has been changed\n\n. Hello from APTrust,\n\nThe password for your account at http://localhost was changed by Inst One User on 2022-06-22T13:31:06-04:00.\n\nThis change came from user agent  at IP address .\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: update alerts_users set sent_at = '2022-06-22 17:31:06.580509+00:00:00' where alert_id = 10 and user_id = 3"}
{"level":"info","status":302,"method":"POST","path":"/users/change_password/3","ip":"","latency":90.200806,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"date_processed\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((user_id = 3)) ORDER BY \"created_at\" desc LIMIT 10"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: \n\t\tselect\n\t\t  coalesce(stats.institution_name, 'Total') as institution_name,\n\t\t  i2.id as institution_id,\n\t\t  coalesce(stats.storage_option, 'Total') as storage_option,\n\t\t  stats.file_count,\n\t\t  stats.object_count,\n\t\t  stats.total_bytes,\n\t\t  (stats.total_bytes / 1073741824) as total_gb,\n\t\t  (stats.total_bytes / 1099511627776) as total_tb,\n\t\t  so.cost_gb_per_month,\n\t\t  ((stats.total_bytes / 1073741824) * so.cost_gb_per_month) as monthly_cost\n\t\tfrom\n\t\t  (select\n\t\t\ti.\"name\" as institution_name,\n\t\t\tcount(gf.id) as file_count,\n\t\t\tcount(distinct(gf.intellectual_object_id)) as object_count,\n\t\t\tsum(gf.size) as total_bytes,\n\t\t\tgf.storage_option\n\t\t  from generic_files gf\n\t\t  left join institutions i on i.id = gf.institution_id\n\t\t  where gf.state = 'A'\n\t\t  and (2 = 0 or i.id = 2)\n\t\t  and ('' = '' or gf.storage_option = '')\n\t\t  and ('2022-06-22 17:31:06.585246+00:00:00' = '0001-01-01 00:00:00+00:00:00' or gf.updated_at < '2022-06-22 17:31:06.585246+00:00:00')\n\t\t  group by cube (i.\"name\", gf.storage_option)) stats\n\t\tleft join storage_options so on so.\"name\" = stats.storage_option\n\t\tleft join institutions i2 on i2.\"name\" = stats.institution_name\n\t\torder by stats.institution_name, stats.storage_option\n"}
{"level":"info","status":200,"method":"GET","path":"/dashboard","ip":"","latency":27.124823,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 3)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/change_password/3","ip":"","latency":17.565498,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 3)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.702918+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$y1exQs8OGS3zqGnYHnGbCuPszY8QYAMp0El0gxU/Lh5ILfKTLbJ0S', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:06.380038+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = '2022-06-22 17:31:06.702917+00:00:00', \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{\"$2a$10$Y1UfxnbD5/N.FIi1n1hD8Os7k2pr4Z3EI8IUAEaM64goQc4A6uHRq\",\"$2a$10$LFwYcvSuk7kURug1HyO22uYy56eitRtsHacbszw2OUKo8vWHodCn.\",\"$2a$10$vzWfGXxApnWPebpYjVAQaOtwsrp7ZVwsiy2X6XTR/.PkVWDqqGC.W\",\"$2a$10$.b1gUv089YFkgl4CWOHrLOHpydfSFOolm.w2EzaHZhtlirvd0nKQS\",\"$2a$10$XImKrJmwGe3scBl9OvcXAu8rGDRZH6uihkfdALLPuhT9YPlUtoa4W\"}', \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: INSERT INTO \"alerts\" (\"id\", \"institution_id\", \"type\", \"subject\", \"content\", \"deletion_request_id\", \"created_at\") VALUES (DEFAULT, 2, 'Password Changed', 'Your APTrust password has been changed', 'Hello from APTrust,\n\nThe password for your account at http://localhost was changed by Inst One Admin on 2022-06-22T13:31:06-04:00.\n\nThis change came from user agent  at IP address .\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n', DEFAULT, '2022-06-22 17:31:06.705494+00:00:00') RETURNING \"id\", \"deletion_request_id\""}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: insert into alerts_users (alert_id, user_id, sent_at, read_at) values (11, 3, NULL, NULL) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:31:06-04:00","message":"SES is disabled per config settings. Email to user@inst1.edu. Subject: Your APTrust password has been changed\n\n. Hello from APTrust,\n\nThe password for your account at http://localhost was changed by Inst One Admin on 2022-06-22T13:31:06-04:00.\n\nThis change came from user agent  at IP address .\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: update alerts_users set sent_at = '2022-06-22 17:31:06.708478+00:00:00' where alert_id = 11 and user_id = 3"}
{"level":"info","status":302,"method":"POST","path":"/users/change_password/3","ip":"","latency":81.432017,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 3)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/show/3","ip":"","latency":18.489429,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 5)"}
{"level":"error","time":"2022-06-22T13:31:06-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.UserShowChangePassword, ResourceType: User, ResourceID: 5, InstID: 3, Gin Path: /users/change_password/:id, Request Path: /users/change_password/5, Permission: UserUpdateSelf, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRoute - NO - /users/change_password/5"}
{"level":"warn","status":403,"method":"GET","path":"/users/change_password/5","ip":"","latency":16.962766,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 5)"}
{"level":"error","time":"2022-06-22T13:31:06-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.UserChangePassword, ResourceType: User, ResourceID: 5, InstID: 3, Gin Path: /users/change_password/:id, Request Path: /users/change_password/5, Permission: UserUpdateSelf, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRoute - NO - /users/change_password/5"}
{"level":"warn","status":403,"method":"POST","path":"/users/change_password/5","ip":"","latency":21.531056,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"warn","status":403,"method":"GET","path":"/users/change_password/2","ip":"","latency":16.65274,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Error #01: permission denied\n"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"warn","status":403,"method":"POST","path":"/users/change_password/2","ip":"","latency":21.022044,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Error #01: permission denied\n"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.875039+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$vNVGMc7OSRD3Zx.KFeV45O/8.ntpCgkKYP0X.CXKutime3q3Z7r.2', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{}', \"authy_id\" = '12345', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 3)"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.949385+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$vNVGMc7OSRD3Zx.KFeV45O/8.ntpCgkKYP0X.CXKutime3q3Z7r.2', \"reset_password_token\" = '$2a$10$sYd4JGwwCperkDCeR/7.NOT3NId20NU1HQC0Pxmtamt4Mz0RWMBYe', \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{}', \"authy_id\" = '12345', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = TRUE, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: INSERT INTO \"alerts\" (\"id\", \"institution_id\", \"type\", \"subject\", \"content\", \"deletion_request_id\", \"created_at\") VALUES (DEFAULT, 2, 'Password Reset', 'Reset your APTrust password', 'Hello from APTrust,\n\nYou are receiving this email either because you clicked the \"Forgot Password\" link in the APTrust registry, or because an administrator wants you to reset your password.\n\nClick the link below to reset your APTrust registry password.\n\nhttp://localhost/users/complete_password_reset/3?token=fb3771c39742d50255697341cf0b3057\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n', DEFAULT, '2022-06-22 17:31:06.952013+00:00:00') RETURNING \"id\", \"deletion_request_id\""}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: insert into alerts_users (alert_id, user_id, sent_at, read_at) values (12, 3, NULL, NULL) on conflict do nothing"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:31:06-04:00","message":"SES is disabled per config settings. Email to user@inst1.edu. Subject: Reset your APTrust password\n\n. Hello from APTrust,\n\nYou are receiving this email either because you clicked the \"Forgot Password\" link in the APTrust registry, or because an administrator wants you to reset your password.\n\nClick the link below to reset your APTrust registry password.\n\nhttp://localhost/users/complete_password_reset/3?token=fb3771c39742d50255697341cf0b3057\n\nIf you have questions, please contact us at help@aptrust.org.\n\nThe APTrust Team\nhttps://aptrust.org\nhelp@aptrust.org\n"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: update alerts_users set sent_at = '2022-06-22 17:31:06.954854+00:00:00' where alert_id = 12 and user_id = 3"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:06.955889+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$vNVGMc7OSRD3Zx.KFeV45O/8.ntpCgkKYP0X.CXKutime3q3Z7r.2', \"reset_password_token\" = '$2a$10$sYd4JGwwCperkDCeR/7.NOT3NId20NU1HQC0Pxmtamt4Mz0RWMBYe', \"reset_password_sent_at\" = '2022-06-22 17:31:06.955889+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{}', \"authy_id\" = '12345', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = TRUE, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"GET","path":"/users/init_password_reset/3","ip":"","latency":97.967511,"user-agent":"","time":"2022-06-22T13:31:06-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"alert_view\".\"id\", \"alert_view\".\"institution_id\", \"alert_view\".\"institution_name\", \"alert_view\".\"institution_identifier\", \"alert_view\".\"type\", \"alert_view\".\"subject\", \"alert_view\".\"content\", \"alert_view\".\"deletion_request_id\", \"alert_view\".\"created_at\", \"alert_view\".\"user_id\", \"alert_view\".\"user_name\", \"alert_view\".\"sent_at\", \"alert_view\".\"read_at\" FROM \"alerts_view\" AS \"alert_view\" WHERE ((type = 'Password Reset') AND (user_id = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:06-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","status":500,"method":"GET","path":"/users/complete_password_reset/3?token=BAD_TOKEN","ip":"","latency":89.095859,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Error #01: invalid token\n"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:07.135215+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$vNVGMc7OSRD3Zx.KFeV45O/8.ntpCgkKYP0X.CXKutime3q3Z7r.2', \"reset_password_token\" = '$2a$10$sYd4JGwwCperkDCeR/7.NOT3NId20NU1HQC0Pxmtamt4Mz0RWMBYe', \"reset_password_sent_at\" = '2022-06-22 17:31:06.955889+00:00:00', \"remember_created_at\" = NULL, \"sign_in_count\" = 3, \"current_sign_in_at\" = '2022-06-22 17:31:07.135214+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{}', \"authy_id\" = '12345', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = TRUE, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":302,"method":"GET","path":"/users/complete_password_reset/3?token=fb3771c39742d50255697341cf0b3057","ip":"","latency":70.461595,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 3)"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/change_password/3","ip":"","latency":22.790152,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:07.1601+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$vNVGMc7OSRD3Zx.KFeV45O/8.ntpCgkKYP0X.CXKutime3q3Z7r.2', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{}', \"authy_id\" = '12345', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 2)"}
{"level":"error","time":"2022-06-22T13:31:07-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.UserInitPasswordReset, ResourceType: User, ResourceID: 2, InstID: 2, Gin Path: /users/init_password_reset/:id, Request Path: /users/init_password_reset/2, Permission: UserUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"IsAPIRoute - NO - /users/init_password_reset/2"}
{"level":"warn","status":403,"method":"GET","path":"/users/init_password_reset/2","ip":"","latency":16.392121,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 5)"}
{"level":"error","time":"2022-06-22T13:31:07-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.UserInitPasswordReset, ResourceType: User, ResourceID: 5, InstID: 3, Gin Path: /users/init_password_reset/:id, Request Path: /users/init_password_reset/5, Permission: UserUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"IsAPIRoute - NO - /users/init_password_reset/5"}
{"level":"warn","status":403,"method":"GET","path":"/users/init_password_reset/5","ip":"","latency":16.615506,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 5)"}
{"level":"error","time":"2022-06-22T13:31:07-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.UserInitPasswordReset, ResourceType: User, ResourceID: 5, InstID: 3, Gin Path: /users/init_password_reset/:id, Request Path: /users/init_password_reset/5, Permission: UserUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"IsAPIRoute - NO - /users/init_password_reset/5"}
{"level":"warn","status":403,"method":"GET","path":"/users/init_password_reset/5","ip":"","latency":21.04621,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:07.285294+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$Br1XfC/2KU3cf4P96NR7TOJFg25Zfxla7BtleaRaeNluTNuPWe60e', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{}', \"authy_id\" = '12345', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 1)"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution\".\"id\", \"institution\".\"created_at\", \"institution\".\"updated_at\", \"institution\".\"name\", \"institution\".\"identifier\", \"institution\".\"state\", \"institution\".\"type\", \"institution\".\"member_institution_id\", \"institution\".\"deactivated_at\", \"institution\".\"otp_enabled\", \"institution\".\"enable_spot_restore\", \"institution\".\"receiving_bucket\", \"institution\".\"restore_bucket\" FROM \"institutions\" AS \"institution\" WHERE ((identifier = 'aptrust.org'))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:07.357998+00:00:00', \"name\" = 'APTrust System', \"email\" = 'system@aptrust.org', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 1, \"current_sign_in_at\" = '2021-09-10 14:24:00+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = '127.0.0.1', \"last_sign_in_ip\" = NULL, \"institution_id\" = 1, \"encrypted_api_secret_key\" = '$2a$10$IDKOvl0iVFpcIkJune3JcupsKAylSm9d4DYO7FYk/UKOVWBZ6ozdi', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'admin' WHERE \"user\".\"id\" = 1"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"POST","path":"/users/get_api_key/1","ip":"","latency":90.779126,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:07.449413+00:00:00', \"name\" = 'Inst One Admin', \"email\" = 'admin@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$kY7qSiyT2RuPY2mTvJYAhedf6YZGv.LFNTN4du4rk8/fp6F99LkTq', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_admin' WHERE \"user\".\"id\" = 2"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"POST","path":"/users/get_api_key/2","ip":"","latency":90.914629,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 3)"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:07.54044+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$Br1XfC/2KU3cf4P96NR7TOJFg25Zfxla7BtleaRaeNluTNuPWe60e', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$6nC.PUoWBNwIEh42/wWpYu7BeiWKLof843MTyMt9MNMMa6K4zrNo2', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{}', \"authy_id\" = '12345', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"POST","path":"/users/get_api_key/3","ip":"","latency":92.541133,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 3)"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"warn","time":"2022-06-22T13:31:07-04:00","message":"Permission denied: User 2 requested API key for user 3"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:07.649534+00:00:00', \"name\" = 'Inst One Admin', \"email\" = 'admin@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$7aoot2KFFqikpTYVEbErYOxZijCHDPvqT4OMoFwdmsYBE9SK2PibC', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 0, \"current_sign_in_at\" = NULL, \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$/jNEHZCFcluvcjboU36srevDfdfOORA6EwBVGlMDN1g40oCgKAtuK', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = NULL, \"authy_id\" = NULL, \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_admin' WHERE \"user\".\"id\" = 2"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"POST","path":"/users/get_api_key/3","ip":"","latency":107.131537,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Error #01: permission denied\n"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 2)"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"warn","time":"2022-06-22T13:31:07-04:00","message":"Permission denied: User 3 requested API key for user 2"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: UPDATE \"users\" AS \"user\" SET \"created_at\" = '2021-01-12 17:14:00+00:00:00', \"updated_at\" = '2022-06-22 17:31:07.758438+00:00:00', \"name\" = 'Inst One User', \"email\" = 'user@inst1.edu', \"phone_number\" = '+14345551212', \"encrypted_password\" = '$2a$10$Br1XfC/2KU3cf4P96NR7TOJFg25Zfxla7BtleaRaeNluTNuPWe60e', \"reset_password_token\" = NULL, \"reset_password_sent_at\" = NULL, \"remember_created_at\" = NULL, \"sign_in_count\" = 2, \"current_sign_in_at\" = '2022-06-22 17:30:44.702379+00:00:00', \"last_sign_in_at\" = NULL, \"current_sign_in_ip\" = NULL, \"last_sign_in_ip\" = NULL, \"institution_id\" = 2, \"encrypted_api_secret_key\" = '$2a$10$ADTw9nzEsGNJDp8q/MzcIe.K7m9UaBQVzDEbfTS.c9P/iJ2e7UvQW', \"password_changed_at\" = NULL, \"encrypted_otp_secret\" = NULL, \"encrypted_otp_secret_iv\" = NULL, \"encrypted_otp_secret_salt\" = NULL, \"encrypted_otp_sent_at\" = NULL, \"consumed_timestep\" = NULL, \"otp_required_for_login\" = NULL, \"deactivated_at\" = NULL, \"enabled_two_factor\" = NULL, \"confirmed_two_factor\" = NULL, \"otp_backup_codes\" = '{}', \"authy_id\" = '12345', \"last_sign_in_with_authy\" = NULL, \"authy_status\" = NULL, \"email_verified\" = TRUE, \"initial_password_updated\" = TRUE, \"force_password_update\" = NULL, \"grace_period\" = '1999-12-31 23:59:00+00:00:00', \"awaiting_second_factor\" = FALSE, \"role\" = 'institutional_user' WHERE \"user\".\"id\" = 3"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":200,"method":"POST","path":"/users/get_api_key/2","ip":"","latency":107.687264,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Error #01: permission denied\n"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"users\" AS \"user\" WHERE (id = 5)"}
{"level":"error","time":"2022-06-22T13:31:07-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.UserGetAPIKey, ResourceType: User, ResourceID: 5, InstID: 3, Gin Path: /users/get_api_key/:id, Request Path: /users/get_api_key/5, Permission: UserUpdateSelf, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"IsAPIRoute - NO - /users/get_api_key/5"}
{"level":"warn","status":403,"method":"POST","path":"/users/get_api_key/5","ip":"","latency":16.673946,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"info","status":200,"method":"GET","path":"/users/my_account","ip":"","latency":20.284291,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"info","status":200,"method":"GET","path":"/users/my_account","ip":"","latency":13.936981,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"info","status":200,"method":"GET","path":"/users/my_account","ip":"","latency":14.627074,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 30)"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((id = 30))"}
{"level":"info","status":200,"method":"GET","path":"/work_items/show/30","ip":"","latency":22.731856,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 30)"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((id = 30))"}
{"level":"info","status":200,"method":"GET","path":"/work_items/show/30","ip":"","latency":17.298414,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 30)"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((id = 30))"}
{"level":"info","status":200,"method":"GET","path":"/work_items/show/30","ip":"","latency":19.555139,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:31:07-04:00","message":"TypeName (1): WorkItemView"}
{"level":"info","time":"2022-06-22T13:31:07-04:00","message":"WebUI: Using view to count query ''"}
{"level":"info","time":"2022-06-22T13:31:07-04:00","message":"TypeName (1): WorkItemView"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"work_item_counts\" AS \"work_item_count\" WHERE ((institution_id is null) AND (action is null))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/work_items","ip":"","latency":31.049446,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:31:07-04:00","message":"TypeName (1): WorkItemView"}
{"level":"info","time":"2022-06-22T13:31:07-04:00","message":"WebUI: Using view to count query '(institution_id = ?)'"}
{"level":"info","time":"2022-06-22T13:31:07-04:00","message":"TypeName (1): WorkItemView"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"work_item_counts\" AS \"work_item_count\" WHERE ((institution_id = 2) AND (action is null))"}
{"level":"info","status":200,"method":"GET","path":"/work_items","ip":"","latency":30.875778,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((institution_id = 2)) ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:31:07-04:00","message":"TypeName (1): WorkItemView"}
{"level":"info","time":"2022-06-22T13:31:07-04:00","message":"WebUI: Using view to count query '(institution_id = ?)'"}
{"level":"info","time":"2022-06-22T13:31:07-04:00","message":"TypeName (1): WorkItemView"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"work_item_counts\" AS \"work_item_count\" WHERE ((institution_id = 2) AND (action is null))"}
{"level":"info","status":200,"method":"GET","path":"/work_items","ip":"","latency":20.213582,"user-agent":"","time":"2022-06-22T13:31:07-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((action = 'Restore Object')) ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:31:07-04:00","message":"TypeName (1): WorkItemView"}
{"level":"info","time":"2022-06-22T13:31:07-04:00","message":"WebUI: Using view to count query '(action = ?)'"}
{"level":"info","time":"2022-06-22T13:31:07-04:00","message":"TypeName (1): WorkItemView"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"work_item_counts\" AS \"work_item_count\" WHERE ((action = 'Restore Object') AND (institution_id is null))"}
{"level":"debug","time":"2022-06-22T13:31:07-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/work_items?action=Restore+Object","ip":"","latency":30.636569,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((action = 'Restore Object') AND (institution_id = 2)) ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:31:08-04:00","message":"TypeName (1): WorkItemView"}
{"level":"info","time":"2022-06-22T13:31:08-04:00","message":"WebUI: Using view to count query '(action = ?) AND (institution_id = ?)'"}
{"level":"info","time":"2022-06-22T13:31:08-04:00","message":"TypeName (1): WorkItemView"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"work_item_counts\" AS \"work_item_count\" WHERE ((action = 'Restore Object') AND (institution_id = 2))"}
{"level":"info","status":200,"method":"GET","path":"/work_items?action=Restore+Object","ip":"","latency":23.15715,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((action = 'Restore Object') AND (institution_id = 2)) ORDER BY \"updated_at\" desc LIMIT 20"}
{"level":"info","time":"2022-06-22T13:31:08-04:00","message":"TypeName (1): WorkItemView"}
{"level":"info","time":"2022-06-22T13:31:08-04:00","message":"WebUI: Using view to count query '(action = ?) AND (institution_id = ?)'"}
{"level":"info","time":"2022-06-22T13:31:08-04:00","message":"TypeName (1): WorkItemView"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"row_count\" FROM \"work_item_counts\" AS \"work_item_count\" WHERE ((action = 'Restore Object') AND (institution_id = 2))"}
{"level":"info","status":200,"method":"GET","path":"/work_items?action=Restore+Object","ip":"","latency":30.781164,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: INSERT INTO \"work_items\" (\"id\", \"created_at\", \"updated_at\", \"name\", \"etag\", \"institution_id\", \"intellectual_object_id\", \"generic_file_id\", \"bucket\", \"user\", \"note\", \"action\", \"stage\", \"status\", \"outcome\", \"bag_date\", \"date_processed\", \"retry\", \"node\", \"pid\", \"needs_admin_review\", \"queued_at\", \"size\", \"stage_started_at\", \"aptrust_approver\", \"inst_approver\") VALUES (DEFAULT, '2022-06-22 17:31:08.074042+00:00:00', '2022-06-22 17:31:08.074042+00:00:00', 'unit_test_bag1.tar', '54321543215432154321000000000000', 2, DEFAULT, DEFAULT, 'aptrust.receiving.yadda.yadda', 'system@aptrust.org', 'Wheel her in, Homer! I''m not a picky man.', 'Ingest', 'Record', 'Started', 'Ourcome? I ain''t done yet.', '2022-06-22 17:31:08.07404+00:00:00', '2022-06-22 17:31:08.07404+00:00:00', FALSE, 'oh god, not Node!', 3344, TRUE, '2022-06-22 17:31:08.07404+00:00:00', 8900, '2022-06-22 17:31:08.07404+00:00:00', DEFAULT, DEFAULT) RETURNING \"id\", \"intellectual_object_id\", \"generic_file_id\", \"aptrust_approver\", \"inst_approver\""}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 34)"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((id = 34))"}
{"level":"info","status":200,"method":"GET","path":"/work_items/edit/34","ip":"","latency":34.273416,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 34)"}
{"level":"error","time":"2022-06-22T13:31:08-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.WorkItemEdit, ResourceType: WorkItem, ResourceID: 34, InstID: 2, Gin Path: /work_items/edit/:id, Request Path: /work_items/edit/34, Permission: WorkItemUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRoute - NO - /work_items/edit/34"}
{"level":"warn","status":403,"method":"GET","path":"/work_items/edit/34","ip":"","latency":28.301315,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 34)"}
{"level":"error","time":"2022-06-22T13:31:08-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.WorkItemEdit, ResourceType: WorkItem, ResourceID: 34, InstID: 2, Gin Path: /work_items/edit/:id, Request Path: /work_items/edit/34, Permission: WorkItemUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRoute - NO - /work_items/edit/34"}
{"level":"warn","status":403,"method":"GET","path":"/work_items/edit/34","ip":"","latency":25.381359,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 34)"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((id = 34))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: UPDATE \"work_items\" AS \"work_item\" SET \"created_at\" = '2022-06-22 17:31:08.074042+00:00:00', \"updated_at\" = '2022-06-22 17:31:08.175883+00:00:00', \"name\" = 'unit_test_bag1.tar', \"etag\" = '54321543215432154321000000000000', \"institution_id\" = 2, \"intellectual_object_id\" = NULL, \"generic_file_id\" = NULL, \"bucket\" = 'aptrust.receiving.yadda.yadda', \"user\" = 'system@aptrust.org', \"note\" = 'This has been edited', \"action\" = 'Ingest', \"stage\" = 'Storage Validation', \"status\" = 'Pending', \"outcome\" = 'Ourcome? I ain''t done yet.', \"bag_date\" = '2022-06-22 17:31:08.07404+00:00:00', \"date_processed\" = '2022-06-22 17:31:08.07404+00:00:00', \"retry\" = TRUE, \"node\" = NULL, \"pid\" = NULL, \"needs_admin_review\" = FALSE, \"queued_at\" = '2022-06-22 17:31:08.07404+00:00:00', \"size\" = 8900, \"stage_started_at\" = '2022-06-22 17:31:08.07404+00:00:00', \"aptrust_approver\" = NULL, \"inst_approver\" = NULL WHERE \"work_item\".\"id\" = 34"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","status":303,"method":"PUT","path":"/work_items/edit/34","ip":"","latency":54.202266,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 34)"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((id = 34))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((id = 34))"}
{"level":"info","status":200,"method":"GET","path":"/work_items/show/34","ip":"","latency":34.677987,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((id = 34))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 34)"}
{"level":"error","time":"2022-06-22T13:31:08-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.WorkItemUpdate, ResourceType: WorkItem, ResourceID: 34, InstID: 2, Gin Path: /work_items/edit/:id, Request Path: /work_items/edit/34, Permission: WorkItemUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRoute - NO - /work_items/edit/34"}
{"level":"warn","status":403,"method":"PUT","path":"/work_items/edit/34","ip":"","latency":46.85756,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 34)"}
{"level":"error","time":"2022-06-22T13:31:08-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.WorkItemUpdate, ResourceType: WorkItem, ResourceID: 34, InstID: 2, Gin Path: /work_items/edit/:id, Request Path: /work_items/edit/34, Permission: WorkItemUpdate, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRoute - NO - /work_items/edit/34"}
{"level":"warn","status":403,"method":"PUT","path":"/work_items/edit/34","ip":"","latency":35.247792,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: INSERT INTO \"work_items\" (\"id\", \"created_at\", \"updated_at\", \"name\", \"etag\", \"institution_id\", \"intellectual_object_id\", \"generic_file_id\", \"bucket\", \"user\", \"note\", \"action\", \"stage\", \"status\", \"outcome\", \"bag_date\", \"date_processed\", \"retry\", \"node\", \"pid\", \"needs_admin_review\", \"queued_at\", \"size\", \"stage_started_at\", \"aptrust_approver\", \"inst_approver\") VALUES (DEFAULT, '2022-06-22 17:31:08.339332+00:00:00', '2022-06-22 17:31:08.339332+00:00:00', 'unit_test_bag2.tar', '54321543215432154321000000000000', 2, DEFAULT, DEFAULT, 'aptrust.receiving.yadda.yadda', 'system@aptrust.org', 'Wheel her in, Homer! I''m not a picky man.', 'Ingest', 'Record', 'Started', 'Ourcome? I ain''t done yet.', '2022-06-22 17:31:08.339331+00:00:00', '2022-06-22 17:31:08.339331+00:00:00', FALSE, 'oh god, not Node!', 3344, TRUE, '2022-06-22 17:31:08.339331+00:00:00', 8900, '2022-06-22 17:31:08.339331+00:00:00', DEFAULT, DEFAULT) RETURNING \"id\", \"intellectual_object_id\", \"generic_file_id\", \"aptrust_approver\", \"inst_approver\""}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: COMMIT"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 35)"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((id = 35))"}
{"level":"info","time":"2022-06-22T13:31:08-04:00","message":"Requeueing WorkItem 35 to Reingest Check"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: BEGIN"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: UPDATE \"work_items\" AS \"work_item\" SET \"created_at\" = '2022-06-22 17:31:08.339332+00:00:00', \"updated_at\" = '2022-06-22 17:31:08.343037+00:00:00', \"name\" = 'unit_test_bag2.tar', \"etag\" = '54321543215432154321000000000000', \"institution_id\" = 2, \"intellectual_object_id\" = NULL, \"generic_file_id\" = NULL, \"bucket\" = 'aptrust.receiving.yadda.yadda', \"user\" = 'system@aptrust.org', \"note\" = 'Requeued for Reingest Check', \"action\" = 'Ingest', \"stage\" = 'Reingest Check', \"status\" = 'Pending', \"outcome\" = 'Ourcome? I ain''t done yet.', \"bag_date\" = '2022-06-22 17:31:08.339331+00:00:00', \"date_processed\" = '2022-06-22 17:31:08.339331+00:00:00', \"retry\" = TRUE, \"node\" = NULL, \"pid\" = NULL, \"needs_admin_review\" = FALSE, \"queued_at\" = '2022-06-22 17:31:08.339331+00:00:00', \"size\" = 8900, \"stage_started_at\" = '2022-06-22 17:31:08.339331+00:00:00', \"aptrust_approver\" = NULL, \"inst_approver\" = NULL WHERE \"work_item\".\"id\" = 35"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: COMMIT"}
{"level":"info","time":"2022-06-22T13:31:08-04:00","message":"Enqueue: http://localhost:4151/pub?topic=ingest03_reingest_check"}
{"level":"info","time":"2022-06-22T13:31:08-04:00","message":"NSQ response from http://localhost:4151/pub?topic=ingest03_reingest_check: [200]  OK"}
{"level":"info","status":303,"method":"PUT","path":"/work_items/requeue/35","ip":"","latency":4.538313,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 35)"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((id = 35))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((id = 35))"}
{"level":"info","status":200,"method":"GET","path":"/work_items/show/35","ip":"","latency":40.866802,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item\".\"id\", \"work_item\".\"created_at\", \"work_item\".\"updated_at\", \"work_item\".\"name\", \"work_item\".\"etag\", \"work_item\".\"institution_id\", \"work_item\".\"intellectual_object_id\", \"work_item\".\"generic_file_id\", \"work_item\".\"bucket\", \"work_item\".\"user\", \"work_item\".\"note\", \"work_item\".\"action\", \"work_item\".\"stage\", \"work_item\".\"status\", \"work_item\".\"outcome\", \"work_item\".\"bag_date\", \"work_item\".\"date_processed\", \"work_item\".\"retry\", \"work_item\".\"node\", \"work_item\".\"pid\", \"work_item\".\"needs_admin_review\", \"work_item\".\"queued_at\", \"work_item\".\"size\", \"work_item\".\"stage_started_at\", \"work_item\".\"aptrust_approver\", \"work_item\".\"inst_approver\" FROM \"work_items\" AS \"work_item\" WHERE ((id = 35))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 35)"}
{"level":"error","time":"2022-06-22T13:31:08-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.WorkItemRequeue, ResourceType: WorkItem, ResourceID: 35, InstID: 2, Gin Path: /work_items/requeue/:id, Request Path: /work_items/requeue/35, Permission: WorkItemRequeue, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRoute - NO - /work_items/requeue/35"}
{"level":"warn","status":403,"method":"PUT","path":"/work_items/requeue/35","ip":"","latency":25.768171,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 35)"}
{"level":"error","time":"2022-06-22T13:31:08-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.WorkItemRequeue, ResourceType: WorkItem, ResourceID: 35, InstID: 2, Gin Path: /work_items/requeue/:id, Request Path: /work_items/requeue/35, Permission: WorkItemRequeue, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRoute - NO - /work_items/requeue/35"}
{"level":"warn","status":403,"method":"PUT","path":"/work_items/requeue/35","ip":"","latency":20.346784,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"intellectual_objects\" AS \"intellectual_object\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"intellectual_object\".\"institution_id\" WHERE ((\"intellectual_object\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 22)"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((id = 22))"}
{"level":"info","status":200,"method":"GET","path":"/work_items/show/22","ip":"","latency":28.395771,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 22)"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((id = 22))"}
{"level":"info","status":200,"method":"GET","path":"/work_items/show/22","ip":"","latency":23.04999,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 22)"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((id = 22))"}
{"level":"info","status":200,"method":"GET","path":"/work_items/show/22","ip":"","latency":22.089745,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"intellectual_objects\" AS \"intellectual_object\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"intellectual_object\".\"institution_id\" WHERE ((\"intellectual_object\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 22)"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRequest - IsAPIAuthenticated: %!t(<nil>)"}
{"level":"info","time":"2022-06-22T13:31:08-04:00","message":"User system@aptrust.org deleted WorkItem 22 from Redis."}
{"level":"info","status":303,"method":"DELETE","path":"/work_items/redis_delete/22","ip":"","latency":2.279682,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 22)"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((id = 22))"}
{"level":"info","status":200,"method":"GET","path":"/work_items/show/22","ip":"","latency":27.05447,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"intellectual_objects\" AS \"intellectual_object\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"intellectual_object\".\"institution_id\" WHERE ((\"intellectual_object\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 22)"}
{"level":"error","time":"2022-06-22T13:31:08-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.WorkItemRedisDelete, ResourceType: WorkItem, ResourceID: 22, InstID: 2, Gin Path: /work_items/redis_delete/:id, Request Path: /work_items/redis_delete/22, Permission: WorkItemRedisDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRoute - NO - /work_items/redis_delete/22"}
{"level":"warn","status":403,"method":"DELETE","path":"/work_items/redis_delete/22","ip":"","latency":31.016266,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"institution_id\" FROM \"work_items\" AS \"work_item\" WHERE (id = 22)"}
{"level":"error","time":"2022-06-22T13:31:08-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.WorkItemRedisDelete, ResourceType: WorkItem, ResourceID: 22, InstID: 2, Gin Path: /work_items/redis_delete/:id, Request Path: /work_items/redis_delete/22, Permission: WorkItemRedisDelete, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRoute - NO - /work_items/redis_delete/22"}
{"level":"warn","status":403,"method":"DELETE","path":"/work_items/redis_delete/22","ip":"","latency":22.239555,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"intellectual_object\".\"id\", \"intellectual_object\".\"created_at\", \"intellectual_object\".\"updated_at\", \"intellectual_object\".\"title\", \"intellectual_object\".\"description\", \"intellectual_object\".\"identifier\", \"intellectual_object\".\"alt_identifier\", \"intellectual_object\".\"access\", \"intellectual_object\".\"bag_name\", \"intellectual_object\".\"institution_id\", \"intellectual_object\".\"state\", \"intellectual_object\".\"etag\", \"intellectual_object\".\"bag_group_identifier\", \"intellectual_object\".\"storage_option\", \"intellectual_object\".\"bagit_profile_identifier\", \"intellectual_object\".\"source_organization\", \"intellectual_object\".\"internal_sender_identifier\", \"intellectual_object\".\"internal_sender_description\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"intellectual_objects\" AS \"intellectual_object\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"intellectual_object\".\"institution_id\" WHERE ((\"intellectual_object\".\"id\" = 3))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 1))"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"work_item_view\".\"id\", \"work_item_view\".\"name\", \"work_item_view\".\"etag\", \"work_item_view\".\"institution_id\", \"work_item_view\".\"institution_name\", \"work_item_view\".\"institution_identifier\", \"work_item_view\".\"intellectual_object_id\", \"work_item_view\".\"object_identifier\", \"work_item_view\".\"alt_identifier\", \"work_item_view\".\"bag_group_identifier\", \"work_item_view\".\"storage_option\", \"work_item_view\".\"bagit_profile_identifier\", \"work_item_view\".\"source_organization\", \"work_item_view\".\"internal_sender_identifier\", \"work_item_view\".\"generic_file_id\", \"work_item_view\".\"generic_file_identifier\", \"work_item_view\".\"bucket\", \"work_item_view\".\"user\", \"work_item_view\".\"note\", \"work_item_view\".\"action\", \"work_item_view\".\"stage\", \"work_item_view\".\"status\", \"work_item_view\".\"outcome\", \"work_item_view\".\"bag_date\", \"work_item_view\".\"date_processed\", \"work_item_view\".\"retry\", \"work_item_view\".\"node\", \"work_item_view\".\"pid\", \"work_item_view\".\"needs_admin_review\", \"work_item_view\".\"queued_at\", \"work_item_view\".\"size\", \"work_item_view\".\"stage_started_at\", \"work_item_view\".\"aptrust_approver\", \"work_item_view\".\"inst_approver\", \"work_item_view\".\"created_at\", \"work_item_view\".\"updated_at\" FROM \"work_items_view\" AS \"work_item_view\" WHERE ((id IN ('867', '22', '5309'))) ORDER BY \"date_processed\" desc"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"id\", \"name\" FROM \"institutions\" AS \"institution\" ORDER BY \"name\" asc LIMIT 100"}
{"level":"info","status":200,"method":"GET","path":"/work_items/redis_list","ip":"","latency":20.84424,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 3))"}
{"level":"error","time":"2022-06-22T13:31:08-04:00","message":"Not Authorized: User user@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.WorkItemRedisIndex, ResourceType: WorkItem, ResourceID: 0, InstID: 2, Gin Path: /work_items/redis_list, Request Path: /work_items/redis_list, Permission: RedisList, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRoute - NO - /work_items/redis_list"}
{"level":"warn","status":403,"method":"GET","path":"/work_items/redis_list","ip":"","latency":13.999271,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"Starting SQL: SELECT \"user\".\"id\", \"user\".\"created_at\", \"user\".\"updated_at\", \"user\".\"name\", \"user\".\"email\", \"user\".\"phone_number\", \"user\".\"encrypted_password\", \"user\".\"reset_password_token\", \"user\".\"reset_password_sent_at\", \"user\".\"remember_created_at\", \"user\".\"sign_in_count\", \"user\".\"current_sign_in_at\", \"user\".\"last_sign_in_at\", \"user\".\"current_sign_in_ip\", \"user\".\"last_sign_in_ip\", \"user\".\"institution_id\", \"user\".\"encrypted_api_secret_key\", \"user\".\"password_changed_at\", \"user\".\"encrypted_otp_secret\", \"user\".\"encrypted_otp_secret_iv\", \"user\".\"encrypted_otp_secret_salt\", \"user\".\"encrypted_otp_sent_at\", \"user\".\"consumed_timestep\", \"user\".\"otp_required_for_login\", \"user\".\"deactivated_at\", \"user\".\"enabled_two_factor\", \"user\".\"confirmed_two_factor\", \"user\".\"otp_backup_codes\", \"user\".\"authy_id\", \"user\".\"last_sign_in_with_authy\", \"user\".\"authy_status\", \"user\".\"email_verified\", \"user\".\"initial_password_updated\", \"user\".\"force_password_update\", \"user\".\"grace_period\", \"user\".\"awaiting_second_factor\", \"user\".\"role\", \"institution\".\"id\" AS \"institution__id\", \"institution\".\"created_at\" AS \"institution__created_at\", \"institution\".\"updated_at\" AS \"institution__updated_at\", \"institution\".\"name\" AS \"institution__name\", \"institution\".\"identifier\" AS \"institution__identifier\", \"institution\".\"state\" AS \"institution__state\", \"institution\".\"type\" AS \"institution__type\", \"institution\".\"member_institution_id\" AS \"institution__member_institution_id\", \"institution\".\"deactivated_at\" AS \"institution__deactivated_at\", \"institution\".\"otp_enabled\" AS \"institution__otp_enabled\", \"institution\".\"enable_spot_restore\" AS \"institution__enable_spot_restore\", \"institution\".\"receiving_bucket\" AS \"institution__receiving_bucket\", \"institution\".\"restore_bucket\" AS \"institution__restore_bucket\" FROM \"users\" AS \"user\" LEFT JOIN \"institutions\" AS \"institution\" ON \"institution\".\"id\" = \"user\".\"institution_id\" WHERE ((\"user\".\"id\" = 2))"}
{"level":"error","time":"2022-06-22T13:31:08-04:00","message":"Not Authorized: User admin@inst1.edu, Remote IP: , Handler: github.com/APTrust/registry/web/webui.WorkItemRedisIndex, ResourceType: WorkItem, ResourceID: 0, InstID: 2, Gin Path: /work_items/redis_list, Request Path: /work_items/redis_list, Permission: RedisList, ResourceIdentifier:  "}
{"level":"debug","time":"2022-06-22T13:31:08-04:00","message":"IsAPIRoute - NO - /work_items/redis_list"}
{"level":"warn","status":403,"method":"GET","path":"/work_items/redis_list","ip":"","latency":20.210752,"user-agent":"","time":"2022-06-22T13:31:08-04:00","message":"Request"}
